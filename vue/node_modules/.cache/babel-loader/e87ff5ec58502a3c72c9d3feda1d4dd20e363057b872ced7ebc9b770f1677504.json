{"ast":null,"code":"import \"core-js/modules/es.number.constructor.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.parse-int.js\";\nimport \"core-js/modules/web.timers.js\";\n// Utilities\nimport { IN_BROWSER, propsFactory } from \"../util/index.mjs\"; // Types\n// Composables\nexport var makeDelayProps = propsFactory({\n  closeDelay: [Number, String],\n  openDelay: [Number, String]\n}, 'delay');\nexport function useDelay(props, cb) {\n  var delays = {};\n  var runDelayFactory = function runDelayFactory(prop) {\n    return function () {\n      // istanbul ignore next\n      if (!IN_BROWSER) return Promise.resolve(true);\n      var active = prop === 'openDelay';\n      delays.closeDelay && window.clearTimeout(delays.closeDelay);\n      delete delays.closeDelay;\n      delays.openDelay && window.clearTimeout(delays.openDelay);\n      delete delays.openDelay;\n      return new Promise(function (resolve) {\n        var _props$prop;\n        var delay = parseInt((_props$prop = props[prop]) !== null && _props$prop !== void 0 ? _props$prop : 0, 10);\n        delays[prop] = window.setTimeout(function () {\n          cb === null || cb === void 0 ? void 0 : cb(active);\n          resolve(active);\n        }, delay);\n      });\n    };\n  };\n  return {\n    runCloseDelay: runDelayFactory('closeDelay'),\n    runOpenDelay: runDelayFactory('openDelay')\n  };\n}","map":{"version":3,"names":["IN_BROWSER","propsFactory","makeDelayProps","closeDelay","Number","String","openDelay","useDelay","props","cb","delays","runDelayFactory","prop","Promise","resolve","active","window","clearTimeout","_props$prop","delay","parseInt","setTimeout","runCloseDelay","runOpenDelay"],"sources":["../../src/composables/delay.ts"],"sourcesContent":["// Utilities\nimport { IN_BROWSER, propsFactory } from '@/util'\n\n// Types\nexport interface DelayProps {\n  closeDelay?: number | string\n  openDelay?: number | string\n}\n\n// Composables\nexport const makeDelayProps = propsFactory({\n  closeDelay: [Number, String],\n  openDelay: [Number, String],\n}, 'delay')\n\nexport function useDelay (props: DelayProps, cb?: (value: boolean) => void) {\n  const delays: Partial<Record<keyof DelayProps, number>> = {}\n  const runDelayFactory = (prop: keyof DelayProps) => (): Promise<boolean> => {\n    // istanbul ignore next\n    if (!IN_BROWSER) return Promise.resolve(true)\n\n    const active = prop === 'openDelay'\n\n    delays.closeDelay && window.clearTimeout(delays.closeDelay)\n    delete delays.closeDelay\n\n    delays.openDelay && window.clearTimeout(delays.openDelay)\n    delete delays.openDelay\n\n    return new Promise(resolve => {\n      const delay = parseInt(props[prop] ?? 0, 10)\n\n      delays[prop] = window.setTimeout(() => {\n        cb?.(active)\n        resolve(active)\n      }, delay)\n    })\n  }\n\n  return {\n    runCloseDelay: runDelayFactory('closeDelay'),\n    runOpenDelay: runDelayFactory('openDelay'),\n  }\n}\n"],"mappings":";;;;AAAA;AAAA,SACSA,UAAU,EAAEC,YAAY,6BAEjC;AAMA;AACA,OAAO,IAAMC,cAAc,GAAGD,YAAY,CAAC;EACzCE,UAAU,EAAE,CAACC,MAAM,EAAEC,MAAM,CAAC;EAC5BC,SAAS,EAAE,CAACF,MAAM,EAAEC,MAAM;AAC5B,CAAC,EAAE,OAAO,CAAC;AAEX,OAAO,SAASE,QAAQA,CAAEC,KAAiB,EAAEC,EAA6B,EAAE;EAC1E,IAAMC,MAAiD,GAAG,CAAC,CAAC;EAC5D,IAAMC,eAAe,GAAI,SAAnBA,eAAeA,CAAIC,IAAsB;IAAA,OAAK,YAAwB;MAC1E;MACA,IAAI,CAACZ,UAAU,EAAE,OAAOa,OAAO,CAACC,OAAO,CAAC,IAAI,CAAC;MAE7C,IAAMC,MAAM,GAAGH,IAAI,KAAK,WAAW;MAEnCF,MAAM,CAACP,UAAU,IAAIa,MAAM,CAACC,YAAY,CAACP,MAAM,CAACP,UAAU,CAAC;MAC3D,OAAOO,MAAM,CAACP,UAAU;MAExBO,MAAM,CAACJ,SAAS,IAAIU,MAAM,CAACC,YAAY,CAACP,MAAM,CAACJ,SAAS,CAAC;MACzD,OAAOI,MAAM,CAACJ,SAAS;MAEvB,OAAO,IAAIO,OAAO,CAAC,UAAAC,OAAO,EAAI;QAAA,IAAAI,WAAA;QAC5B,IAAMC,KAAK,GAAGC,QAAQ,EAAAF,WAAA,GAACV,KAAK,CAACI,IAAI,CAAC,cAAAM,WAAA,cAAAA,WAAA,GAAI,CAAC,EAAE,EAAE,CAAC;QAE5CR,MAAM,CAACE,IAAI,CAAC,GAAGI,MAAM,CAACK,UAAU,CAAC,YAAM;UACrCZ,EAAE,aAAFA,EAAE,uBAAFA,EAAE,CAAGM,MAAM,CAAC;UACZD,OAAO,CAACC,MAAM,CAAC;QACjB,CAAC,EAAEI,KAAK,CAAC;MACX,CAAC,CAAC;IACJ,CAAC;EAAA;EAED,OAAO;IACLG,aAAa,EAAEX,eAAe,CAAC,YAAY,CAAC;IAC5CY,YAAY,EAAEZ,eAAe,CAAC,WAAW;EAC3C,CAAC;AACH"},"metadata":{},"sourceType":"module","externalDependencies":[]}