{"ast":null,"code":"import \"core-js/modules/es.array.concat.js\";\nexport function globalError() {\n  var _ref, _error$value$response, _error$value, _error$value$response2, _error$response, _error$value2;\n  var component = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n  var error = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n    message: '',\n    value: null\n  };\n  var prefix = '';\n  if (component && typeof component === 'string') {\n    prefix = \"\".concat(process.env.VUE_APP_NAME, \" - [\").concat(component, \"]: \");\n  }\n  var errorMessage = prefix + error.message;\n  var statusCode = (_ref = (_error$value$response = error === null || error === void 0 ? void 0 : (_error$value = error.value) === null || _error$value === void 0 ? void 0 : (_error$value$response2 = _error$value.response) === null || _error$value$response2 === void 0 ? void 0 : _error$value$response2.status) !== null && _error$value$response !== void 0 ? _error$value$response : error === null || error === void 0 ? void 0 : (_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.status) !== null && _ref !== void 0 ? _ref : null;\n  console.error(errorMessage);\n  if (error !== null && error !== void 0 && error.value && (_error$value2 = error.value) !== null && _error$value2 !== void 0 && _error$value2.response) {\n    var _error$value$response3;\n    console.error((_error$value$response3 = error.value.response) === null || _error$value$response3 === void 0 ? void 0 : _error$value$response3.data);\n  }\n\n  // Error 401 = session expired / not authenticated\n  // Error 419 = CSRF token mismatched\n  if (statusCode === 401 || statusCode === 419) {\n    window.vm.notif({\n      message: 'Your session has expired, please <a href=\"' + document.location + '\" target=\"_blank\">login in another tab</a>. You can then continue working here.',\n      variant: 'warning'\n    });\n  }\n}","map":{"version":3,"names":["globalError","_ref","_error$value$response","_error$value","_error$value$response2","_error$response","_error$value2","component","arguments","length","undefined","error","message","value","prefix","concat","process","env","VUE_APP_NAME","errorMessage","statusCode","response","status","console","_error$value$response3","data","window","vm","notif","document","location","variant"],"sources":["/var/www/crm_template/packages/oobook/crm-base/vue/src/js/utils/errors.js"],"sourcesContent":["export function globalError (component = null, error = { message: '', value: null }) {\n  let prefix = ''\n\n  if (component && typeof component === 'string') {\n    prefix = `${process.env.VUE_APP_NAME} - [${component}]: `\n  }\n\n  const errorMessage = prefix + error.message\n\n  const statusCode = error?.value?.response?.status ?? error?.response?.status ?? null\n\n  console.error(errorMessage)\n\n  if (error?.value && error.value?.response) {\n    console.error(error.value.response?.data)\n  }\n\n  // Error 401 = session expired / not authenticated\n  // Error 419 = CSRF token mismatched\n  if (statusCode === 401 || statusCode === 419) {\n    window.vm.notif({\n      message: 'Your session has expired, please <a href=\"' + document.location + '\" target=\"_blank\">login in another tab</a>. You can then continue working here.',\n      variant: 'warning'\n    })\n  }\n}\n"],"mappings":";AAAA,OAAO,SAASA,WAAWA,CAAA,EAA0D;EAAA,IAAAC,IAAA,EAAAC,qBAAA,EAAAC,YAAA,EAAAC,sBAAA,EAAAC,eAAA,EAAAC,aAAA;EAAA,IAAxDC,SAAS,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,IAAI;EAAA,IAAEG,KAAK,GAAAH,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG;IAAEI,OAAO,EAAE,EAAE;IAAEC,KAAK,EAAE;EAAK,CAAC;EACjF,IAAIC,MAAM,GAAG,EAAE;EAEf,IAAIP,SAAS,IAAI,OAAOA,SAAS,KAAK,QAAQ,EAAE;IAC9CO,MAAM,MAAAC,MAAA,CAAMC,OAAO,CAACC,GAAG,CAACC,YAAY,UAAAH,MAAA,CAAOR,SAAS,QAAK;EAC3D;EAEA,IAAMY,YAAY,GAAGL,MAAM,GAAGH,KAAK,CAACC,OAAO;EAE3C,IAAMQ,UAAU,IAAAnB,IAAA,IAAAC,qBAAA,GAAGS,KAAK,aAALA,KAAK,wBAAAR,YAAA,GAALQ,KAAK,CAAEE,KAAK,cAAAV,YAAA,wBAAAC,sBAAA,GAAZD,YAAA,CAAckB,QAAQ,cAAAjB,sBAAA,uBAAtBA,sBAAA,CAAwBkB,MAAM,cAAApB,qBAAA,cAAAA,qBAAA,GAAIS,KAAK,aAALA,KAAK,wBAAAN,eAAA,GAALM,KAAK,CAAEU,QAAQ,cAAAhB,eAAA,uBAAfA,eAAA,CAAiBiB,MAAM,cAAArB,IAAA,cAAAA,IAAA,GAAI,IAAI;EAEpFsB,OAAO,CAACZ,KAAK,CAACQ,YAAY,CAAC;EAE3B,IAAIR,KAAK,aAALA,KAAK,eAALA,KAAK,CAAEE,KAAK,KAAAP,aAAA,GAAIK,KAAK,CAACE,KAAK,cAAAP,aAAA,eAAXA,aAAA,CAAae,QAAQ,EAAE;IAAA,IAAAG,sBAAA;IACzCD,OAAO,CAACZ,KAAK,EAAAa,sBAAA,GAACb,KAAK,CAACE,KAAK,CAACQ,QAAQ,cAAAG,sBAAA,uBAApBA,sBAAA,CAAsBC,IAAI,CAAC;EAC3C;;EAEA;EACA;EACA,IAAIL,UAAU,KAAK,GAAG,IAAIA,UAAU,KAAK,GAAG,EAAE;IAC5CM,MAAM,CAACC,EAAE,CAACC,KAAK,CAAC;MACdhB,OAAO,EAAE,4CAA4C,GAAGiB,QAAQ,CAACC,QAAQ,GAAG,iFAAiF;MAC7JC,OAAO,EAAE;IACX,CAAC,CAAC;EACJ;AACF"},"metadata":{},"sourceType":"module","externalDependencies":[]}