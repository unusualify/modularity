{"ast":null,"code":"import api from '@/store/api/form';\nimport { FORM, ALERT } from '@/store/mutations';\nimport ACTIONS from '@/store/actions';\nimport { getFormData, getFormFields, getModalFormFields, getSchemaModel } from '@/utils/getFormData.js';\nconst getFieldIndex = (stateKey, field) => {\n  return stateKey.findIndex(f => f.name === field.name);\n};\nconst state = {\n  baseUrl: window[process.env.VUE_APP_NAME].STORE.form.baseUrl || '',\n  inputs: window[process.env.VUE_APP_NAME].STORE.form.inputs,\n  saveUrl: window[process.env.VUE_APP_NAME].STORE.form.saveUrl || '',\n  /**\n   * Form errors after submitting\n   * @type {Object}\n   */\n  errors: {},\n  // fields: window[process.env.VUE_APP_NAME].STORE.form.inputs.forEach(function(el ){\n  //     return {\n  //       name: el.name,\n  //       value: null\n  //     };\n  // }),\n\n  // editedItem: window[process.env.VUE_APP_NAME].STORE.form.inputs.reduce( (a,c) => (a[c.name] = c.default ?? '', a), {}),\n  // editedItem: Object.keys(window[process.env.VUE_APP_NAME].STORE.form.inputs).reduce( (a,c) => (a[window[process.env.VUE_APP_NAME].STORE.form.inputs[c].name] = window[process.env.VUE_APP_NAME].STORE.form.inputs[c].hasOwnProperty('default') ? window[process.env.VUE_APP_NAME].STORE.form.inputs[c].default : '', a), {}),\n  editedItem: getSchemaModel(window[process.env.VUE_APP_NAME].STORE.form.inputs),\n  /**\n   * Force reload on successful submit\n   * @type {Boolean}\n   */\n  reloadOnSuccess: window[process.env.VUE_APP_NAME].STORE.form.reloadOnSuccess || false,\n  /**\n   * Determines if the form should prevent submitting before an input value is pushed into the store\n   * @type {Boolean}\n   */\n  isSubmitPrevented: false,\n  loading: false\n};\n\n// getters\nconst getters = {\n  defaultItem: state => {\n    // __log(state.editedItem)\n    return state.editedItem;\n    // return state.inputs.reduce( (a,c) => (a[c.name] = c.hasOwnProperty('default') ? c.default : '', a), {})\n  }\n};\n\nconst mutations = {\n  [FORM.SET_EDITED_ITEM](state, item) {\n    state.editedItem = Object.assign({}, item);\n  },\n  [FORM.PREVENT_SUBMIT](state) {\n    state.isSubmitPrevented = true;\n  },\n  [FORM.ALLOW_SUBMIT](state) {\n    state.isSubmitPrevented = false;\n  },\n  // ----------- Form fields ----------- //\n  [FORM.EMPTY_FORM_FIELDS](state, status) {\n    state.fields = [];\n  },\n  [FORM.ADD_FORM_FIELDS](state, fields) {\n    state.fields = [...state.fields, ...fields];\n  },\n  [FORM.REPLACE_FORM_FIELDS](state, fields) {\n    state.fields = fields;\n  },\n  [FORM.UPDATE_FORM_FIELD](state, field) {\n    let fieldValue = field.locale ? {} : null;\n    const fieldIndex = getFieldIndex(state.fields, field);\n    // Update existing form field\n    if (fieldIndex !== -1) {\n      if (field.locale) fieldValue = state.fields[fieldIndex].value || {};\n      // remove existing field\n      state.fields.splice(fieldIndex, 1);\n    }\n    if (field.locale) fieldValue[field.locale] = field.value;else fieldValue = field.value;\n    state.fields.push({\n      name: field.name,\n      value: fieldValue\n    });\n  },\n  [FORM.REMOVE_FORM_FIELD](state, fieldName) {\n    state.fields.forEach(function (field, index) {\n      if (field.name === fieldName) state.fields.splice(index, 1);\n    });\n  },\n  // ----------- Modal fields ----------- //\n  [FORM.EMPTY_MODAL_FIELDS](state, status) {\n    state.modalFields = [];\n  },\n  [FORM.REPLACE_MODAL_FIELDS](state, fields) {\n    state.modalFields = fields;\n  },\n  [FORM.UPDATE_MODAL_FIELD](state, field) {\n    let fieldValue = field.locale ? {} : null;\n    const fieldIndex = getFieldIndex(state.modalFields, field);\n\n    // Update existing form field\n    if (fieldIndex !== -1) {\n      if (field.locale) fieldValue = state.modalFields[fieldIndex].value;\n      // remove existing field\n      state.modalFields.splice(fieldIndex, 1);\n    }\n    if (field.locale) fieldValue[field.locale] = field.value;else fieldValue = field.value;\n    state.modalFields.push({\n      name: field.name,\n      value: fieldValue\n    });\n  },\n  [FORM.REMOVE_MODAL_FIELD](state, fieldName) {\n    state.modalFields.forEach(function (field, index) {\n      if (field.name === fieldName) state.modalFields.splice(index, 1);\n    });\n  },\n  // ----------- Form errors and Loading ----------- //\n  [FORM.UPDATE_FORM_LOADING](state, loading) {\n    state.loading = loading || !state.loading;\n  },\n  [FORM.SET_FORM_ERRORS](state, errors) {\n    state.errors = errors;\n  },\n  [FORM.CLEAR_FORM_ERRORS](state) {\n    state.errors = [];\n  },\n  [FORM.UPDATE_FORM_SAVE_TYPE](state, type) {\n    state.type = type;\n  }\n};\nconst actions = {\n  [ACTIONS.SAVE_FORM]({\n    commit,\n    state,\n    getters,\n    rootState,\n    dispatch\n  }, {\n    item = null,\n    callback = null,\n    errorCallback = null\n  }) {\n    commit(FORM.CLEAR_FORM_ERRORS);\n    commit(FORM.UPDATE_FORM_LOADING, true);\n\n    // commit(NOTIFICATION.CLEAR_NOTIF, 'error')\n\n    // update or create etc...\n    // commit(FORM.UPDATE_FORM_SAVE_TYPE, saveType)\n\n    // we can now create our submitted data object out of:\n    // - our just created fields object,\n    // - publication properties\n    // - selected medias and browsers\n    // - created blocks and repeaters\n\n    // const data = getFormData(rootState)\n    const data = item ?? state.editedItem;\n\n    // const method = rootState.publication.createWithoutModal ? 'post' : 'put'\n    let method = 'post';\n    let url = window[process.env.VUE_APP_NAME].ENDPOINTS.store;\n    if (data.hasOwnProperty('id')) {\n      method = 'put';\n      url = window[process.env.VUE_APP_NAME].ENDPOINTS.update.replace(':id', data.id);\n    }\n    api[method](url, data, function (response) {\n      commit(FORM.UPDATE_FORM_LOADING, false);\n      // __log(\n      //   response\n      // )\n      // if (successResponse.data.hasOwnProperty('redirect')) {\n      //   window.location.replace(successResponse.data.redirect)\n      // }\n\n      // if (state.reloadOnSuccess) {\n      //   window.location.reload()\n      // }\n\n      // commit(PUBLICATION.UPDATE_PUBLISH_SUBMIT)\n      // if (successResponse.data.hasOwnProperty('revisions')) {\n      //   commit(REVISION.UPDATE_REV_ALL, successResponse.data.revisions)\n      // }\n      // __log(reload)\n      if (response.data.hasOwnProperty('errors')) {\n        commit(FORM.SET_FORM_ERRORS, response.data.errors);\n      } else if (response.data.hasOwnProperty('variant') && response.data.variant == 'success') {\n        commit(ALERT.SET_ALERT, {\n          message: response.data.message,\n          variant: response.data.variant\n        });\n        if (!data.hasOwnProperty('reload') || data.reload) dispatch(ACTIONS.GET_DATATABLE);\n      }\n      if (callback && typeof callback === 'function') callback(response.data);\n    }, function (errorResponse) {\n      commit(FORM.UPDATE_FORM_LOADING, false);\n      if (errorResponse.response.data.hasOwnProperty('exception')) {\n        commit(ALERT.SET_ALERT, {\n          message: 'Your submission could not be processed.',\n          variant: 'error'\n        });\n      } else {\n        dispatch(ACTIONS.HANDLE_ERRORS, errorResponse.response.data);\n        commit(ALERT.SET_ALERT, {\n          message: 'Your submission could not be validated, please fix and retry',\n          variant: 'error'\n        });\n      }\n      if (errorCallback && typeof errorCallback === 'function') errorCallback(errorResponse.data);\n    });\n  },\n  [ACTIONS.HANDLE_ERRORS]({\n    commit,\n    state,\n    getters,\n    rootState\n  }, errors) {\n    const repeaters = rootState.repeaters;\n    // Translate the errors to their respective fields.\n    Object.keys(errors).forEach(errorKey => {\n      const splitted = errorKey.split('.');\n      if (splitted.length >= 4) {\n        const type = splitted[0];\n        const subType = splitted[1];\n        const index = splitted[2];\n        const field = splitted[3];\n        if (type === 'repeaters') {\n          const id = repeaters[subType][index].id;\n          const newErrorKey = `blocks[${id}][${field}]`;\n          errors[newErrorKey] = errors[errorKey];\n        }\n      }\n    });\n    commit(FORM.SET_FORM_ERRORS, errors);\n  }\n};\nexport default {\n  state,\n  getters,\n  actions,\n  mutations\n};","map":{"version":3,"names":["api","FORM","ALERT","ACTIONS","getFormData","getFormFields","getModalFormFields","getSchemaModel","getFieldIndex","stateKey","field","findIndex","f","name","state","baseUrl","window","process","env","VUE_APP_NAME","STORE","form","inputs","saveUrl","errors","editedItem","reloadOnSuccess","isSubmitPrevented","loading","getters","defaultItem","mutations","SET_EDITED_ITEM","item","Object","assign","PREVENT_SUBMIT","ALLOW_SUBMIT","EMPTY_FORM_FIELDS","status","fields","ADD_FORM_FIELDS","REPLACE_FORM_FIELDS","UPDATE_FORM_FIELD","fieldValue","locale","fieldIndex","value","splice","push","REMOVE_FORM_FIELD","fieldName","forEach","index","EMPTY_MODAL_FIELDS","modalFields","REPLACE_MODAL_FIELDS","UPDATE_MODAL_FIELD","REMOVE_MODAL_FIELD","UPDATE_FORM_LOADING","SET_FORM_ERRORS","CLEAR_FORM_ERRORS","UPDATE_FORM_SAVE_TYPE","type","actions","SAVE_FORM","commit","rootState","dispatch","callback","errorCallback","data","method","url","ENDPOINTS","store","hasOwnProperty","update","replace","id","response","variant","SET_ALERT","message","reload","GET_DATATABLE","errorResponse","HANDLE_ERRORS","repeaters","keys","errorKey","splitted","split","length","subType","newErrorKey"],"sources":["/Users/oguzhanbukcuoglu/Desktop/Projects/crm_template/packages/oobook/crm-base/vue/src/js/store/modules/form.js"],"sourcesContent":["import api from '@/store/api/form'\nimport { FORM, ALERT } from '@/store/mutations'\nimport ACTIONS from '@/store/actions'\n\nimport { getFormData, getFormFields, getModalFormFields, getSchemaModel } from '@/utils/getFormData.js'\n\n\nconst getFieldIndex = (stateKey, field) => {\n    return stateKey.findIndex(f => f.name === field.name)\n}\n\nconst state = {\n    \n  baseUrl: window[process.env.VUE_APP_NAME].STORE.form.baseUrl || '',\n  \n  inputs: window[process.env.VUE_APP_NAME].STORE.form.inputs,\n\n  saveUrl: window[process.env.VUE_APP_NAME].STORE.form.saveUrl || '',\n\n  /**\n   * Form errors after submitting\n   * @type {Object}\n   */\n  errors: {},\n\n  // fields: window[process.env.VUE_APP_NAME].STORE.form.inputs.forEach(function(el ){\n  //     return {\n  //       name: el.name,\n  //       value: null\n  //     };\n  // }),\n\n  // editedItem: window[process.env.VUE_APP_NAME].STORE.form.inputs.reduce( (a,c) => (a[c.name] = c.default ?? '', a), {}),\n  // editedItem: Object.keys(window[process.env.VUE_APP_NAME].STORE.form.inputs).reduce( (a,c) => (a[window[process.env.VUE_APP_NAME].STORE.form.inputs[c].name] = window[process.env.VUE_APP_NAME].STORE.form.inputs[c].hasOwnProperty('default') ? window[process.env.VUE_APP_NAME].STORE.form.inputs[c].default : '', a), {}),\n  editedItem: getSchemaModel(window[process.env.VUE_APP_NAME].STORE.form.inputs),\n\n  /**\n   * Force reload on successful submit\n   * @type {Boolean}\n   */\n  reloadOnSuccess: window[process.env.VUE_APP_NAME].STORE.form.reloadOnSuccess || false,\n\n  /**\n   * Determines if the form should prevent submitting before an input value is pushed into the store\n   * @type {Boolean}\n   */\n  isSubmitPrevented: false,\n\n  loading: false,\n}\n  \n// getters\nconst getters = {\n  defaultItem: state => {\n    // __log(state.editedItem)\n    return state.editedItem\n    // return state.inputs.reduce( (a,c) => (a[c.name] = c.hasOwnProperty('default') ? c.default : '', a), {})\n  }\n}\n  \nconst mutations = {\n  [FORM.SET_EDITED_ITEM] (state, item) {\n    state.editedItem = Object.assign({}, item)\n  },\n  \n  [FORM.PREVENT_SUBMIT] (state) {\n    state.isSubmitPrevented = true\n  },\n  [FORM.ALLOW_SUBMIT] (state) {\n    state.isSubmitPrevented = false\n  },\n  // ----------- Form fields ----------- //\n  [FORM.EMPTY_FORM_FIELDS] (state, status) {\n    state.fields = []\n  },\n  [FORM.ADD_FORM_FIELDS] (state, fields) {\n    state.fields = [...state.fields, ...fields]\n  },\n  [FORM.REPLACE_FORM_FIELDS] (state, fields) {\n    state.fields = fields\n  },\n  [FORM.UPDATE_FORM_FIELD] (state, field) {\n    let fieldValue = field.locale ? {} : null\n    const fieldIndex = getFieldIndex(state.fields, field)\n    // Update existing form field\n    if (fieldIndex !== -1) {\n      if (field.locale) fieldValue = state.fields[fieldIndex].value || {}\n      // remove existing field\n      state.fields.splice(fieldIndex, 1)\n    }\n\n    if (field.locale) fieldValue[field.locale] = field.value\n    else fieldValue = field.value\n\n    state.fields.push({\n      name: field.name,\n      value: fieldValue\n    })\n  },\n  [FORM.REMOVE_FORM_FIELD] (state, fieldName) {\n    state.fields.forEach(function (field, index) {\n      if (field.name === fieldName) state.fields.splice(index, 1)\n    })\n  },\n  // ----------- Modal fields ----------- //\n  [FORM.EMPTY_MODAL_FIELDS] (state, status) {\n    state.modalFields = []\n  },\n  [FORM.REPLACE_MODAL_FIELDS] (state, fields) {\n    state.modalFields = fields\n  },\n  [FORM.UPDATE_MODAL_FIELD] (state, field) {\n    let fieldValue = field.locale ? {} : null\n    const fieldIndex = getFieldIndex(state.modalFields, field)\n\n    // Update existing form field\n    if (fieldIndex !== -1) {\n      if (field.locale) fieldValue = state.modalFields[fieldIndex].value\n      // remove existing field\n      state.modalFields.splice(fieldIndex, 1)\n    }\n\n    if (field.locale) fieldValue[field.locale] = field.value\n    else fieldValue = field.value\n\n    state.modalFields.push({\n      name: field.name,\n      value: fieldValue\n    })\n  },\n  [FORM.REMOVE_MODAL_FIELD] (state, fieldName) {\n    state.modalFields.forEach(function (field, index) {\n      if (field.name === fieldName) state.modalFields.splice(index, 1)\n    })\n  },\n  // ----------- Form errors and Loading ----------- //\n  [FORM.UPDATE_FORM_LOADING] (state, loading) {\n    state.loading = loading || !state.loading\n  },\n  [FORM.SET_FORM_ERRORS] (state, errors) {\n    state.errors = errors\n  },\n  [FORM.CLEAR_FORM_ERRORS] (state) {\n    state.errors = []\n  },\n  [FORM.UPDATE_FORM_SAVE_TYPE] (state, type) {\n    state.type = type\n  }\n}\n  \nconst actions = {\n  [ACTIONS.SAVE_FORM] ({ commit, state, getters, rootState, dispatch }, {item=null, callback=null, errorCallback=null}) {\n    commit(FORM.CLEAR_FORM_ERRORS)\n    commit(FORM.UPDATE_FORM_LOADING, true)\n\n    // commit(NOTIFICATION.CLEAR_NOTIF, 'error')\n\n    // update or create etc...\n    // commit(FORM.UPDATE_FORM_SAVE_TYPE, saveType)\n\n    // we can now create our submitted data object out of:\n    // - our just created fields object,\n    // - publication properties\n    // - selected medias and browsers\n    // - created blocks and repeaters\n    \n    // const data = getFormData(rootState)\n    const data = item ?? state.editedItem;\n\n    // const method = rootState.publication.createWithoutModal ? 'post' : 'put'\n    let method = 'post';\n    let url = window[process.env.VUE_APP_NAME].ENDPOINTS.store;\n\n    if(data.hasOwnProperty('id')){\n      method = 'put';\n      url = window[process.env.VUE_APP_NAME].ENDPOINTS.update.replace(':id', data.id);\n    }\n    \n\n    api[method](url, data, function (response) {\n      commit(FORM.UPDATE_FORM_LOADING, false)\n      // __log(\n      //   response\n      // )\n      // if (successResponse.data.hasOwnProperty('redirect')) {\n      //   window.location.replace(successResponse.data.redirect)\n      // }\n\n      // if (state.reloadOnSuccess) {\n      //   window.location.reload()\n      // }\n\n      \n      // commit(PUBLICATION.UPDATE_PUBLISH_SUBMIT)\n      // if (successResponse.data.hasOwnProperty('revisions')) {\n      //   commit(REVISION.UPDATE_REV_ALL, successResponse.data.revisions)\n      // }\n      // __log(reload)\n      if(response.data.hasOwnProperty('errors')){\n        commit(FORM.SET_FORM_ERRORS, response.data.errors)\n\n      }else if(response.data.hasOwnProperty('variant') && response.data.variant == 'success' ){\n\n        commit(ALERT.SET_ALERT, { message: response.data.message, variant: response.data.variant })\n        \n        if( !data.hasOwnProperty('reload') || data.reload)\n          dispatch(ACTIONS.GET_DATATABLE)\n      }\n\n      if (callback && typeof callback === 'function') callback(response.data)\n\n    }, function (errorResponse) {\n      commit(FORM.UPDATE_FORM_LOADING, false)\n\n      if (errorResponse.response.data.hasOwnProperty('exception')) {\n        commit(ALERT.SET_ALERT, { message: 'Your submission could not be processed.', variant: 'error' })\n      } else {\n        dispatch(ACTIONS.HANDLE_ERRORS, errorResponse.response.data)\n        commit(ALERT.SET_ALERT, { message: 'Your submission could not be validated, please fix and retry', variant: 'error' })\n      }\n\n      if (errorCallback && typeof errorCallback === 'function') errorCallback(errorResponse.data)\n    })\n  },\n\n  [ACTIONS.HANDLE_ERRORS] ({ commit, state, getters, rootState }, errors) {\n    const repeaters = rootState.repeaters;\n    // Translate the errors to their respective fields.\n    Object.keys(errors).forEach((errorKey) => {\n      const splitted = errorKey.split('.')\n\n      if (splitted.length >= 4) {\n        const type = splitted[0]\n        const subType = splitted[1]\n        const index = splitted[2]\n        const field = splitted[3]\n\n        if (type === 'repeaters') {\n          const id = repeaters[subType][index].id\n          const newErrorKey = `blocks[${id}][${field}]`\n          errors[newErrorKey] = errors[errorKey]\n        }\n      }\n    })\n\n    commit(FORM.SET_FORM_ERRORS, errors)\n  },\n}\n  \nexport default {\n    state,\n    getters,\n    actions,\n    mutations\n}"],"mappings":"AAAA,OAAOA,GAAG,MAAM,kBAAkB;AAClC,SAASC,IAAI,EAAEC,KAAK,QAAQ,mBAAmB;AAC/C,OAAOC,OAAO,MAAM,iBAAiB;AAErC,SAASC,WAAW,EAAEC,aAAa,EAAEC,kBAAkB,EAAEC,cAAc,QAAQ,wBAAwB;AAGvG,MAAMC,aAAa,GAAGA,CAACC,QAAQ,EAAEC,KAAK,KAAK;EACvC,OAAOD,QAAQ,CAACE,SAAS,CAACC,CAAC,IAAIA,CAAC,CAACC,IAAI,KAAKH,KAAK,CAACG,IAAI,CAAC;AACzD,CAAC;AAED,MAAMC,KAAK,GAAG;EAEZC,OAAO,EAAEC,MAAM,CAACC,OAAO,CAACC,GAAG,CAACC,WAAW,CAAC,CAACC,KAAK,CAACC,IAAI,CAACN,OAAO,IAAI,EAAE;EAEjEO,MAAM,EAAEN,MAAM,CAACC,OAAO,CAACC,GAAG,CAACC,WAAW,CAAC,CAACC,KAAK,CAACC,IAAI,CAACC,MAAM;EAEzDC,OAAO,EAAEP,MAAM,CAACC,OAAO,CAACC,GAAG,CAACC,WAAW,CAAC,CAACC,KAAK,CAACC,IAAI,CAACE,OAAO,IAAI,EAAE;EAEjE;AACF;AACA;AACA;EACEC,MAAM,EAAE,CAAC,CAAC;EAEV;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACAC,UAAU,EAAElB,cAAc,CAACS,MAAM,CAACC,OAAO,CAACC,GAAG,CAACC,WAAW,CAAC,CAACC,KAAK,CAACC,IAAI,CAACC,MAAM,CAAC;EAE7E;AACF;AACA;AACA;EACEI,eAAe,EAAEV,MAAM,CAACC,OAAO,CAACC,GAAG,CAACC,WAAW,CAAC,CAACC,KAAK,CAACC,IAAI,CAACK,eAAe,IAAI,KAAK;EAEpF;AACF;AACA;AACA;EACEC,iBAAiB,EAAE,KAAK;EAExBC,OAAO,EAAE;AACX,CAAC;;AAED;AACA,MAAMC,OAAO,GAAG;EACdC,WAAW,EAAEhB,KAAK,IAAI;IACpB;IACA,OAAOA,KAAK,CAACW,UAAU;IACvB;EACF;AACF,CAAC;;AAED,MAAMM,SAAS,GAAG;EAChB,CAAC9B,IAAI,CAAC+B,eAAe,EAAGlB,KAAK,EAAEmB,IAAI,EAAE;IACnCnB,KAAK,CAACW,UAAU,GAAGS,MAAM,CAACC,MAAM,CAAC,CAAC,CAAC,EAAEF,IAAI,CAAC;EAC5C,CAAC;EAED,CAAChC,IAAI,CAACmC,cAAc,EAAGtB,KAAK,EAAE;IAC5BA,KAAK,CAACa,iBAAiB,GAAG,IAAI;EAChC,CAAC;EACD,CAAC1B,IAAI,CAACoC,YAAY,EAAGvB,KAAK,EAAE;IAC1BA,KAAK,CAACa,iBAAiB,GAAG,KAAK;EACjC,CAAC;EACD;EACA,CAAC1B,IAAI,CAACqC,iBAAiB,EAAGxB,KAAK,EAAEyB,MAAM,EAAE;IACvCzB,KAAK,CAAC0B,MAAM,GAAG,EAAE;EACnB,CAAC;EACD,CAACvC,IAAI,CAACwC,eAAe,EAAG3B,KAAK,EAAE0B,MAAM,EAAE;IACrC1B,KAAK,CAAC0B,MAAM,GAAG,CAAC,GAAG1B,KAAK,CAAC0B,MAAM,EAAE,GAAGA,MAAM,CAAC;EAC7C,CAAC;EACD,CAACvC,IAAI,CAACyC,mBAAmB,EAAG5B,KAAK,EAAE0B,MAAM,EAAE;IACzC1B,KAAK,CAAC0B,MAAM,GAAGA,MAAM;EACvB,CAAC;EACD,CAACvC,IAAI,CAAC0C,iBAAiB,EAAG7B,KAAK,EAAEJ,KAAK,EAAE;IACtC,IAAIkC,UAAU,GAAGlC,KAAK,CAACmC,MAAM,GAAG,CAAC,CAAC,GAAG,IAAI;IACzC,MAAMC,UAAU,GAAGtC,aAAa,CAACM,KAAK,CAAC0B,MAAM,EAAE9B,KAAK,CAAC;IACrD;IACA,IAAIoC,UAAU,KAAK,CAAC,CAAC,EAAE;MACrB,IAAIpC,KAAK,CAACmC,MAAM,EAAED,UAAU,GAAG9B,KAAK,CAAC0B,MAAM,CAACM,UAAU,CAAC,CAACC,KAAK,IAAI,CAAC,CAAC;MACnE;MACAjC,KAAK,CAAC0B,MAAM,CAACQ,MAAM,CAACF,UAAU,EAAE,CAAC,CAAC;IACpC;IAEA,IAAIpC,KAAK,CAACmC,MAAM,EAAED,UAAU,CAAClC,KAAK,CAACmC,MAAM,CAAC,GAAGnC,KAAK,CAACqC,KAAK,MACnDH,UAAU,GAAGlC,KAAK,CAACqC,KAAK;IAE7BjC,KAAK,CAAC0B,MAAM,CAACS,IAAI,CAAC;MAChBpC,IAAI,EAAEH,KAAK,CAACG,IAAI;MAChBkC,KAAK,EAAEH;IACT,CAAC,CAAC;EACJ,CAAC;EACD,CAAC3C,IAAI,CAACiD,iBAAiB,EAAGpC,KAAK,EAAEqC,SAAS,EAAE;IAC1CrC,KAAK,CAAC0B,MAAM,CAACY,OAAO,CAAC,UAAU1C,KAAK,EAAE2C,KAAK,EAAE;MAC3C,IAAI3C,KAAK,CAACG,IAAI,KAAKsC,SAAS,EAAErC,KAAK,CAAC0B,MAAM,CAACQ,MAAM,CAACK,KAAK,EAAE,CAAC,CAAC;IAC7D,CAAC,CAAC;EACJ,CAAC;EACD;EACA,CAACpD,IAAI,CAACqD,kBAAkB,EAAGxC,KAAK,EAAEyB,MAAM,EAAE;IACxCzB,KAAK,CAACyC,WAAW,GAAG,EAAE;EACxB,CAAC;EACD,CAACtD,IAAI,CAACuD,oBAAoB,EAAG1C,KAAK,EAAE0B,MAAM,EAAE;IAC1C1B,KAAK,CAACyC,WAAW,GAAGf,MAAM;EAC5B,CAAC;EACD,CAACvC,IAAI,CAACwD,kBAAkB,EAAG3C,KAAK,EAAEJ,KAAK,EAAE;IACvC,IAAIkC,UAAU,GAAGlC,KAAK,CAACmC,MAAM,GAAG,CAAC,CAAC,GAAG,IAAI;IACzC,MAAMC,UAAU,GAAGtC,aAAa,CAACM,KAAK,CAACyC,WAAW,EAAE7C,KAAK,CAAC;;IAE1D;IACA,IAAIoC,UAAU,KAAK,CAAC,CAAC,EAAE;MACrB,IAAIpC,KAAK,CAACmC,MAAM,EAAED,UAAU,GAAG9B,KAAK,CAACyC,WAAW,CAACT,UAAU,CAAC,CAACC,KAAK;MAClE;MACAjC,KAAK,CAACyC,WAAW,CAACP,MAAM,CAACF,UAAU,EAAE,CAAC,CAAC;IACzC;IAEA,IAAIpC,KAAK,CAACmC,MAAM,EAAED,UAAU,CAAClC,KAAK,CAACmC,MAAM,CAAC,GAAGnC,KAAK,CAACqC,KAAK,MACnDH,UAAU,GAAGlC,KAAK,CAACqC,KAAK;IAE7BjC,KAAK,CAACyC,WAAW,CAACN,IAAI,CAAC;MACrBpC,IAAI,EAAEH,KAAK,CAACG,IAAI;MAChBkC,KAAK,EAAEH;IACT,CAAC,CAAC;EACJ,CAAC;EACD,CAAC3C,IAAI,CAACyD,kBAAkB,EAAG5C,KAAK,EAAEqC,SAAS,EAAE;IAC3CrC,KAAK,CAACyC,WAAW,CAACH,OAAO,CAAC,UAAU1C,KAAK,EAAE2C,KAAK,EAAE;MAChD,IAAI3C,KAAK,CAACG,IAAI,KAAKsC,SAAS,EAAErC,KAAK,CAACyC,WAAW,CAACP,MAAM,CAACK,KAAK,EAAE,CAAC,CAAC;IAClE,CAAC,CAAC;EACJ,CAAC;EACD;EACA,CAACpD,IAAI,CAAC0D,mBAAmB,EAAG7C,KAAK,EAAEc,OAAO,EAAE;IAC1Cd,KAAK,CAACc,OAAO,GAAGA,OAAO,IAAI,CAACd,KAAK,CAACc,OAAO;EAC3C,CAAC;EACD,CAAC3B,IAAI,CAAC2D,eAAe,EAAG9C,KAAK,EAAEU,MAAM,EAAE;IACrCV,KAAK,CAACU,MAAM,GAAGA,MAAM;EACvB,CAAC;EACD,CAACvB,IAAI,CAAC4D,iBAAiB,EAAG/C,KAAK,EAAE;IAC/BA,KAAK,CAACU,MAAM,GAAG,EAAE;EACnB,CAAC;EACD,CAACvB,IAAI,CAAC6D,qBAAqB,EAAGhD,KAAK,EAAEiD,IAAI,EAAE;IACzCjD,KAAK,CAACiD,IAAI,GAAGA,IAAI;EACnB;AACF,CAAC;AAED,MAAMC,OAAO,GAAG;EACd,CAAC7D,OAAO,CAAC8D,SAAS,EAAG;IAAEC,MAAM;IAAEpD,KAAK;IAAEe,OAAO;IAAEsC,SAAS;IAAEC;EAAS,CAAC,EAAE;IAACnC,IAAI,GAAC,IAAI;IAAEoC,QAAQ,GAAC,IAAI;IAAEC,aAAa,GAAC;EAAI,CAAC,EAAE;IACpHJ,MAAM,CAACjE,IAAI,CAAC4D,iBAAiB,CAAC;IAC9BK,MAAM,CAACjE,IAAI,CAAC0D,mBAAmB,EAAE,IAAI,CAAC;;IAEtC;;IAEA;IACA;;IAEA;IACA;IACA;IACA;IACA;;IAEA;IACA,MAAMY,IAAI,GAAGtC,IAAI,IAAInB,KAAK,CAACW,UAAU;;IAErC;IACA,IAAI+C,MAAM,GAAG,MAAM;IACnB,IAAIC,GAAG,GAAGzD,MAAM,CAACC,OAAO,CAACC,GAAG,CAACC,WAAW,CAAC,CAACuD,SAAS,CAACC,KAAK;IAEzD,IAAGJ,IAAI,CAACK,cAAc,CAAC,IAAI,CAAC,EAAC;MAC3BJ,MAAM,GAAG,KAAK;MACdC,GAAG,GAAGzD,MAAM,CAACC,OAAO,CAACC,GAAG,CAACC,WAAW,CAAC,CAACuD,SAAS,CAACG,MAAM,CAACC,OAAO,CAAC,KAAK,EAAEP,IAAI,CAACQ,EAAE,CAAC;IAChF;IAGA/E,GAAG,CAACwE,MAAM,CAAC,CAACC,GAAG,EAAEF,IAAI,EAAE,UAAUS,QAAQ,EAAE;MACzCd,MAAM,CAACjE,IAAI,CAAC0D,mBAAmB,EAAE,KAAK,CAAC;MACvC;MACA;MACA;MACA;MACA;MACA;;MAEA;MACA;MACA;;MAGA;MACA;MACA;MACA;MACA;MACA,IAAGqB,QAAQ,CAACT,IAAI,CAACK,cAAc,CAAC,QAAQ,CAAC,EAAC;QACxCV,MAAM,CAACjE,IAAI,CAAC2D,eAAe,EAAEoB,QAAQ,CAACT,IAAI,CAAC/C,MAAM,CAAC;MAEpD,CAAC,MAAK,IAAGwD,QAAQ,CAACT,IAAI,CAACK,cAAc,CAAC,SAAS,CAAC,IAAII,QAAQ,CAACT,IAAI,CAACU,OAAO,IAAI,SAAS,EAAE;QAEtFf,MAAM,CAAChE,KAAK,CAACgF,SAAS,EAAE;UAAEC,OAAO,EAAEH,QAAQ,CAACT,IAAI,CAACY,OAAO;UAAEF,OAAO,EAAED,QAAQ,CAACT,IAAI,CAACU;QAAQ,CAAC,CAAC;QAE3F,IAAI,CAACV,IAAI,CAACK,cAAc,CAAC,QAAQ,CAAC,IAAIL,IAAI,CAACa,MAAM,EAC/ChB,QAAQ,CAACjE,OAAO,CAACkF,aAAa,CAAC;MACnC;MAEA,IAAIhB,QAAQ,IAAI,OAAOA,QAAQ,KAAK,UAAU,EAAEA,QAAQ,CAACW,QAAQ,CAACT,IAAI,CAAC;IAEzE,CAAC,EAAE,UAAUe,aAAa,EAAE;MAC1BpB,MAAM,CAACjE,IAAI,CAAC0D,mBAAmB,EAAE,KAAK,CAAC;MAEvC,IAAI2B,aAAa,CAACN,QAAQ,CAACT,IAAI,CAACK,cAAc,CAAC,WAAW,CAAC,EAAE;QAC3DV,MAAM,CAAChE,KAAK,CAACgF,SAAS,EAAE;UAAEC,OAAO,EAAE,yCAAyC;UAAEF,OAAO,EAAE;QAAQ,CAAC,CAAC;MACnG,CAAC,MAAM;QACLb,QAAQ,CAACjE,OAAO,CAACoF,aAAa,EAAED,aAAa,CAACN,QAAQ,CAACT,IAAI,CAAC;QAC5DL,MAAM,CAAChE,KAAK,CAACgF,SAAS,EAAE;UAAEC,OAAO,EAAE,8DAA8D;UAAEF,OAAO,EAAE;QAAQ,CAAC,CAAC;MACxH;MAEA,IAAIX,aAAa,IAAI,OAAOA,aAAa,KAAK,UAAU,EAAEA,aAAa,CAACgB,aAAa,CAACf,IAAI,CAAC;IAC7F,CAAC,CAAC;EACJ,CAAC;EAED,CAACpE,OAAO,CAACoF,aAAa,EAAG;IAAErB,MAAM;IAAEpD,KAAK;IAAEe,OAAO;IAAEsC;EAAU,CAAC,EAAE3C,MAAM,EAAE;IACtE,MAAMgE,SAAS,GAAGrB,SAAS,CAACqB,SAAS;IACrC;IACAtD,MAAM,CAACuD,IAAI,CAACjE,MAAM,CAAC,CAAC4B,OAAO,CAAEsC,QAAQ,IAAK;MACxC,MAAMC,QAAQ,GAAGD,QAAQ,CAACE,KAAK,CAAC,GAAG,CAAC;MAEpC,IAAID,QAAQ,CAACE,MAAM,IAAI,CAAC,EAAE;QACxB,MAAM9B,IAAI,GAAG4B,QAAQ,CAAC,CAAC,CAAC;QACxB,MAAMG,OAAO,GAAGH,QAAQ,CAAC,CAAC,CAAC;QAC3B,MAAMtC,KAAK,GAAGsC,QAAQ,CAAC,CAAC,CAAC;QACzB,MAAMjF,KAAK,GAAGiF,QAAQ,CAAC,CAAC,CAAC;QAEzB,IAAI5B,IAAI,KAAK,WAAW,EAAE;UACxB,MAAMgB,EAAE,GAAGS,SAAS,CAACM,OAAO,CAAC,CAACzC,KAAK,CAAC,CAAC0B,EAAE;UACvC,MAAMgB,WAAW,GAAI,UAAShB,EAAG,KAAIrE,KAAM,GAAE;UAC7Cc,MAAM,CAACuE,WAAW,CAAC,GAAGvE,MAAM,CAACkE,QAAQ,CAAC;QACxC;MACF;IACF,CAAC,CAAC;IAEFxB,MAAM,CAACjE,IAAI,CAAC2D,eAAe,EAAEpC,MAAM,CAAC;EACtC;AACF,CAAC;AAED,eAAe;EACXV,KAAK;EACLe,OAAO;EACPmC,OAAO;EACPjC;AACJ,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}
