{"ast":null,"code":"import _typeof from \"/var/www/crm_template/packages/oobook/crm-base/vue/node_modules/@babel/runtime/helpers/esm/typeof.js\";\nimport _objectSpread from \"/var/www/crm_template/packages/oobook/crm-base/vue/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport \"core-js/modules/es.number.constructor.js\";\nimport \"core-js/modules/web.timers.js\";\nimport \"core-js/modules/es.string.ends-with.js\";\nimport \"core-js/modules/es.string.starts-with.js\";\nimport { withDirectives as _withDirectives, resolveDirective as _resolveDirective, Fragment as _Fragment, createVNode as _createVNode } from \"vue\";\nimport \"./VImg.css\";\n\n// Components\nimport { VResponsive } from \"../VResponsive/index.mjs\"; // Directives\nimport intersect from \"../../directives/intersect/index.mjs\"; // Composables\nimport { makeTransitionProps, MaybeTransition } from \"../../composables/transition.mjs\"; // Utilities\nimport { computed, nextTick, onBeforeMount, ref, vShow, watch, withDirectives } from 'vue';\nimport { convertToUnit, genericComponent, SUPPORTS_INTERSECTION, useRender } from \"../../util/index.mjs\"; // Types\nexport var VImg = genericComponent()({\n  name: 'VImg',\n  directives: {\n    intersect: intersect\n  },\n  props: _objectSpread({\n    aspectRatio: [String, Number],\n    alt: String,\n    cover: Boolean,\n    eager: Boolean,\n    gradient: String,\n    lazySrc: String,\n    options: {\n      type: Object,\n      // For more information on types, navigate to:\n      // https://developer.mozilla.org/en-US/docs/Web/API/Intersection_Observer_API\n      \"default\": function _default() {\n        return {\n          root: undefined,\n          rootMargin: undefined,\n          threshold: undefined\n        };\n      }\n    },\n    sizes: String,\n    src: {\n      type: [String, Object],\n      \"default\": ''\n    },\n    srcset: String,\n    width: [String, Number]\n  }, makeTransitionProps()),\n  emits: {\n    loadstart: function loadstart(event) {\n      return true;\n    },\n    load: function load(event) {\n      return true;\n    },\n    error: function error(event) {\n      return true;\n    }\n  },\n  setup: function setup(props, _ref) {\n    var emit = _ref.emit,\n      slots = _ref.slots;\n    var currentSrc = ref(''); // Set from srcset\n    var image = ref();\n    var state = ref(props.eager ? 'loading' : 'idle');\n    var naturalWidth = ref();\n    var naturalHeight = ref();\n    var normalisedSrc = computed(function () {\n      return props.src && _typeof(props.src) === 'object' ? {\n        src: props.src.src,\n        srcset: props.srcset || props.src.srcset,\n        lazySrc: props.lazySrc || props.src.lazySrc,\n        aspect: Number(props.aspectRatio || props.src.aspect || 0)\n      } : {\n        src: props.src,\n        srcset: props.srcset,\n        lazySrc: props.lazySrc,\n        aspect: Number(props.aspectRatio || 0)\n      };\n    });\n    var aspectRatio = computed(function () {\n      return normalisedSrc.value.aspect || naturalWidth.value / naturalHeight.value || 0;\n    });\n    watch(function () {\n      return props.src;\n    }, function () {\n      init(state.value !== 'idle');\n    });\n    watch(aspectRatio, function (val, oldVal) {\n      if (!val && oldVal && image.value) {\n        pollForSize(image.value);\n      }\n    });\n\n    // TODO: getSrc when window width changes\n\n    onBeforeMount(function () {\n      return init();\n    });\n    function init(isIntersecting) {\n      if (props.eager && isIntersecting) return;\n      if (SUPPORTS_INTERSECTION && !isIntersecting && !props.eager) return;\n      state.value = 'loading';\n      if (normalisedSrc.value.lazySrc) {\n        var lazyImg = new Image();\n        lazyImg.src = normalisedSrc.value.lazySrc;\n        pollForSize(lazyImg, null);\n      }\n      if (!normalisedSrc.value.src) return;\n      nextTick(function () {\n        var _image$value, _image$value2;\n        emit('loadstart', ((_image$value = image.value) === null || _image$value === void 0 ? void 0 : _image$value.currentSrc) || normalisedSrc.value.src);\n        if ((_image$value2 = image.value) !== null && _image$value2 !== void 0 && _image$value2.complete) {\n          if (!image.value.naturalWidth) {\n            onError();\n          }\n          if (state.value === 'error') return;\n          if (!aspectRatio.value) pollForSize(image.value, null);\n          onLoad();\n        } else {\n          if (!aspectRatio.value) pollForSize(image.value);\n          getSrc();\n        }\n      });\n    }\n    function onLoad() {\n      var _image$value3;\n      getSrc();\n      state.value = 'loaded';\n      emit('load', ((_image$value3 = image.value) === null || _image$value3 === void 0 ? void 0 : _image$value3.currentSrc) || normalisedSrc.value.src);\n    }\n    function onError() {\n      var _image$value4;\n      state.value = 'error';\n      emit('error', ((_image$value4 = image.value) === null || _image$value4 === void 0 ? void 0 : _image$value4.currentSrc) || normalisedSrc.value.src);\n    }\n    function getSrc() {\n      var img = image.value;\n      if (img) currentSrc.value = img.currentSrc || img.src;\n    }\n    var timer = -1;\n    function pollForSize(img) {\n      var timeout = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 100;\n      var poll = function poll() {\n        clearTimeout(timer);\n        var imgHeight = img.naturalHeight,\n          imgWidth = img.naturalWidth;\n        if (imgHeight || imgWidth) {\n          naturalWidth.value = imgWidth;\n          naturalHeight.value = imgHeight;\n        } else if (!img.complete && state.value === 'loading' && timeout != null) {\n          timer = window.setTimeout(poll, timeout);\n        } else if (img.currentSrc.endsWith('.svg') || img.currentSrc.startsWith('data:image/svg+xml')) {\n          naturalWidth.value = 1;\n          naturalHeight.value = 1;\n        }\n      };\n      poll();\n    }\n    var containClasses = computed(function () {\n      return {\n        'v-img__img--cover': props.cover,\n        'v-img__img--contain': !props.cover\n      };\n    });\n    var __image = function __image() {\n      var _slots$sources;\n      if (!normalisedSrc.value.src || state.value === 'idle') return null;\n      var img = _createVNode(\"img\", {\n        \"class\": ['v-img__img', containClasses.value],\n        \"src\": normalisedSrc.value.src,\n        \"srcset\": normalisedSrc.value.srcset,\n        \"alt\": \"\",\n        \"sizes\": props.sizes,\n        \"ref\": image,\n        \"onLoad\": onLoad,\n        \"onError\": onError\n      }, null);\n      var sources = (_slots$sources = slots.sources) === null || _slots$sources === void 0 ? void 0 : _slots$sources.call(slots);\n      return _createVNode(MaybeTransition, {\n        \"transition\": props.transition,\n        \"appear\": true\n      }, {\n        \"default\": function _default() {\n          return [withDirectives(sources ? _createVNode(\"picture\", {\n            \"class\": \"v-img__picture\"\n          }, [sources, img]) : img, [[vShow, state.value === 'loaded']])];\n        }\n      });\n    };\n    var __preloadImage = function __preloadImage() {\n      return _createVNode(MaybeTransition, {\n        \"transition\": props.transition\n      }, {\n        \"default\": function _default() {\n          return [normalisedSrc.value.lazySrc && state.value !== 'loaded' && _createVNode(\"img\", {\n            \"class\": ['v-img__img', 'v-img__img--preload', containClasses.value],\n            \"src\": normalisedSrc.value.lazySrc,\n            \"alt\": \"\"\n          }, null)];\n        }\n      });\n    };\n    var __placeholder = function __placeholder() {\n      if (!slots.placeholder) return null;\n      return _createVNode(MaybeTransition, {\n        \"transition\": props.transition,\n        \"appear\": true\n      }, {\n        \"default\": function _default() {\n          return [(state.value === 'loading' || state.value === 'error' && !slots.error) && _createVNode(\"div\", {\n            \"class\": \"v-img__placeholder\"\n          }, [slots.placeholder()])];\n        }\n      });\n    };\n    var __error = function __error() {\n      if (!slots.error) return null;\n      return _createVNode(MaybeTransition, {\n        \"transition\": props.transition,\n        \"appear\": true\n      }, {\n        \"default\": function _default() {\n          return [state.value === 'error' && _createVNode(\"div\", {\n            \"class\": \"v-img__error\"\n          }, [slots.error()])];\n        }\n      });\n    };\n    var __gradient = function __gradient() {\n      if (!props.gradient) return null;\n      return _createVNode(\"div\", {\n        \"class\": \"v-img__gradient\",\n        \"style\": {\n          backgroundImage: \"linear-gradient(\".concat(props.gradient, \")\")\n        }\n      }, null);\n    };\n    var isBooted = ref(false);\n    {\n      var stop = watch(aspectRatio, function (val) {\n        if (val) {\n          // Doesn't work with nextTick, idk why\n          requestAnimationFrame(function () {\n            requestAnimationFrame(function () {\n              isBooted.value = true;\n            });\n          });\n          stop();\n        }\n      });\n    }\n    useRender(function () {\n      return _withDirectives(_createVNode(VResponsive, {\n        \"class\": ['v-img', {\n          'v-img--booting': !isBooted.value\n        }],\n        \"style\": {\n          width: convertToUnit(props.width === 'auto' ? naturalWidth.value : props.width)\n        },\n        \"aspectRatio\": aspectRatio.value,\n        \"aria-label\": props.alt,\n        \"role\": props.alt ? 'img' : undefined\n      }, {\n        additional: function additional() {\n          return _createVNode(_Fragment, null, [_createVNode(__image, null, null), _createVNode(__preloadImage, null, null), _createVNode(__gradient, null, null), _createVNode(__placeholder, null, null), _createVNode(__error, null, null)]);\n        },\n        \"default\": slots[\"default\"]\n      }), [[_resolveDirective(\"intersect\"), {\n        handler: init,\n        options: props.options\n      }, null, {\n        once: true\n      }]]);\n    });\n    return {\n      currentSrc: currentSrc,\n      image: image,\n      state: state,\n      naturalWidth: naturalWidth,\n      naturalHeight: naturalHeight\n    };\n  }\n});","map":{"version":3,"names":["VResponsive","intersect","makeTransitionProps","MaybeTransition","computed","nextTick","onBeforeMount","ref","vShow","watch","withDirectives","convertToUnit","genericComponent","SUPPORTS_INTERSECTION","useRender","VImg","name","directives","props","_objectSpread","aspectRatio","String","Number","alt","cover","Boolean","eager","gradient","lazySrc","options","type","Object","_default","root","undefined","rootMargin","threshold","sizes","src","srcset","width","emits","loadstart","event","load","error","setup","_ref","emit","slots","currentSrc","image","state","naturalWidth","naturalHeight","normalisedSrc","_typeof","aspect","value","init","val","oldVal","pollForSize","isIntersecting","lazyImg","Image","_image$value","_image$value2","complete","onError","onLoad","getSrc","_image$value3","_image$value4","img","timer","timeout","arguments","length","poll","clearTimeout","imgHeight","imgWidth","window","setTimeout","endsWith","startsWith","containClasses","__image","_slots$sources","_createVNode","sources","call","transition","__preloadImage","__placeholder","placeholder","__error","__gradient","backgroundImage","concat","isBooted","stop","requestAnimationFrame","_withDirectives","additional","_Fragment","_resolveDirective","handler","once"],"sources":["../../../src/components/VImg/VImg.tsx"],"sourcesContent":["import './VImg.sass'\n\n// Components\nimport { VResponsive } from '@/components/VResponsive'\n\n// Directives\nimport intersect from '@/directives/intersect'\n\n// Composables\nimport { makeTransitionProps, MaybeTransition } from '@/composables/transition'\n\n// Utilities\nimport {\n  computed,\n  nextTick,\n  onBeforeMount,\n  ref,\n  vShow,\n  watch,\n  withDirectives,\n} from 'vue'\nimport {\n  convertToUnit,\n  genericComponent,\n  SUPPORTS_INTERSECTION,\n  useRender,\n} from '@/util'\n\n// Types\nimport type { PropType } from 'vue'\n\n// not intended for public use, this is passed in by vuetify-loader\nexport interface srcObject {\n  src?: string\n  srcset?: string\n  lazySrc?: string\n  aspect: number\n}\n\nexport type VImgSlots = {\n  default: []\n  placeholder: []\n  error: []\n  sources: []\n}\n\nexport const VImg = genericComponent<VImgSlots>()({\n  name: 'VImg',\n\n  directives: { intersect },\n\n  props: {\n    aspectRatio: [String, Number],\n    alt: String,\n    cover: Boolean,\n    eager: Boolean,\n    gradient: String,\n    lazySrc: String,\n    options: {\n      type: Object as PropType<IntersectionObserverInit>,\n      // For more information on types, navigate to:\n      // https://developer.mozilla.org/en-US/docs/Web/API/Intersection_Observer_API\n      default: () => ({\n        root: undefined,\n        rootMargin: undefined,\n        threshold: undefined,\n      }),\n    },\n    sizes: String,\n    src: {\n      type: [String, Object] as PropType<string | srcObject>,\n      default: '',\n    },\n    srcset: String,\n    width: [String, Number],\n\n    ...makeTransitionProps(),\n  },\n\n  emits: {\n    loadstart: (event: string | undefined) => true,\n    load: (event: string | undefined) => true,\n    error: (event: string | undefined) => true,\n  },\n\n  setup (props, { emit, slots }) {\n    const currentSrc = ref('') // Set from srcset\n    const image = ref<HTMLImageElement>()\n    const state = ref<'idle' | 'loading' | 'loaded' | 'error'>(props.eager ? 'loading' : 'idle')\n    const naturalWidth = ref<number>()\n    const naturalHeight = ref<number>()\n\n    const normalisedSrc = computed<srcObject>(() => {\n      return props.src && typeof props.src === 'object'\n        ? {\n          src: props.src.src,\n          srcset: props.srcset || props.src.srcset,\n          lazySrc: props.lazySrc || props.src.lazySrc,\n          aspect: Number(props.aspectRatio || props.src.aspect || 0),\n        } : {\n          src: props.src,\n          srcset: props.srcset,\n          lazySrc: props.lazySrc,\n          aspect: Number(props.aspectRatio || 0),\n        }\n    })\n    const aspectRatio = computed(() => {\n      return normalisedSrc.value.aspect || naturalWidth.value! / naturalHeight.value! || 0\n    })\n\n    watch(() => props.src, () => {\n      init(state.value !== 'idle')\n    })\n    watch(aspectRatio, (val, oldVal) => {\n      if (!val && oldVal && image.value) {\n        pollForSize(image.value)\n      }\n    })\n\n    // TODO: getSrc when window width changes\n\n    onBeforeMount(() => init())\n\n    function init (isIntersecting?: boolean) {\n      if (props.eager && isIntersecting) return\n      if (\n        SUPPORTS_INTERSECTION &&\n        !isIntersecting &&\n        !props.eager\n      ) return\n\n      state.value = 'loading'\n\n      if (normalisedSrc.value.lazySrc) {\n        const lazyImg = new Image()\n        lazyImg.src = normalisedSrc.value.lazySrc\n        pollForSize(lazyImg, null)\n      }\n\n      if (!normalisedSrc.value.src) return\n\n      nextTick(() => {\n        emit('loadstart', image.value?.currentSrc || normalisedSrc.value.src)\n\n        if (image.value?.complete) {\n          if (!image.value.naturalWidth) {\n            onError()\n          }\n\n          if (state.value === 'error') return\n\n          if (!aspectRatio.value) pollForSize(image.value, null)\n          onLoad()\n        } else {\n          if (!aspectRatio.value) pollForSize(image.value!)\n          getSrc()\n        }\n      })\n    }\n\n    function onLoad () {\n      getSrc()\n      state.value = 'loaded'\n      emit('load', image.value?.currentSrc || normalisedSrc.value.src)\n    }\n\n    function onError () {\n      state.value = 'error'\n      emit('error', image.value?.currentSrc || normalisedSrc.value.src)\n    }\n\n    function getSrc () {\n      const img = image.value\n      if (img) currentSrc.value = img.currentSrc || img.src\n    }\n\n    let timer = -1\n    function pollForSize (img: HTMLImageElement, timeout: number | null = 100) {\n      const poll = () => {\n        clearTimeout(timer)\n        const { naturalHeight: imgHeight, naturalWidth: imgWidth } = img\n\n        if (imgHeight || imgWidth) {\n          naturalWidth.value = imgWidth\n          naturalHeight.value = imgHeight\n        } else if (!img.complete && state.value === 'loading' && timeout != null) {\n          timer = window.setTimeout(poll, timeout)\n        } else if (img.currentSrc.endsWith('.svg') || img.currentSrc.startsWith('data:image/svg+xml')) {\n          naturalWidth.value = 1\n          naturalHeight.value = 1\n        }\n      }\n\n      poll()\n    }\n\n    const containClasses = computed(() => ({\n      'v-img__img--cover': props.cover,\n      'v-img__img--contain': !props.cover,\n    }))\n\n    const __image = () => {\n      if (!normalisedSrc.value.src || state.value === 'idle') return null\n\n      const img = (\n        <img\n          class={['v-img__img', containClasses.value]}\n          src={ normalisedSrc.value.src }\n          srcset={ normalisedSrc.value.srcset }\n          alt=\"\"\n          sizes={ props.sizes }\n          ref={ image }\n          onLoad={ onLoad }\n          onError={ onError }\n        />\n      )\n\n      const sources = slots.sources?.()\n\n      return (\n        <MaybeTransition transition={ props.transition } appear>\n          {\n            withDirectives(\n              sources\n                ? <picture class=\"v-img__picture\">{ sources }{ img }</picture>\n                : img,\n              [[vShow, state.value === 'loaded']]\n            )\n          }\n        </MaybeTransition>\n      )\n    }\n\n    const __preloadImage = () => (\n      <MaybeTransition transition={ props.transition }>\n        { normalisedSrc.value.lazySrc && state.value !== 'loaded' && (\n          <img\n            class={['v-img__img', 'v-img__img--preload', containClasses.value]}\n            src={ normalisedSrc.value.lazySrc }\n            alt=\"\"\n          />\n        )}\n      </MaybeTransition>\n    )\n\n    const __placeholder = () => {\n      if (!slots.placeholder) return null\n\n      return (\n        <MaybeTransition transition={ props.transition } appear>\n          { (state.value === 'loading' || (state.value === 'error' && !slots.error)) &&\n          <div class=\"v-img__placeholder\">{ slots.placeholder() }</div>\n          }\n        </MaybeTransition>\n      )\n    }\n\n    const __error = () => {\n      if (!slots.error) return null\n\n      return (\n        <MaybeTransition transition={ props.transition } appear>\n          { state.value === 'error' &&\n            <div class=\"v-img__error\">{ slots.error() }</div>\n          }\n        </MaybeTransition>\n      )\n    }\n\n    const __gradient = () => {\n      if (!props.gradient) return null\n\n      return <div class=\"v-img__gradient\" style={{ backgroundImage: `linear-gradient(${props.gradient})` }} />\n    }\n\n    const isBooted = ref(false)\n    {\n      const stop = watch(aspectRatio, val => {\n        if (val) {\n          // Doesn't work with nextTick, idk why\n          requestAnimationFrame(() => {\n            requestAnimationFrame(() => {\n              isBooted.value = true\n            })\n          })\n          stop()\n        }\n      })\n    }\n\n    useRender(() => (\n      <VResponsive\n        class={[\n          'v-img',\n          { 'v-img--booting': !isBooted.value },\n        ]}\n        style={{ width: convertToUnit(props.width === 'auto' ? naturalWidth.value : props.width) }}\n        aspectRatio={ aspectRatio.value }\n        aria-label={ props.alt }\n        role={ props.alt ? 'img' : undefined }\n        v-intersect={[{\n          handler: init,\n          options: props.options,\n        }, null, ['once']]}\n      >{{\n        additional: () => (\n          <>\n            <__image />\n            <__preloadImage />\n            <__gradient />\n            <__placeholder />\n            <__error />\n          </>\n        ),\n        default: slots.default,\n      }}</VResponsive>\n    ))\n\n    return {\n      currentSrc,\n      image,\n      state,\n      naturalWidth,\n      naturalHeight,\n    }\n  },\n})\n\nexport type VImg = InstanceType<typeof VImg>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}