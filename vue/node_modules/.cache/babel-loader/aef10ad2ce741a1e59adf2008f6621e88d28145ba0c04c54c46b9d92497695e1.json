{"ast":null,"code":"import _slicedToArray from \"/var/www/crm_template/packages/oobook/crm-base/vue/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport _objectSpread from \"/var/www/crm_template/packages/oobook/crm-base/vue/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport \"core-js/modules/es.array.for-each.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nimport \"core-js/modules/es.object.entries.js\";\nimport \"core-js/modules/es.object.keys.js\";\n// Composables\nimport { makeDelayProps, useDelay } from \"../../composables/delay.mjs\";\nimport { VMenuSymbol } from \"../VMenu/shared.mjs\"; // Utilities\nimport { getCurrentInstance, IN_BROWSER, isComponentInstance, propsFactory, SUPPORTS_FOCUS_VISIBLE } from \"../../util/index.mjs\";\nimport { computed, effectScope, inject, nextTick, onScopeDispose, ref, watch, watchEffect } from 'vue';\n\n// Types\n\nexport var makeActivatorProps = propsFactory(_objectSpread({\n  activator: [String, Object],\n  activatorProps: {\n    type: Object,\n    \"default\": function _default() {\n      return {};\n    }\n  },\n  openOnClick: {\n    type: Boolean,\n    \"default\": undefined\n  },\n  openOnHover: Boolean,\n  openOnFocus: {\n    type: Boolean,\n    \"default\": undefined\n  },\n  closeOnContentClick: Boolean\n}, makeDelayProps()), 'v-overlay-activator');\nexport function useActivator(props, _ref) {\n  var isActive = _ref.isActive,\n    isTop = _ref.isTop;\n  var activatorEl = ref();\n  var isHovered = false;\n  var isFocused = false;\n  var firstEnter = true;\n  var openOnFocus = computed(function () {\n    return props.openOnFocus || props.openOnFocus == null && props.openOnHover;\n  });\n  var openOnClick = computed(function () {\n    return props.openOnClick || props.openOnClick == null && !props.openOnHover && !openOnFocus.value;\n  });\n  var _useDelay = useDelay(props, function (value) {\n      if (value === (props.openOnHover && isHovered || openOnFocus.value && isFocused) && !(props.openOnHover && isActive.value && !isTop.value)) {\n        if (isActive.value !== value) {\n          firstEnter = true;\n        }\n        isActive.value = value;\n      }\n    }),\n    runOpenDelay = _useDelay.runOpenDelay,\n    runCloseDelay = _useDelay.runCloseDelay;\n  var availableEvents = {\n    click: function click(e) {\n      e.stopPropagation();\n      activatorEl.value = e.currentTarget || e.target;\n      isActive.value = !isActive.value;\n    },\n    mouseenter: function mouseenter(e) {\n      isHovered = true;\n      activatorEl.value = e.currentTarget || e.target;\n      runOpenDelay();\n    },\n    mouseleave: function mouseleave(e) {\n      isHovered = false;\n      runCloseDelay();\n    },\n    focus: function focus(e) {\n      if (SUPPORTS_FOCUS_VISIBLE && !e.target.matches(':focus-visible')) return;\n      isFocused = true;\n      e.stopPropagation();\n      activatorEl.value = e.currentTarget || e.target;\n      runOpenDelay();\n    },\n    blur: function blur(e) {\n      isFocused = false;\n      e.stopPropagation();\n      runCloseDelay();\n    }\n  };\n  var activatorEvents = computed(function () {\n    var events = {};\n    if (openOnClick.value) {\n      events.click = availableEvents.click;\n    }\n    if (props.openOnHover) {\n      events.mouseenter = availableEvents.mouseenter;\n      events.mouseleave = availableEvents.mouseleave;\n    }\n    if (openOnFocus.value) {\n      events.focus = availableEvents.focus;\n      events.blur = availableEvents.blur;\n    }\n    return events;\n  });\n  var contentEvents = computed(function () {\n    var events = {};\n    if (props.openOnHover) {\n      events.mouseenter = function () {\n        isHovered = true;\n        runOpenDelay();\n      };\n      events.mouseleave = function () {\n        isHovered = false;\n        runCloseDelay();\n      };\n    }\n    if (props.closeOnContentClick) {\n      var menu = inject(VMenuSymbol, null);\n      events.click = function () {\n        isActive.value = false;\n        menu === null || menu === void 0 ? void 0 : menu.closeParents();\n      };\n    }\n    return events;\n  });\n  var scrimEvents = computed(function () {\n    var events = {};\n    if (props.openOnHover) {\n      events.mouseenter = function () {\n        if (firstEnter) {\n          isHovered = true;\n          firstEnter = false;\n          runOpenDelay();\n        }\n      };\n      events.mouseleave = function () {\n        isHovered = false;\n        runCloseDelay();\n      };\n    }\n    return events;\n  });\n  watch(isTop, function (val) {\n    if (val && (props.openOnHover && !isHovered && (!openOnFocus.value || !isFocused) || openOnFocus.value && !isFocused && (!props.openOnHover || !isHovered))) {\n      isActive.value = false;\n    }\n  });\n  var activatorRef = ref();\n  watchEffect(function () {\n    if (!activatorRef.value) return;\n    nextTick(function () {\n      var activator = activatorRef.value;\n      activatorEl.value = isComponentInstance(activator) ? activator.$el : activator;\n    });\n  });\n  var vm = getCurrentInstance('useActivator');\n  var scope;\n  watch(function () {\n    return !!props.activator;\n  }, function (val) {\n    if (val && IN_BROWSER) {\n      scope = effectScope();\n      scope.run(function () {\n        _useActivator(props, vm, {\n          activatorEl: activatorEl,\n          activatorEvents: activatorEvents\n        });\n      });\n    } else if (scope) {\n      scope.stop();\n    }\n  }, {\n    flush: 'post',\n    immediate: true\n  });\n  onScopeDispose(function () {\n    var _scope;\n    (_scope = scope) === null || _scope === void 0 ? void 0 : _scope.stop();\n  });\n  return {\n    activatorEl: activatorEl,\n    activatorRef: activatorRef,\n    activatorEvents: activatorEvents,\n    contentEvents: contentEvents,\n    scrimEvents: scrimEvents\n  };\n}\nfunction _useActivator(props, vm, _ref2) {\n  var activatorEl = _ref2.activatorEl,\n    activatorEvents = _ref2.activatorEvents;\n  watch(function () {\n    return props.activator;\n  }, function (val, oldVal) {\n    if (oldVal && val !== oldVal) {\n      var activator = getActivator(oldVal);\n      activator && unbindActivatorProps(activator);\n    }\n    if (val) {\n      nextTick(function () {\n        return bindActivatorProps();\n      });\n    }\n  }, {\n    immediate: true\n  });\n  watch(function () {\n    return props.activatorProps;\n  }, function () {\n    bindActivatorProps();\n  });\n  onScopeDispose(function () {\n    unbindActivatorProps();\n  });\n  function bindActivatorProps() {\n    var el = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : getActivator();\n    var _props = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : props.activatorProps;\n    if (!el) return;\n    Object.entries(activatorEvents.value).forEach(function (_ref3) {\n      var _ref5 = _slicedToArray(_ref3, 2),\n        name = _ref5[0],\n        cb = _ref5[1];\n      el.addEventListener(name, cb);\n    });\n    Object.keys(_props).forEach(function (k) {\n      if (_props[k] == null) {\n        el.removeAttribute(k);\n      } else {\n        el.setAttribute(k, _props[k]);\n      }\n    });\n  }\n  function unbindActivatorProps() {\n    var el = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : getActivator();\n    var _props = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : props.activatorProps;\n    if (!el) return;\n    Object.entries(activatorEvents.value).forEach(function (_ref4) {\n      var _ref6 = _slicedToArray(_ref4, 2),\n        name = _ref6[0],\n        cb = _ref6[1];\n      el.removeEventListener(name, cb);\n    });\n    Object.keys(_props).forEach(function (k) {\n      el.removeAttribute(k);\n    });\n  }\n  function getActivator() {\n    var _activator;\n    var selector = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : props.activator;\n    var activator;\n    if (selector) {\n      if (selector === 'parent') {\n        var _vm$proxy, _vm$proxy$$el;\n        var el = vm === null || vm === void 0 ? void 0 : (_vm$proxy = vm.proxy) === null || _vm$proxy === void 0 ? void 0 : (_vm$proxy$$el = _vm$proxy.$el) === null || _vm$proxy$$el === void 0 ? void 0 : _vm$proxy$$el.parentNode;\n        while (el.hasAttribute('data-no-activator')) {\n          el = el.parentNode;\n        }\n        activator = el;\n      } else if (typeof selector === 'string') {\n        // Selector\n        activator = document.querySelector(selector);\n      } else if ('$el' in selector) {\n        // Component (ref)\n        activator = selector.$el;\n      } else {\n        // HTMLElement | Element\n        activator = selector;\n      }\n    }\n\n    // The activator should only be a valid element (Ignore comments and text nodes)\n    activatorEl.value = ((_activator = activator) === null || _activator === void 0 ? void 0 : _activator.nodeType) === Node.ELEMENT_NODE ? activator : null;\n    return activatorEl.value;\n  }\n}","map":{"version":3,"names":["makeDelayProps","useDelay","VMenuSymbol","getCurrentInstance","IN_BROWSER","isComponentInstance","propsFactory","SUPPORTS_FOCUS_VISIBLE","computed","effectScope","inject","nextTick","onScopeDispose","ref","watch","watchEffect","makeActivatorProps","_objectSpread","activator","String","Object","activatorProps","type","_default","openOnClick","Boolean","undefined","openOnHover","openOnFocus","closeOnContentClick","useActivator","props","_ref","isActive","isTop","activatorEl","isHovered","isFocused","firstEnter","value","_useDelay","runOpenDelay","runCloseDelay","availableEvents","click","e","stopPropagation","currentTarget","target","mouseenter","mouseleave","focus","matches","blur","activatorEvents","events","contentEvents","menu","closeParents","scrimEvents","val","activatorRef","$el","vm","scope","run","_useActivator","stop","flush","immediate","_scope","_ref2","oldVal","getActivator","unbindActivatorProps","bindActivatorProps","el","arguments","length","_props","entries","forEach","_ref3","_ref5","_slicedToArray","name","cb","addEventListener","keys","k","removeAttribute","setAttribute","_ref4","_ref6","removeEventListener","_activator","selector","_vm$proxy","_vm$proxy$$el","proxy","parentNode","hasAttribute","document","querySelector","nodeType","Node","ELEMENT_NODE"],"sources":["../../../src/components/VOverlay/useActivator.tsx"],"sourcesContent":["// Composables\nimport { makeDelayProps, useDelay } from '@/composables/delay'\nimport { VMenuSymbol } from '@/components/VMenu/shared'\n\n// Utilities\nimport { getCurrentInstance, IN_BROWSER, isComponentInstance, propsFactory, SUPPORTS_FOCUS_VISIBLE } from '@/util'\nimport {\n  computed,\n  effectScope,\n  inject,\n  nextTick,\n  onScopeDispose,\n  ref,\n  watch,\n  watchEffect,\n} from 'vue'\n\n// Types\nimport type { DelayProps } from '@/composables/delay'\nimport type {\n  ComponentInternalInstance,\n  ComponentPublicInstance,\n  EffectScope,\n  PropType,\n  Ref,\n} from 'vue'\n\ninterface ActivatorProps extends DelayProps {\n  activator?: 'parent' | string | Element | ComponentPublicInstance\n  activatorProps: Record<string, any>\n\n  openOnClick: boolean | undefined\n  openOnHover: boolean\n  openOnFocus: boolean | undefined\n\n  closeOnContentClick: boolean\n}\n\nexport const makeActivatorProps = propsFactory({\n  activator: [String, Object] as PropType<ActivatorProps['activator']>,\n  activatorProps: {\n    type: Object as PropType<ActivatorProps['activatorProps']>,\n    default: () => ({}),\n  },\n\n  openOnClick: {\n    type: Boolean,\n    default: undefined,\n  },\n  openOnHover: Boolean,\n  openOnFocus: {\n    type: Boolean,\n    default: undefined,\n  },\n\n  closeOnContentClick: Boolean,\n\n  ...makeDelayProps(),\n}, 'v-overlay-activator')\n\nexport function useActivator (\n  props: ActivatorProps,\n  { isActive, isTop }: { isActive: Ref<boolean>, isTop: Ref<boolean> }\n) {\n  const activatorEl = ref<HTMLElement>()\n\n  let isHovered = false\n  let isFocused = false\n  let firstEnter = true\n\n  const openOnFocus = computed(() => props.openOnFocus || (props.openOnFocus == null && props.openOnHover))\n  const openOnClick = computed(() => props.openOnClick || (props.openOnClick == null && !props.openOnHover && !openOnFocus.value))\n\n  const { runOpenDelay, runCloseDelay } = useDelay(props, value => {\n    if (\n      value === (\n        (props.openOnHover && isHovered) ||\n        (openOnFocus.value && isFocused)\n      ) && !(props.openOnHover && isActive.value && !isTop.value)\n    ) {\n      if (isActive.value !== value) {\n        firstEnter = true\n      }\n      isActive.value = value\n    }\n  })\n\n  const availableEvents = {\n    click: (e: MouseEvent) => {\n      e.stopPropagation()\n      activatorEl.value = (e.currentTarget || e.target) as HTMLElement\n      isActive.value = !isActive.value\n    },\n    mouseenter: (e: MouseEvent) => {\n      isHovered = true\n      activatorEl.value = (e.currentTarget || e.target) as HTMLElement\n      runOpenDelay()\n    },\n    mouseleave: (e: MouseEvent) => {\n      isHovered = false\n      runCloseDelay()\n    },\n    focus: (e: FocusEvent) => {\n      if (\n        SUPPORTS_FOCUS_VISIBLE &&\n        !(e.target as HTMLElement).matches(':focus-visible')\n      ) return\n\n      isFocused = true\n      e.stopPropagation()\n      activatorEl.value = (e.currentTarget || e.target) as HTMLElement\n\n      runOpenDelay()\n    },\n    blur: (e: FocusEvent) => {\n      isFocused = false\n      e.stopPropagation()\n\n      runCloseDelay()\n    },\n  }\n\n  const activatorEvents = computed(() => {\n    const events: Partial<typeof availableEvents> = {}\n\n    if (openOnClick.value) {\n      events.click = availableEvents.click\n    }\n    if (props.openOnHover) {\n      events.mouseenter = availableEvents.mouseenter\n      events.mouseleave = availableEvents.mouseleave\n    }\n    if (openOnFocus.value) {\n      events.focus = availableEvents.focus\n      events.blur = availableEvents.blur\n    }\n\n    return events\n  })\n\n  const contentEvents = computed(() => {\n    const events: Partial<typeof availableEvents> = {}\n\n    if (props.openOnHover) {\n      events.mouseenter = () => {\n        isHovered = true\n        runOpenDelay()\n      }\n      events.mouseleave = () => {\n        isHovered = false\n        runCloseDelay()\n      }\n    }\n\n    if (props.closeOnContentClick) {\n      const menu = inject(VMenuSymbol, null)\n      events.click = () => {\n        isActive.value = false\n        menu?.closeParents()\n      }\n    }\n\n    return events\n  })\n\n  const scrimEvents = computed(() => {\n    const events: Partial<typeof availableEvents> = {}\n    if (props.openOnHover) {\n      events.mouseenter = () => {\n        if (firstEnter) {\n          isHovered = true\n          firstEnter = false\n          runOpenDelay()\n        }\n      }\n      events.mouseleave = () => {\n        isHovered = false\n        runCloseDelay()\n      }\n    }\n\n    return events\n  })\n\n  watch(isTop, val => {\n    if (val && (\n      (props.openOnHover && !isHovered && (!openOnFocus.value || !isFocused)) ||\n      (openOnFocus.value && !isFocused && (!props.openOnHover || !isHovered))\n    )) {\n      isActive.value = false\n    }\n  })\n\n  const activatorRef = ref()\n  watchEffect(() => {\n    if (!activatorRef.value) return\n\n    nextTick(() => {\n      const activator = activatorRef.value\n      activatorEl.value = isComponentInstance(activator) ? activator.$el : activator\n    })\n  })\n\n  const vm = getCurrentInstance('useActivator')\n  let scope: EffectScope\n  watch(() => !!props.activator, val => {\n    if (val && IN_BROWSER) {\n      scope = effectScope()\n      scope.run(() => {\n        _useActivator(props, vm, { activatorEl, activatorEvents })\n      })\n    } else if (scope) {\n      scope.stop()\n    }\n  }, { flush: 'post', immediate: true })\n\n  onScopeDispose(() => {\n    scope?.stop()\n  })\n\n  return { activatorEl, activatorRef, activatorEvents, contentEvents, scrimEvents }\n}\n\nfunction _useActivator (\n  props: ActivatorProps,\n  vm: ComponentInternalInstance,\n  { activatorEl, activatorEvents }: Pick<ReturnType<typeof useActivator>, 'activatorEl' | 'activatorEvents'>\n) {\n  watch(() => props.activator, (val, oldVal) => {\n    if (oldVal && val !== oldVal) {\n      const activator = getActivator(oldVal)\n      activator && unbindActivatorProps(activator)\n    }\n    if (val) {\n      nextTick(() => bindActivatorProps())\n    }\n  }, { immediate: true })\n\n  watch(() => props.activatorProps, () => {\n    bindActivatorProps()\n  })\n\n  onScopeDispose(() => {\n    unbindActivatorProps()\n  })\n\n  function bindActivatorProps (el = getActivator(), _props = props.activatorProps) {\n    if (!el) return\n\n    Object.entries(activatorEvents.value).forEach(([name, cb]) => {\n      el.addEventListener(name, cb as (e: Event) => void)\n    })\n\n    Object.keys(_props).forEach(k => {\n      if (_props[k] == null) {\n        el.removeAttribute(k)\n      } else {\n        el.setAttribute(k, _props[k])\n      }\n    })\n  }\n\n  function unbindActivatorProps (el = getActivator(), _props = props.activatorProps) {\n    if (!el) return\n\n    Object.entries(activatorEvents.value).forEach(([name, cb]) => {\n      el.removeEventListener(name, cb as (e: Event) => void)\n    })\n\n    Object.keys(_props).forEach(k => {\n      el.removeAttribute(k)\n    })\n  }\n\n  function getActivator (selector = props.activator): HTMLElement | undefined {\n    let activator\n    if (selector) {\n      if (selector === 'parent') {\n        let el = vm?.proxy?.$el?.parentNode\n        while (el.hasAttribute('data-no-activator')) {\n          el = el.parentNode\n        }\n        activator = el\n      } else if (typeof selector === 'string') {\n        // Selector\n        activator = document.querySelector(selector)\n      } else if ('$el' in selector) {\n        // Component (ref)\n        activator = selector.$el\n      } else {\n        // HTMLElement | Element\n        activator = selector\n      }\n    }\n\n    // The activator should only be a valid element (Ignore comments and text nodes)\n    activatorEl.value = activator?.nodeType === Node.ELEMENT_NODE ? activator : null\n\n    return activatorEl.value\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}