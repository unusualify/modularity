{"ast":null,"code":"import _objectSpread from \"/var/www/crm_template/packages/oobook/crm-base/vue/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _objectWithoutProperties from \"/var/www/crm_template/packages/oobook/crm-base/vue/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js\";\nvar _excluded = [\"label\"],\n  _excluded2 = [\"getValue\", \"getColor\"];\nimport \"core-js/modules/es.array.includes.js\";\nimport \"core-js/modules/es.string.includes.js\";\nimport \"core-js/modules/es.object.keys.js\";\nimport \"core-js/modules/es.array.is-array.js\";\nimport \"core-js/modules/es.array.every.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport \"core-js/modules/es.array.find.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.array.find-index.js\";\nimport { createVNode as _createVNode } from \"vue\";\n// Styles\nimport \"./VColorPickerEdit.css\";\n\n// Components\nimport { VBtn } from \"../VBtn/index.mjs\"; // Utilities\nimport { computed } from 'vue';\nimport { defineComponent, useRender } from \"../../util/index.mjs\";\nimport { modes, nullColor } from \"./util/index.mjs\"; // Types\nvar VColorPickerInput = function VColorPickerInput(_ref) {\n  var label = _ref.label,\n    rest = _objectWithoutProperties(_ref, _excluded);\n  return _createVNode(\"div\", {\n    \"class\": \"v-color-picker-edit__input\"\n  }, [_createVNode(\"input\", rest, null), _createVNode(\"span\", null, [label])]);\n};\nexport var VColorPickerEdit = defineComponent({\n  name: 'VColorPickerEdit',\n  props: {\n    color: Object,\n    disabled: Boolean,\n    mode: {\n      type: String,\n      \"default\": 'rgba',\n      validator: function validator(v) {\n        return Object.keys(modes).includes(v);\n      }\n    },\n    modes: {\n      type: Array,\n      \"default\": function _default() {\n        return Object.keys(modes);\n      },\n      validator: function validator(v) {\n        return Array.isArray(v) && v.every(function (m) {\n          return Object.keys(modes).includes(m);\n        });\n      }\n    }\n  },\n  emits: {\n    'update:color': function updateColor(color) {\n      return true;\n    },\n    'update:mode': function updateMode(mode) {\n      return true;\n    }\n  },\n  setup: function setup(props, _ref2) {\n    var emit = _ref2.emit;\n    var enabledModes = computed(function () {\n      return props.modes.map(function (key) {\n        return _objectSpread(_objectSpread({}, modes[key]), {}, {\n          name: key\n        });\n      });\n    });\n    var inputs = computed(function () {\n      var _mode$inputs;\n      var mode = enabledModes.value.find(function (m) {\n        return m.name === props.mode;\n      });\n      if (!mode) return [];\n      var color = props.color ? mode.to(props.color) : null;\n      return (_mode$inputs = mode.inputs) === null || _mode$inputs === void 0 ? void 0 : _mode$inputs.map(function (_ref3) {\n        var getValue = _ref3.getValue,\n          getColor = _ref3.getColor,\n          inputProps = _objectWithoutProperties(_ref3, _excluded2);\n        return _objectSpread(_objectSpread(_objectSpread({}, mode.inputProps), inputProps), {}, {\n          disabled: props.disabled,\n          value: color && getValue(color),\n          onChange: function onChange(e) {\n            var target = e.target;\n            if (!target) return;\n            emit('update:color', mode.from(getColor(color !== null && color !== void 0 ? color : nullColor, target.value)));\n          }\n        });\n      });\n    });\n    useRender(function () {\n      var _inputs$value;\n      return _createVNode(\"div\", {\n        \"class\": \"v-color-picker-edit\"\n      }, [(_inputs$value = inputs.value) === null || _inputs$value === void 0 ? void 0 : _inputs$value.map(function (props) {\n        return _createVNode(VColorPickerInput, props, null);\n      }), enabledModes.value.length > 1 && _createVNode(VBtn, {\n        \"icon\": \"$unfold\",\n        \"size\": \"x-small\",\n        \"variant\": \"plain\",\n        \"onClick\": function onClick() {\n          var mi = enabledModes.value.findIndex(function (m) {\n            return m.name === props.mode;\n          });\n          emit('update:mode', enabledModes.value[(mi + 1) % enabledModes.value.length].name);\n        }\n      }, null)]);\n    });\n    return {};\n  }\n});","map":{"version":3,"names":["VBtn","computed","defineComponent","useRender","modes","nullColor","VColorPickerInput","_ref","label","rest","_objectWithoutProperties","_excluded","_createVNode","VColorPickerEdit","name","props","color","Object","disabled","Boolean","mode","type","String","validator","v","keys","includes","Array","_default","isArray","every","m","emits","updateColor","updateMode","setup","_ref2","emit","enabledModes","map","key","_objectSpread","inputs","_mode$inputs","value","find","to","_ref3","getValue","getColor","inputProps","_excluded2","onChange","e","target","from","_inputs$value","length","onClick","mi","findIndex"],"sources":["../../../src/components/VColorPicker/VColorPickerEdit.tsx"],"sourcesContent":["// Styles\nimport './VColorPickerEdit.sass'\n\n// Components\nimport { VBtn } from '@/components/VBtn'\n\n// Utilities\nimport { computed } from 'vue'\nimport { defineComponent, useRender } from '@/util'\nimport { modes, nullColor } from './util'\n\n// Types\nimport type { PropType } from 'vue'\nimport type { HSV } from '@/util/colorUtils'\n\nconst VColorPickerInput = ({ label, ...rest }: any) => {\n  return (\n    <div\n      class=\"v-color-picker-edit__input\"\n    >\n      <input {...rest} />\n      <span>{ label }</span>\n    </div>\n  )\n}\n\nexport const VColorPickerEdit = defineComponent({\n  name: 'VColorPickerEdit',\n\n  props: {\n    color: Object as PropType<HSV | null>,\n    disabled: Boolean,\n    mode: {\n      type: String,\n      default: 'rgba',\n      validator: (v: string) => Object.keys(modes).includes(v),\n    },\n    modes: {\n      type: Array as PropType<string[]>,\n      default: () => Object.keys(modes),\n      validator: (v: any) => Array.isArray(v) && v.every(m => Object.keys(modes).includes(m)),\n    },\n  },\n\n  emits: {\n    'update:color': (color: HSV) => true,\n    'update:mode': (mode: string) => true,\n  },\n\n  setup (props, { emit }) {\n    const enabledModes = computed(() => {\n      return props.modes.map(key => ({ ...modes[key], name: key }))\n    })\n\n    const inputs = computed(() => {\n      const mode = enabledModes.value.find(m => m.name === props.mode)\n\n      if (!mode) return []\n\n      const color = props.color ? mode.to(props.color) : null\n\n      return mode.inputs?.map(({ getValue, getColor, ...inputProps }) => {\n        return {\n          ...mode.inputProps,\n          ...inputProps,\n          disabled: props.disabled,\n          value: color && getValue(color),\n          onChange: (e: InputEvent) => {\n            const target = e.target as HTMLInputElement | null\n\n            if (!target) return\n\n            emit('update:color', mode.from(getColor(color ?? nullColor, target.value)))\n          },\n        }\n      })\n    })\n\n    useRender(() => (\n      <div\n        class=\"v-color-picker-edit\"\n      >\n        { inputs.value?.map(props => (\n          <VColorPickerInput {...props} />\n        )) }\n        { enabledModes.value.length > 1 && (\n          <VBtn\n            icon=\"$unfold\"\n            size=\"x-small\"\n            variant=\"plain\"\n            onClick={ () => {\n              const mi = enabledModes.value.findIndex(m => m.name === props.mode)\n\n              emit('update:mode', enabledModes.value[(mi + 1) % enabledModes.value.length].name)\n            } }\n          />\n        ) }\n      </div>\n    ))\n\n    return {}\n  },\n})\n\nexport type VColorPickerEdit = InstanceType<typeof VColorPickerEdit>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}