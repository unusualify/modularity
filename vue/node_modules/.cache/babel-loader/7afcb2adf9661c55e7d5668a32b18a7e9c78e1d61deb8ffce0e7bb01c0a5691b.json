{"ast":null,"code":"import _regeneratorRuntime from \"/var/www/crm_template/packages/oobook/crm-base/vue/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _createForOfIteratorHelper from \"/var/www/crm_template/packages/oobook/crm-base/vue/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";\nimport _asyncToGenerator from \"/var/www/crm_template/packages/oobook/crm-base/vue/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _defineProperty from \"/var/www/crm_template/packages/oobook/crm-base/vue/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport _objectSpread from \"/var/www/crm_template/packages/oobook/crm-base/vue/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport \"core-js/modules/es.number.constructor.js\";\nimport \"core-js/modules/es.array.slice.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nimport \"core-js/modules/es.array.push.js\";\n// Composables\nimport { useForm } from \"./form.mjs\";\nimport { useProxiedModel } from \"./proxiedModel.mjs\";\nimport { useToggleScope } from \"./toggleScope.mjs\";\nimport { makeFocusProps } from \"./focus.mjs\"; // Utilities\nimport { computed, onBeforeMount, onBeforeUnmount, onMounted, ref, unref, watch } from 'vue';\nimport { getCurrentInstanceName, getUid, propsFactory, wrapInArray } from \"../util/index.mjs\"; // Types\nexport var makeValidationProps = propsFactory(_objectSpread({\n  disabled: Boolean,\n  error: Boolean,\n  errorMessages: {\n    type: [Array, String],\n    \"default\": function _default() {\n      return [];\n    }\n  },\n  maxErrors: {\n    type: [Number, String],\n    \"default\": 1\n  },\n  name: String,\n  label: String,\n  readonly: Boolean,\n  rules: {\n    type: Array,\n    \"default\": function _default() {\n      return [];\n    }\n  },\n  modelValue: null,\n  validateOn: String,\n  validationValue: null\n}, makeFocusProps()), 'validation');\nexport function useValidation(props) {\n  var name = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : getCurrentInstanceName();\n  var id = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : getUid();\n  var model = useProxiedModel(props, 'modelValue');\n  var validationModel = computed(function () {\n    return props.validationValue === undefined ? model.value : props.validationValue;\n  });\n  var form = useForm();\n  var internalErrorMessages = ref([]);\n  var isPristine = ref(true);\n  var isDirty = computed(function () {\n    return !!(wrapInArray(model.value === '' ? null : model.value).length || wrapInArray(validationModel.value === '' ? null : validationModel.value).length);\n  });\n  var isDisabled = computed(function () {\n    return !!(props.disabled || form !== null && form !== void 0 && form.isDisabled.value);\n  });\n  var isReadonly = computed(function () {\n    return !!(props.readonly || form !== null && form !== void 0 && form.isReadonly.value);\n  });\n  var errorMessages = computed(function () {\n    return props.errorMessages.length ? wrapInArray(props.errorMessages).slice(0, Math.max(0, +props.maxErrors)) : internalErrorMessages.value;\n  });\n  var isValid = computed(function () {\n    if (props.error || errorMessages.value.length) return false;\n    if (!props.rules.length) return true;\n    return isPristine.value ? null : true;\n  });\n  var isValidating = ref(false);\n  var validationClasses = computed(function () {\n    var _ref;\n    return _ref = {}, _defineProperty(_ref, \"\".concat(name, \"--error\"), isValid.value === false), _defineProperty(_ref, \"\".concat(name, \"--dirty\"), isDirty.value), _defineProperty(_ref, \"\".concat(name, \"--disabled\"), isDisabled.value), _defineProperty(_ref, \"\".concat(name, \"--readonly\"), isReadonly.value), _ref;\n  });\n  var uid = computed(function () {\n    var _props$name;\n    return (_props$name = props.name) !== null && _props$name !== void 0 ? _props$name : unref(id);\n  });\n  onBeforeMount(function () {\n    form === null || form === void 0 ? void 0 : form.register({\n      id: uid.value,\n      validate: validate,\n      reset: reset,\n      resetValidation: resetValidation\n    });\n  });\n  onBeforeUnmount(function () {\n    form === null || form === void 0 ? void 0 : form.unregister(uid.value);\n  });\n  var validateOn = computed(function () {\n    return props.validateOn || (form === null || form === void 0 ? void 0 : form.validateOn.value) || 'input';\n  });\n\n  // Set initial valid state, for inputs that might not have rules\n  onMounted(function () {\n    return form === null || form === void 0 ? void 0 : form.update(uid.value, isValid.value, errorMessages.value);\n  });\n  useToggleScope(function () {\n    return validateOn.value === 'input';\n  }, function () {\n    watch(validationModel, function () {\n      if (validationModel.value != null) {\n        validate();\n      } else if (props.focused) {\n        var unwatch = watch(function () {\n          return props.focused;\n        }, function (val) {\n          if (!val) validate();\n          unwatch();\n        });\n      }\n    });\n  });\n  useToggleScope(function () {\n    return validateOn.value === 'blur';\n  }, function () {\n    watch(function () {\n      return props.focused;\n    }, function (val) {\n      if (!val) validate();\n    });\n  });\n  watch(isValid, function () {\n    form === null || form === void 0 ? void 0 : form.update(uid.value, isValid.value, errorMessages.value);\n  });\n  function reset() {\n    resetValidation();\n    model.value = null;\n  }\n  function resetValidation() {\n    isPristine.value = true;\n    internalErrorMessages.value = [];\n  }\n  function validate() {\n    return _validate.apply(this, arguments);\n  }\n  function _validate() {\n    _validate = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n      var results, _iterator, _step, _loop, _ret;\n      return _regeneratorRuntime().wrap(function _callee$(_context2) {\n        while (1) switch (_context2.prev = _context2.next) {\n          case 0:\n            results = [];\n            isValidating.value = true;\n            _iterator = _createForOfIteratorHelper(props.rules);\n            _context2.prev = 3;\n            _loop = /*#__PURE__*/_regeneratorRuntime().mark(function _loop() {\n              var _props$maxErrors;\n              var rule, handler, result;\n              return _regeneratorRuntime().wrap(function _loop$(_context) {\n                while (1) switch (_context.prev = _context.next) {\n                  case 0:\n                    rule = _step.value;\n                    if (!(results.length >= ((_props$maxErrors = props.maxErrors) !== null && _props$maxErrors !== void 0 ? _props$maxErrors : 1))) {\n                      _context.next = 3;\n                      break;\n                    }\n                    return _context.abrupt(\"return\", \"break\");\n                  case 3:\n                    handler = typeof rule === 'function' ? rule : function () {\n                      return rule;\n                    };\n                    _context.next = 6;\n                    return handler(validationModel.value);\n                  case 6:\n                    result = _context.sent;\n                    if (!(result === true)) {\n                      _context.next = 9;\n                      break;\n                    }\n                    return _context.abrupt(\"return\", \"continue\");\n                  case 9:\n                    if (!(typeof result !== 'string')) {\n                      _context.next = 12;\n                      break;\n                    }\n                    // eslint-disable-next-line no-console\n                    console.warn(\"\".concat(result, \" is not a valid value. Rule functions must return boolean true or a string.\"));\n                    return _context.abrupt(\"return\", \"continue\");\n                  case 12:\n                    results.push(result);\n                  case 13:\n                  case \"end\":\n                    return _context.stop();\n                }\n              }, _loop);\n            });\n            _iterator.s();\n          case 6:\n            if ((_step = _iterator.n()).done) {\n              _context2.next = 15;\n              break;\n            }\n            return _context2.delegateYield(_loop(), \"t0\", 8);\n          case 8:\n            _ret = _context2.t0;\n            if (!(_ret === \"break\")) {\n              _context2.next = 11;\n              break;\n            }\n            return _context2.abrupt(\"break\", 15);\n          case 11:\n            if (!(_ret === \"continue\")) {\n              _context2.next = 13;\n              break;\n            }\n            return _context2.abrupt(\"continue\", 13);\n          case 13:\n            _context2.next = 6;\n            break;\n          case 15:\n            _context2.next = 20;\n            break;\n          case 17:\n            _context2.prev = 17;\n            _context2.t1 = _context2[\"catch\"](3);\n            _iterator.e(_context2.t1);\n          case 20:\n            _context2.prev = 20;\n            _iterator.f();\n            return _context2.finish(20);\n          case 23:\n            internalErrorMessages.value = results;\n            isValidating.value = false;\n            isPristine.value = false;\n            return _context2.abrupt(\"return\", internalErrorMessages.value);\n          case 27:\n          case \"end\":\n            return _context2.stop();\n        }\n      }, _callee, null, [[3, 17, 20, 23]]);\n    }));\n    return _validate.apply(this, arguments);\n  }\n  return {\n    errorMessages: errorMessages,\n    isDirty: isDirty,\n    isDisabled: isDisabled,\n    isReadonly: isReadonly,\n    isPristine: isPristine,\n    isValid: isValid,\n    isValidating: isValidating,\n    reset: reset,\n    resetValidation: resetValidation,\n    validate: validate,\n    validationClasses: validationClasses\n  };\n}","map":{"version":3,"names":["useForm","useProxiedModel","useToggleScope","makeFocusProps","computed","onBeforeMount","onBeforeUnmount","onMounted","ref","unref","watch","getCurrentInstanceName","getUid","propsFactory","wrapInArray","makeValidationProps","_objectSpread","disabled","Boolean","error","errorMessages","type","Array","String","_default","maxErrors","Number","name","label","readonly","rules","modelValue","validateOn","validationValue","useValidation","props","arguments","length","undefined","id","model","validationModel","value","form","internalErrorMessages","isPristine","isDirty","isDisabled","isReadonly","slice","Math","max","isValid","isValidating","validationClasses","_ref","_defineProperty","concat","uid","_props$name","register","validate","reset","resetValidation","unregister","update","focused","unwatch","val","_validate","apply","_asyncToGenerator","_regeneratorRuntime","mark","_callee","results","_iterator","_step","_loop","_ret","wrap","_callee$","_context2","prev","next","_createForOfIteratorHelper","_props$maxErrors","rule","handler","result","_loop$","_context","abrupt","sent","console","warn","push","stop","s","n","done","delegateYield","t0","t1","e","f","finish"],"sources":["../../src/composables/validation.ts"],"sourcesContent":["// Composables\nimport { useForm } from '@/composables/form'\nimport { useProxiedModel } from '@/composables/proxiedModel'\nimport { useToggleScope } from '@/composables/toggleScope'\nimport { makeFocusProps } from '@/composables/focus'\n\n// Utilities\nimport { computed, onBeforeMount, onBeforeUnmount, onMounted, ref, unref, watch } from 'vue'\nimport { getCurrentInstanceName, getUid, propsFactory, wrapInArray } from '@/util'\n\n// Types\nimport type { PropType } from 'vue'\nimport type { MaybeRef } from '@/util'\n\nexport type ValidationResult = string | boolean\nexport type ValidationRule =\n  | ValidationResult\n  | PromiseLike<ValidationResult>\n  | ((value: any) => ValidationResult)\n  | ((value: any) => PromiseLike<ValidationResult>)\n\nexport interface ValidationProps {\n  disabled: boolean\n  error: boolean\n  errorMessages: string | string[]\n  focused: boolean\n  maxErrors: string | number\n  name: string | undefined\n  label: string | undefined\n  readonly: boolean\n  rules: ValidationRule[]\n  modelValue: any\n  'onUpdate:modelValue': ((val: any) => void) | undefined\n  validateOn?: 'blur' | 'input' | 'submit'\n  validationValue: any\n}\n\nexport const makeValidationProps = propsFactory({\n  disabled: Boolean,\n  error: Boolean,\n  errorMessages: {\n    type: [Array, String] as PropType<string | string[]>,\n    default: () => ([]),\n  },\n  maxErrors: {\n    type: [Number, String],\n    default: 1,\n  },\n  name: String,\n  label: String,\n  readonly: Boolean,\n  rules: {\n    type: Array as PropType<ValidationRule[]>,\n    default: () => ([]),\n  },\n  modelValue: null,\n  validateOn: String as PropType<ValidationProps['validateOn']>,\n  validationValue: null,\n\n  ...makeFocusProps(),\n}, 'validation')\n\nexport function useValidation (\n  props: ValidationProps,\n  name = getCurrentInstanceName(),\n  id: MaybeRef<string | number> = getUid(),\n) {\n  const model = useProxiedModel(props, 'modelValue')\n  const validationModel = computed(() => props.validationValue === undefined ? model.value : props.validationValue)\n  const form = useForm()\n  const internalErrorMessages = ref<string[]>([])\n  const isPristine = ref(true)\n  const isDirty = computed(() => !!(\n    wrapInArray(model.value === '' ? null : model.value).length ||\n    wrapInArray(validationModel.value === '' ? null : validationModel.value).length\n  ))\n  const isDisabled = computed(() => !!(props.disabled || form?.isDisabled.value))\n  const isReadonly = computed(() => !!(props.readonly || form?.isReadonly.value))\n  const errorMessages = computed(() => {\n    return props.errorMessages.length\n      ? wrapInArray(props.errorMessages).slice(0, Math.max(0, +props.maxErrors))\n      : internalErrorMessages.value\n  })\n  const isValid = computed(() => {\n    if (props.error || errorMessages.value.length) return false\n    if (!props.rules.length) return true\n\n    return isPristine.value ? null : true\n  })\n  const isValidating = ref(false)\n  const validationClasses = computed(() => {\n    return {\n      [`${name}--error`]: isValid.value === false,\n      [`${name}--dirty`]: isDirty.value,\n      [`${name}--disabled`]: isDisabled.value,\n      [`${name}--readonly`]: isReadonly.value,\n    }\n  })\n\n  const uid = computed(() => props.name ?? unref(id))\n\n  onBeforeMount(() => {\n    form?.register({\n      id: uid.value,\n      validate,\n      reset,\n      resetValidation,\n    })\n  })\n\n  onBeforeUnmount(() => {\n    form?.unregister(uid.value)\n  })\n\n  const validateOn = computed(() => props.validateOn || form?.validateOn.value || 'input')\n\n  // Set initial valid state, for inputs that might not have rules\n  onMounted(() => form?.update(uid.value, isValid.value, errorMessages.value))\n\n  useToggleScope(() => validateOn.value === 'input', () => {\n    watch(validationModel, () => {\n      if (validationModel.value != null) {\n        validate()\n      } else if (props.focused) {\n        const unwatch = watch(() => props.focused, val => {\n          if (!val) validate()\n\n          unwatch()\n        })\n      }\n    })\n  })\n\n  useToggleScope(() => validateOn.value === 'blur', () => {\n    watch(() => props.focused, val => {\n      if (!val) validate()\n    })\n  })\n\n  watch(isValid, () => {\n    form?.update(uid.value, isValid.value, errorMessages.value)\n  })\n\n  function reset () {\n    resetValidation()\n    model.value = null\n  }\n\n  function resetValidation () {\n    isPristine.value = true\n    internalErrorMessages.value = []\n  }\n\n  async function validate () {\n    const results = []\n\n    isValidating.value = true\n\n    for (const rule of props.rules) {\n      if (results.length >= (props.maxErrors ?? 1)) {\n        break\n      }\n\n      const handler = typeof rule === 'function' ? rule : () => rule\n      const result = await handler(validationModel.value)\n\n      if (result === true) continue\n\n      if (typeof result !== 'string') {\n        // eslint-disable-next-line no-console\n        console.warn(`${result} is not a valid value. Rule functions must return boolean true or a string.`)\n\n        continue\n      }\n\n      results.push(result)\n    }\n\n    internalErrorMessages.value = results\n    isValidating.value = false\n    isPristine.value = false\n\n    return internalErrorMessages.value\n  }\n\n  return {\n    errorMessages,\n    isDirty,\n    isDisabled,\n    isReadonly,\n    isPristine,\n    isValid,\n    isValidating,\n    reset,\n    resetValidation,\n    validate,\n    validationClasses,\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}