{"ast":null,"code":"import { renderSlot as _renderSlot, createElementVNode as _createElementVNode, createCommentVNode as _createCommentVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, toDisplayString as _toDisplayString, resolveDirective as _resolveDirective, withDirectives as _withDirectives, createTextVNode as _createTextVNode, withCtx as _withCtx, openBlock as _openBlock, createBlock as _createBlock, vShow as _vShow, createElementBlock as _createElementBlock, Transition as _Transition, withModifiers as _withModifiers, normalizeClass as _normalizeClass, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-6dc71978\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"filter__inner\"\n};\nconst _hoisted_2 = {\n  class: \"filter__navigation\"\n};\nconst _hoisted_3 = {\n  class: \"filter__search\"\n};\nconst _hoisted_4 = {\n  class: \"float-right\",\n  symbol: \"dropdown_module\"\n};\nconst _hoisted_5 = {\n  class: \"visually-hidden\",\n  \"aria-hidden\": \"true\",\n  type: \"submit\"\n};\nconst _hoisted_6 = [\"aria-hidden\"];\nconst _hoisted_7 = {\n  class: \"filter__moreInner\",\n  ref: \"moreInner\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_v_text_field = _resolveComponent(\"v-text-field\");\n  const _component_ue_btn = _resolveComponent(\"ue-btn\");\n  const _directive_svg = _resolveDirective(\"svg\");\n  return _openBlock(), _createElementBlock(\"form\", {\n    class: _normalizeClass([\"filter\", {\n      'filter--opened': $options.opened,\n      'filter--single': !_ctx.withNavigation,\n      'filter--withHiddenFilters': _ctx.withHiddenFilters\n    }]),\n    onSubmit: _cache[0] || (_cache[0] = _withModifiers((...args) => $options.submitFilter && $options.submitFilter(...args), [\"prevent\"])),\n    ref: \"form\"\n  }, [_createElementVNode(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_renderSlot(_ctx.$slots, \"navigation\", {}, undefined, true)]), _createElementVNode(\"div\", _hoisted_3, [_createCommentVNode(\" <input type=\\\"search\\\" class=\\\"form__input form__input--small\\\" name=\\\"search\\\" :value=\\\"searchValue\\\" :placeholder=\\\"placeholder\\\" @input=\\\"onSearchInput\\\" /> \"), _createVNode(_component_v_text_field, {\n    type: \"search\",\n    class: \"form__input form__input--small v-filter__search__input\",\n    name: \"search\",\n    value: _ctx.searchValue,\n    onChange: $options.onSearchInput,\n    placeholder: $props.placeholder\n  }, null, 8 /* PROPS */, [\"value\", \"onChange\", \"placeholder\"]), _ctx.withHiddenFilters ? (_openBlock(), _createBlock(_component_ue_btn, {\n    key: 0,\n    class: \"filter__toggle\",\n    variant: \"ghost\",\n    onClick: $options.toggleFilter,\n    \"aria-expanded\": $options.opened ? 'true' : 'false',\n    fab: \"\"\n  }, {\n    default: _withCtx(() => [_createTextVNode(_toDisplayString(_ctx.$trans('filter.toggle-label', 'Filter')) + \" \", 1 /* TEXT */), _withDirectives(_createElementVNode(\"span\", _hoisted_4, null, 512 /* NEED_PATCH */), [[_directive_svg]])]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"onClick\", \"aria-expanded\"])) : _createCommentVNode(\"v-if\", true), _renderSlot(_ctx.$slots, \"additional-actions\", {}, undefined, true), _createCommentVNode(\" Fix for Safari: the hidden submit button enables form submission by pressing Enter... \"), _createElementVNode(\"button\", _hoisted_5, _toDisplayString(_ctx.$trans('filter.apply-btn', 'Apply')), 1 /* TEXT */)])]), _createVNode(_Transition, {\n    css: false,\n    duration: 275,\n    onBeforeEnter: $options.beforeEnter,\n    onEnter: $options.enter,\n    onBeforeLeave: $options.beforeLeave,\n    onLeave: $options.leave\n  }, {\n    default: _withCtx(() => [_ctx.withHiddenFilters ? _withDirectives((_openBlock(), _createElementBlock(\"div\", {\n      key: 0,\n      class: \"filter__more\",\n      \"aria-hidden\": !$options.opened ? true : null,\n      ref: \"more\"\n    }, [_createElementVNode(\"div\", _hoisted_7, [_renderSlot(_ctx.$slots, \"hidden-filters\", {}, undefined, true), _createVNode(_component_ue_btn, {\n      variant: \"ghost\",\n      type: \"submit\"\n    }, {\n      default: _withCtx(() => [_createTextVNode(_toDisplayString(_ctx.$trans('filter.apply-btn', 'Apply')), 1 /* TEXT */)]),\n\n      _: 1 /* STABLE */\n    }), $props.clearOption ? (_openBlock(), _createBlock(_component_ue_btn, {\n      key: 0,\n      variant: \"ghost\",\n      type: \"button\",\n      onClick: $options.clear\n    }, {\n      default: _withCtx(() => [_createTextVNode(_toDisplayString(_ctx.$trans('filter.clear-btn', 'Clear')), 1 /* TEXT */)]),\n\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"onClick\"])) : _createCommentVNode(\"v-if\", true)], 512 /* NEED_PATCH */)], 8 /* PROPS */, _hoisted_6)), [[_vShow, $options.opened]]) : _createCommentVNode(\"v-if\", true)]),\n    _: 3 /* FORWARDED */\n  }, 8 /* PROPS */, [\"onBeforeEnter\", \"onEnter\", \"onBeforeLeave\", \"onLeave\"])], 34 /* CLASS, HYDRATE_EVENTS */);\n}","map":{"version":3,"names":["class","symbol","type","ref","_createElementBlock","_normalizeClass","$options","opened","_ctx","withNavigation","withHiddenFilters","onSubmit","_cache","_withModifiers","args","submitFilter","_createElementVNode","_hoisted_1","_hoisted_2","_renderSlot","$slots","undefined","_hoisted_3","_createCommentVNode","_createVNode","_component_v_text_field","name","value","searchValue","onChange","onSearchInput","placeholder","$props","_createBlock","_component_ue_btn","variant","onClick","toggleFilter","fab","$trans","_hoisted_4","_hoisted_5","_toDisplayString","_Transition","css","duration","onBeforeEnter","beforeEnter","onEnter","enter","onBeforeLeave","beforeLeave","onLeave","leave","_hoisted_7","clearOption","clear"],"sources":["/var/www/crm_template/packages/oobook/crm-base/vue/src/js/components/Filter.vue"],"sourcesContent":["<template>\n    <form class=\"filter\" :class=\"{ 'filter--opened' : opened, 'filter--single' : !withNavigation, 'filter--withHiddenFilters' : withHiddenFilters }\" @submit.prevent=\"submitFilter\" ref=\"form\">\n      <div class=\"filter__inner\">\n        <div class=\"filter__navigation\"><slot name=\"navigation\"></slot></div>\n  \n        <div class=\"filter__search\">\n\n            <!-- <input type=\"search\" class=\"form__input form__input--small\" name=\"search\" :value=\"searchValue\" :placeholder=\"placeholder\" @input=\"onSearchInput\" /> -->\n            <v-text-field \n                type=\"search\" \n                class=\"form__input form__input--small v-filter__search__input\" \n                name=\"search\" \n                :value=\"searchValue\" \n                @change=\"onSearchInput\" \n                :placeholder=\"placeholder\" \n                />\n            <ue-btn \n                class=\"filter__toggle\" \n                variant=\"ghost\" \n                @click=\"toggleFilter\" \n                v-if=\"withHiddenFilters\" \n                :aria-expanded=\"opened ?  'true' : 'false'\" \n\n                fab\n                >\n                {{ $trans('filter.toggle-label', 'Filter') }} \n                <span class=\"float-right\" v-svg symbol=\"dropdown_module\"></span>\n            </ue-btn>\n          <slot name=\"additional-actions\"></slot>\n          <!-- Fix for Safari: the hidden submit button enables form submission by pressing Enter... -->\n          <button class=\"visually-hidden\" aria-hidden=\"true\" type=\"submit\">{{ $trans('filter.apply-btn', 'Apply') }}</button>\n        </div>\n      </div>\n      <transition :css='false' :duration=\"275\" @before-enter=\"beforeEnter\" @enter=\"enter\" @before-leave=\"beforeLeave\" @leave=\"leave\">\n        <div class=\"filter__more\" v-show=\"opened\" v-if=\"withHiddenFilters\" :aria-hidden=\"!opened ? true : null\" ref=\"more\">\n          <div class=\"filter__moreInner\" ref=\"moreInner\">\n            <slot name=\"hidden-filters\"></slot>\n            <ue-btn variant=\"ghost\" type=\"submit\">{{ $trans('filter.apply-btn', 'Apply') }}</ue-btn>\n            <ue-btn v-if=\"clearOption\" variant=\"ghost\" type=\"button\" @click=\"clear\">{{ $trans('filter.clear-btn', 'Clear') }}</ue-btn>\n          </div>\n        </div>\n      </transition>\n    </form>\n  </template>\n  \n  <script>\n    import debounce from 'lodash/debounce'\n    import FormDataAsObj from '@/utils/formDataAsObj.js'\n  \n    export default {\n      name: 'UEFilter',\n      props: {\n        initialSearchValue: {\n          type: String,\n          default: ''\n        },\n        placeholder: {\n          type: String,\n          default () {\n            return this.$trans('filter.search-placeholder', 'Search')\n          }\n        },\n        closed: {\n          type: Boolean,\n          default: false\n        },\n        clearOption: {\n          type: Boolean,\n          default: false\n        }\n      },\n      data: function () {\n        return {\n          openable: !this.closed,\n          open: false,\n          withHiddenFilters: true,\n          withNavigation: true,\n          searchValue: this.initialSearchValue,\n          transitionTimeout: null\n        }\n      },\n      computed: {\n        opened: function () {\n          return this.open && this.openable\n        }\n      },\n      watch: {\n        closed: function () {\n          this.openable = !this.closed\n        },\n        initialSearchValue: function () {\n          this.searchValue = this.initialSearchValue\n        }\n      },\n      methods: {\n        getHeight: function () {\n          // Retrieve height from more inner container\n          return this.$refs.moreInner.clientHeight\n        },\n        beforeEnter: function (el) {\n          el.style.height = '0px'\n          el.style.overflow = 'hidden'\n        },\n        enter: function (el, done) {\n          // Reset height.\n          this.resetHeight()\n  \n          // Delete timeout if exists.\n          if (this.transitionTimeout) {\n            clearTimeout(this.transitionTimeout)\n          }\n  \n          // Set timeout.\n          this.transitionTimeout = setTimeout(() => {\n            el.style.overflow = 'visible'\n          }, 275)\n  \n          // Add resize event.\n          window.addEventListener('resize', this._resize, false)\n        },\n        beforeLeave: function (el) {\n          // Delete timeout if exists.\n          if (this.transitionTimeout) {\n            clearTimeout(this.transitionTimeout)\n          }\n  \n          // Reset height.\n          this.resetHeight()\n  \n          // Hide content.\n          el.style.overflow = 'hidden'\n  \n          // Remove resize event.\n          window.removeEventListener('resize', this._resize)\n        },\n        leave: function (el, done) {\n          el.style.height = '0px'\n        },\n        toggleFilter: function () {\n          this.openable = true\n          this.open = !this.open\n        },\n        submitFilter: function () {\n          const formData = FormDataAsObj(this.$refs.form)\n          this.$emit('submit', formData)\n        },\n        onSearchInput: function (val) {\n          this.searchValue = val\n        },\n        clear: function () {\n          this.searchValue = ''\n          this.$emit('clear')\n        },\n        resetHeight: function () {\n          // Return if ref is not set.\n          if (!this.$refs.more) return\n  \n          // Set height to the container.\n          this.$refs.more.style.height = this.getHeight() + 'px'\n        },\n        _resize: debounce(function () {\n          this.resetHeight()\n        }, 50)\n      },\n      beforeMount: function () {\n        if (!this.$slots.navigation) this.withNavigation = false\n        if (!this.$slots['hidden-filters']) this.withHiddenFilters = false\n      }\n    }\n  </script>\n  \n  <style lang=\"scss\" scoped>\n  \n    .filter__inner {\n      display: flex;\n      justify-content: space-between;\n    }\n  \n    .filter__search, .filter__navigation {\n      padding:20px 0;\n      white-space: nowrap;\n    }\n    .filter__search {\n      .v-filter__search__input {\n        display:inline-block;\n        width:20vw;\n        max-width:300px;\n      }\n  \n      .icon {\n        position:relative;\n        top:-2px;\n        margin-left:9px;\n      }\n  \n      div {\n        display:inline-block;\n  \n        button, a {\n          vertical-align: middle;\n        }\n  \n        input, button, a {\n          margin-left:15px;\n        }\n      }\n    }\n  \n    /* variant when filter has hidden filters on small screens */\n    @include breakpoint(xsmall) {\n      .filter--withHiddenFilters {\n        .filter__inner {\n          display:block;\n        }\n  \n        .filter__search {\n          display:flex;\n  \n          input {\n            flex-grow:1;\n          }\n        }\n      }\n    }\n  \n    .filter__more {\n      transition: height 0.275s ease;\n      overflow: hidden;\n    }\n  \n    .filter__moreInner {\n      padding: 20px 0 0 0;\n      border-top:1px solid $color__border;\n  \n      button {\n        margin-right: 10px;\n        margin-bottom: 20px;\n      }\n    }\n  \n    @include breakpoint('small+') {\n      .filter__moreInner {\n        display: flex;\n        flex-flow: row wrap;\n      }\n    }\n  \n    .filter__toggle {\n      position: relative;\n      padding-right:  20px + 20px !important;\n      margin-left: 15px !important;\n  \n      .icon {\n        transition: all .2s linear;\n        transform: rotate(0deg);\n        position: absolute;\n        right: 20px;\n        top: 50%;\n        margin-top: -3px;\n      }\n    }\n  \n    /* Opened filters */\n    .filter--opened {\n      .filter__toggle .icon {\n        transform: rotate(180deg);\n      }\n    }\n\n    .filter__navigation {\n        padding: 20px 0;\n\n    }\n  \n    .filter--single {\n      .filter__navigation {\n        display: none;\n      }\n    }\n  </style>\n  \n  <style lang=\"scss\">\n  \n    .filter {\n      .filter__moreInner {\n        .input {\n          margin-top: 0;\n          margin-bottom: 20px;\n        }\n      }\n  \n      @include breakpoint('small+') {\n        .filter__moreInner {\n          .input {\n            margin-top: 0;\n            margin-right: 20px;\n          }\n  \n          > div {\n            display: flex;\n            flex-flow: row wrap;\n          }\n  \n          > div > * {\n            margin-right: 20px;\n          }\n        }\n      }\n    }\n  </style>\n  "],"mappings":";;;EAEWA,KAAK,EAAC;AAAe;;EACnBA,KAAK,EAAC;AAAoB;;EAE1BA,KAAK,EAAC;AAAgB;;EAqBbA,KAAK,EAAC,aAAa;EAAOC,MAAM,EAAC;;;EAIrCD,KAAK,EAAC,iBAAiB;EAAC,aAAW,EAAC,MAAM;EAACE,IAAI,EAAC;;;;EAKnDF,KAAK,EAAC,mBAAmB;EAACG,GAAG,EAAC;;;;;;uBAlCzCC,mBAAA,CAyCO;IAzCDJ,KAAK,EAAAK,eAAA,EAAC,QAAQ;MAAA,kBAA8BC,QAAA,CAAAC,MAAM;MAAA,mBAAsBC,IAAA,CAAAC,cAAc;MAAA,6BAAgCD,IAAA,CAAAE;IAAiB;IAAKC,QAAM,EAAAC,MAAA,QAAAA,MAAA,MAAAC,cAAA,KAAAC,IAAA,KAAUR,QAAA,CAAAS,YAAA,IAAAT,QAAA,CAAAS,YAAA,IAAAD,IAAA,CAAY;IAAEX,GAAG,EAAC;MAClLa,mBAAA,CA8BM,OA9BNC,UA8BM,GA7BJD,mBAAA,CAAqE,OAArEE,UAAqE,GAArCC,WAAA,CAA+BX,IAAA,CAAAY,MAAA,oBAAAC,SAAA,Q,GAE/DL,mBAAA,CA0BM,OA1BNM,UA0BM,GAxBFC,mBAAA,qKAA4J,EAC5JC,YAAA,CAOMC,uBAAA;IANFvB,IAAI,EAAC,QAAQ;IACbF,KAAK,EAAC,wDAAwD;IAC9D0B,IAAI,EAAC,QAAQ;IACZC,KAAK,EAAEnB,IAAA,CAAAoB,WAAW;IAClBC,QAAM,EAAEvB,QAAA,CAAAwB,aAAa;IACrBC,WAAW,EAAEC,MAAA,CAAAD;iEAMRvB,IAAA,CAAAE,iBAAiB,I,cAJ3BuB,YAAA,CAWSC,iBAAA;;IAVLlC,KAAK,EAAC,gBAAgB;IACtBmC,OAAO,EAAC,OAAO;IACdC,OAAK,EAAE9B,QAAA,CAAA+B,YAAY;IAEnB,eAAa,EAAE/B,QAAA,CAAAC,MAAM;IAEtB+B,GAAG,EAAH;;sBAEA,MAA6C,C,kCAA1C9B,IAAA,CAAA+B,MAAM,qCAAoC,GAC7C,iB,gBAAAvB,mBAAA,CAAgE,QAAhEwB,UAAgE,gC;;wFAEtErB,WAAA,CAAuCX,IAAA,CAAAY,MAAA,4BAAAC,SAAA,SACvCE,mBAAA,2FAA8F,EAC9FP,mBAAA,CAAmH,UAAnHyB,UAAmH,EAAAC,gBAAA,CAA/ClC,IAAA,CAAA+B,MAAM,8C,KAG9Ef,YAAA,CAQamB,WAAA;IARAC,GAAG,EAAE,KAAK;IAAGC,QAAQ,EAAE,GAAG;IAAGC,aAAY,EAAExC,QAAA,CAAAyC,WAAW;IAAGC,OAAK,EAAE1C,QAAA,CAAA2C,KAAK;IAAGC,aAAY,EAAE5C,QAAA,CAAA6C,WAAW;IAAGC,OAAK,EAAE9C,QAAA,CAAA+C;;sBACtH,MAMM,CAN0C7C,IAAA,CAAAE,iBAAiB,G,+BAAjEN,mBAAA,CAMM;;MANDJ,KAAK,EAAC,cAAc;MAA2C,aAAW,GAAGM,QAAA,CAAAC,MAAM;MAAgBJ,GAAG,EAAC;QAC1Ga,mBAAA,CAIM,OAJNsC,UAIM,GAHJnC,WAAA,CAAmCX,IAAA,CAAAY,MAAA,wBAAAC,SAAA,SACnCG,YAAA,CAAwFU,iBAAA;MAAhFC,OAAO,EAAC,OAAO;MAACjC,IAAI,EAAC;;wBAAS,MAAyC,C,kCAAtCM,IAAA,CAAA+B,MAAM,8C;;;QACjCP,MAAA,CAAAuB,WAAW,I,cAAzBtB,YAAA,CAA0HC,iBAAA;;MAA/FC,OAAO,EAAC,OAAO;MAACjC,IAAI,EAAC,QAAQ;MAAEkC,OAAK,EAAE9B,QAAA,CAAAkD;;wBAAO,MAAyC,C,kCAAtChD,IAAA,CAAA+B,MAAM,8C;;;yIAJnDjC,QAAA,CAAAC,MAAM,E"},"metadata":{},"sourceType":"module","externalDependencies":[]}