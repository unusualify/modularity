{"ast":null,"code":"import _defineProperty from \"/var/www/crm_template/packages/oobook/crm-base/vue/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport { VDataTable } from 'vuetify/labs/VDataTable';\nimport { mapState } from 'vuex';\nimport { DATATABLE, FORM, ALERT } from '@/store/mutations';\nimport ACTIONS from '@/store/actions';\nimport { DatatableMixin } from '@/mixins';\nexport default {\n  components: {\n    VDataTable: VDataTable\n  },\n  mixins: [DatatableMixin],\n  data: function data() {\n    return {\n      formModalActive: false,\n      dialogActive: false,\n      langs: ['tr', 'en'],\n      cellInput: ''\n    };\n  },\n  computed: {\n    dialogDescription: function dialogDescription() {\n      return this.$t('confirm-deletion', {\n        route: this.transName.toLowerCase(),\n        name: this.editedItem[this.titleKey]\n      });\n    },\n    transName: function transName() {\n      return this.$t('modules.' + this.name.toLowerCase());\n    }\n  },\n  created: function created() {},\n  watch: {\n    formModalActive: function formModalActive(val) {\n      __log(this.defaultItem, this.editedItem);\n      val || this.resetEditedItem();\n    },\n    dialogActive: function dialogActive(val) {\n      val || this.resetEditedItem();\n    }\n  },\n  methods: {\n    deleteRow: function deleteRow() {\n      var _this = this;\n      this.$store.dispatch(ACTIONS.DELETE_ITEM, {\n        id: this.editedItem.id,\n        callback: function callback() {\n          _this.$refs.dialog.closeModal();\n        },\n        errorCallback: function errorCallback() {}\n      });\n    },\n    columnChanged: function columnChanged(value) {\n      this.cellInput = value;\n    },\n    /**\n         * @param {string} key - related key of object\n         */\n    updateCell: function updateCell(key) {\n      this.$store.commit(ALERT.CLEAR_ALERT);\n      if (this.editedItem[key] !== this.cellInput) {\n        var data = _defineProperty({\n          id: this.editedItem.id\n        }, key, this.cellInput);\n        this.$store.dispatch(ACTIONS.SAVE_FORM, {\n          item: data\n        });\n      }\n    },\n    changeSort: function changeSort(column) {\n      if (this.pagination.sortBy === column) {\n        this.pagination.descending = !this.pagination.descending;\n      } else {\n        this.pagination.sortBy = column;\n        this.pagination.descending = false;\n      }\n    },\n    columnValueList: function columnValueList(val) {\n      return this.elements.map(function (d) {\n        return d[val];\n      });\n    }\n  }\n};","map":{"version":3,"names":["VDataTable","mapState","DATATABLE","FORM","ALERT","ACTIONS","DatatableMixin","components","mixins","data","formModalActive","dialogActive","langs","cellInput","computed","dialogDescription","$t","route","transName","toLowerCase","name","editedItem","titleKey","created","watch","val","__log","defaultItem","resetEditedItem","methods","deleteRow","_this","$store","dispatch","DELETE_ITEM","id","callback","$refs","dialog","closeModal","errorCallback","columnChanged","value","updateCell","key","commit","CLEAR_ALERT","_defineProperty","SAVE_FORM","item","changeSort","column","pagination","sortBy","descending","columnValueList","elements","map","d"],"sources":["/var/www/crm_template/packages/oobook/crm-base/vue/src/js/components/others/Datatable.vue"],"sourcesContent":["<template>\n  <v-data-table\n    class=\"elevation-1 \"\n\n    :headers=\"headers\"\n    :items=\"elements\"\n    :loading=\"loading\"\n\n    v-model:items-per-page=\"options.itemsPerPage\"\n    v-model:multi-sort=\"options.multiSort\"\n    :server-items-length=\"totalElements\"\n\n    :search=\"search\"\n    :hide-default-header=\"hideDefaultHeader\"\n    :hide-default-footer=\"hideDefaultFooter\"\n    :footer-props=\"{\n      showFirstLastPage: true,\n      firstIcon: 'mdi-arrow-collapse-left',\n      lastIcon: 'mdi-arrow-collapse-right',\n      nextIcon: 'mdi-chevron-right',\n      prevIcon: 'mdi-chevron-left'\n    }\"\n\n    :disable-pagination=\"false\"\n    :disable-sort=\"false\"\n  >\n    <template v-slot:top>\n      <v-toolbar\n        flat\n      >\n        <!-- #title.left-top -->\n        <v-toolbar-title>\n          {{ $t('list-of-item', [name, $t('modules.' + name.toLowerCase() )] ) }}\n          <!-- {{ $t('errors.missingMessage') }} -->\n        </v-toolbar-title>\n\n        <v-divider class=\"mx-4\" inset vertical></v-divider>\n\n        <!-- #search input -->\n        <v-text-field\n          v-model=\"search\"\n          append-icon=\"mdi-magnify\"\n          label=\"Search\"\n          single-line\n          hide-details\n        >\n        </v-text-field>\n\n        <v-divider class=\"mx-4\" inset vertical></v-divider>\n\n        <!-- #language selector -->\n        <v-toolbar-title v-show=\"false\">\n          <!-- {{ $t('list') }}\n          {{ $n(100.77, 'currency') }} -->\n          {{ $t('language-select') }}\n          <select v-model=\"$i18n.locale\">\n            <option v-for=\"(lang, i) in langs\" :key=\"`Lang${i}`\" :value=\"lang\">\n              {{ lang }}\n            </option>\n          </select>\n        </v-toolbar-title>\n\n        <!-- Custom Filters -->\n        <v-menu offset-y rounded=\"xs\" open-on-hover>\n          <template v-slot:activator=\"{ props, isActive }\">\n            <v-btn\n              v-bind=\"props\"\n              class=\"rounded-xs\"\n              color=\"primary\"\n              dark\n              :ripple=\"false\"\n            >\n              {{ mainFilters.at(0).name }}\n              <v-spacer></v-spacer>\n              <v-icon right :style=\"{ transform: isActive ? 'rotate(-180deg)' : 'rotate(0)' }\">mdi-chevron-down</v-icon>\n            </v-btn>\n          </template>\n          <v-list>\n            <v-list-item\n              v-for=\"(item, index) in mainFilters\"\n              :key=\"index\"\n            >\n              <v-list-item-title>{{ item.name}}</v-list-item-title>\n            </v-list-item>\n          </v-list>\n        </v-menu>\n\n        <v-divider class=\"mx-4\" inset vertical></v-divider>\n\n        <v-spacer></v-spacer>\n\n        <!-- #form dialog -->\n        <slot\n          v-if=\"createOnModal || editOnModal\"\n          name=\"FormDialog\"\n          >\n          <ue-modal-form\n              ref=\"formModal\"\n              v-model=\"formModalActive\"\n              :route-name=\"name\"\n              >\n              <template v-slot:activator=\"{props}\">\n                <ue-btn\n                    v-if=\"createOnModal\"\n                    v-bind=\"props\"\n                    color=\"success\"\n                    dark\n                    >\n                    {{ $t('new-item', {'item': name} ) }}\n                </ue-btn>\n              </template>\n          </ue-modal-form>\n        </slot>\n\n        <ue-btn\n          v-if=\"!createOnModal\"\n          :href=\"createUrl\"\n          target=\"_blank\"\n          color=\"success\"\n          dark\n          >\n          {{ $t('new-item', {'item': name} ) }}\n        </ue-btn>\n\n        <!-- general #dialog -->\n        <ue-modal-dialog\n          v-model=\"dialogActive\"\n          ref=\"dialog\"\n          :description=\"dialogDescription\"\n          @cancel=\"resetEditedItem\"\n          @confirm=\"deleteRow\"\n        >\n        </ue-modal-dialog>\n\n      </v-toolbar>\n    </template>\n\n    <template v-slot:item.actions=\"{ item }\">\n\n      <!-- @click's editItem|deleteItem -->\n      <!-- #actions -->\n      <v-menu v-if=\"rowActionsType == 'dropdown' || $vuetify.display.smOnly\"\n        :close-on-content-click=\"false\"\n        open-on-hover\n        left\n        offset-x\n        >\n        <template v-slot:activator=\"{ props }\">\n          <v-btn icon v-bind=\"props\">\n            <v-icon color=\"green darken-2\">\n              $list\n            </v-icon>\n          </v-btn>\n        </template>\n        <v-list>\n\n          <v-list-item\n            v-for=\"(action, k) in rowActions\"\n            :key=\"k\"\n            @click=\"handleFunctionCall(action.name + 'Item', item.raw)\"\n            >\n              <v-icon small :color=\"action.color\" left>\n                {{ action.icon ? action.icon : '$' + action.name }}\n              </v-icon>\n              {{ $t(action.name) }}\n          </v-list-item>\n\n        </v-list>\n      </v-menu>\n\n      <div v-else>\n        <v-icon\n          v-for=\"(action, k) in rowActions\"\n          :key=\"k\"\n          small\n          class=\"mr-2\"\n          @click=\"handleFunctionCall(action.name + 'Item', item.raw)\"\n          :color=\"action.color\"\n          >\n          {{ action.icon ? action.icon : '$' + action.name }}\n        </v-icon>\n      </div>\n    </template>\n\n    <template v-slot:no-data>\n      <v-btn\n        color=\"primary\"\n        @click=\"initialize\"\n      >\n        Reset\n      </v-btn>\n    </template>\n\n    <!-- #formatterColumns -->\n    <template\n      v-for=\"(col, i) in formatterColumns\"\n      v-slot:[`item.${col.value}`]=\"{ header, value }\"\n      >\n        {{ handleFunctionCall(header.formatter, value ) }}\n        <!-- {{ [header.formatter](value) }} -->\n    </template>\n\n    <!-- #edit-dialog for editableColumns-->\n    <!-- <template\n      v-for=\"(header, k) in editableColumns\"\n      v-slot:[`item.${header.value}`]=\"props\"\n      :key=\"k\"\n      >\n        <v-edit-dialog\n          v-model:return-value=\"props.item[header.value]\"\n          :save-text=\"$t('save')\"\n          @open=\"setEditedItem(props.item)\"\n          @cancel=\"resetEditedItem()\"\n          @close=\"resetEditedItem()\"\n          @save=\"updateCell(header.value)\"\n\n          persistent\n          large\n\n        >\n          {{ props.item[header.value] }}\n          <template v-slot:input>\n            <v-text-field\n              :value=\"props.item[header.value]\"\n              @input=\"columnChanged\"\n              @keyup.enter=\"updateCell(header.value)\"\n              label=\"Edit\"\n              single-line\n              counter\n            >\n            </v-text-field>\n          </template>\n        </v-edit-dialog>\n    </template> -->\n\n    <!-- <template v-slot:headers=\"{props}\">\n      <tr>\n        <th>\n          <v-checkbox\n            :input-value=\"props.all\"\n            :indeterminate=\"props.indeterminate\"\n            primary\n            hide-details\n            @click.native=\"toggleAll\"\n          ></v-checkbox>\n        </th>\n        <th\n          v-for=\"header in props.headers\"\n          :key=\"header.text\"\n          :class=\"['column sortable', pagination.descending ? 'desc' : 'asc', header.value === pagination.sortBy ? 'active' : '']\"\n          @click=\"changeSort(header.value)\"\n        >\n          <v-icon small>arrow_upward</v-icon>\n          {{ header.text }}\n        </th>\n      </tr>\n      <tr class=\"grey lighten-3\">\n        <th>\n          <v-icon>$filter_list</v-icon>\n        </th>\n        <th\n          v-for=\"header in props.headers\"\n          :key=\"header.text\"\n        >\n          <div v-if=\"filters.hasOwnProperty(header.value)\">\n            <v-select flat hide-details small multiple clearable\n              :items=\"columnValueList(header.value)\" v-model=\"filters[header.value]\"\n              >\n\n            </v-select>\n\n          </div>\n        </th>\n      </tr>\n    </template> -->\n\n  </v-data-table>\n</template>\n\n<script>\nimport { VDataTable } from 'vuetify/labs/VDataTable'\nimport { mapState } from 'vuex'\nimport { DATATABLE, FORM, ALERT } from '@/store/mutations'\nimport ACTIONS from '@/store/actions'\n\nimport { DatatableMixin } from '@/mixins'\n\nexport default {\n  components: {\n    VDataTable\n  },\n  mixins: [DatatableMixin],\n  data: function () {\n    return {\n      formModalActive: false,\n      dialogActive: false,\n\n      langs: ['tr', 'en'],\n\n      cellInput: ''\n\n    }\n  },\n  computed: {\n    dialogDescription () {\n      return this.$t('confirm-deletion', {\n        route: this.transName.toLowerCase(),\n        name: this.editedItem[this.titleKey]\n      })\n    },\n    transName () {\n      return this.$t('modules.' + this.name.toLowerCase())\n    }\n  },\n  created () {\n\n  },\n\n  watch: {\n    formModalActive (val) {\n      __log(\n        this.defaultItem,\n        this.editedItem\n      )\n      val || this.resetEditedItem()\n    },\n    dialogActive (val) {\n      val || this.resetEditedItem()\n    }\n  },\n\n  methods: {\n    deleteRow: function () {\n      this.$store.dispatch(ACTIONS.DELETE_ITEM, {\n        id: this.editedItem.id,\n        callback: () => {\n          this.$refs.dialog.closeModal()\n        },\n        errorCallback: () => {\n\n        }\n      })\n    },\n    columnChanged (value) {\n      this.cellInput = value\n    },\n    /**\n         * @param {string} key - related key of object\n         */\n    updateCell (key) {\n      this.$store.commit(ALERT.CLEAR_ALERT)\n\n      if (this.editedItem[key] !== this.cellInput) {\n        const data = {\n          id: this.editedItem.id,\n          [key]: this.cellInput\n          // reload: false\n        }\n\n        this.$store.dispatch(ACTIONS.SAVE_FORM, { item: data })\n      }\n    },\n\n    changeSort (column) {\n      if (this.pagination.sortBy === column) {\n        this.pagination.descending = !this.pagination.descending\n      } else {\n        this.pagination.sortBy = column\n        this.pagination.descending = false\n      }\n    },\n    columnValueList (val) {\n      return this.elements.map(d => d[val])\n    }\n\n  }\n}\n</script>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}