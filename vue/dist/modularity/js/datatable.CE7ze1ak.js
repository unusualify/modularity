import{_ as Z,G as y,$ as E,a0 as S,a1 as d,l as i,a2 as x,a3 as $,Q as m,U as g,a4 as R,z as P,a5 as j,a6 as ee,a7 as te,a8 as h,F as U,a9 as ae,J as se,aa as ne,S as oe,ab as B,V as k,ac as le}from"./vendor.Tzo5HDY2.js";import{u as re,m as ie,A as D,a as A,_ as de,D as u,b as v,c as ue}from"./form.CtJWdKHn.js";import{R as Ae,V as I,a as Te,b as Ee,c as G,d as V,e as fe,f as M,g as w,h as N,i as K,j as H,k as ce,l as z,m as Y,n as J,o as q,p as me,q as _e,r as ge}from"./vuetify.CGhZtPog.js";const be={setup(e,t){return{...re(e,t)}},props:{...ie()},data:function(){return{langs:["tr","en"],cellInput:""}},computed:{...Z({})},created(){},watch:{},methods:{changeSort(e){this.pagination.sortBy===e?this.pagination.descending=!this.pagination.descending:(this.pagination.sortBy=e,this.pagination.descending=!1)},columnValueList(e){return this.elements.map(t=>t[e])},columnChanged(e){this.cellInput=e},hideColumn(e){this.headers=this.headers.filter(t=>t.key!==e)},updateCell(e){if(this.$store.commit(D.CLEAR_ALERT),this.editedItem[e]!==this.cellInput){const t={id:this.editedItem.id,[e]:this.cellInput};this.$store.dispatch(A.SAVE_FORM,{item:t})}}}},ve=["value"],De={key:1},Le={class:"w-100 d-flex justify-center my-5"};function pe(e,t,s,a,l,T){const o=k("ue-title"),b=k("v-btn-success"),p=k("ue-form"),c=k("ue-modal"),C=k("ue-recursive-stuff");return y((E(),S(ge,{fluid:""},{default:d(()=>[i(_e,P(e.$bindAttributes(),{class:"elevation-1",headers:e.headers,items:e.elements,loading:e.loading,options:e.options,"onUpdate:options":t[8]||(t[8]=n=>e.options=n),"items-per-page":e.options.itemsPerPage,"multi-sort":e.options.multiSort,"onUpdate:multiSort":t[9]||(t[9]=n=>e.options.multiSort=n),"must-sort":e.options.mustSort,"onUpdate:mustSort":t[10]||(t[10]=n=>e.options.mustSort=n),"items-length":e.totalElements,"item-title":e.titleKey,search:e.search,"footer-propss":{showFirstLastPage:!0,firstIcon:"mdi-arrow-collapse-left",lastIcon:"mdi-arrow-collapse-right",nextIcon:"mdi-chevron-right",prevIcon:"mdi-chevron-left"},"disable-pagination":!1,"disable-sort":!1,"loading-text":e.$t("fields.loading-text"),modelValue:e.selectedItems,"onUpdate:modelValue":t[11]||(t[11]=n=>e.selectedItems=n),"show-selected":"",sticky:"","fixed-header":"","fixed-footer":"",height:e.windowSize.y-64-24-59-36,density:"comfortable"}),x({top:d(()=>[i(Ee,{flat:""},{default:d(()=>[i(G,null,{default:d(()=>[j(e.$slots,"header",ee(te({tableTitle:e.tableTitle})),()=>[i(o,{text:e.tableTitle,classes:["ue-table-header","pt-12","pb-12"]},null,8,["text"])])]),_:3}),i(V,{class:"mx-4",inset:"",vertical:""}),i(fe,{modelValue:e.search,"onUpdate:modelValue":t[0]||(t[0]=n=>e.search=n),"append-inner-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":"",density:"compact",variant:"solo"},null,8,["modelValue"]),i(V,{class:"mx-4",inset:"",vertical:""}),y(i(G,null,{default:d(()=>[m(g(e.$t("fields.language-select"))+" ",1),y($("select",{"onUpdate:modelValue":t[1]||(t[1]=n=>e.$i18n.locale=n)},[(E(!0),h(U,null,R(e.langs,(n,r)=>(E(),h("option",{key:`Lang${r}`,value:n},g(n),9,ve))),128))],512),[[ae,e.$i18n.locale]])]),_:1},512),[[se,!1]]),i(M,{"offset-y":"",rounded:"xs","open-on-hover":""},{activator:d(({props:n,isActive:r})=>[i(I,P(n,{variant:"elevated"}),{default:d(()=>[m(g(`${e.filterActive.name} (${e.filterActive.number})`)+" ",1),i(w),i(N,{right:"",style:ne({transform:r?"rotate(-180deg)":"rotate(0)"})},{default:d(()=>[m("mdi-chevron-down")]),_:2},1032,["style"])]),_:2},1040)]),default:d(()=>[i(K,null,{default:d(()=>[(E(!0),h(U,null,R(e.mainFilters,(n,r)=>(E(),S(H,{key:r,onClick:oe(f=>e.filterStatus(n.slug),["prevent"])},{default:d(()=>[i(ce,null,{default:d(()=>[m(g(n.name+"("+n.number+")"),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1}),i(V,{class:"mx-4",inset:"",vertical:""}),i(w),(e.createOnModal||e.editOnModal)&&!e.noForm?j(e.$slots,"formDialog",{key:0},()=>[i(c,{ref:"formModal",modelValue:e.formActive,"onUpdate:modelValue":t[4]||(t[4]=n=>e.formActive=n),scrollable:"",transition:"dialog-bottom-transition","width-type":"lg"},{activator:d(({props:n})=>[e.can("create")&&e.createOnModal?(E(),S(b,P({key:0},n,{dark:""}),{default:d(()=>[m(g(e.$t("add-item",{item:e.transNameSingular})),1)]),_:2},1040)):B("",!0)]),body:d(n=>[i(z,null,{default:d(()=>[i(Y,{class:"text-h5 grey lighten-2"}),i(J,null,{default:d(()=>[i(p,{ref:"form",title:e.formTitle},null,8,["title"])]),_:1}),i(V),i(q,null,{default:d(()=>[i(w),i(I,{color:"error darken-1",text:"",onClick:t[2]||(t[2]=r=>e.closeForm())},{default:d(()=>[m(g(n.textCancel),1)]),_:2},1024),i(I,{color:"teal darken-1",text:"",onClick:t[3]||(t[3]=r=>e.confirmFormModal()),disabled:!e.formIsValid,loading:e.formLoading},{default:d(()=>[m(g(e.$t("fields.save")),1)]),_:1},8,["disabled","loading"])]),_:2},1024)]),_:2},1024)]),_:1},8,["modelValue"])]):B("",!0),e.createOnModal?B("",!0):(E(),S(b,{key:1,href:e.createUrl,target:"_blank",dark:""},{default:d(()=>[m(g(e.$t("add-item",{item:e.transNameSingular})),1)]),_:1},8,["href"])),i(c,{ref:"deleteModal",modelValue:e.deleteModalActive,"onUpdate:modelValue":t[7]||(t[7]=n=>e.deleteModalActive=n),transition:"dialog-bottom-transition","width-type":"sm"},{body:d(n=>[i(z,null,{default:d(()=>[i(Y,{class:"text-h5 text-center",style:{"word-break":"break-word"}}),i(J,{class:"text-center",style:{"word-break":"break-word"}},{default:d(()=>[m(g(e.deleteQuestion),1)]),_:1}),i(V),i(q,null,{default:d(()=>[i(w),i(I,{color:"blue",text:"",onClick:t[5]||(t[5]=r=>e.closeDeleteModal())},{default:d(()=>[m(g(n.textCancel),1)]),_:2},1024),i(I,{color:"blue",text:"",onClick:t[6]||(t[6]=r=>e.deleteRow())},{default:d(()=>[m(g(n.textConfirm),1)]),_:2},1024),i(w)]),_:2},1024)]),_:2},1024)]),_:1},8,["modelValue"])]),_:3})]),"header.actions":d(n=>[i(M,{"close-on-content-click":!1,"open-on-hover":"",left:""},{activator:d(({props:r})=>[i(N,P({size:"large",icon:"mdi-cog-outline"},r),null,16)]),_:1})]),"item.actions":d(({item:n})=>[e.rowActionsType=="dropdown"||e.isSmAndDown?(E(),S(M,{key:0,"close-on-content-click":!1,"open-on-hover":"",left:"","offset-x":""},{activator:d(({props:r})=>[i(N,P({size:"large",color:"primary",icon:"$list"},r),null,16)]),default:d(()=>[i(K,null,{default:d(()=>[(E(!0),h(U,null,R(e.rowActions,(r,f)=>(E(),h(U,{key:f},[e.itemHasAction(n,r)?(E(),S(H,{key:0,onClick:O=>e.itemAction(n,r.name)},{default:d(()=>[i(N,{small:"",color:r.color,left:""},{default:d(()=>[m(g(r.icon?r.icon:"$"+r.name),1)]),_:2},1032,["color"]),m(" "+g(e.$t(r.name)),1)]),_:2},1032,["onClick"])):B("",!0)],64))),128))]),_:2},1024)]),_:2},1024)):(E(),h("div",De,[(E(!0),h(U,null,R(e.rowActions,(r,f)=>(E(),h(U,{key:f},[e.itemHasAction(n,r)?(E(),S(me,{key:0,text:e.$t(r.label??r.name),location:"top"},{activator:d(({props:O})=>[i(N,P({small:"",class:"mr-2",onClick:F=>e.itemAction(n,r),color:r.color,ref_for:!0},O),{default:d(()=>[m(g(r.icon?r.icon:"$"+r.name),1)]),_:2},1040,["onClick","color"])]),_:2},1032,["text"])):B("",!0)],64))),128))]))]),_:2},[e.search!=""?{name:"no-data",fn:d(()=>[$("div",Le,[i(I,{color:"primary",onClick:e.initialize},{default:d(()=>[m(g(e.$t("fields.reset")),1)]),_:1},8,["onClick"])])]),key:"0"}:void 0,R(e.formatterColumns,(n,r)=>({name:`item.${n.key}`,fn:d(({item:f})=>[n.formatter=="edit"||n.formatter=="activate"?(E(),S(I,{key:r,class:"pa-0 justify-start",variant:"plain",color:"primary darken-1",onClick:O=>e.$call(n.formatter+"Item",f)},{default:d(()=>[m(g(f[n.key]),1)]),_:2},1032,["onClick"])):n.formatter=="switch"?(E(),S(Te,{key:r,"model-value":f[n.key],color:"success","true-value":1,"false-value":"0","hide-details":"","onUpdate:modelValue":O=>e.itemAction(f,"switch",O,n.key)},{label:d(()=>[]),_:2},1032,["model-value","onUpdate:modelValue"])):(E(),S(C,P({key:2},e.handleFormatter(n.formatter,f[n.key]),{key:f[n.key]}),null,16))])}))]),1040,["headers","items","loading","options","items-per-page","multi-sort","must-sort","items-length","item-title","search","loading-text","modelValue","height"])]),_:3})),[[Ae,e.onResize]])}const Ve=de(be,[["render",pe]]);function Se(){const e="test";try{return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch{return!1}}function Q(e,t){const s="";Se()?localStorage.setItem(e,t):document.cookie=e+"="+t+s+"; path=/"}var L={BASE_URL:"/vendor/modularity",DEV:!1,MODE:"production",PROD:!0,SSR:!1};const X=(e,t,s)=>{e.forEach(a=>{a.id===t&&s(a),a.children&&X(a.children,t,s)})},W=(e,t=["id","children"],s="children")=>{const a=JSON.parse(JSON.stringify(e));return a.forEach(l=>{for(const T in l)t.includes(T)||delete l[T],T===s&&(l[T]=W(l[T]))}),a},he={baseUrl:window[L.VUE_APP_NAME].STORE.datatable.baseUrl||"",headers:window[L.VUE_APP_NAME].STORE.datatable.headers,search:window[L.VUE_APP_NAME].STORE.datatable.searchText,options:window[L.VUE_APP_NAME].STORE.datatable.options,data:window[L.VUE_APP_NAME].STORE.datatable.data||[],total:parseInt(window[L.VUE_APP_NAME].STORE.datatable.total),filter:window[L.VUE_APP_NAME].STORE.datatable.filter||{},mainFilters:window[L.VUE_APP_NAME].STORE.datatable.mainFilters||[],advancedFilters:window[L.VUE_APP_NAME].STORE.datatable.advancedFilters||[],bulk:[],loading:!1,updateTracker:0,customModal:_.isEmpty(window[L.VUE_APP_NAME].STORE.datatable.customModal)?!1:window[L.VUE_APP_NAME].STORE.datatable.customModal},Oe={activeHeaders:e=>{},totalElements:e=>e.total,totalPage:e=>Math.ceil(e.total/e.options.itemsPerPage),editableColumns:e=>e.headers.filter(t=>t.hasOwnProperty("isColumnEditable")&&t.isColumnEditable),rowEditables:e=>e.headers.filter(t=>t.hasOwnProperty("isRowEditable")&&t.isRowEditable),mainFilters:e=>e.mainFilters,advancedFilters:e=>(Object.entries(e.advancedFilters).forEach(([t,s])=>{s.map(a=>{var l;a.selecteds??(a.selecteds=(l=e.filter[t])==null?void 0:l[a.slug])})}),e.advancedFilters)},Pe={[u.UPDATE_DATATABLE_OPTIONS](e,t){e.options=t},[u.UPDATE_DATATABLE_SEARCH](e,t){e.search=t},[u.UPDATE_DATATABLE_TOTAL](e,t){e.total=t},[u.UPDATE_DATATABLE_DATA](e,t){e.bulk=[],e.data=t},[u.SET_DATATABLE_DIALOG](e,t){e.dialog=t},[u.UPDATE_DATATABLE_FILTER](e,t){e.filter=Object.assign({},e.filter,t)},[u.CLEAR_DATATABLE_FILTER](e){e.filter=Object.assign({},{search:"",status:e.filter.status})},[u.UPDATE_DATATABLE_FILTER_STATUS](e,t){e.filter.status=t},[u.UPDATE_DATATABLE_ADVANCED_FILTER](e,t){Object.keys(e.advancedFilters).forEach(function(s,a){e.filter[s]=e.advancedFilters[s].reduce((l,T)=>{var o;return((o=T.selecteds)==null?void 0:o.length)>0&&(l[T.slug]=T.selecteds),l},{})})},[u.RESET_DATATABLE_ADVANCED_FILTER](e){e.advancedFilters=Object.fromEntries(Object.entries(e.advancedFilters).map(([t,s])=>(e.filter[t]=[],s.map(a=>a.selecteds=[]),[t,s])))},[u.UPDATE_DATATABLE_BULK](e,t){e.bulk.indexOf(t)>-1?e.bulk=e.bulk.filter(function(s){return s!==t}):e.bulk.push(t)},[u.REPLACE_DATATABLE_BULK](e,t){e.bulk=t},[u.ADD_DATATABLE_COLUMN](e,t){e.columns.splice(t.index,0,t.data)},[u.REMOVE_DATATABLE_COLUMN](e,t){e.columns.forEach(function(s,a){s.name===t&&e.columns.splice(a,1)})},[u.UPDATE_DATATABLE_OFFSET](e,t){e.offset=t,Q(e.localStorageKey+"_page-offset",e.offset)},[u.UPDATE_DATATABLE_PAGE](e,t){},[u.UPDATE_DATATABLE_MAXPAGE](e,t){e.page>t&&(e.page=t),e.maxPage=t},[u.UPDATE_DATATABLE_VISIBLITY](e,t){Q(e.localStorageKey+"_columns-visible",JSON.stringify(t)),e.columns.forEach(function(s){for(let a=0;a<t.length;a++){if(t[a]===s.name){s.visible=!0;break}s.visible=!1}})},[u.UPDATE_DATATABLE_SORT](e,t){const s="asc";e.sortKey===t.name?e.sortDir=e.sortDir===s?"desc":s:e.sortDir=s,e.sortKey=t.name},[u.UPDATE_DATATABLE_NAV](e,t){t.forEach(function(s){e.mainFilters.forEach(function(a){a.name===s.name&&(a.number=s.number)})})},[u.PUBLISH_DATATABLE](e,t){const s=t.id,a=t.value;function l(o){o>=0&&(a==="toggle"?e.data[o].published=!e.data[o].published:e.data[o].published=a)}function T(o){return e.data.findIndex(function(b,p){return b.id===o})}if(Array.isArray(s))s.forEach(function(o){const b=T(o);l(b)}),e.bulk=[];else{const o=T(s);l(o)}},[u.FEATURE_DATATABLE](e,t){const s=t.id,a=t.value;function l(o){o>=0&&(a==="toggle"?e.data[o].featured=!e.data[o].featured:e.data[o].featured=a)}function T(o){return e.data.findIndex(function(b,p){return b.id===o})}if(Array.isArray(s))s.forEach(function(o){const b=T(o);l(b)}),e.bulk=[];else{const o=T(s);l(o)}},[u.UPDATE_DATATABLE_LOADING](e,t){e.loading=!e.loading},[u.UPDATE_DATATABLE_NESTED](e,t){X(e.data,t.parentId,s=>{s.children=t.val})},[u.UPDATE_DATATABLE_TRACKER](e,t){e.updateTracker=t?e.updateTracker+1:0}},Ie=(e,t)=>{let s=!0,a;return t.match(/sortBy|sortDesc/)?e.length>0?a=e:s=!1:t.match(/page|itemsPerPage|replaceUrl/)?a=e:s=!1,{active:s,value:a}},Ue={[A.GET_DATATABLE]({commit:e,state:t,getters:s},{payload:a={},callback:l=null,errorCallback:T=null,endpoint:o=null}={}){const b=Object.keys(a);let p=b.length===0;if(b.every(c=>(__isset(t[c])&&(__isObject(t[c])&&__isObject(a[c])?p=!Object.equals(a[c],t[c]):Array.isArray(a[c])&&Array.isArray(t[c])?p=!Array.equals(a[c],t[c]):p=t[c]!==a[c]),!p)),b.includes("options")&&(p=!0),p){e(u.UPDATE_DATATABLE_LOADING,!0),console.log(t);const c={...Object.keys(t.options).reduce(function(n,r){var F;const{active:f,value:O}=Ie(__isset((F=a.options)==null?void 0:F[r])?a==null?void 0:a.options[r]:t==null?void 0:t.options[r],r);return f&&(n[r]=O),n},{}),...t.search!==""?{search:t.search}:{},filter:Object.fromEntries(Object.entries(t.filter).reduce((n,[r,f])=>(r==="status"&&f==="all"||le.isEmpty(f)||n.push([r,f]),n),[]))},C=o??window[L.VUE_APP_NAME].ENDPOINTS.index;v.get(C,c,function(n){const r=a.infiniteScroll?t.data.concat(n.resource.data):n.resource.data;e(u.UPDATE_DATATABLE_DATA,r),e(u.UPDATE_DATATABLE_TOTAL,n.resource.total),e(u.UPDATE_DATATABLE_NAV,n.mainFilters),e(u.UPDATE_DATATABLE_LOADING,!1),__isset(a.options)&&e(u.UPDATE_DATATABLE_OPTIONS,a.options),__isset(a.search)&&e(u.UPDATE_DATATABLE_SEARCH,a.search)})}},[A.SET_DATATABLE_NESTED]({commit:e,state:t,dispatch:s}){const a=W(t.data);v.reorder(a,function(l){e(NOTIFICATION.SET_NOTIF,{message:l.data.message,variant:l.data.variant})})},[A.SET_DATATABLE]({commit:e,state:t,dispatch:s}){const a=t.data.map(l=>l.id);v.reorder(a,function(l){e(NOTIFICATION.SET_NOTIF,{message:l.data.message,variant:l.data.variant})})},[A.TOGGLE_PUBLISH]({commit:e,state:t,dispatch:s},a){v.togglePublished(a,function(l){e(NOTIFICATION.SET_NOTIF,{message:l.data.message,variant:l.data.variant}),s(A.GET_DATATABLE)},function(l){e(NOTIFICATION.SET_NOTIF,{message:l.data.error.message,variant:"error"})})},[A.DELETE_ITEM]({commit:e,state:t,dispatch:s},{id:a=null,callback:l=null,errorCallback:T=null}={}){v.delete(a,function(o){e(D.SET_ALERT,{message:o.data.message,variant:o.data.variant}),o.data.variant.toLowerCase()==="success"?(s(A.GET_DATATABLE),l(o.data)):T(o.data)},function(o){__log("400 response",o),Object.prototype.hasOwnProperty.call(o.data,"exception")?e(D.SET_ALERT,{message:"Your submission could not be processed.",variant:"error"}):(s(A.HANDLE_ERRORS,o.data),e(D.SET_ALERT,{message:"Your submission could not be validated, please fix and retry",variant:"error"}))})},[A.DUPLICATE_ITEM]({commit:e,state:t,dispatch:s},a){v.duplicate(a.id,function(l){e(D.SET_ALERT,{message:l.data.message,variant:l.data.variant}),s(A.GET_DATATABLE),ue(l.data)})},[A.RESTORE_ITEM]({commit:e,state:t,dispatch:s},{id:a=null,callback:l=null,errorCallback:T=null}){v.restore(a,function(o){e(D.SET_ALERT,{message:o.data.message,variant:o.data.variant}),o.data.variant.toLowerCase()==="success"?(s(A.GET_DATATABLE),l(o.data)):T(o.data),s(A.GET_DATATABLE)},function(o){__log("400 response",o),Object.prototype.hasOwnProperty.call(o.data,"exception")?e(D.SET_ALERT,{message:"Your submission could not be processed.",variant:"error"}):(s(A.HANDLE_ERRORS,o.data),e(D.SET_ALERT,{message:"Your submission could not be validated, please fix and retry",variant:"error"}))})},[A.DESTROY_ITEM]({commit:e,state:t,dispatch:s},{id:a=null,callback:l=null,errorCallback:T=null}){v.forceDelete(a,function(o){__log(o),e(D.SET_ALERT,{message:o.data.message,variant:o.data.variant}),o.data.variant.toLowerCase()==="success"?(s(A.GET_DATATABLE),l(o.data)):T(o.data),s(A.GET_DATATABLE)},function(o){__log("400 response",o),Object.prototype.hasOwnProperty.call(o.data,"exception")?e(D.SET_ALERT,{message:"Your submission could not be processed.",variant:"error"}):(s(A.HANDLE_ERRORS,o.data),e(D.SET_ALERT,{message:"Your submission could not be validated, please fix and retry",variant:"error"}))})},[A.BULK_PUBLISH]({commit:e,state:t,dispatch:s},a){v.bulkPublish({ids:t.bulk.join(),toPublish:a.toPublish},function(l){e(NOTIFICATION.SET_NOTIF,{message:l.data.message,variant:l.data.variant}),s(A.GET_DATATABLE)})},[A.TOGGLE_FEATURE]({commit:e,state:t},s){v.toggleFeatured(s,a=>{e(u.FEATURE_DATATABLE,{id:s.id,value:"toggle"}),e(NOTIFICATION.SET_NOTIF,{message:a.data.message,variant:a.data.variant})})},[A.BULK_FEATURE]({commit:e,state:t},s){v.bulkFeature({ids:t.bulk.join(),toFeature:s.toFeature},function(a){e(u.FEATURE_DATATABLE,{id:t.bulk,value:!0}),e(NOTIFICATION.SET_NOTIF,{message:a.data.message,variant:a.data.variant})})},[A.BULK_DELETE]({commit:e,state:t,dispatch:s}){v.bulkDelete(t.bulk.join(),function(a){e(D.SET_ALERT,{message:a.data.message,variant:a.data.variant}),s(A.GET_DATATABLE)})},[A.BULK_RESTORE]({commit:e,state:t,dispatch:s}){v.bulkRestore(t.bulk.join(),function(a){e(D.SET_ALERT,{message:a.data.message,variant:a.data.variant}),s(A.GET_DATATABLE)})},[A.BULK_DESTROY]({commit:e,state:t,dispatch:s}){v.bulkDestroy(t.bulk.join(),function(a){e(D.SET_ALERT,{message:a.data.message,variant:a.data.variant}),s(A.GET_DATATABLE)})},[A.CHECK_MODAL_STATUS]({commit:e,state:t}){t.customModalInitialState&&e(u.UPDATE_MODAL_ACTIVE,!0)}},we={state:he,getters:Oe,actions:Ue,mutations:Pe};export{Ve as U,we as d};
//# sourceMappingURL=datatable.CE7ze1ak.js.map
