import{_ as Z,G as C,$ as E,a0 as S,a1 as d,l as r,a2 as x,a3 as $,Q as m,V as g,a4 as R,z as P,a5 as j,a6 as ee,a7 as te,a8 as h,F as U,a9 as ae,J as ne,aa as se,U as oe,ab as B,X as V,ac as ie}from"./vendor.BsqC_mM0.js";import{u as le,m as re,A as b,a as A,_ as de,D as u,b as D,c as ue}from"./form.yOWc8u7b.js";import{R as Ae,V as I,a as Te,b as Ee,c as G,d as w,e as fe,f as M,g as N,h as k,i as K,j as H,k as ce,l as z,m as Y,n as J,o as q,p as me,q as _e,r as ge}from"./vuetify.CdD6iuRS.js";const ve={setup(e,t){return{...le(e,t)}},props:{...re()},data:function(){return{langs:["tr","en"],cellInput:""}},computed:{...Z({})},created(){},watch:{},methods:{changeSort(e){this.pagination.sortBy===e?this.pagination.descending=!this.pagination.descending:(this.pagination.sortBy=e,this.pagination.descending=!1)},columnValueList(e){return this.elements.map(t=>t[e])},columnChanged(e){this.cellInput=e},hideColumn(e){this.headers=this.headers.filter(t=>t.key!==e)},updateCell(e){if(this.$store.commit(b.CLEAR_ALERT),this.editedItem[e]!==this.cellInput){const t={id:this.editedItem.id,[e]:this.cellInput};this.$store.dispatch(A.SAVE_FORM,{item:t})}}}},De=["value"],be={key:1},Le={class:"w-100 d-flex justify-center my-5"};function pe(e,t,n,a,i,T){const o=V("ue-title"),v=V("v-btn-success"),p=V("ue-form"),c=V("ue-modal"),F=V("ue-recursive-stuff");return C((E(),S(ge,{fluid:""},{default:d(()=>[r(_e,P(e.$bindAttributes(),{class:"elevation-1",headers:e.headers,items:e.elements,loading:e.loading,options:e.options,"onUpdate:options":t[8]||(t[8]=s=>e.options=s),"items-per-page":e.options.itemsPerPage,"multi-sort":e.options.multiSort,"onUpdate:multiSort":t[9]||(t[9]=s=>e.options.multiSort=s),"must-sort":e.options.mustSort,"onUpdate:mustSort":t[10]||(t[10]=s=>e.options.mustSort=s),"items-length":e.totalElements,"item-title":e.titleKey,search:e.search,"footer-propss":{showFirstLastPage:!0,firstIcon:"mdi-arrow-collapse-left",lastIcon:"mdi-arrow-collapse-right",nextIcon:"mdi-chevron-right",prevIcon:"mdi-chevron-left"},"disable-pagination":!1,"disable-sort":!1,"loading-text":e.$t("fields.loading-text"),modelValue:e.selectedItems,"onUpdate:modelValue":t[11]||(t[11]=s=>e.selectedItems=s),"show-selected":"",sticky:"","fixed-header":"","fixed-footer":"",height:e.windowSize.y-64-24-59-36,density:"comfortable"}),x({top:d(()=>[r(Ee,{flat:""},{default:d(()=>[r(G,null,{default:d(()=>[j(e.$slots,"header",ee(te({tableTitle:e.tableTitle})),()=>[r(o,{text:e.tableTitle,classes:["ue-table-header","pt-12","pb-12"]},null,8,["text"])])]),_:3}),r(w,{class:"mx-4",inset:"",vertical:""}),r(fe,{modelValue:e.search,"onUpdate:modelValue":t[0]||(t[0]=s=>e.search=s),"append-inner-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":"",density:"compact",variant:"solo"},null,8,["modelValue"]),r(w,{class:"mx-4",inset:"",vertical:""}),C(r(G,null,{default:d(()=>[m(g(e.$t("fields.language-select"))+" ",1),C($("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>e.$i18n.locale=s)},[(E(!0),h(U,null,R(e.langs,(s,l)=>(E(),h("option",{key:`Lang${l}`,value:s},g(s),9,De))),128))],512),[[ae,e.$i18n.locale]])]),_:1},512),[[ne,!1]]),r(M,{"offset-y":"",rounded:"xs","open-on-hover":""},{activator:d(({props:s,isActive:l})=>[r(I,P(s,{variant:"elevated"}),{default:d(()=>[m(g(`${e.filterActive.name} (${e.filterActive.number})`)+" ",1),r(N),r(k,{right:"",style:se({transform:l?"rotate(-180deg)":"rotate(0)"})},{default:d(()=>[m("mdi-chevron-down")]),_:2},1032,["style"])]),_:2},1040)]),default:d(()=>[r(K,null,{default:d(()=>[(E(!0),h(U,null,R(e.mainFilters,(s,l)=>(E(),S(H,{key:l,onClick:oe(f=>e.filterStatus(s.slug),["prevent"])},{default:d(()=>[r(ce,null,{default:d(()=>[m(g(s.name+"("+s.number+")"),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1}),r(w,{class:"mx-4",inset:"",vertical:""}),r(N),(e.createOnModal||e.editOnModal)&&!e.noForm?j(e.$slots,"formDialog",{key:0},()=>[r(c,{ref:"formModal",modelValue:e.formActive,"onUpdate:modelValue":t[4]||(t[4]=s=>e.formActive=s),scrollable:"",transition:"dialog-bottom-transition","width-type":"lg"},{activator:d(({props:s})=>[e.can("create")&&e.createOnModal?(E(),S(v,P({key:0},s,{dark:""}),{default:d(()=>[m(g(e.$t("add-item",{item:e.transNameSingular})),1)]),_:2},1040)):B("",!0)]),body:d(s=>[r(z,null,{default:d(()=>[r(Y,{class:"text-h5 grey lighten-2"}),r(J,null,{default:d(()=>[r(p,{ref:"form",title:e.formTitle},null,8,["title"])]),_:1}),r(w),r(q,null,{default:d(()=>[r(N),r(I,{color:"error darken-1",text:"",onClick:t[2]||(t[2]=l=>e.closeForm())},{default:d(()=>[m(g(s.textCancel),1)]),_:2},1024),r(I,{color:"teal darken-1",text:"",onClick:t[3]||(t[3]=l=>e.confirmFormModal()),disabled:!e.formIsValid,loading:e.formLoading},{default:d(()=>[m(g(e.$t("fields.save")),1)]),_:1},8,["disabled","loading"])]),_:2},1024)]),_:2},1024)]),_:1},8,["modelValue"])]):B("",!0),e.createOnModal?B("",!0):(E(),S(v,{key:1,href:e.createUrl,target:"_blank",dark:""},{default:d(()=>[m(g(e.$t("add-item",{item:e.transNameSingular})),1)]),_:1},8,["href"])),r(c,{ref:"deleteModal",modelValue:e.deleteModalActive,"onUpdate:modelValue":t[7]||(t[7]=s=>e.deleteModalActive=s),transition:"dialog-bottom-transition","width-type":"sm"},{body:d(s=>[r(z,null,{default:d(()=>[r(Y,{class:"text-h5 text-center",style:{"word-break":"break-word"}}),r(J,{class:"text-center",style:{"word-break":"break-word"}},{default:d(()=>[m(g(e.deleteQuestion),1)]),_:1}),r(w),r(q,null,{default:d(()=>[r(N),r(I,{color:"blue",text:"",onClick:t[5]||(t[5]=l=>e.closeDeleteModal())},{default:d(()=>[m(g(s.textCancel),1)]),_:2},1024),r(I,{color:"blue",text:"",onClick:t[6]||(t[6]=l=>e.deleteRow())},{default:d(()=>[m(g(s.textConfirm),1)]),_:2},1024),r(N)]),_:2},1024)]),_:2},1024)]),_:1},8,["modelValue"])]),_:3})]),"header.actions":d(s=>[r(M,{"close-on-content-click":!1,"open-on-hover":"",left:""},{activator:d(({props:l})=>[r(k,P({size:"large",icon:"mdi-cog-outline"},l),null,16)]),_:1})]),"item.actions":d(({item:s})=>[e.rowActionsType=="dropdown"||e.isSmAndDown?(E(),S(M,{key:0,"close-on-content-click":!1,"open-on-hover":"",left:"","offset-x":""},{activator:d(({props:l})=>[r(k,P({size:"large",color:"primary",icon:"$list"},l),null,16)]),default:d(()=>[r(K,null,{default:d(()=>[(E(!0),h(U,null,R(e.rowActions,(l,f)=>(E(),h(U,{key:f},[e.itemHasAction(s,l)?(E(),S(H,{key:0,onClick:O=>e.itemAction(s,l.name)},{default:d(()=>[r(k,{small:"",color:l.color,left:""},{default:d(()=>[m(g(l.icon?l.icon:"$"+l.name),1)]),_:2},1032,["color"]),m(" "+g(e.$t(l.name)),1)]),_:2},1032,["onClick"])):B("",!0)],64))),128))]),_:2},1024)]),_:2},1024)):(E(),h("div",be,[(E(!0),h(U,null,R(e.rowActions,(l,f)=>(E(),h(U,{key:f},[e.itemHasAction(s,l)?(E(),S(me,{key:0,text:e.$t(l.label??l.name),location:"top"},{activator:d(({props:O})=>[r(k,P({small:"",class:"mr-2",onClick:y=>e.itemAction(s,l),color:l.color,ref_for:!0},O),{default:d(()=>[m(g(l.icon?l.icon:"$"+l.name),1)]),_:2},1040,["onClick","color"])]),_:2},1032,["text"])):B("",!0)],64))),128))]))]),_:2},[e.search!=""?{name:"no-data",fn:d(()=>[$("div",Le,[r(I,{color:"primary",onClick:e.initialize},{default:d(()=>[m(g(e.$t("fields.reset")),1)]),_:1},8,["onClick"])])]),key:"0"}:void 0,R(e.formatterColumns,(s,l)=>({name:`item.${s.key}`,fn:d(({item:f})=>[s.formatter=="edit"||s.formatter=="activate"?(E(),S(I,{key:l,class:"pa-0 justify-start",variant:"plain",color:"primary darken-1",onClick:O=>e.$call(s.formatter+"Item",f)},{default:d(()=>[m(g(f[s.key]),1)]),_:2},1032,["onClick"])):s.formatter=="switch"?(E(),S(Te,{key:l,"model-value":f[s.key],color:"success","true-value":1,"false-value":"0","hide-details":"","onUpdate:modelValue":O=>e.itemAction(f,"switch",O,s.key)},{label:d(()=>[]),_:2},1032,["model-value","onUpdate:modelValue"])):(E(),S(F,P({key:2},e.handleFormatter(s.formatter,f[s.key]),{key:f[s.key]}),null,16))])}))]),1040,["headers","items","loading","options","items-per-page","multi-sort","must-sort","items-length","item-title","search","loading-text","modelValue","height"])]),_:3})),[[Ae,e.onResize]])}const we=de(ve,[["render",pe]]);function Se(){const e="test";try{return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch{return!1}}function Q(e,t){const n="";Se()?localStorage.setItem(e,t):document.cookie=e+"="+t+n+"; path=/"}var L={BASE_URL:"/vendor/modularity",DEV:!1,MODE:"production",PROD:!0,SSR:!1};const X=(e,t,n)=>{e.forEach(a=>{a.id===t&&n(a),a.children&&X(a.children,t,n)})},W=(e,t=["id","children"],n="children")=>{const a=JSON.parse(JSON.stringify(e));return a.forEach(i=>{for(const T in i)t.includes(T)||delete i[T],T===n&&(i[T]=W(i[T]))}),a},he={baseUrl:window[L.VUE_APP_NAME].STORE.datatable.baseUrl||"",headers:window[L.VUE_APP_NAME].STORE.datatable.headers,search:window[L.VUE_APP_NAME].STORE.datatable.searchText??"",options:window[L.VUE_APP_NAME].STORE.datatable.options,data:window[L.VUE_APP_NAME].STORE.datatable.data||[],total:parseInt(window[L.VUE_APP_NAME].STORE.datatable.total),filter:window[L.VUE_APP_NAME].STORE.datatable.filter||{},mainFilters:window[L.VUE_APP_NAME].STORE.datatable.mainFilters||[],advancedFilters:window[L.VUE_APP_NAME].STORE.datatable.advancedFilters||[],bulk:[],loading:!1,updateTracker:0,customModal:_.isEmpty(window[L.VUE_APP_NAME].STORE.datatable.customModal)?!1:window[L.VUE_APP_NAME].STORE.datatable.customModal},Oe={activeHeaders:e=>{},totalElements:e=>e.total,totalPage:e=>Math.ceil(e.total/e.options.itemsPerPage),editableColumns:e=>e.headers.filter(t=>t.hasOwnProperty("isColumnEditable")&&t.isColumnEditable),rowEditables:e=>e.headers.filter(t=>t.hasOwnProperty("isRowEditable")&&t.isRowEditable),mainFilters:e=>e.mainFilters,advancedFilters:e=>(Object.entries(e.advancedFilters).forEach(([t,n])=>{n.map(a=>{var i;a.selecteds??(a.selecteds=(i=e.filter[t])==null?void 0:i[a.slug])})}),e.advancedFilters)},Pe={[u.UPDATE_DATATABLE_OPTIONS](e,t){e.options=t},[u.UPDATE_DATATABLE_SEARCH](e,t){e.search=t},[u.UPDATE_DATATABLE_TOTAL](e,t){e.total=t},[u.UPDATE_DATATABLE_DATA](e,t){e.bulk=[],e.data=t},[u.SET_DATATABLE_DIALOG](e,t){e.dialog=t},[u.UPDATE_DATATABLE_FILTER](e,t){e.filter=Object.assign({},e.filter,t)},[u.CLEAR_DATATABLE_FILTER](e){e.filter=Object.assign({},{search:"",status:e.filter.status})},[u.UPDATE_DATATABLE_FILTER_STATUS](e,t){e.filter.status=t},[u.UPDATE_DATATABLE_ADVANCED_FILTER](e,t){Object.keys(e.advancedFilters).forEach(function(n,a){e.filter[n]=e.advancedFilters[n].reduce((i,T)=>{var o;return((o=T.selecteds)==null?void 0:o.length)>0&&(i[T.slug]=T.selecteds),i},{})})},[u.RESET_DATATABLE_ADVANCED_FILTER](e){e.advancedFilters=Object.fromEntries(Object.entries(e.advancedFilters).map(([t,n])=>(e.filter[t]=[],n.map(a=>a.selecteds=[]),[t,n])))},[u.UPDATE_DATATABLE_BULK](e,t){e.bulk.indexOf(t)>-1?e.bulk=e.bulk.filter(function(n){return n!==t}):e.bulk.push(t)},[u.REPLACE_DATATABLE_BULK](e,t){e.bulk=t},[u.ADD_DATATABLE_COLUMN](e,t){e.columns.splice(t.index,0,t.data)},[u.REMOVE_DATATABLE_COLUMN](e,t){e.columns.forEach(function(n,a){n.name===t&&e.columns.splice(a,1)})},[u.UPDATE_DATATABLE_OFFSET](e,t){e.offset=t,Q(e.localStorageKey+"_page-offset",e.offset)},[u.UPDATE_DATATABLE_PAGE](e,t){},[u.UPDATE_DATATABLE_MAXPAGE](e,t){e.page>t&&(e.page=t),e.maxPage=t},[u.UPDATE_DATATABLE_VISIBLITY](e,t){Q(e.localStorageKey+"_columns-visible",JSON.stringify(t)),e.columns.forEach(function(n){for(let a=0;a<t.length;a++){if(t[a]===n.name){n.visible=!0;break}n.visible=!1}})},[u.UPDATE_DATATABLE_SORT](e,t){const n="asc";e.sortKey===t.name?e.sortDir=e.sortDir===n?"desc":n:e.sortDir=n,e.sortKey=t.name},[u.UPDATE_DATATABLE_NAV](e,t){t.forEach(function(n){e.mainFilters.forEach(function(a){a.name===n.name&&(a.number=n.number)})})},[u.PUBLISH_DATATABLE](e,t){const n=t.id,a=t.value;function i(o){o>=0&&(a==="toggle"?e.data[o].published=!e.data[o].published:e.data[o].published=a)}function T(o){return e.data.findIndex(function(v,p){return v.id===o})}if(Array.isArray(n))n.forEach(function(o){const v=T(o);i(v)}),e.bulk=[];else{const o=T(n);i(o)}},[u.FEATURE_DATATABLE](e,t){const n=t.id,a=t.value;function i(o){o>=0&&(a==="toggle"?e.data[o].featured=!e.data[o].featured:e.data[o].featured=a)}function T(o){return e.data.findIndex(function(v,p){return v.id===o})}if(Array.isArray(n))n.forEach(function(o){const v=T(o);i(v)}),e.bulk=[];else{const o=T(n);i(o)}},[u.UPDATE_DATATABLE_LOADING](e,t){e.loading=!e.loading},[u.UPDATE_DATATABLE_NESTED](e,t){X(e.data,t.parentId,n=>{n.children=t.val})},[u.UPDATE_DATATABLE_TRACKER](e,t){e.updateTracker=t?e.updateTracker+1:0}},Ie=(e,t)=>{let n=!0,a;return t.match(/sortBy|sortDesc/)?e.length>0?a=e:n=!1:t.match(/page|itemsPerPage|replaceUrl/)?a=e:n=!1,{active:n,value:a}},Ue={[A.GET_DATATABLE]({commit:e,state:t,getters:n},{payload:a={},callback:i=null,errorCallback:T=null,endpoint:o=null}={}){const v=Object.keys(a);let p=v.length===0;if(v.every(c=>(__isset(t[c])&&(__isObject(t[c])&&__isObject(a[c])?p=!Object.equals(a[c],t[c]):Array.isArray(a[c])&&Array.isArray(t[c])?p=!Array.equals(a[c],t[c]):p=t[c]!==a[c]),!p)),v.includes("options")&&(p=!0),p){e(u.UPDATE_DATATABLE_LOADING,!0);const c={...Object.keys(t.options).reduce(function(s,l){var y;const{active:f,value:O}=Ie(__isset((y=a.options)==null?void 0:y[l])?a==null?void 0:a.options[l]:t==null?void 0:t.options[l],l);return f&&(s[l]=O),s},{}),...t.search!==""?{search:t.search}:{},filter:Object.fromEntries(Object.entries(t.filter).reduce((s,[l,f])=>(l==="status"&&f==="all"||ie.isEmpty(f)||s.push([l,f]),s),[]))},F=o??window[L.VUE_APP_NAME].ENDPOINTS.index;D.get(F,c,function(s){const l=a.infiniteScroll?t.data.concat(s.resource.data):s.resource.data;e(u.UPDATE_DATATABLE_DATA,l),e(u.UPDATE_DATATABLE_TOTAL,s.resource.total),e(u.UPDATE_DATATABLE_NAV,s.mainFilters),e(u.UPDATE_DATATABLE_LOADING,!1),__isset(a.options)&&e(u.UPDATE_DATATABLE_OPTIONS,a.options),__isset(a.search)&&e(u.UPDATE_DATATABLE_SEARCH,a.search),i&&typeof i=="function"&&i(s)},function(s){e(u.UPDATE_DATATABLE_LOADING,!1),T&&typeof T=="function"&&T(s)})}},[A.SET_DATATABLE_NESTED]({commit:e,state:t,dispatch:n}){const a=W(t.data);D.reorder(a,function(i){e(NOTIFICATION.SET_NOTIF,{message:i.data.message,variant:i.data.variant})})},[A.SET_DATATABLE]({commit:e,state:t,dispatch:n}){const a=t.data.map(i=>i.id);D.reorder(a,function(i){e(NOTIFICATION.SET_NOTIF,{message:i.data.message,variant:i.data.variant})})},[A.TOGGLE_PUBLISH]({commit:e,state:t,dispatch:n},a){D.togglePublished(a,function(i){e(NOTIFICATION.SET_NOTIF,{message:i.data.message,variant:i.data.variant}),n(A.GET_DATATABLE)},function(i){e(NOTIFICATION.SET_NOTIF,{message:i.data.error.message,variant:"error"})})},[A.DELETE_ITEM]({commit:e,state:t,dispatch:n},{id:a=null,callback:i=null,errorCallback:T=null}={}){D.delete(a,function(o){e(b.SET_ALERT,{message:o.data.message,variant:o.data.variant}),o.data.variant.toLowerCase()==="success"?(n(A.GET_DATATABLE),i(o.data)):T(o.data)},function(o){__log("400 response",o),Object.prototype.hasOwnProperty.call(o.data,"exception")?e(b.SET_ALERT,{message:"Your submission could not be processed.",variant:"error"}):(n(A.HANDLE_ERRORS,o.data),e(b.SET_ALERT,{message:"Your submission could not be validated, please fix and retry",variant:"error"}))})},[A.DUPLICATE_ITEM]({commit:e,state:t,dispatch:n},a){D.duplicate(a.id,function(i){e(b.SET_ALERT,{message:i.data.message,variant:i.data.variant}),n(A.GET_DATATABLE),ue(i.data)})},[A.RESTORE_ITEM]({commit:e,state:t,dispatch:n},{id:a=null,callback:i=null,errorCallback:T=null}){D.restore(a,function(o){e(b.SET_ALERT,{message:o.data.message,variant:o.data.variant}),o.data.variant.toLowerCase()==="success"?(n(A.GET_DATATABLE),i(o.data)):T(o.data),n(A.GET_DATATABLE)},function(o){__log("400 response",o),Object.prototype.hasOwnProperty.call(o.data,"exception")?e(b.SET_ALERT,{message:"Your submission could not be processed.",variant:"error"}):(n(A.HANDLE_ERRORS,o.data),e(b.SET_ALERT,{message:"Your submission could not be validated, please fix and retry",variant:"error"}))})},[A.DESTROY_ITEM]({commit:e,state:t,dispatch:n},{id:a=null,callback:i=null,errorCallback:T=null}){D.forceDelete(a,function(o){__log(o),e(b.SET_ALERT,{message:o.data.message,variant:o.data.variant}),o.data.variant.toLowerCase()==="success"?(n(A.GET_DATATABLE),i(o.data)):T(o.data),n(A.GET_DATATABLE)},function(o){__log("400 response",o),Object.prototype.hasOwnProperty.call(o.data,"exception")?e(b.SET_ALERT,{message:"Your submission could not be processed.",variant:"error"}):(n(A.HANDLE_ERRORS,o.data),e(b.SET_ALERT,{message:"Your submission could not be validated, please fix and retry",variant:"error"}))})},[A.BULK_PUBLISH]({commit:e,state:t,dispatch:n},a){D.bulkPublish({ids:t.bulk.join(),toPublish:a.toPublish},function(i){e(NOTIFICATION.SET_NOTIF,{message:i.data.message,variant:i.data.variant}),n(A.GET_DATATABLE)})},[A.TOGGLE_FEATURE]({commit:e,state:t},n){D.toggleFeatured(n,a=>{e(u.FEATURE_DATATABLE,{id:n.id,value:"toggle"}),e(NOTIFICATION.SET_NOTIF,{message:a.data.message,variant:a.data.variant})})},[A.BULK_FEATURE]({commit:e,state:t},n){D.bulkFeature({ids:t.bulk.join(),toFeature:n.toFeature},function(a){e(u.FEATURE_DATATABLE,{id:t.bulk,value:!0}),e(NOTIFICATION.SET_NOTIF,{message:a.data.message,variant:a.data.variant})})},[A.BULK_DELETE]({commit:e,state:t,dispatch:n}){D.bulkDelete(t.bulk.join(),function(a){e(b.SET_ALERT,{message:a.data.message,variant:a.data.variant}),n(A.GET_DATATABLE)})},[A.BULK_RESTORE]({commit:e,state:t,dispatch:n}){D.bulkRestore(t.bulk.join(),function(a){e(b.SET_ALERT,{message:a.data.message,variant:a.data.variant}),n(A.GET_DATATABLE)})},[A.BULK_DESTROY]({commit:e,state:t,dispatch:n}){D.bulkDestroy(t.bulk.join(),function(a){e(b.SET_ALERT,{message:a.data.message,variant:a.data.variant}),n(A.GET_DATATABLE)})},[A.CHECK_MODAL_STATUS]({commit:e,state:t}){t.customModalInitialState&&e(u.UPDATE_MODAL_ACTIVE,!0)}},Ne={state:he,getters:Oe,actions:Ue,mutations:Pe};export{we as U,Ne as d};
//# sourceMappingURL=datatable.sFG-BS1f.js.map
