import{$ as K,Y as v,H as w,a0 as i,a1 as T,a2 as s,l as o,a3 as q,a4 as y,S as u,I as A,a5 as h,A as p,a6 as R,a7 as Q,a8 as W,a9 as f,F as L,aa as X,L as J,ab as Z,W as x,ac as U,ad as ee}from"./vendor.CITt4hbT.js";import{u as te,m as ae,A as le,d as Y,e as oe,g as se}from"./form.DUzdE2AY.js";import{R as ne,V as E,a as ie,b as re,c as M,d as B,e as de,f as $,g as S,h as V,i as F,j as N,k as ue,l as j,m as G,n as z,o as H,p as Ae,q as Te,r as me}from"./vuetify.MJcOhX-K.js";const fe="updateDatableData",De="updateDatableBulk",ce="replaceDatableBulk",pe="addDatableColumn",Ee="removeDatableColumn",be="updateDatableOffset",Le="updateDatablePage",ge="updateDatableMaxPage",ve="updateDatableNavigation",he="updateDatableVisibility",_e="updateDatableSort",Ue="publishDatatable",Be="featureDatatable",Se="updateDatableFilter",Ve="updateDatableFilterStatus",Pe="clearDatableFilter",ke="updateDatableMessage",Ie="updateDatableLoading",Oe="updateDatatableNestedDatas",Ce="updateDatableTracker",we="updateDatableOptions",$e="updateDatableSearch",ye="updateDatableTotal",Re="setDatableDialog",Me="updateDatatableAdvancedFilter",Fe="resetDatatableAdvancedFilter",D={UPDATE_DATATABLE_OPTIONS:we,UPDATE_DATATABLE_SEARCH:$e,UPDATE_DATATABLE_TOTAL:ye,SET_DATATABLE_DIALOG:Re,UPDATE_DATATABLE_DATA:fe,UPDATE_DATATABLE_BULK:De,REPLACE_DATATABLE_BULK:ce,ADD_DATATABLE_COLUMN:pe,REMOVE_DATATABLE_COLUMN:Ee,UPDATE_DATATABLE_OFFSET:be,UPDATE_DATATABLE_PAGE:Le,UPDATE_DATATABLE_MAXPAGE:ge,UPDATE_DATATABLE_NAV:ve,UPDATE_DATATABLE_VISIBLITY:he,UPDATE_DATATABLE_SORT:_e,PUBLISH_DATATABLE:Ue,FEATURE_DATATABLE:Be,UPDATE_DATATABLE_FILTER:Se,UPDATE_DATATABLE_FILTER_STATUS:Ve,CLEAR_DATATABLE_FILTER:Pe,UPDATE_DATATABLE_MESSAGE:ke,UPDATE_DATATABLE_LOADING:Ie,UPDATE_DATATABLE_NESTED:Oe,UPDATE_DATATABLE_TRACKER:Ce,UPDATE_DATATABLE_ADVANCED_FILTER:Me,RESET_DATATABLE_ADVANCED_FILTER:Fe},Ne={setup(e,a){return{...te(e,a)}},props:{...ae()},data:function(){return{langs:["tr","en"],cellInput:""}},computed:{...K({})},created(){},watch:{},methods:{changeSort(e){this.pagination.sortBy===e?this.pagination.descending=!this.pagination.descending:(this.pagination.sortBy=e,this.pagination.descending=!1)},columnValueList(e){return this.elements.map(a=>a[e])},columnChanged(e){this.cellInput=e},hideColumn(e){this.headers=this.headers.filter(a=>a.key!==e)},updateCell(e){if(this.$store.commit(le.CLEAR_ALERT),this.editedItem[e]!==this.cellInput){const a={id:this.editedItem.id,[e]:this.cellInput};this.$store.dispatch(Y.SAVE_FORM,{item:a})}}}},je=["value"],Ge={key:1},ze={class:"w-100 d-flex justify-center my-5"};function He(e,a,g,n,P,k){const I=v("ue-title"),b=v("v-btn-success"),m=v("ue-form"),d=v("ue-modal"),O=v("ue-recursive-stuff");return w((i(),T(me,{fluid:""},{default:s(()=>[o(Te,p(e.$bindAttributes(),{class:"elevation-1",headers:e.headers,items:e.elements,loading:e.loading,options:e.options,"onUpdate:options":a[8]||(a[8]=t=>e.options=t),"items-per-page":e.options.itemsPerPage,"multi-sort":e.options.multiSort,"onUpdate:multiSort":a[9]||(a[9]=t=>e.options.multiSort=t),"must-sort":e.options.mustSort,"onUpdate:mustSort":a[10]||(a[10]=t=>e.options.mustSort=t),"items-length":e.totalElements,"item-title":e.titleKey,search:e.search,"footer-propss":{showFirstLastPage:!0,firstIcon:"mdi-arrow-collapse-left",lastIcon:"mdi-arrow-collapse-right",nextIcon:"mdi-chevron-right",prevIcon:"mdi-chevron-left"},"disable-pagination":!1,"disable-sort":!1,"loading-text":e.$t("fields.loading-text"),modelValue:e.selectedItems,"onUpdate:modelValue":a[11]||(a[11]=t=>e.selectedItems=t),"show-selected":"",sticky:"","fixed-header":"","fixed-footer":"",height:e.windowSize.y-64-24-59-36,density:"comfortable"}),q({top:s(()=>[o(re,{flat:""},{default:s(()=>[o(M,null,{default:s(()=>[R(e.$slots,"header",Q(W({tableTitle:e.tableTitle})),()=>[o(I,{text:e.tableTitle,classes:["ue-table-header","pt-12","pb-12"]},null,8,["text"])])]),_:3}),o(B,{class:"mx-4",inset:"",vertical:""}),o(de,{modelValue:e.search,"onUpdate:modelValue":a[0]||(a[0]=t=>e.search=t),"append-inner-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":"",density:"compact",variant:"solo"},null,8,["modelValue"]),o(B,{class:"mx-4",inset:"",vertical:""}),w(o(M,null,{default:s(()=>[u(A(e.$t("fields.language-select"))+" ",1),w(y("select",{"onUpdate:modelValue":a[1]||(a[1]=t=>e.$i18n.locale=t)},[(i(!0),f(L,null,h(e.langs,(t,l)=>(i(),f("option",{key:`Lang${l}`,value:t},A(t),9,je))),128))],512),[[X,e.$i18n.locale]])]),_:1},512),[[J,!1]]),o($,{"offset-y":"",rounded:"xs","open-on-hover":""},{activator:s(({props:t,isActive:l})=>[o(E,p(t,{variant:"elevated"}),{default:s(()=>[u(A(`${e.filterActive.name} (${e.filterActive.number})`)+" ",1),o(S),o(V,{right:"",style:Z({transform:l?"rotate(-180deg)":"rotate(0)"})},{default:s(()=>a[12]||(a[12]=[u("mdi-chevron-down")])),_:2},1032,["style"])]),_:2},1040)]),default:s(()=>[o(F,null,{default:s(()=>[(i(!0),f(L,null,h(e.mainFilters,(t,l)=>(i(),T(N,{key:l,onClick:x(r=>e.filterStatus(t.slug),["prevent"])},{default:s(()=>[o(ue,null,{default:s(()=>[u(A(t.name+"("+t.number+")"),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1}),o(B,{class:"mx-4",inset:"",vertical:""}),o(S),(e.createOnModal||e.editOnModal)&&!e.noForm?R(e.$slots,"formDialog",{key:0},()=>[o(d,{ref:"formModal",modelValue:e.formActive,"onUpdate:modelValue":a[4]||(a[4]=t=>e.formActive=t),scrollable:"",transition:"dialog-bottom-transition","width-type":"lg"},{activator:s(({props:t})=>[e.can("create")&&e.createOnModal?(i(),T(b,p({key:0},t,{dark:""}),{default:s(()=>[u(A(e.$t("add-item",{item:e.transNameSingular})),1)]),_:2},1040)):U("",!0)]),body:s(t=>[o(j,null,{default:s(()=>[o(G,{class:"text-h5 grey lighten-2"}),o(z,null,{default:s(()=>[o(m,{ref:"form",title:e.formTitle},null,8,["title"])]),_:1}),o(B),o(H,null,{default:s(()=>[o(S),o(E,{color:"error darken-1",text:"",onClick:a[2]||(a[2]=l=>e.closeForm())},{default:s(()=>[u(A(t.textCancel),1)]),_:2},1024),o(E,{color:"teal darken-1",text:"",onClick:a[3]||(a[3]=l=>e.confirmFormModal()),disabled:!e.formIsValid,loading:e.formLoading},{default:s(()=>[u(A(e.$t("fields.save")),1)]),_:1},8,["disabled","loading"])]),_:2},1024)]),_:2},1024)]),_:1},8,["modelValue"])]):U("",!0),e.createOnModal?U("",!0):(i(),T(b,{key:1,href:e.createUrl,target:"_blank",dark:""},{default:s(()=>[u(A(e.$t("add-item",{item:e.transNameSingular})),1)]),_:1},8,["href"])),o(d,{ref:"deleteModal",modelValue:e.deleteModalActive,"onUpdate:modelValue":a[7]||(a[7]=t=>e.deleteModalActive=t),transition:"dialog-bottom-transition","width-type":"sm"},{body:s(t=>[o(j,null,{default:s(()=>[o(G,{class:"text-h5 text-center",style:{"word-break":"break-word"}}),o(z,{class:"text-center",style:{"word-break":"break-word"}},{default:s(()=>[u(A(e.deleteQuestion),1)]),_:1}),o(B),o(H,null,{default:s(()=>[o(S),o(E,{color:"blue",text:"",onClick:a[5]||(a[5]=l=>e.closeDeleteModal())},{default:s(()=>[u(A(t.textCancel),1)]),_:2},1024),o(E,{color:"blue",text:"",onClick:a[6]||(a[6]=l=>e.deleteRow())},{default:s(()=>[u(A(t.textConfirm),1)]),_:2},1024),o(S)]),_:2},1024)]),_:2},1024)]),_:1},8,["modelValue"])]),_:3})]),"header.actions":s(t=>[o($,{"close-on-content-click":!1,"open-on-hover":"",left:""},{activator:s(({props:l})=>[o(V,p({size:"large",icon:"mdi-cog-outline"},l),null,16)]),_:1})]),"item.actions":s(({item:t})=>[e.rowActionsType=="dropdown"||e.isSmAndDown?(i(),T($,{key:0,"close-on-content-click":!1,"open-on-hover":"",left:"","offset-x":""},{activator:s(({props:l})=>[o(V,p({size:"large",color:"primary",icon:"$list"},l),null,16)]),default:s(()=>[o(F,null,{default:s(()=>[(i(!0),f(L,null,h(e.rowActions,(l,r)=>(i(),f(L,{key:r},[e.itemHasAction(t,l)?(i(),T(N,{key:0,onClick:c=>e.itemAction(t,l.name)},{default:s(()=>[o(V,{small:"",color:l.color,left:""},{default:s(()=>[u(A(l.icon?l.icon:"$"+l.name),1)]),_:2},1032,["color"]),u(" "+A(e.$t(l.name)),1)]),_:2},1032,["onClick"])):U("",!0)],64))),128))]),_:2},1024)]),_:2},1024)):(i(),f("div",Ge,[(i(!0),f(L,null,h(e.rowActions,(l,r)=>(i(),f(L,{key:r},[e.itemHasAction(t,l)?(i(),T(Ae,{key:0,text:e.$t(l.label??l.name),location:"top"},{activator:s(({props:c})=>[o(V,p({small:"",class:"mr-2",onClick:C=>e.itemAction(t,l),color:l.color,ref_for:!0},c),{default:s(()=>[u(A(l.icon?l.icon:"$"+l.name),1)]),_:2},1040,["onClick","color"])]),_:2},1032,["text"])):U("",!0)],64))),128))]))]),_:2},[e.search!=""?{name:"no-data",fn:s(()=>[y("div",ze,[o(E,{color:"primary",onClick:e.initialize},{default:s(()=>[u(A(e.$t("fields.reset")),1)]),_:1},8,["onClick"])])]),key:"0"}:void 0,h(e.formatterColumns,(t,l)=>({name:`item.${t.key}`,fn:s(({item:r})=>[t.formatter=="edit"||t.formatter=="activate"?(i(),T(E,{key:l,class:"pa-0 justify-start",variant:"plain",color:"primary darken-1",onClick:c=>e.$call(t.formatter+"Item",r)},{default:s(()=>[u(A(r[t.key]),1)]),_:2},1032,["onClick"])):t.formatter=="switch"?(i(),T(ie,{key:l,"model-value":r[t.key],color:"success","true-value":1,"false-value":"0","hide-details":"","onUpdate:modelValue":c=>e.itemAction(r,"switch",c,t.key)},{label:s(()=>a[13]||(a[13]=[])),_:2},1032,["model-value","onUpdate:modelValue"])):(i(),T(O,p({key:2},e.handleFormatter(t.formatter,r[t.key]),{key:r[t.key]}),null,16))])}))]),1040,["headers","items","loading","options","items-per-page","multi-sort","must-sort","items-length","item-title","search","loading-text","modelValue","height"])]),_:3})),[[ne,e.onResize]])}const xe=oe(Ne,[["render",He]]),Ye={advancedFilters:window.MODULARITY.STORE.datatable.advancedFilters||[],customModal:_.isEmpty(window.MODULARITY.STORE.datatable.customModal)?!1:window.MODULARITY.STORE.datatable.customModal},Ke={},qe={},Qe=(e,a)=>{let g=!0,n;return a.match(/sortBy|sortDesc/)?e.length>0?n=e:g=!1:a.match(/page|itemsPerPage|replaceUrl/)?n=e:g=!1,{active:g,value:n}},We={[Y.GET_DATATABLE]({commit:e,state:a,getters:g},{payload:n={},callback:P=null,errorCallback:k=null,endpoint:I=null}={}){const b=Object.keys(n);let m=b.length===0;if(b.every(d=>(__isset(a[d])&&(__isObject(a[d])&&__isObject(n[d])?m=!Object.equals(n[d],a[d]):Array.isArray(n[d])&&Array.isArray(a[d])?m=!Array.equals(n[d],a[d]):m=a[d]!==n[d]),!m)),b.includes("options")&&(m=!0),m){e(D.UPDATE_DATATABLE_LOADING,!0);const d={...Object.keys(a.options).reduce(function(t,l){var C;const{active:r,value:c}=Qe(__isset((C=n.options)==null?void 0:C[l])?n==null?void 0:n.options[l]:a==null?void 0:a.options[l],l);return r&&(t[l]=c),t},{}),...a.search!==""?{search:a.search}:{},filter:Object.fromEntries(Object.entries(a.filter).reduce((t,[l,r])=>(l==="status"&&r==="all"||ee(r)||t.push([l,r]),t),[]))},O=I??window.MODULARITY.ENDPOINTS.index;se.get(O,d,function(t){const l=n.infiniteScroll?a.data.concat(t.resource.data):t.resource.data;e(D.UPDATE_DATATABLE_DATA,l),e(D.UPDATE_DATATABLE_TOTAL,t.resource.total),e(D.UPDATE_DATATABLE_NAV,t.mainFilters),e(D.UPDATE_DATATABLE_LOADING,!1),__isset(n.options)&&e(D.UPDATE_DATATABLE_OPTIONS,n.options),__isset(n.search)&&e(D.UPDATE_DATATABLE_SEARCH,n.search),P&&typeof P=="function"&&P(t)},function(t){e(D.UPDATE_DATATABLE_LOADING,!1),k&&typeof k=="function"&&k(t)})}}},et={state:Ye,getters:Ke,actions:We,mutations:qe};export{xe as U,et as d};
//# sourceMappingURL=datatable.DHRLi3KU.js.map
