{"version":3,"file":"fine-uploader.C_FDpdrq.js","sources":["../../../node_modules/fine-uploader/dnd/dnd.js","../../../node_modules/fine-uploader/lib/dnd.js","../../../node_modules/fine-uploader/s3.fine-uploader/s3.fine-uploader.core.js","../../../node_modules/fine-uploader/lib/core/s3.js","../../../node_modules/fine-uploader/azure.fine-uploader/azure.fine-uploader.core.js","../../../node_modules/fine-uploader/lib/core/azure.js","../../../node_modules/fine-uploader/fine-uploader/fine-uploader.core.js","../../../node_modules/fine-uploader/lib/core/index.js"],"sourcesContent":["// Fine Uploader 5.16.2 - MIT licensed. http://fineuploader.com\n(function(global) {\n    var qq = function(element) {\n        \"use strict\";\n        return {\n            hide: function() {\n                element.style.display = \"none\";\n                return this;\n            },\n            attach: function(type, fn) {\n                if (element.addEventListener) {\n                    element.addEventListener(type, fn, false);\n                } else if (element.attachEvent) {\n                    element.attachEvent(\"on\" + type, fn);\n                }\n                return function() {\n                    qq(element).detach(type, fn);\n                };\n            },\n            detach: function(type, fn) {\n                if (element.removeEventListener) {\n                    element.removeEventListener(type, fn, false);\n                } else if (element.attachEvent) {\n                    element.detachEvent(\"on\" + type, fn);\n                }\n                return this;\n            },\n            contains: function(descendant) {\n                if (!descendant) {\n                    return false;\n                }\n                if (element === descendant) {\n                    return true;\n                }\n                if (element.contains) {\n                    return element.contains(descendant);\n                } else {\n                    return !!(descendant.compareDocumentPosition(element) & 8);\n                }\n            },\n            insertBefore: function(elementB) {\n                elementB.parentNode.insertBefore(element, elementB);\n                return this;\n            },\n            remove: function() {\n                element.parentNode.removeChild(element);\n                return this;\n            },\n            css: function(styles) {\n                if (element.style == null) {\n                    throw new qq.Error(\"Can't apply style to node as it is not on the HTMLElement prototype chain!\");\n                }\n                if (styles.opacity != null) {\n                    if (typeof element.style.opacity !== \"string\" && typeof element.filters !== \"undefined\") {\n                        styles.filter = \"alpha(opacity=\" + Math.round(100 * styles.opacity) + \")\";\n                    }\n                }\n                qq.extend(element.style, styles);\n                return this;\n            },\n            hasClass: function(name, considerParent) {\n                var re = new RegExp(\"(^| )\" + name + \"( |$)\");\n                return re.test(element.className) || !!(considerParent && re.test(element.parentNode.className));\n            },\n            addClass: function(name) {\n                if (!qq(element).hasClass(name)) {\n                    element.className += \" \" + name;\n                }\n                return this;\n            },\n            removeClass: function(name) {\n                var re = new RegExp(\"(^| )\" + name + \"( |$)\");\n                element.className = element.className.replace(re, \" \").replace(/^\\s+|\\s+$/g, \"\");\n                return this;\n            },\n            getByClass: function(className, first) {\n                var candidates, result = [];\n                if (first && element.querySelector) {\n                    return element.querySelector(\".\" + className);\n                } else if (element.querySelectorAll) {\n                    return element.querySelectorAll(\".\" + className);\n                }\n                candidates = element.getElementsByTagName(\"*\");\n                qq.each(candidates, function(idx, val) {\n                    if (qq(val).hasClass(className)) {\n                        result.push(val);\n                    }\n                });\n                return first ? result[0] : result;\n            },\n            getFirstByClass: function(className) {\n                return qq(element).getByClass(className, true);\n            },\n            children: function() {\n                var children = [], child = element.firstChild;\n                while (child) {\n                    if (child.nodeType === 1) {\n                        children.push(child);\n                    }\n                    child = child.nextSibling;\n                }\n                return children;\n            },\n            setText: function(text) {\n                element.innerText = text;\n                element.textContent = text;\n                return this;\n            },\n            clearText: function() {\n                return qq(element).setText(\"\");\n            },\n            hasAttribute: function(attrName) {\n                var attrVal;\n                if (element.hasAttribute) {\n                    if (!element.hasAttribute(attrName)) {\n                        return false;\n                    }\n                    return /^false$/i.exec(element.getAttribute(attrName)) == null;\n                } else {\n                    attrVal = element[attrName];\n                    if (attrVal === undefined) {\n                        return false;\n                    }\n                    return /^false$/i.exec(attrVal) == null;\n                }\n            }\n        };\n    };\n    (function() {\n        \"use strict\";\n        qq.canvasToBlob = function(canvas, mime, quality) {\n            return qq.dataUriToBlob(canvas.toDataURL(mime, quality));\n        };\n        qq.dataUriToBlob = function(dataUri) {\n            var arrayBuffer, byteString, createBlob = function(data, mime) {\n                var BlobBuilder = window.BlobBuilder || window.WebKitBlobBuilder || window.MozBlobBuilder || window.MSBlobBuilder, blobBuilder = BlobBuilder && new BlobBuilder();\n                if (blobBuilder) {\n                    blobBuilder.append(data);\n                    return blobBuilder.getBlob(mime);\n                } else {\n                    return new Blob([ data ], {\n                        type: mime\n                    });\n                }\n            }, intArray, mimeString;\n            if (dataUri.split(\",\")[0].indexOf(\"base64\") >= 0) {\n                byteString = atob(dataUri.split(\",\")[1]);\n            } else {\n                byteString = decodeURI(dataUri.split(\",\")[1]);\n            }\n            mimeString = dataUri.split(\",\")[0].split(\":\")[1].split(\";\")[0];\n            arrayBuffer = new ArrayBuffer(byteString.length);\n            intArray = new Uint8Array(arrayBuffer);\n            qq.each(byteString, function(idx, character) {\n                intArray[idx] = character.charCodeAt(0);\n            });\n            return createBlob(arrayBuffer, mimeString);\n        };\n        qq.log = function(message, level) {\n            if (window.console) {\n                if (!level || level === \"info\") {\n                    window.console.log(message);\n                } else {\n                    if (window.console[level]) {\n                        window.console[level](message);\n                    } else {\n                        window.console.log(\"<\" + level + \"> \" + message);\n                    }\n                }\n            }\n        };\n        qq.isObject = function(variable) {\n            return variable && !variable.nodeType && Object.prototype.toString.call(variable) === \"[object Object]\";\n        };\n        qq.isFunction = function(variable) {\n            return typeof variable === \"function\";\n        };\n        qq.isArray = function(value) {\n            return Object.prototype.toString.call(value) === \"[object Array]\" || value && window.ArrayBuffer && value.buffer && value.buffer.constructor === ArrayBuffer;\n        };\n        qq.isItemList = function(maybeItemList) {\n            return Object.prototype.toString.call(maybeItemList) === \"[object DataTransferItemList]\";\n        };\n        qq.isNodeList = function(maybeNodeList) {\n            return Object.prototype.toString.call(maybeNodeList) === \"[object NodeList]\" || maybeNodeList.item && maybeNodeList.namedItem;\n        };\n        qq.isString = function(maybeString) {\n            return Object.prototype.toString.call(maybeString) === \"[object String]\";\n        };\n        qq.trimStr = function(string) {\n            if (String.prototype.trim) {\n                return string.trim();\n            }\n            return string.replace(/^\\s+|\\s+$/g, \"\");\n        };\n        qq.format = function(str) {\n            var args = Array.prototype.slice.call(arguments, 1), newStr = str, nextIdxToReplace = newStr.indexOf(\"{}\");\n            qq.each(args, function(idx, val) {\n                var strBefore = newStr.substring(0, nextIdxToReplace), strAfter = newStr.substring(nextIdxToReplace + 2);\n                newStr = strBefore + val + strAfter;\n                nextIdxToReplace = newStr.indexOf(\"{}\", nextIdxToReplace + val.length);\n                if (nextIdxToReplace < 0) {\n                    return false;\n                }\n            });\n            return newStr;\n        };\n        qq.isFile = function(maybeFile) {\n            return window.File && Object.prototype.toString.call(maybeFile) === \"[object File]\";\n        };\n        qq.isFileList = function(maybeFileList) {\n            return window.FileList && Object.prototype.toString.call(maybeFileList) === \"[object FileList]\";\n        };\n        qq.isFileOrInput = function(maybeFileOrInput) {\n            return qq.isFile(maybeFileOrInput) || qq.isInput(maybeFileOrInput);\n        };\n        qq.isInput = function(maybeInput, notFile) {\n            var evaluateType = function(type) {\n                var normalizedType = type.toLowerCase();\n                if (notFile) {\n                    return normalizedType !== \"file\";\n                }\n                return normalizedType === \"file\";\n            };\n            if (window.HTMLInputElement) {\n                if (Object.prototype.toString.call(maybeInput) === \"[object HTMLInputElement]\") {\n                    if (maybeInput.type && evaluateType(maybeInput.type)) {\n                        return true;\n                    }\n                }\n            }\n            if (maybeInput.tagName) {\n                if (maybeInput.tagName.toLowerCase() === \"input\") {\n                    if (maybeInput.type && evaluateType(maybeInput.type)) {\n                        return true;\n                    }\n                }\n            }\n            return false;\n        };\n        qq.isBlob = function(maybeBlob) {\n            if (window.Blob && Object.prototype.toString.call(maybeBlob) === \"[object Blob]\") {\n                return true;\n            }\n        };\n        qq.isXhrUploadSupported = function() {\n            var input = document.createElement(\"input\");\n            input.type = \"file\";\n            return input.multiple !== undefined && typeof File !== \"undefined\" && typeof FormData !== \"undefined\" && typeof qq.createXhrInstance().upload !== \"undefined\";\n        };\n        qq.createXhrInstance = function() {\n            if (window.XMLHttpRequest) {\n                return new XMLHttpRequest();\n            }\n            try {\n                return new ActiveXObject(\"MSXML2.XMLHTTP.3.0\");\n            } catch (error) {\n                qq.log(\"Neither XHR or ActiveX are supported!\", \"error\");\n                return null;\n            }\n        };\n        qq.isFolderDropSupported = function(dataTransfer) {\n            return dataTransfer.items && dataTransfer.items.length > 0 && dataTransfer.items[0].webkitGetAsEntry;\n        };\n        qq.isFileChunkingSupported = function() {\n            return !qq.androidStock() && qq.isXhrUploadSupported() && (File.prototype.slice !== undefined || File.prototype.webkitSlice !== undefined || File.prototype.mozSlice !== undefined);\n        };\n        qq.sliceBlob = function(fileOrBlob, start, end) {\n            var slicer = fileOrBlob.slice || fileOrBlob.mozSlice || fileOrBlob.webkitSlice;\n            return slicer.call(fileOrBlob, start, end);\n        };\n        qq.arrayBufferToHex = function(buffer) {\n            var bytesAsHex = \"\", bytes = new Uint8Array(buffer);\n            qq.each(bytes, function(idx, byt) {\n                var byteAsHexStr = byt.toString(16);\n                if (byteAsHexStr.length < 2) {\n                    byteAsHexStr = \"0\" + byteAsHexStr;\n                }\n                bytesAsHex += byteAsHexStr;\n            });\n            return bytesAsHex;\n        };\n        qq.readBlobToHex = function(blob, startOffset, length) {\n            var initialBlob = qq.sliceBlob(blob, startOffset, startOffset + length), fileReader = new FileReader(), promise = new qq.Promise();\n            fileReader.onload = function() {\n                promise.success(qq.arrayBufferToHex(fileReader.result));\n            };\n            fileReader.onerror = promise.failure;\n            fileReader.readAsArrayBuffer(initialBlob);\n            return promise;\n        };\n        qq.extend = function(first, second, extendNested) {\n            qq.each(second, function(prop, val) {\n                if (extendNested && qq.isObject(val)) {\n                    if (first[prop] === undefined) {\n                        first[prop] = {};\n                    }\n                    qq.extend(first[prop], val, true);\n                } else {\n                    first[prop] = val;\n                }\n            });\n            return first;\n        };\n        qq.override = function(target, sourceFn) {\n            var super_ = {}, source = sourceFn(super_);\n            qq.each(source, function(srcPropName, srcPropVal) {\n                if (target[srcPropName] !== undefined) {\n                    super_[srcPropName] = target[srcPropName];\n                }\n                target[srcPropName] = srcPropVal;\n            });\n            return target;\n        };\n        qq.indexOf = function(arr, elt, from) {\n            if (arr.indexOf) {\n                return arr.indexOf(elt, from);\n            }\n            from = from || 0;\n            var len = arr.length;\n            if (from < 0) {\n                from += len;\n            }\n            for (;from < len; from += 1) {\n                if (arr.hasOwnProperty(from) && arr[from] === elt) {\n                    return from;\n                }\n            }\n            return -1;\n        };\n        qq.getUniqueId = function() {\n            return \"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(/[xy]/g, function(c) {\n                var r = Math.random() * 16 | 0, v = c == \"x\" ? r : r & 3 | 8;\n                return v.toString(16);\n            });\n        };\n        qq.ie = function() {\n            return navigator.userAgent.indexOf(\"MSIE\") !== -1 || navigator.userAgent.indexOf(\"Trident\") !== -1;\n        };\n        qq.ie7 = function() {\n            return navigator.userAgent.indexOf(\"MSIE 7\") !== -1;\n        };\n        qq.ie8 = function() {\n            return navigator.userAgent.indexOf(\"MSIE 8\") !== -1;\n        };\n        qq.ie10 = function() {\n            return navigator.userAgent.indexOf(\"MSIE 10\") !== -1;\n        };\n        qq.ie11 = function() {\n            return qq.ie() && navigator.userAgent.indexOf(\"rv:11\") !== -1;\n        };\n        qq.edge = function() {\n            return navigator.userAgent.indexOf(\"Edge\") >= 0;\n        };\n        qq.safari = function() {\n            return navigator.vendor !== undefined && navigator.vendor.indexOf(\"Apple\") !== -1;\n        };\n        qq.chrome = function() {\n            return navigator.vendor !== undefined && navigator.vendor.indexOf(\"Google\") !== -1;\n        };\n        qq.opera = function() {\n            return navigator.vendor !== undefined && navigator.vendor.indexOf(\"Opera\") !== -1;\n        };\n        qq.firefox = function() {\n            return !qq.edge() && !qq.ie11() && navigator.userAgent.indexOf(\"Mozilla\") !== -1 && navigator.vendor !== undefined && navigator.vendor === \"\";\n        };\n        qq.windows = function() {\n            return navigator.platform === \"Win32\";\n        };\n        qq.android = function() {\n            return navigator.userAgent.toLowerCase().indexOf(\"android\") !== -1;\n        };\n        qq.androidStock = function() {\n            return qq.android() && navigator.userAgent.toLowerCase().indexOf(\"chrome\") < 0;\n        };\n        qq.ios6 = function() {\n            return qq.ios() && navigator.userAgent.indexOf(\" OS 6_\") !== -1;\n        };\n        qq.ios7 = function() {\n            return qq.ios() && navigator.userAgent.indexOf(\" OS 7_\") !== -1;\n        };\n        qq.ios8 = function() {\n            return qq.ios() && navigator.userAgent.indexOf(\" OS 8_\") !== -1;\n        };\n        qq.ios800 = function() {\n            return qq.ios() && navigator.userAgent.indexOf(\" OS 8_0 \") !== -1;\n        };\n        qq.ios = function() {\n            return navigator.userAgent.indexOf(\"iPad\") !== -1 || navigator.userAgent.indexOf(\"iPod\") !== -1 || navigator.userAgent.indexOf(\"iPhone\") !== -1;\n        };\n        qq.iosChrome = function() {\n            return qq.ios() && navigator.userAgent.indexOf(\"CriOS\") !== -1;\n        };\n        qq.iosSafari = function() {\n            return qq.ios() && !qq.iosChrome() && navigator.userAgent.indexOf(\"Safari\") !== -1;\n        };\n        qq.iosSafariWebView = function() {\n            return qq.ios() && !qq.iosChrome() && !qq.iosSafari();\n        };\n        qq.preventDefault = function(e) {\n            if (e.preventDefault) {\n                e.preventDefault();\n            } else {\n                e.returnValue = false;\n            }\n        };\n        qq.toElement = function() {\n            var div = document.createElement(\"div\");\n            return function(html) {\n                div.innerHTML = html;\n                var element = div.firstChild;\n                div.removeChild(element);\n                return element;\n            };\n        }();\n        qq.each = function(iterableItem, callback) {\n            var keyOrIndex, retVal;\n            if (iterableItem) {\n                if (window.Storage && iterableItem.constructor === window.Storage) {\n                    for (keyOrIndex = 0; keyOrIndex < iterableItem.length; keyOrIndex++) {\n                        retVal = callback(iterableItem.key(keyOrIndex), iterableItem.getItem(iterableItem.key(keyOrIndex)));\n                        if (retVal === false) {\n                            break;\n                        }\n                    }\n                } else if (qq.isArray(iterableItem) || qq.isItemList(iterableItem) || qq.isNodeList(iterableItem)) {\n                    for (keyOrIndex = 0; keyOrIndex < iterableItem.length; keyOrIndex++) {\n                        retVal = callback(keyOrIndex, iterableItem[keyOrIndex]);\n                        if (retVal === false) {\n                            break;\n                        }\n                    }\n                } else if (qq.isString(iterableItem)) {\n                    for (keyOrIndex = 0; keyOrIndex < iterableItem.length; keyOrIndex++) {\n                        retVal = callback(keyOrIndex, iterableItem.charAt(keyOrIndex));\n                        if (retVal === false) {\n                            break;\n                        }\n                    }\n                } else {\n                    for (keyOrIndex in iterableItem) {\n                        if (Object.prototype.hasOwnProperty.call(iterableItem, keyOrIndex)) {\n                            retVal = callback(keyOrIndex, iterableItem[keyOrIndex]);\n                            if (retVal === false) {\n                                break;\n                            }\n                        }\n                    }\n                }\n            }\n        };\n        qq.bind = function(oldFunc, context) {\n            if (qq.isFunction(oldFunc)) {\n                var args = Array.prototype.slice.call(arguments, 2);\n                return function() {\n                    var newArgs = qq.extend([], args);\n                    if (arguments.length) {\n                        newArgs = newArgs.concat(Array.prototype.slice.call(arguments));\n                    }\n                    return oldFunc.apply(context, newArgs);\n                };\n            }\n            throw new Error(\"first parameter must be a function!\");\n        };\n        qq.obj2url = function(obj, temp, prefixDone) {\n            var uristrings = [], prefix = \"&\", add = function(nextObj, i) {\n                var nextTemp = temp ? /\\[\\]$/.test(temp) ? temp : temp + \"[\" + i + \"]\" : i;\n                if (nextTemp !== \"undefined\" && i !== \"undefined\") {\n                    uristrings.push(typeof nextObj === \"object\" ? qq.obj2url(nextObj, nextTemp, true) : Object.prototype.toString.call(nextObj) === \"[object Function]\" ? encodeURIComponent(nextTemp) + \"=\" + encodeURIComponent(nextObj()) : encodeURIComponent(nextTemp) + \"=\" + encodeURIComponent(nextObj));\n                }\n            };\n            if (!prefixDone && temp) {\n                prefix = /\\?/.test(temp) ? /\\?$/.test(temp) ? \"\" : \"&\" : \"?\";\n                uristrings.push(temp);\n                uristrings.push(qq.obj2url(obj));\n            } else if (Object.prototype.toString.call(obj) === \"[object Array]\" && typeof obj !== \"undefined\") {\n                qq.each(obj, function(idx, val) {\n                    add(val, idx);\n                });\n            } else if (typeof obj !== \"undefined\" && obj !== null && typeof obj === \"object\") {\n                qq.each(obj, function(prop, val) {\n                    add(val, prop);\n                });\n            } else {\n                uristrings.push(encodeURIComponent(temp) + \"=\" + encodeURIComponent(obj));\n            }\n            if (temp) {\n                return uristrings.join(prefix);\n            } else {\n                return uristrings.join(prefix).replace(/^&/, \"\").replace(/%20/g, \"+\");\n            }\n        };\n        qq.obj2FormData = function(obj, formData, arrayKeyName) {\n            if (!formData) {\n                formData = new FormData();\n            }\n            qq.each(obj, function(key, val) {\n                key = arrayKeyName ? arrayKeyName + \"[\" + key + \"]\" : key;\n                if (qq.isObject(val)) {\n                    qq.obj2FormData(val, formData, key);\n                } else if (qq.isFunction(val)) {\n                    formData.append(key, val());\n                } else {\n                    formData.append(key, val);\n                }\n            });\n            return formData;\n        };\n        qq.obj2Inputs = function(obj, form) {\n            var input;\n            if (!form) {\n                form = document.createElement(\"form\");\n            }\n            qq.obj2FormData(obj, {\n                append: function(key, val) {\n                    input = document.createElement(\"input\");\n                    input.setAttribute(\"name\", key);\n                    input.setAttribute(\"value\", val);\n                    form.appendChild(input);\n                }\n            });\n            return form;\n        };\n        qq.parseJson = function(json) {\n            if (window.JSON && qq.isFunction(JSON.parse)) {\n                return JSON.parse(json);\n            } else {\n                return eval(\"(\" + json + \")\");\n            }\n        };\n        qq.getExtension = function(filename) {\n            var extIdx = filename.lastIndexOf(\".\") + 1;\n            if (extIdx > 0) {\n                return filename.substr(extIdx, filename.length - extIdx);\n            }\n        };\n        qq.getFilename = function(blobOrFileInput) {\n            if (qq.isInput(blobOrFileInput)) {\n                return blobOrFileInput.value.replace(/.*(\\/|\\\\)/, \"\");\n            } else if (qq.isFile(blobOrFileInput)) {\n                if (blobOrFileInput.fileName !== null && blobOrFileInput.fileName !== undefined) {\n                    return blobOrFileInput.fileName;\n                }\n            }\n            return blobOrFileInput.name;\n        };\n        qq.DisposeSupport = function() {\n            var disposers = [];\n            return {\n                dispose: function() {\n                    var disposer;\n                    do {\n                        disposer = disposers.shift();\n                        if (disposer) {\n                            disposer();\n                        }\n                    } while (disposer);\n                },\n                attach: function() {\n                    var args = arguments;\n                    this.addDisposer(qq(args[0]).attach.apply(this, Array.prototype.slice.call(arguments, 1)));\n                },\n                addDisposer: function(disposeFunction) {\n                    disposers.push(disposeFunction);\n                }\n            };\n        };\n    })();\n    (function() {\n        \"use strict\";\n        if (typeof define === \"function\" && define.amd) {\n            define(function() {\n                return qq;\n            });\n        } else if (typeof module !== \"undefined\" && module.exports) {\n            module.exports = qq;\n        } else {\n            global.qq = qq;\n        }\n    })();\n    qq.version = \"5.16.2\";\n    qq.supportedFeatures = function() {\n        \"use strict\";\n        var supportsUploading, supportsUploadingBlobs, supportsFileDrop, supportsAjaxFileUploading, supportsFolderDrop, supportsChunking, supportsResume, supportsUploadViaPaste, supportsUploadCors, supportsDeleteFileXdr, supportsDeleteFileCorsXhr, supportsDeleteFileCors, supportsFolderSelection, supportsImagePreviews, supportsUploadProgress;\n        function testSupportsFileInputElement() {\n            var supported = true, tempInput;\n            try {\n                tempInput = document.createElement(\"input\");\n                tempInput.type = \"file\";\n                qq(tempInput).hide();\n                if (tempInput.disabled) {\n                    supported = false;\n                }\n            } catch (ex) {\n                supported = false;\n            }\n            return supported;\n        }\n        function isChrome14OrHigher() {\n            return (qq.chrome() || qq.opera()) && navigator.userAgent.match(/Chrome\\/[1][4-9]|Chrome\\/[2-9][0-9]/) !== undefined;\n        }\n        function isCrossOriginXhrSupported() {\n            if (window.XMLHttpRequest) {\n                var xhr = qq.createXhrInstance();\n                return xhr.withCredentials !== undefined;\n            }\n            return false;\n        }\n        function isXdrSupported() {\n            return window.XDomainRequest !== undefined;\n        }\n        function isCrossOriginAjaxSupported() {\n            if (isCrossOriginXhrSupported()) {\n                return true;\n            }\n            return isXdrSupported();\n        }\n        function isFolderSelectionSupported() {\n            return document.createElement(\"input\").webkitdirectory !== undefined;\n        }\n        function isLocalStorageSupported() {\n            try {\n                return !!window.localStorage && qq.isFunction(window.localStorage.setItem);\n            } catch (error) {\n                return false;\n            }\n        }\n        function isDragAndDropSupported() {\n            var span = document.createElement(\"span\");\n            return (\"draggable\" in span || \"ondragstart\" in span && \"ondrop\" in span) && !qq.android() && !qq.ios();\n        }\n        supportsUploading = testSupportsFileInputElement();\n        supportsAjaxFileUploading = supportsUploading && qq.isXhrUploadSupported();\n        supportsUploadingBlobs = supportsAjaxFileUploading && !qq.androidStock();\n        supportsFileDrop = supportsAjaxFileUploading && isDragAndDropSupported();\n        supportsFolderDrop = supportsFileDrop && function() {\n            var input = document.createElement(\"input\");\n            input.type = \"file\";\n            return !!(\"webkitdirectory\" in (input || document.querySelectorAll(\"input[type=file]\")[0]));\n        }();\n        supportsChunking = supportsAjaxFileUploading && qq.isFileChunkingSupported();\n        supportsResume = supportsAjaxFileUploading && supportsChunking && isLocalStorageSupported();\n        supportsUploadViaPaste = supportsAjaxFileUploading && isChrome14OrHigher();\n        supportsUploadCors = supportsUploading && (window.postMessage !== undefined || supportsAjaxFileUploading);\n        supportsDeleteFileCorsXhr = isCrossOriginXhrSupported();\n        supportsDeleteFileXdr = isXdrSupported();\n        supportsDeleteFileCors = isCrossOriginAjaxSupported();\n        supportsFolderSelection = isFolderSelectionSupported();\n        supportsImagePreviews = supportsAjaxFileUploading && window.FileReader !== undefined;\n        supportsUploadProgress = function() {\n            if (supportsAjaxFileUploading) {\n                return !qq.androidStock() && !qq.iosChrome();\n            }\n            return false;\n        }();\n        return {\n            ajaxUploading: supportsAjaxFileUploading,\n            blobUploading: supportsUploadingBlobs,\n            canDetermineSize: supportsAjaxFileUploading,\n            chunking: supportsChunking,\n            deleteFileCors: supportsDeleteFileCors,\n            deleteFileCorsXdr: supportsDeleteFileXdr,\n            deleteFileCorsXhr: supportsDeleteFileCorsXhr,\n            dialogElement: !!window.HTMLDialogElement,\n            fileDrop: supportsFileDrop,\n            folderDrop: supportsFolderDrop,\n            folderSelection: supportsFolderSelection,\n            imagePreviews: supportsImagePreviews,\n            imageValidation: supportsImagePreviews,\n            itemSizeValidation: supportsAjaxFileUploading,\n            pause: supportsChunking,\n            progressBar: supportsUploadProgress,\n            resume: supportsResume,\n            scaling: supportsImagePreviews && supportsUploadingBlobs,\n            tiffPreviews: qq.safari(),\n            unlimitedScaledImageSize: !qq.ios(),\n            uploading: supportsUploading,\n            uploadCors: supportsUploadCors,\n            uploadCustomHeaders: supportsAjaxFileUploading,\n            uploadNonMultipart: supportsAjaxFileUploading,\n            uploadViaPaste: supportsUploadViaPaste\n        };\n    }();\n    qq.isGenericPromise = function(maybePromise) {\n        \"use strict\";\n        return !!(maybePromise && maybePromise.then && qq.isFunction(maybePromise.then));\n    };\n    qq.Promise = function() {\n        \"use strict\";\n        var successArgs, failureArgs, successCallbacks = [], failureCallbacks = [], doneCallbacks = [], state = 0;\n        qq.extend(this, {\n            then: function(onSuccess, onFailure) {\n                if (state === 0) {\n                    if (onSuccess) {\n                        successCallbacks.push(onSuccess);\n                    }\n                    if (onFailure) {\n                        failureCallbacks.push(onFailure);\n                    }\n                } else if (state === -1) {\n                    onFailure && onFailure.apply(null, failureArgs);\n                } else if (onSuccess) {\n                    onSuccess.apply(null, successArgs);\n                }\n                return this;\n            },\n            done: function(callback) {\n                if (state === 0) {\n                    doneCallbacks.push(callback);\n                } else {\n                    callback.apply(null, failureArgs === undefined ? successArgs : failureArgs);\n                }\n                return this;\n            },\n            success: function() {\n                state = 1;\n                successArgs = arguments;\n                if (successCallbacks.length) {\n                    qq.each(successCallbacks, function(idx, callback) {\n                        callback.apply(null, successArgs);\n                    });\n                }\n                if (doneCallbacks.length) {\n                    qq.each(doneCallbacks, function(idx, callback) {\n                        callback.apply(null, successArgs);\n                    });\n                }\n                return this;\n            },\n            failure: function() {\n                state = -1;\n                failureArgs = arguments;\n                if (failureCallbacks.length) {\n                    qq.each(failureCallbacks, function(idx, callback) {\n                        callback.apply(null, failureArgs);\n                    });\n                }\n                if (doneCallbacks.length) {\n                    qq.each(doneCallbacks, function(idx, callback) {\n                        callback.apply(null, failureArgs);\n                    });\n                }\n                return this;\n            }\n        });\n    };\n    qq.DragAndDrop = function(o) {\n        \"use strict\";\n        var options, HIDE_ZONES_EVENT_NAME = \"qq-hidezones\", HIDE_BEFORE_ENTER_ATTR = \"qq-hide-dropzone\", uploadDropZones = [], droppedFiles = [], disposeSupport = new qq.DisposeSupport();\n        options = {\n            dropZoneElements: [],\n            allowMultipleItems: true,\n            classes: {\n                dropActive: null\n            },\n            callbacks: new qq.DragAndDrop.callbacks()\n        };\n        qq.extend(options, o, true);\n        function uploadDroppedFiles(files, uploadDropZone) {\n            var filesAsArray = Array.prototype.slice.call(files);\n            options.callbacks.dropLog(\"Grabbed \" + files.length + \" dropped files.\");\n            uploadDropZone.dropDisabled(false);\n            options.callbacks.processingDroppedFilesComplete(filesAsArray, uploadDropZone.getElement());\n        }\n        function traverseFileTree(entry) {\n            var parseEntryPromise = new qq.Promise();\n            if (entry.isFile) {\n                entry.file(function(file) {\n                    file.qqPath = extractDirectoryPath(entry);\n                    droppedFiles.push(file);\n                    parseEntryPromise.success();\n                }, function(fileError) {\n                    options.callbacks.dropLog(\"Problem parsing '\" + entry.fullPath + \"'.  FileError code \" + fileError.code + \".\", \"error\");\n                    parseEntryPromise.failure();\n                });\n            } else if (entry.isDirectory) {\n                getFilesInDirectory(entry).then(function allEntriesRead(entries) {\n                    var entriesLeft = entries.length;\n                    qq.each(entries, function(idx, entry) {\n                        traverseFileTree(entry).done(function() {\n                            entriesLeft -= 1;\n                            if (entriesLeft === 0) {\n                                parseEntryPromise.success();\n                            }\n                        });\n                    });\n                    if (!entries.length) {\n                        parseEntryPromise.success();\n                    }\n                }, function readFailure(fileError) {\n                    options.callbacks.dropLog(\"Problem parsing '\" + entry.fullPath + \"'.  FileError code \" + fileError.code + \".\", \"error\");\n                    parseEntryPromise.failure();\n                });\n            }\n            return parseEntryPromise;\n        }\n        function extractDirectoryPath(entry) {\n            var name = entry.name, fullPath = entry.fullPath, indexOfNameInFullPath = fullPath.lastIndexOf(name);\n            fullPath = fullPath.substr(0, indexOfNameInFullPath);\n            if (fullPath.charAt(0) === \"/\") {\n                fullPath = fullPath.substr(1);\n            }\n            return fullPath;\n        }\n        function getFilesInDirectory(entry, reader, accumEntries, existingPromise) {\n            var promise = existingPromise || new qq.Promise(), dirReader = reader || entry.createReader();\n            dirReader.readEntries(function readSuccess(entries) {\n                var newEntries = accumEntries ? accumEntries.concat(entries) : entries;\n                if (entries.length) {\n                    setTimeout(function() {\n                        getFilesInDirectory(entry, dirReader, newEntries, promise);\n                    }, 0);\n                } else {\n                    promise.success(newEntries);\n                }\n            }, promise.failure);\n            return promise;\n        }\n        function handleDataTransfer(dataTransfer, uploadDropZone) {\n            var pendingFolderPromises = [], handleDataTransferPromise = new qq.Promise();\n            options.callbacks.processingDroppedFiles();\n            uploadDropZone.dropDisabled(true);\n            if (dataTransfer.files.length > 1 && !options.allowMultipleItems) {\n                options.callbacks.processingDroppedFilesComplete([]);\n                options.callbacks.dropError(\"tooManyFilesError\", \"\");\n                uploadDropZone.dropDisabled(false);\n                handleDataTransferPromise.failure();\n            } else {\n                droppedFiles = [];\n                if (qq.isFolderDropSupported(dataTransfer)) {\n                    qq.each(dataTransfer.items, function(idx, item) {\n                        var entry = item.webkitGetAsEntry();\n                        if (entry) {\n                            if (entry.isFile) {\n                                droppedFiles.push(item.getAsFile());\n                            } else {\n                                pendingFolderPromises.push(traverseFileTree(entry).done(function() {\n                                    pendingFolderPromises.pop();\n                                    if (pendingFolderPromises.length === 0) {\n                                        handleDataTransferPromise.success();\n                                    }\n                                }));\n                            }\n                        }\n                    });\n                } else {\n                    droppedFiles = dataTransfer.files;\n                }\n                if (pendingFolderPromises.length === 0) {\n                    handleDataTransferPromise.success();\n                }\n            }\n            return handleDataTransferPromise;\n        }\n        function setupDropzone(dropArea) {\n            var dropZone = new qq.UploadDropZone({\n                HIDE_ZONES_EVENT_NAME: HIDE_ZONES_EVENT_NAME,\n                element: dropArea,\n                onEnter: function(e) {\n                    qq(dropArea).addClass(options.classes.dropActive);\n                    e.stopPropagation();\n                },\n                onLeaveNotDescendants: function(e) {\n                    qq(dropArea).removeClass(options.classes.dropActive);\n                },\n                onDrop: function(e) {\n                    handleDataTransfer(e.dataTransfer, dropZone).then(function() {\n                        uploadDroppedFiles(droppedFiles, dropZone);\n                    }, function() {\n                        options.callbacks.dropLog(\"Drop event DataTransfer parsing failed.  No files will be uploaded.\", \"error\");\n                    });\n                }\n            });\n            disposeSupport.addDisposer(function() {\n                dropZone.dispose();\n            });\n            qq(dropArea).hasAttribute(HIDE_BEFORE_ENTER_ATTR) && qq(dropArea).hide();\n            uploadDropZones.push(dropZone);\n            return dropZone;\n        }\n        function isFileDrag(dragEvent) {\n            var fileDrag;\n            qq.each(dragEvent.dataTransfer.types, function(key, val) {\n                if (val === \"Files\") {\n                    fileDrag = true;\n                    return false;\n                }\n            });\n            return fileDrag;\n        }\n        function leavingDocumentOut(e) {\n            if (qq.safari()) {\n                return e.x < 0 || e.y < 0;\n            }\n            return e.x === 0 && e.y === 0;\n        }\n        function setupDragDrop() {\n            var dropZones = options.dropZoneElements, maybeHideDropZones = function() {\n                setTimeout(function() {\n                    qq.each(dropZones, function(idx, dropZone) {\n                        qq(dropZone).hasAttribute(HIDE_BEFORE_ENTER_ATTR) && qq(dropZone).hide();\n                        qq(dropZone).removeClass(options.classes.dropActive);\n                    });\n                }, 10);\n            };\n            qq.each(dropZones, function(idx, dropZone) {\n                var uploadDropZone = setupDropzone(dropZone);\n                if (dropZones.length && qq.supportedFeatures.fileDrop) {\n                    disposeSupport.attach(document, \"dragenter\", function(e) {\n                        if (!uploadDropZone.dropDisabled() && isFileDrag(e)) {\n                            qq.each(dropZones, function(idx, dropZone) {\n                                if (dropZone instanceof HTMLElement && qq(dropZone).hasAttribute(HIDE_BEFORE_ENTER_ATTR)) {\n                                    qq(dropZone).css({\n                                        display: \"block\"\n                                    });\n                                }\n                            });\n                        }\n                    });\n                }\n            });\n            disposeSupport.attach(document, \"dragleave\", function(e) {\n                if (leavingDocumentOut(e)) {\n                    maybeHideDropZones();\n                }\n            });\n            disposeSupport.attach(qq(document).children()[0], \"mouseenter\", function(e) {\n                maybeHideDropZones();\n            });\n            disposeSupport.attach(document, \"drop\", function(e) {\n                if (isFileDrag(e)) {\n                    e.preventDefault();\n                    maybeHideDropZones();\n                }\n            });\n            disposeSupport.attach(document, HIDE_ZONES_EVENT_NAME, maybeHideDropZones);\n        }\n        setupDragDrop();\n        qq.extend(this, {\n            setupExtraDropzone: function(element) {\n                options.dropZoneElements.push(element);\n                setupDropzone(element);\n            },\n            removeDropzone: function(element) {\n                var i, dzs = options.dropZoneElements;\n                for (i in dzs) {\n                    if (dzs[i] === element) {\n                        return dzs.splice(i, 1);\n                    }\n                }\n            },\n            dispose: function() {\n                disposeSupport.dispose();\n                qq.each(uploadDropZones, function(idx, dropZone) {\n                    dropZone.dispose();\n                });\n            }\n        });\n        this._testing = {};\n        this._testing.extractDirectoryPath = extractDirectoryPath;\n    };\n    qq.DragAndDrop.callbacks = function() {\n        \"use strict\";\n        return {\n            processingDroppedFiles: function() {},\n            processingDroppedFilesComplete: function(files, targetEl) {},\n            dropError: function(code, errorSpecifics) {\n                qq.log(\"Drag & drop error code '\" + code + \" with these specifics: '\" + errorSpecifics + \"'\", \"error\");\n            },\n            dropLog: function(message, level) {\n                qq.log(message, level);\n            }\n        };\n    };\n    qq.UploadDropZone = function(o) {\n        \"use strict\";\n        var disposeSupport = new qq.DisposeSupport(), options, element, preventDrop, dropOutsideDisabled;\n        options = {\n            element: null,\n            onEnter: function(e) {},\n            onLeave: function(e) {},\n            onLeaveNotDescendants: function(e) {},\n            onDrop: function(e) {}\n        };\n        qq.extend(options, o);\n        element = options.element;\n        function dragoverShouldBeCanceled() {\n            return qq.safari() || qq.firefox() && qq.windows();\n        }\n        function disableDropOutside(e) {\n            if (!dropOutsideDisabled) {\n                if (dragoverShouldBeCanceled) {\n                    disposeSupport.attach(document, \"dragover\", function(e) {\n                        e.preventDefault();\n                    });\n                } else {\n                    disposeSupport.attach(document, \"dragover\", function(e) {\n                        if (e.dataTransfer) {\n                            e.dataTransfer.dropEffect = \"none\";\n                            e.preventDefault();\n                        }\n                    });\n                }\n                dropOutsideDisabled = true;\n            }\n        }\n        function isValidFileDrag(e) {\n            if (!qq.supportedFeatures.fileDrop) {\n                return false;\n            }\n            var effectTest, dt = e.dataTransfer, isSafari = qq.safari();\n            effectTest = qq.ie() && qq.supportedFeatures.fileDrop ? true : dt.effectAllowed !== \"none\";\n            return dt && effectTest && (dt.files && dt.files.length || !isSafari && dt.types.contains && dt.types.contains(\"Files\") || dt.types.includes && dt.types.includes(\"Files\"));\n        }\n        function isOrSetDropDisabled(isDisabled) {\n            if (isDisabled !== undefined) {\n                preventDrop = isDisabled;\n            }\n            return preventDrop;\n        }\n        function triggerHidezonesEvent() {\n            var hideZonesEvent;\n            function triggerUsingOldApi() {\n                hideZonesEvent = document.createEvent(\"Event\");\n                hideZonesEvent.initEvent(options.HIDE_ZONES_EVENT_NAME, true, true);\n            }\n            if (window.CustomEvent) {\n                try {\n                    hideZonesEvent = new CustomEvent(options.HIDE_ZONES_EVENT_NAME);\n                } catch (err) {\n                    triggerUsingOldApi();\n                }\n            } else {\n                triggerUsingOldApi();\n            }\n            document.dispatchEvent(hideZonesEvent);\n        }\n        function attachEvents() {\n            disposeSupport.attach(element, \"dragover\", function(e) {\n                if (!isValidFileDrag(e)) {\n                    return;\n                }\n                var effect = qq.ie() && qq.supportedFeatures.fileDrop ? null : e.dataTransfer.effectAllowed;\n                if (effect === \"move\" || effect === \"linkMove\") {\n                    e.dataTransfer.dropEffect = \"move\";\n                } else {\n                    e.dataTransfer.dropEffect = \"copy\";\n                }\n                e.stopPropagation();\n                e.preventDefault();\n            });\n            disposeSupport.attach(element, \"dragenter\", function(e) {\n                if (!isOrSetDropDisabled()) {\n                    if (!isValidFileDrag(e)) {\n                        return;\n                    }\n                    options.onEnter(e);\n                }\n            });\n            disposeSupport.attach(element, \"dragleave\", function(e) {\n                if (!isValidFileDrag(e)) {\n                    return;\n                }\n                options.onLeave(e);\n                var relatedTarget = document.elementFromPoint(e.clientX, e.clientY);\n                if (qq(this).contains(relatedTarget)) {\n                    return;\n                }\n                options.onLeaveNotDescendants(e);\n            });\n            disposeSupport.attach(element, \"drop\", function(e) {\n                if (!isOrSetDropDisabled()) {\n                    if (!isValidFileDrag(e)) {\n                        return;\n                    }\n                    e.preventDefault();\n                    e.stopPropagation();\n                    options.onDrop(e);\n                    triggerHidezonesEvent();\n                }\n            });\n        }\n        disableDropOutside();\n        attachEvents();\n        qq.extend(this, {\n            dropDisabled: function(isDisabled) {\n                return isOrSetDropDisabled(isDisabled);\n            },\n            dispose: function() {\n                disposeSupport.dispose();\n            },\n            getElement: function() {\n                return element;\n            }\n        });\n        this._testing = {};\n        this._testing.isValidFileDrag = isValidFileDrag;\n    };\n})(window);\n//# sourceMappingURL=dnd.js.map","\"use strict\";\n\nmodule.exports = require(\"../dnd/dnd\");\n","// Fine Uploader 5.16.2 - MIT licensed. http://fineuploader.com\n(function(global) {\n    var qq = function(element) {\n        \"use strict\";\n        return {\n            hide: function() {\n                element.style.display = \"none\";\n                return this;\n            },\n            attach: function(type, fn) {\n                if (element.addEventListener) {\n                    element.addEventListener(type, fn, false);\n                } else if (element.attachEvent) {\n                    element.attachEvent(\"on\" + type, fn);\n                }\n                return function() {\n                    qq(element).detach(type, fn);\n                };\n            },\n            detach: function(type, fn) {\n                if (element.removeEventListener) {\n                    element.removeEventListener(type, fn, false);\n                } else if (element.attachEvent) {\n                    element.detachEvent(\"on\" + type, fn);\n                }\n                return this;\n            },\n            contains: function(descendant) {\n                if (!descendant) {\n                    return false;\n                }\n                if (element === descendant) {\n                    return true;\n                }\n                if (element.contains) {\n                    return element.contains(descendant);\n                } else {\n                    return !!(descendant.compareDocumentPosition(element) & 8);\n                }\n            },\n            insertBefore: function(elementB) {\n                elementB.parentNode.insertBefore(element, elementB);\n                return this;\n            },\n            remove: function() {\n                element.parentNode.removeChild(element);\n                return this;\n            },\n            css: function(styles) {\n                if (element.style == null) {\n                    throw new qq.Error(\"Can't apply style to node as it is not on the HTMLElement prototype chain!\");\n                }\n                if (styles.opacity != null) {\n                    if (typeof element.style.opacity !== \"string\" && typeof element.filters !== \"undefined\") {\n                        styles.filter = \"alpha(opacity=\" + Math.round(100 * styles.opacity) + \")\";\n                    }\n                }\n                qq.extend(element.style, styles);\n                return this;\n            },\n            hasClass: function(name, considerParent) {\n                var re = new RegExp(\"(^| )\" + name + \"( |$)\");\n                return re.test(element.className) || !!(considerParent && re.test(element.parentNode.className));\n            },\n            addClass: function(name) {\n                if (!qq(element).hasClass(name)) {\n                    element.className += \" \" + name;\n                }\n                return this;\n            },\n            removeClass: function(name) {\n                var re = new RegExp(\"(^| )\" + name + \"( |$)\");\n                element.className = element.className.replace(re, \" \").replace(/^\\s+|\\s+$/g, \"\");\n                return this;\n            },\n            getByClass: function(className, first) {\n                var candidates, result = [];\n                if (first && element.querySelector) {\n                    return element.querySelector(\".\" + className);\n                } else if (element.querySelectorAll) {\n                    return element.querySelectorAll(\".\" + className);\n                }\n                candidates = element.getElementsByTagName(\"*\");\n                qq.each(candidates, function(idx, val) {\n                    if (qq(val).hasClass(className)) {\n                        result.push(val);\n                    }\n                });\n                return first ? result[0] : result;\n            },\n            getFirstByClass: function(className) {\n                return qq(element).getByClass(className, true);\n            },\n            children: function() {\n                var children = [], child = element.firstChild;\n                while (child) {\n                    if (child.nodeType === 1) {\n                        children.push(child);\n                    }\n                    child = child.nextSibling;\n                }\n                return children;\n            },\n            setText: function(text) {\n                element.innerText = text;\n                element.textContent = text;\n                return this;\n            },\n            clearText: function() {\n                return qq(element).setText(\"\");\n            },\n            hasAttribute: function(attrName) {\n                var attrVal;\n                if (element.hasAttribute) {\n                    if (!element.hasAttribute(attrName)) {\n                        return false;\n                    }\n                    return /^false$/i.exec(element.getAttribute(attrName)) == null;\n                } else {\n                    attrVal = element[attrName];\n                    if (attrVal === undefined) {\n                        return false;\n                    }\n                    return /^false$/i.exec(attrVal) == null;\n                }\n            }\n        };\n    };\n    (function() {\n        \"use strict\";\n        qq.canvasToBlob = function(canvas, mime, quality) {\n            return qq.dataUriToBlob(canvas.toDataURL(mime, quality));\n        };\n        qq.dataUriToBlob = function(dataUri) {\n            var arrayBuffer, byteString, createBlob = function(data, mime) {\n                var BlobBuilder = window.BlobBuilder || window.WebKitBlobBuilder || window.MozBlobBuilder || window.MSBlobBuilder, blobBuilder = BlobBuilder && new BlobBuilder();\n                if (blobBuilder) {\n                    blobBuilder.append(data);\n                    return blobBuilder.getBlob(mime);\n                } else {\n                    return new Blob([ data ], {\n                        type: mime\n                    });\n                }\n            }, intArray, mimeString;\n            if (dataUri.split(\",\")[0].indexOf(\"base64\") >= 0) {\n                byteString = atob(dataUri.split(\",\")[1]);\n            } else {\n                byteString = decodeURI(dataUri.split(\",\")[1]);\n            }\n            mimeString = dataUri.split(\",\")[0].split(\":\")[1].split(\";\")[0];\n            arrayBuffer = new ArrayBuffer(byteString.length);\n            intArray = new Uint8Array(arrayBuffer);\n            qq.each(byteString, function(idx, character) {\n                intArray[idx] = character.charCodeAt(0);\n            });\n            return createBlob(arrayBuffer, mimeString);\n        };\n        qq.log = function(message, level) {\n            if (window.console) {\n                if (!level || level === \"info\") {\n                    window.console.log(message);\n                } else {\n                    if (window.console[level]) {\n                        window.console[level](message);\n                    } else {\n                        window.console.log(\"<\" + level + \"> \" + message);\n                    }\n                }\n            }\n        };\n        qq.isObject = function(variable) {\n            return variable && !variable.nodeType && Object.prototype.toString.call(variable) === \"[object Object]\";\n        };\n        qq.isFunction = function(variable) {\n            return typeof variable === \"function\";\n        };\n        qq.isArray = function(value) {\n            return Object.prototype.toString.call(value) === \"[object Array]\" || value && window.ArrayBuffer && value.buffer && value.buffer.constructor === ArrayBuffer;\n        };\n        qq.isItemList = function(maybeItemList) {\n            return Object.prototype.toString.call(maybeItemList) === \"[object DataTransferItemList]\";\n        };\n        qq.isNodeList = function(maybeNodeList) {\n            return Object.prototype.toString.call(maybeNodeList) === \"[object NodeList]\" || maybeNodeList.item && maybeNodeList.namedItem;\n        };\n        qq.isString = function(maybeString) {\n            return Object.prototype.toString.call(maybeString) === \"[object String]\";\n        };\n        qq.trimStr = function(string) {\n            if (String.prototype.trim) {\n                return string.trim();\n            }\n            return string.replace(/^\\s+|\\s+$/g, \"\");\n        };\n        qq.format = function(str) {\n            var args = Array.prototype.slice.call(arguments, 1), newStr = str, nextIdxToReplace = newStr.indexOf(\"{}\");\n            qq.each(args, function(idx, val) {\n                var strBefore = newStr.substring(0, nextIdxToReplace), strAfter = newStr.substring(nextIdxToReplace + 2);\n                newStr = strBefore + val + strAfter;\n                nextIdxToReplace = newStr.indexOf(\"{}\", nextIdxToReplace + val.length);\n                if (nextIdxToReplace < 0) {\n                    return false;\n                }\n            });\n            return newStr;\n        };\n        qq.isFile = function(maybeFile) {\n            return window.File && Object.prototype.toString.call(maybeFile) === \"[object File]\";\n        };\n        qq.isFileList = function(maybeFileList) {\n            return window.FileList && Object.prototype.toString.call(maybeFileList) === \"[object FileList]\";\n        };\n        qq.isFileOrInput = function(maybeFileOrInput) {\n            return qq.isFile(maybeFileOrInput) || qq.isInput(maybeFileOrInput);\n        };\n        qq.isInput = function(maybeInput, notFile) {\n            var evaluateType = function(type) {\n                var normalizedType = type.toLowerCase();\n                if (notFile) {\n                    return normalizedType !== \"file\";\n                }\n                return normalizedType === \"file\";\n            };\n            if (window.HTMLInputElement) {\n                if (Object.prototype.toString.call(maybeInput) === \"[object HTMLInputElement]\") {\n                    if (maybeInput.type && evaluateType(maybeInput.type)) {\n                        return true;\n                    }\n                }\n            }\n            if (maybeInput.tagName) {\n                if (maybeInput.tagName.toLowerCase() === \"input\") {\n                    if (maybeInput.type && evaluateType(maybeInput.type)) {\n                        return true;\n                    }\n                }\n            }\n            return false;\n        };\n        qq.isBlob = function(maybeBlob) {\n            if (window.Blob && Object.prototype.toString.call(maybeBlob) === \"[object Blob]\") {\n                return true;\n            }\n        };\n        qq.isXhrUploadSupported = function() {\n            var input = document.createElement(\"input\");\n            input.type = \"file\";\n            return input.multiple !== undefined && typeof File !== \"undefined\" && typeof FormData !== \"undefined\" && typeof qq.createXhrInstance().upload !== \"undefined\";\n        };\n        qq.createXhrInstance = function() {\n            if (window.XMLHttpRequest) {\n                return new XMLHttpRequest();\n            }\n            try {\n                return new ActiveXObject(\"MSXML2.XMLHTTP.3.0\");\n            } catch (error) {\n                qq.log(\"Neither XHR or ActiveX are supported!\", \"error\");\n                return null;\n            }\n        };\n        qq.isFolderDropSupported = function(dataTransfer) {\n            return dataTransfer.items && dataTransfer.items.length > 0 && dataTransfer.items[0].webkitGetAsEntry;\n        };\n        qq.isFileChunkingSupported = function() {\n            return !qq.androidStock() && qq.isXhrUploadSupported() && (File.prototype.slice !== undefined || File.prototype.webkitSlice !== undefined || File.prototype.mozSlice !== undefined);\n        };\n        qq.sliceBlob = function(fileOrBlob, start, end) {\n            var slicer = fileOrBlob.slice || fileOrBlob.mozSlice || fileOrBlob.webkitSlice;\n            return slicer.call(fileOrBlob, start, end);\n        };\n        qq.arrayBufferToHex = function(buffer) {\n            var bytesAsHex = \"\", bytes = new Uint8Array(buffer);\n            qq.each(bytes, function(idx, byt) {\n                var byteAsHexStr = byt.toString(16);\n                if (byteAsHexStr.length < 2) {\n                    byteAsHexStr = \"0\" + byteAsHexStr;\n                }\n                bytesAsHex += byteAsHexStr;\n            });\n            return bytesAsHex;\n        };\n        qq.readBlobToHex = function(blob, startOffset, length) {\n            var initialBlob = qq.sliceBlob(blob, startOffset, startOffset + length), fileReader = new FileReader(), promise = new qq.Promise();\n            fileReader.onload = function() {\n                promise.success(qq.arrayBufferToHex(fileReader.result));\n            };\n            fileReader.onerror = promise.failure;\n            fileReader.readAsArrayBuffer(initialBlob);\n            return promise;\n        };\n        qq.extend = function(first, second, extendNested) {\n            qq.each(second, function(prop, val) {\n                if (extendNested && qq.isObject(val)) {\n                    if (first[prop] === undefined) {\n                        first[prop] = {};\n                    }\n                    qq.extend(first[prop], val, true);\n                } else {\n                    first[prop] = val;\n                }\n            });\n            return first;\n        };\n        qq.override = function(target, sourceFn) {\n            var super_ = {}, source = sourceFn(super_);\n            qq.each(source, function(srcPropName, srcPropVal) {\n                if (target[srcPropName] !== undefined) {\n                    super_[srcPropName] = target[srcPropName];\n                }\n                target[srcPropName] = srcPropVal;\n            });\n            return target;\n        };\n        qq.indexOf = function(arr, elt, from) {\n            if (arr.indexOf) {\n                return arr.indexOf(elt, from);\n            }\n            from = from || 0;\n            var len = arr.length;\n            if (from < 0) {\n                from += len;\n            }\n            for (;from < len; from += 1) {\n                if (arr.hasOwnProperty(from) && arr[from] === elt) {\n                    return from;\n                }\n            }\n            return -1;\n        };\n        qq.getUniqueId = function() {\n            return \"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(/[xy]/g, function(c) {\n                var r = Math.random() * 16 | 0, v = c == \"x\" ? r : r & 3 | 8;\n                return v.toString(16);\n            });\n        };\n        qq.ie = function() {\n            return navigator.userAgent.indexOf(\"MSIE\") !== -1 || navigator.userAgent.indexOf(\"Trident\") !== -1;\n        };\n        qq.ie7 = function() {\n            return navigator.userAgent.indexOf(\"MSIE 7\") !== -1;\n        };\n        qq.ie8 = function() {\n            return navigator.userAgent.indexOf(\"MSIE 8\") !== -1;\n        };\n        qq.ie10 = function() {\n            return navigator.userAgent.indexOf(\"MSIE 10\") !== -1;\n        };\n        qq.ie11 = function() {\n            return qq.ie() && navigator.userAgent.indexOf(\"rv:11\") !== -1;\n        };\n        qq.edge = function() {\n            return navigator.userAgent.indexOf(\"Edge\") >= 0;\n        };\n        qq.safari = function() {\n            return navigator.vendor !== undefined && navigator.vendor.indexOf(\"Apple\") !== -1;\n        };\n        qq.chrome = function() {\n            return navigator.vendor !== undefined && navigator.vendor.indexOf(\"Google\") !== -1;\n        };\n        qq.opera = function() {\n            return navigator.vendor !== undefined && navigator.vendor.indexOf(\"Opera\") !== -1;\n        };\n        qq.firefox = function() {\n            return !qq.edge() && !qq.ie11() && navigator.userAgent.indexOf(\"Mozilla\") !== -1 && navigator.vendor !== undefined && navigator.vendor === \"\";\n        };\n        qq.windows = function() {\n            return navigator.platform === \"Win32\";\n        };\n        qq.android = function() {\n            return navigator.userAgent.toLowerCase().indexOf(\"android\") !== -1;\n        };\n        qq.androidStock = function() {\n            return qq.android() && navigator.userAgent.toLowerCase().indexOf(\"chrome\") < 0;\n        };\n        qq.ios6 = function() {\n            return qq.ios() && navigator.userAgent.indexOf(\" OS 6_\") !== -1;\n        };\n        qq.ios7 = function() {\n            return qq.ios() && navigator.userAgent.indexOf(\" OS 7_\") !== -1;\n        };\n        qq.ios8 = function() {\n            return qq.ios() && navigator.userAgent.indexOf(\" OS 8_\") !== -1;\n        };\n        qq.ios800 = function() {\n            return qq.ios() && navigator.userAgent.indexOf(\" OS 8_0 \") !== -1;\n        };\n        qq.ios = function() {\n            return navigator.userAgent.indexOf(\"iPad\") !== -1 || navigator.userAgent.indexOf(\"iPod\") !== -1 || navigator.userAgent.indexOf(\"iPhone\") !== -1;\n        };\n        qq.iosChrome = function() {\n            return qq.ios() && navigator.userAgent.indexOf(\"CriOS\") !== -1;\n        };\n        qq.iosSafari = function() {\n            return qq.ios() && !qq.iosChrome() && navigator.userAgent.indexOf(\"Safari\") !== -1;\n        };\n        qq.iosSafariWebView = function() {\n            return qq.ios() && !qq.iosChrome() && !qq.iosSafari();\n        };\n        qq.preventDefault = function(e) {\n            if (e.preventDefault) {\n                e.preventDefault();\n            } else {\n                e.returnValue = false;\n            }\n        };\n        qq.toElement = function() {\n            var div = document.createElement(\"div\");\n            return function(html) {\n                div.innerHTML = html;\n                var element = div.firstChild;\n                div.removeChild(element);\n                return element;\n            };\n        }();\n        qq.each = function(iterableItem, callback) {\n            var keyOrIndex, retVal;\n            if (iterableItem) {\n                if (window.Storage && iterableItem.constructor === window.Storage) {\n                    for (keyOrIndex = 0; keyOrIndex < iterableItem.length; keyOrIndex++) {\n                        retVal = callback(iterableItem.key(keyOrIndex), iterableItem.getItem(iterableItem.key(keyOrIndex)));\n                        if (retVal === false) {\n                            break;\n                        }\n                    }\n                } else if (qq.isArray(iterableItem) || qq.isItemList(iterableItem) || qq.isNodeList(iterableItem)) {\n                    for (keyOrIndex = 0; keyOrIndex < iterableItem.length; keyOrIndex++) {\n                        retVal = callback(keyOrIndex, iterableItem[keyOrIndex]);\n                        if (retVal === false) {\n                            break;\n                        }\n                    }\n                } else if (qq.isString(iterableItem)) {\n                    for (keyOrIndex = 0; keyOrIndex < iterableItem.length; keyOrIndex++) {\n                        retVal = callback(keyOrIndex, iterableItem.charAt(keyOrIndex));\n                        if (retVal === false) {\n                            break;\n                        }\n                    }\n                } else {\n                    for (keyOrIndex in iterableItem) {\n                        if (Object.prototype.hasOwnProperty.call(iterableItem, keyOrIndex)) {\n                            retVal = callback(keyOrIndex, iterableItem[keyOrIndex]);\n                            if (retVal === false) {\n                                break;\n                            }\n                        }\n                    }\n                }\n            }\n        };\n        qq.bind = function(oldFunc, context) {\n            if (qq.isFunction(oldFunc)) {\n                var args = Array.prototype.slice.call(arguments, 2);\n                return function() {\n                    var newArgs = qq.extend([], args);\n                    if (arguments.length) {\n                        newArgs = newArgs.concat(Array.prototype.slice.call(arguments));\n                    }\n                    return oldFunc.apply(context, newArgs);\n                };\n            }\n            throw new Error(\"first parameter must be a function!\");\n        };\n        qq.obj2url = function(obj, temp, prefixDone) {\n            var uristrings = [], prefix = \"&\", add = function(nextObj, i) {\n                var nextTemp = temp ? /\\[\\]$/.test(temp) ? temp : temp + \"[\" + i + \"]\" : i;\n                if (nextTemp !== \"undefined\" && i !== \"undefined\") {\n                    uristrings.push(typeof nextObj === \"object\" ? qq.obj2url(nextObj, nextTemp, true) : Object.prototype.toString.call(nextObj) === \"[object Function]\" ? encodeURIComponent(nextTemp) + \"=\" + encodeURIComponent(nextObj()) : encodeURIComponent(nextTemp) + \"=\" + encodeURIComponent(nextObj));\n                }\n            };\n            if (!prefixDone && temp) {\n                prefix = /\\?/.test(temp) ? /\\?$/.test(temp) ? \"\" : \"&\" : \"?\";\n                uristrings.push(temp);\n                uristrings.push(qq.obj2url(obj));\n            } else if (Object.prototype.toString.call(obj) === \"[object Array]\" && typeof obj !== \"undefined\") {\n                qq.each(obj, function(idx, val) {\n                    add(val, idx);\n                });\n            } else if (typeof obj !== \"undefined\" && obj !== null && typeof obj === \"object\") {\n                qq.each(obj, function(prop, val) {\n                    add(val, prop);\n                });\n            } else {\n                uristrings.push(encodeURIComponent(temp) + \"=\" + encodeURIComponent(obj));\n            }\n            if (temp) {\n                return uristrings.join(prefix);\n            } else {\n                return uristrings.join(prefix).replace(/^&/, \"\").replace(/%20/g, \"+\");\n            }\n        };\n        qq.obj2FormData = function(obj, formData, arrayKeyName) {\n            if (!formData) {\n                formData = new FormData();\n            }\n            qq.each(obj, function(key, val) {\n                key = arrayKeyName ? arrayKeyName + \"[\" + key + \"]\" : key;\n                if (qq.isObject(val)) {\n                    qq.obj2FormData(val, formData, key);\n                } else if (qq.isFunction(val)) {\n                    formData.append(key, val());\n                } else {\n                    formData.append(key, val);\n                }\n            });\n            return formData;\n        };\n        qq.obj2Inputs = function(obj, form) {\n            var input;\n            if (!form) {\n                form = document.createElement(\"form\");\n            }\n            qq.obj2FormData(obj, {\n                append: function(key, val) {\n                    input = document.createElement(\"input\");\n                    input.setAttribute(\"name\", key);\n                    input.setAttribute(\"value\", val);\n                    form.appendChild(input);\n                }\n            });\n            return form;\n        };\n        qq.parseJson = function(json) {\n            if (window.JSON && qq.isFunction(JSON.parse)) {\n                return JSON.parse(json);\n            } else {\n                return eval(\"(\" + json + \")\");\n            }\n        };\n        qq.getExtension = function(filename) {\n            var extIdx = filename.lastIndexOf(\".\") + 1;\n            if (extIdx > 0) {\n                return filename.substr(extIdx, filename.length - extIdx);\n            }\n        };\n        qq.getFilename = function(blobOrFileInput) {\n            if (qq.isInput(blobOrFileInput)) {\n                return blobOrFileInput.value.replace(/.*(\\/|\\\\)/, \"\");\n            } else if (qq.isFile(blobOrFileInput)) {\n                if (blobOrFileInput.fileName !== null && blobOrFileInput.fileName !== undefined) {\n                    return blobOrFileInput.fileName;\n                }\n            }\n            return blobOrFileInput.name;\n        };\n        qq.DisposeSupport = function() {\n            var disposers = [];\n            return {\n                dispose: function() {\n                    var disposer;\n                    do {\n                        disposer = disposers.shift();\n                        if (disposer) {\n                            disposer();\n                        }\n                    } while (disposer);\n                },\n                attach: function() {\n                    var args = arguments;\n                    this.addDisposer(qq(args[0]).attach.apply(this, Array.prototype.slice.call(arguments, 1)));\n                },\n                addDisposer: function(disposeFunction) {\n                    disposers.push(disposeFunction);\n                }\n            };\n        };\n    })();\n    (function() {\n        \"use strict\";\n        if (typeof define === \"function\" && define.amd) {\n            define(function() {\n                return qq;\n            });\n        } else if (typeof module !== \"undefined\" && module.exports) {\n            module.exports = qq;\n        } else {\n            global.qq = qq;\n        }\n    })();\n    (function() {\n        \"use strict\";\n        qq.Error = function(message) {\n            this.message = \"[Fine Uploader \" + qq.version + \"] \" + message;\n        };\n        qq.Error.prototype = new Error();\n    })();\n    qq.version = \"5.16.2\";\n    qq.supportedFeatures = function() {\n        \"use strict\";\n        var supportsUploading, supportsUploadingBlobs, supportsFileDrop, supportsAjaxFileUploading, supportsFolderDrop, supportsChunking, supportsResume, supportsUploadViaPaste, supportsUploadCors, supportsDeleteFileXdr, supportsDeleteFileCorsXhr, supportsDeleteFileCors, supportsFolderSelection, supportsImagePreviews, supportsUploadProgress;\n        function testSupportsFileInputElement() {\n            var supported = true, tempInput;\n            try {\n                tempInput = document.createElement(\"input\");\n                tempInput.type = \"file\";\n                qq(tempInput).hide();\n                if (tempInput.disabled) {\n                    supported = false;\n                }\n            } catch (ex) {\n                supported = false;\n            }\n            return supported;\n        }\n        function isChrome14OrHigher() {\n            return (qq.chrome() || qq.opera()) && navigator.userAgent.match(/Chrome\\/[1][4-9]|Chrome\\/[2-9][0-9]/) !== undefined;\n        }\n        function isCrossOriginXhrSupported() {\n            if (window.XMLHttpRequest) {\n                var xhr = qq.createXhrInstance();\n                return xhr.withCredentials !== undefined;\n            }\n            return false;\n        }\n        function isXdrSupported() {\n            return window.XDomainRequest !== undefined;\n        }\n        function isCrossOriginAjaxSupported() {\n            if (isCrossOriginXhrSupported()) {\n                return true;\n            }\n            return isXdrSupported();\n        }\n        function isFolderSelectionSupported() {\n            return document.createElement(\"input\").webkitdirectory !== undefined;\n        }\n        function isLocalStorageSupported() {\n            try {\n                return !!window.localStorage && qq.isFunction(window.localStorage.setItem);\n            } catch (error) {\n                return false;\n            }\n        }\n        function isDragAndDropSupported() {\n            var span = document.createElement(\"span\");\n            return (\"draggable\" in span || \"ondragstart\" in span && \"ondrop\" in span) && !qq.android() && !qq.ios();\n        }\n        supportsUploading = testSupportsFileInputElement();\n        supportsAjaxFileUploading = supportsUploading && qq.isXhrUploadSupported();\n        supportsUploadingBlobs = supportsAjaxFileUploading && !qq.androidStock();\n        supportsFileDrop = supportsAjaxFileUploading && isDragAndDropSupported();\n        supportsFolderDrop = supportsFileDrop && function() {\n            var input = document.createElement(\"input\");\n            input.type = \"file\";\n            return !!(\"webkitdirectory\" in (input || document.querySelectorAll(\"input[type=file]\")[0]));\n        }();\n        supportsChunking = supportsAjaxFileUploading && qq.isFileChunkingSupported();\n        supportsResume = supportsAjaxFileUploading && supportsChunking && isLocalStorageSupported();\n        supportsUploadViaPaste = supportsAjaxFileUploading && isChrome14OrHigher();\n        supportsUploadCors = supportsUploading && (window.postMessage !== undefined || supportsAjaxFileUploading);\n        supportsDeleteFileCorsXhr = isCrossOriginXhrSupported();\n        supportsDeleteFileXdr = isXdrSupported();\n        supportsDeleteFileCors = isCrossOriginAjaxSupported();\n        supportsFolderSelection = isFolderSelectionSupported();\n        supportsImagePreviews = supportsAjaxFileUploading && window.FileReader !== undefined;\n        supportsUploadProgress = function() {\n            if (supportsAjaxFileUploading) {\n                return !qq.androidStock() && !qq.iosChrome();\n            }\n            return false;\n        }();\n        return {\n            ajaxUploading: supportsAjaxFileUploading,\n            blobUploading: supportsUploadingBlobs,\n            canDetermineSize: supportsAjaxFileUploading,\n            chunking: supportsChunking,\n            deleteFileCors: supportsDeleteFileCors,\n            deleteFileCorsXdr: supportsDeleteFileXdr,\n            deleteFileCorsXhr: supportsDeleteFileCorsXhr,\n            dialogElement: !!window.HTMLDialogElement,\n            fileDrop: supportsFileDrop,\n            folderDrop: supportsFolderDrop,\n            folderSelection: supportsFolderSelection,\n            imagePreviews: supportsImagePreviews,\n            imageValidation: supportsImagePreviews,\n            itemSizeValidation: supportsAjaxFileUploading,\n            pause: supportsChunking,\n            progressBar: supportsUploadProgress,\n            resume: supportsResume,\n            scaling: supportsImagePreviews && supportsUploadingBlobs,\n            tiffPreviews: qq.safari(),\n            unlimitedScaledImageSize: !qq.ios(),\n            uploading: supportsUploading,\n            uploadCors: supportsUploadCors,\n            uploadCustomHeaders: supportsAjaxFileUploading,\n            uploadNonMultipart: supportsAjaxFileUploading,\n            uploadViaPaste: supportsUploadViaPaste\n        };\n    }();\n    qq.isGenericPromise = function(maybePromise) {\n        \"use strict\";\n        return !!(maybePromise && maybePromise.then && qq.isFunction(maybePromise.then));\n    };\n    qq.Promise = function() {\n        \"use strict\";\n        var successArgs, failureArgs, successCallbacks = [], failureCallbacks = [], doneCallbacks = [], state = 0;\n        qq.extend(this, {\n            then: function(onSuccess, onFailure) {\n                if (state === 0) {\n                    if (onSuccess) {\n                        successCallbacks.push(onSuccess);\n                    }\n                    if (onFailure) {\n                        failureCallbacks.push(onFailure);\n                    }\n                } else if (state === -1) {\n                    onFailure && onFailure.apply(null, failureArgs);\n                } else if (onSuccess) {\n                    onSuccess.apply(null, successArgs);\n                }\n                return this;\n            },\n            done: function(callback) {\n                if (state === 0) {\n                    doneCallbacks.push(callback);\n                } else {\n                    callback.apply(null, failureArgs === undefined ? successArgs : failureArgs);\n                }\n                return this;\n            },\n            success: function() {\n                state = 1;\n                successArgs = arguments;\n                if (successCallbacks.length) {\n                    qq.each(successCallbacks, function(idx, callback) {\n                        callback.apply(null, successArgs);\n                    });\n                }\n                if (doneCallbacks.length) {\n                    qq.each(doneCallbacks, function(idx, callback) {\n                        callback.apply(null, successArgs);\n                    });\n                }\n                return this;\n            },\n            failure: function() {\n                state = -1;\n                failureArgs = arguments;\n                if (failureCallbacks.length) {\n                    qq.each(failureCallbacks, function(idx, callback) {\n                        callback.apply(null, failureArgs);\n                    });\n                }\n                if (doneCallbacks.length) {\n                    qq.each(doneCallbacks, function(idx, callback) {\n                        callback.apply(null, failureArgs);\n                    });\n                }\n                return this;\n            }\n        });\n    };\n    qq.BlobProxy = function(referenceBlob, onCreate) {\n        \"use strict\";\n        qq.extend(this, {\n            referenceBlob: referenceBlob,\n            create: function() {\n                return onCreate(referenceBlob);\n            }\n        });\n    };\n    qq.UploadButton = function(o) {\n        \"use strict\";\n        var self = this, disposeSupport = new qq.DisposeSupport(), options = {\n            acceptFiles: null,\n            element: null,\n            focusClass: \"qq-upload-button-focus\",\n            folders: false,\n            hoverClass: \"qq-upload-button-hover\",\n            ios8BrowserCrashWorkaround: false,\n            multiple: false,\n            name: \"qqfile\",\n            onChange: function(input) {},\n            title: null\n        }, input, buttonId;\n        qq.extend(options, o);\n        buttonId = qq.getUniqueId();\n        function createInput() {\n            var input = document.createElement(\"input\");\n            input.setAttribute(qq.UploadButton.BUTTON_ID_ATTR_NAME, buttonId);\n            input.setAttribute(\"title\", options.title);\n            self.setMultiple(options.multiple, input);\n            if (options.folders && qq.supportedFeatures.folderSelection) {\n                input.setAttribute(\"webkitdirectory\", \"\");\n            }\n            if (options.acceptFiles) {\n                input.setAttribute(\"accept\", options.acceptFiles);\n            }\n            input.setAttribute(\"type\", \"file\");\n            input.setAttribute(\"name\", options.name);\n            qq(input).css({\n                position: \"absolute\",\n                right: 0,\n                top: 0,\n                fontFamily: \"Arial\",\n                fontSize: qq.ie() && !qq.ie8() ? \"3500px\" : \"118px\",\n                margin: 0,\n                padding: 0,\n                cursor: \"pointer\",\n                opacity: 0\n            });\n            !qq.ie7() && qq(input).css({\n                height: \"100%\"\n            });\n            options.element.appendChild(input);\n            disposeSupport.attach(input, \"change\", function() {\n                options.onChange(input);\n            });\n            disposeSupport.attach(input, \"mouseover\", function() {\n                qq(options.element).addClass(options.hoverClass);\n            });\n            disposeSupport.attach(input, \"mouseout\", function() {\n                qq(options.element).removeClass(options.hoverClass);\n            });\n            disposeSupport.attach(input, \"focus\", function() {\n                qq(options.element).addClass(options.focusClass);\n            });\n            disposeSupport.attach(input, \"blur\", function() {\n                qq(options.element).removeClass(options.focusClass);\n            });\n            return input;\n        }\n        qq(options.element).css({\n            position: \"relative\",\n            overflow: \"hidden\",\n            direction: \"ltr\"\n        });\n        qq.extend(this, {\n            getInput: function() {\n                return input;\n            },\n            getButtonId: function() {\n                return buttonId;\n            },\n            setMultiple: function(isMultiple, optInput) {\n                var input = optInput || this.getInput();\n                if (options.ios8BrowserCrashWorkaround && qq.ios8() && (qq.iosChrome() || qq.iosSafariWebView())) {\n                    input.setAttribute(\"multiple\", \"\");\n                } else {\n                    if (isMultiple) {\n                        input.setAttribute(\"multiple\", \"\");\n                    } else {\n                        input.removeAttribute(\"multiple\");\n                    }\n                }\n            },\n            setAcceptFiles: function(acceptFiles) {\n                if (acceptFiles !== options.acceptFiles) {\n                    input.setAttribute(\"accept\", acceptFiles);\n                }\n            },\n            reset: function() {\n                if (input.parentNode) {\n                    qq(input).remove();\n                }\n                qq(options.element).removeClass(options.focusClass);\n                input = null;\n                input = createInput();\n            }\n        });\n        input = createInput();\n    };\n    qq.UploadButton.BUTTON_ID_ATTR_NAME = \"qq-button-id\";\n    qq.UploadData = function(uploaderProxy) {\n        \"use strict\";\n        var data = [], byUuid = {}, byStatus = {}, byProxyGroupId = {}, byBatchId = {};\n        function getDataByIds(idOrIds) {\n            if (qq.isArray(idOrIds)) {\n                var entries = [];\n                qq.each(idOrIds, function(idx, id) {\n                    entries.push(data[id]);\n                });\n                return entries;\n            }\n            return data[idOrIds];\n        }\n        function getDataByUuids(uuids) {\n            if (qq.isArray(uuids)) {\n                var entries = [];\n                qq.each(uuids, function(idx, uuid) {\n                    entries.push(data[byUuid[uuid]]);\n                });\n                return entries;\n            }\n            return data[byUuid[uuids]];\n        }\n        function getDataByStatus(status) {\n            var statusResults = [], statuses = [].concat(status);\n            qq.each(statuses, function(index, statusEnum) {\n                var statusResultIndexes = byStatus[statusEnum];\n                if (statusResultIndexes !== undefined) {\n                    qq.each(statusResultIndexes, function(i, dataIndex) {\n                        statusResults.push(data[dataIndex]);\n                    });\n                }\n            });\n            return statusResults;\n        }\n        qq.extend(this, {\n            addFile: function(spec) {\n                var status = spec.status || qq.status.SUBMITTING, id = data.push({\n                    name: spec.name,\n                    originalName: spec.name,\n                    uuid: spec.uuid,\n                    size: spec.size == null ? -1 : spec.size,\n                    status: status,\n                    file: spec.file\n                }) - 1;\n                if (spec.batchId) {\n                    data[id].batchId = spec.batchId;\n                    if (byBatchId[spec.batchId] === undefined) {\n                        byBatchId[spec.batchId] = [];\n                    }\n                    byBatchId[spec.batchId].push(id);\n                }\n                if (spec.proxyGroupId) {\n                    data[id].proxyGroupId = spec.proxyGroupId;\n                    if (byProxyGroupId[spec.proxyGroupId] === undefined) {\n                        byProxyGroupId[spec.proxyGroupId] = [];\n                    }\n                    byProxyGroupId[spec.proxyGroupId].push(id);\n                }\n                data[id].id = id;\n                byUuid[spec.uuid] = id;\n                if (byStatus[status] === undefined) {\n                    byStatus[status] = [];\n                }\n                byStatus[status].push(id);\n                spec.onBeforeStatusChange && spec.onBeforeStatusChange(id);\n                uploaderProxy.onStatusChange(id, null, status);\n                return id;\n            },\n            retrieve: function(optionalFilter) {\n                if (qq.isObject(optionalFilter) && data.length) {\n                    if (optionalFilter.id !== undefined) {\n                        return getDataByIds(optionalFilter.id);\n                    } else if (optionalFilter.uuid !== undefined) {\n                        return getDataByUuids(optionalFilter.uuid);\n                    } else if (optionalFilter.status) {\n                        return getDataByStatus(optionalFilter.status);\n                    }\n                } else {\n                    return qq.extend([], data, true);\n                }\n            },\n            removeFileRef: function(id) {\n                var record = getDataByIds(id);\n                if (record) {\n                    delete record.file;\n                }\n            },\n            reset: function() {\n                data = [];\n                byUuid = {};\n                byStatus = {};\n                byBatchId = {};\n            },\n            setStatus: function(id, newStatus) {\n                var oldStatus = data[id].status, byStatusOldStatusIndex = qq.indexOf(byStatus[oldStatus], id);\n                byStatus[oldStatus].splice(byStatusOldStatusIndex, 1);\n                data[id].status = newStatus;\n                if (byStatus[newStatus] === undefined) {\n                    byStatus[newStatus] = [];\n                }\n                byStatus[newStatus].push(id);\n                uploaderProxy.onStatusChange(id, oldStatus, newStatus);\n            },\n            uuidChanged: function(id, newUuid) {\n                var oldUuid = data[id].uuid;\n                data[id].uuid = newUuid;\n                byUuid[newUuid] = id;\n                delete byUuid[oldUuid];\n            },\n            updateName: function(id, newName) {\n                data[id].name = newName;\n            },\n            updateSize: function(id, newSize) {\n                data[id].size = newSize;\n            },\n            setParentId: function(targetId, parentId) {\n                data[targetId].parentId = parentId;\n            },\n            getIdsInProxyGroup: function(id) {\n                var proxyGroupId = data[id].proxyGroupId;\n                if (proxyGroupId) {\n                    return byProxyGroupId[proxyGroupId];\n                }\n                return [];\n            },\n            getIdsInBatch: function(id) {\n                var batchId = data[id].batchId;\n                return byBatchId[batchId];\n            }\n        });\n    };\n    qq.status = {\n        SUBMITTING: \"submitting\",\n        SUBMITTED: \"submitted\",\n        REJECTED: \"rejected\",\n        QUEUED: \"queued\",\n        CANCELED: \"canceled\",\n        PAUSED: \"paused\",\n        UPLOADING: \"uploading\",\n        UPLOAD_FINALIZING: \"upload finalizing\",\n        UPLOAD_RETRYING: \"retrying upload\",\n        UPLOAD_SUCCESSFUL: \"upload successful\",\n        UPLOAD_FAILED: \"upload failed\",\n        DELETE_FAILED: \"delete failed\",\n        DELETING: \"deleting\",\n        DELETED: \"deleted\"\n    };\n    (function() {\n        \"use strict\";\n        qq.basePublicApi = {\n            addBlobs: function(blobDataOrArray, params, endpoint) {\n                this.addFiles(blobDataOrArray, params, endpoint);\n            },\n            addInitialFiles: function(cannedFileList) {\n                var self = this;\n                qq.each(cannedFileList, function(index, cannedFile) {\n                    self._addCannedFile(cannedFile);\n                });\n            },\n            addFiles: function(data, params, endpoint) {\n                this._maybeHandleIos8SafariWorkaround();\n                var batchId = this._storedIds.length === 0 ? qq.getUniqueId() : this._currentBatchId, processBlob = qq.bind(function(blob) {\n                    this._handleNewFile({\n                        blob: blob,\n                        name: this._options.blobs.defaultName\n                    }, batchId, verifiedFiles);\n                }, this), processBlobData = qq.bind(function(blobData) {\n                    this._handleNewFile(blobData, batchId, verifiedFiles);\n                }, this), processCanvas = qq.bind(function(canvas) {\n                    var blob = qq.canvasToBlob(canvas);\n                    this._handleNewFile({\n                        blob: blob,\n                        name: this._options.blobs.defaultName + \".png\"\n                    }, batchId, verifiedFiles);\n                }, this), processCanvasData = qq.bind(function(canvasData) {\n                    var normalizedQuality = canvasData.quality && canvasData.quality / 100, blob = qq.canvasToBlob(canvasData.canvas, canvasData.type, normalizedQuality);\n                    this._handleNewFile({\n                        blob: blob,\n                        name: canvasData.name\n                    }, batchId, verifiedFiles);\n                }, this), processFileOrInput = qq.bind(function(fileOrInput) {\n                    if (qq.isInput(fileOrInput) && qq.supportedFeatures.ajaxUploading) {\n                        var files = Array.prototype.slice.call(fileOrInput.files), self = this;\n                        qq.each(files, function(idx, file) {\n                            self._handleNewFile(file, batchId, verifiedFiles);\n                        });\n                    } else {\n                        this._handleNewFile(fileOrInput, batchId, verifiedFiles);\n                    }\n                }, this), normalizeData = function() {\n                    if (qq.isFileList(data)) {\n                        data = Array.prototype.slice.call(data);\n                    }\n                    data = [].concat(data);\n                }, self = this, verifiedFiles = [];\n                this._currentBatchId = batchId;\n                if (data) {\n                    normalizeData();\n                    qq.each(data, function(idx, fileContainer) {\n                        if (qq.isFileOrInput(fileContainer)) {\n                            processFileOrInput(fileContainer);\n                        } else if (qq.isBlob(fileContainer)) {\n                            processBlob(fileContainer);\n                        } else if (qq.isObject(fileContainer)) {\n                            if (fileContainer.blob && fileContainer.name) {\n                                processBlobData(fileContainer);\n                            } else if (fileContainer.canvas && fileContainer.name) {\n                                processCanvasData(fileContainer);\n                            }\n                        } else if (fileContainer.tagName && fileContainer.tagName.toLowerCase() === \"canvas\") {\n                            processCanvas(fileContainer);\n                        } else {\n                            self.log(fileContainer + \" is not a valid file container!  Ignoring!\", \"warn\");\n                        }\n                    });\n                    this.log(\"Received \" + verifiedFiles.length + \" files.\");\n                    this._prepareItemsForUpload(verifiedFiles, params, endpoint);\n                }\n            },\n            cancel: function(id) {\n                var uploadData = this._uploadData.retrieve({\n                    id: id\n                });\n                if (uploadData && uploadData.status === qq.status.UPLOAD_FINALIZING) {\n                    this.log(qq.format(\"Ignoring cancel for file ID {} ({}).  Finalizing upload.\", id, this.getName(id)), \"error\");\n                } else {\n                    this._handler.cancel(id);\n                }\n            },\n            cancelAll: function() {\n                var storedIdsCopy = [], self = this;\n                qq.extend(storedIdsCopy, this._storedIds);\n                qq.each(storedIdsCopy, function(idx, storedFileId) {\n                    self.cancel(storedFileId);\n                });\n                this._handler.cancelAll();\n            },\n            clearStoredFiles: function() {\n                this._storedIds = [];\n            },\n            continueUpload: function(id) {\n                var uploadData = this._uploadData.retrieve({\n                    id: id\n                });\n                if (!qq.supportedFeatures.pause || !this._options.chunking.enabled) {\n                    return false;\n                }\n                if (uploadData.status === qq.status.PAUSED) {\n                    this.log(qq.format(\"Paused file ID {} ({}) will be continued.  Not paused.\", id, this.getName(id)));\n                    this._uploadFile(id);\n                    return true;\n                } else {\n                    this.log(qq.format(\"Ignoring continue for file ID {} ({}).  Not paused.\", id, this.getName(id)), \"error\");\n                }\n                return false;\n            },\n            deleteFile: function(id) {\n                return this._onSubmitDelete(id);\n            },\n            doesExist: function(fileOrBlobId) {\n                return this._handler.isValid(fileOrBlobId);\n            },\n            drawThumbnail: function(fileId, imgOrCanvas, maxSize, fromServer, customResizeFunction) {\n                var promiseToReturn = new qq.Promise(), fileOrUrl, options;\n                if (this._imageGenerator) {\n                    fileOrUrl = this._thumbnailUrls[fileId];\n                    options = {\n                        customResizeFunction: customResizeFunction,\n                        maxSize: maxSize > 0 ? maxSize : null,\n                        scale: maxSize > 0\n                    };\n                    if (!fromServer && qq.supportedFeatures.imagePreviews) {\n                        fileOrUrl = this.getFile(fileId);\n                    }\n                    if (fileOrUrl == null) {\n                        promiseToReturn.failure({\n                            container: imgOrCanvas,\n                            error: \"File or URL not found.\"\n                        });\n                    } else {\n                        this._imageGenerator.generate(fileOrUrl, imgOrCanvas, options).then(function success(modifiedContainer) {\n                            promiseToReturn.success(modifiedContainer);\n                        }, function failure(container, reason) {\n                            promiseToReturn.failure({\n                                container: container,\n                                error: reason || \"Problem generating thumbnail\"\n                            });\n                        });\n                    }\n                } else {\n                    promiseToReturn.failure({\n                        container: imgOrCanvas,\n                        error: \"Missing image generator module\"\n                    });\n                }\n                return promiseToReturn;\n            },\n            getButton: function(fileId) {\n                return this._getButton(this._buttonIdsForFileIds[fileId]);\n            },\n            getEndpoint: function(fileId) {\n                return this._endpointStore.get(fileId);\n            },\n            getFile: function(fileOrBlobId) {\n                var file = this._handler.getFile(fileOrBlobId);\n                var uploadDataRecord;\n                if (!file) {\n                    uploadDataRecord = this._uploadData.retrieve({\n                        id: fileOrBlobId\n                    });\n                    if (uploadDataRecord) {\n                        file = uploadDataRecord.file;\n                    }\n                }\n                return file || null;\n            },\n            getInProgress: function() {\n                return this._uploadData.retrieve({\n                    status: [ qq.status.UPLOADING, qq.status.UPLOAD_RETRYING, qq.status.QUEUED ]\n                }).length;\n            },\n            getName: function(id) {\n                return this._uploadData.retrieve({\n                    id: id\n                }).name;\n            },\n            getParentId: function(id) {\n                var uploadDataEntry = this.getUploads({\n                    id: id\n                }), parentId = null;\n                if (uploadDataEntry) {\n                    if (uploadDataEntry.parentId !== undefined) {\n                        parentId = uploadDataEntry.parentId;\n                    }\n                }\n                return parentId;\n            },\n            getResumableFilesData: function() {\n                return this._handler.getResumableFilesData();\n            },\n            getSize: function(id) {\n                return this._uploadData.retrieve({\n                    id: id\n                }).size;\n            },\n            getNetUploads: function() {\n                return this._netUploaded;\n            },\n            getRemainingAllowedItems: function() {\n                var allowedItems = this._currentItemLimit;\n                if (allowedItems > 0) {\n                    return allowedItems - this._netUploadedOrQueued;\n                }\n                return null;\n            },\n            getUploads: function(optionalFilter) {\n                return this._uploadData.retrieve(optionalFilter);\n            },\n            getUuid: function(id) {\n                return this._uploadData.retrieve({\n                    id: id\n                }).uuid;\n            },\n            isResumable: function(id) {\n                return this._handler.hasResumeRecord(id);\n            },\n            log: function(str, level) {\n                if (this._options.debug && (!level || level === \"info\")) {\n                    qq.log(\"[Fine Uploader \" + qq.version + \"] \" + str);\n                } else if (level && level !== \"info\") {\n                    qq.log(\"[Fine Uploader \" + qq.version + \"] \" + str, level);\n                }\n            },\n            pauseUpload: function(id) {\n                var uploadData = this._uploadData.retrieve({\n                    id: id\n                });\n                if (!qq.supportedFeatures.pause || !this._options.chunking.enabled) {\n                    return false;\n                }\n                if (qq.indexOf([ qq.status.UPLOADING, qq.status.UPLOAD_RETRYING ], uploadData.status) >= 0) {\n                    if (this._handler.pause(id)) {\n                        this._uploadData.setStatus(id, qq.status.PAUSED);\n                        return true;\n                    } else {\n                        this.log(qq.format(\"Unable to pause file ID {} ({}).\", id, this.getName(id)), \"error\");\n                    }\n                } else {\n                    this.log(qq.format(\"Ignoring pause for file ID {} ({}).  Not in progress.\", id, this.getName(id)), \"error\");\n                }\n                return false;\n            },\n            removeFileRef: function(id) {\n                this._handler.expunge(id);\n                this._uploadData.removeFileRef(id);\n            },\n            reset: function() {\n                this.log(\"Resetting uploader...\");\n                this._handler.reset();\n                this._storedIds = [];\n                this._autoRetries = [];\n                this._retryTimeouts = [];\n                this._preventRetries = [];\n                this._thumbnailUrls = [];\n                qq.each(this._buttons, function(idx, button) {\n                    button.reset();\n                });\n                this._paramsStore.reset();\n                this._endpointStore.reset();\n                this._netUploadedOrQueued = 0;\n                this._netUploaded = 0;\n                this._uploadData.reset();\n                this._buttonIdsForFileIds = [];\n                this._pasteHandler && this._pasteHandler.reset();\n                this._options.session.refreshOnReset && this._refreshSessionData();\n                this._succeededSinceLastAllComplete = [];\n                this._failedSinceLastAllComplete = [];\n                this._totalProgress && this._totalProgress.reset();\n                this._customResumeDataStore.reset();\n            },\n            retry: function(id) {\n                return this._manualRetry(id);\n            },\n            scaleImage: function(id, specs) {\n                var self = this;\n                return qq.Scaler.prototype.scaleImage(id, specs, {\n                    log: qq.bind(self.log, self),\n                    getFile: qq.bind(self.getFile, self),\n                    uploadData: self._uploadData\n                });\n            },\n            setCustomHeaders: function(headers, id) {\n                this._customHeadersStore.set(headers, id);\n            },\n            setCustomResumeData: function(id, data) {\n                this._customResumeDataStore.set(data, id);\n            },\n            setDeleteFileCustomHeaders: function(headers, id) {\n                this._deleteFileCustomHeadersStore.set(headers, id);\n            },\n            setDeleteFileEndpoint: function(endpoint, id) {\n                this._deleteFileEndpointStore.set(endpoint, id);\n            },\n            setDeleteFileParams: function(params, id) {\n                this._deleteFileParamsStore.set(params, id);\n            },\n            setEndpoint: function(endpoint, id) {\n                this._endpointStore.set(endpoint, id);\n            },\n            setForm: function(elementOrId) {\n                this._updateFormSupportAndParams(elementOrId);\n            },\n            setItemLimit: function(newItemLimit) {\n                this._currentItemLimit = newItemLimit;\n            },\n            setName: function(id, newName) {\n                this._uploadData.updateName(id, newName);\n            },\n            setParams: function(params, id) {\n                this._paramsStore.set(params, id);\n            },\n            setUuid: function(id, newUuid) {\n                return this._uploadData.uuidChanged(id, newUuid);\n            },\n            setStatus: function(id, newStatus) {\n                var fileRecord = this.getUploads({\n                    id: id\n                });\n                if (!fileRecord) {\n                    throw new qq.Error(id + \" is not a valid file ID.\");\n                }\n                switch (newStatus) {\n                  case qq.status.DELETED:\n                    this._onDeleteComplete(id, null, false);\n                    break;\n\n                  case qq.status.DELETE_FAILED:\n                    this._onDeleteComplete(id, null, true);\n                    break;\n\n                  default:\n                    var errorMessage = \"Method setStatus called on '\" + name + \"' not implemented yet for \" + newStatus;\n                    this.log(errorMessage);\n                    throw new qq.Error(errorMessage);\n                }\n            },\n            uploadStoredFiles: function() {\n                if (this._storedIds.length === 0) {\n                    this._itemError(\"noFilesError\");\n                } else {\n                    this._uploadStoredFiles();\n                }\n            }\n        };\n        qq.basePrivateApi = {\n            _addCannedFile: function(sessionData) {\n                var self = this;\n                return this._uploadData.addFile({\n                    uuid: sessionData.uuid,\n                    name: sessionData.name,\n                    size: sessionData.size,\n                    status: qq.status.UPLOAD_SUCCESSFUL,\n                    onBeforeStatusChange: function(id) {\n                        sessionData.deleteFileEndpoint && self.setDeleteFileEndpoint(sessionData.deleteFileEndpoint, id);\n                        sessionData.deleteFileParams && self.setDeleteFileParams(sessionData.deleteFileParams, id);\n                        if (sessionData.thumbnailUrl) {\n                            self._thumbnailUrls[id] = sessionData.thumbnailUrl;\n                        }\n                        self._netUploaded++;\n                        self._netUploadedOrQueued++;\n                    }\n                });\n            },\n            _annotateWithButtonId: function(file, associatedInput) {\n                if (qq.isFile(file)) {\n                    file.qqButtonId = this._getButtonId(associatedInput);\n                }\n            },\n            _batchError: function(message) {\n                this._options.callbacks.onError(null, null, message, undefined);\n            },\n            _createDeleteHandler: function() {\n                var self = this;\n                return new qq.DeleteFileAjaxRequester({\n                    method: this._options.deleteFile.method.toUpperCase(),\n                    maxConnections: this._options.maxConnections,\n                    uuidParamName: this._options.request.uuidName,\n                    customHeaders: this._deleteFileCustomHeadersStore,\n                    paramsStore: this._deleteFileParamsStore,\n                    endpointStore: this._deleteFileEndpointStore,\n                    cors: this._options.cors,\n                    log: qq.bind(self.log, self),\n                    onDelete: function(id) {\n                        self._onDelete(id);\n                        self._options.callbacks.onDelete(id);\n                    },\n                    onDeleteComplete: function(id, xhrOrXdr, isError) {\n                        self._onDeleteComplete(id, xhrOrXdr, isError);\n                        self._options.callbacks.onDeleteComplete(id, xhrOrXdr, isError);\n                    }\n                });\n            },\n            _createPasteHandler: function() {\n                var self = this;\n                return new qq.PasteSupport({\n                    targetElement: this._options.paste.targetElement,\n                    callbacks: {\n                        log: qq.bind(self.log, self),\n                        pasteReceived: function(blob) {\n                            self._handleCheckedCallback({\n                                name: \"onPasteReceived\",\n                                callback: qq.bind(self._options.callbacks.onPasteReceived, self, blob),\n                                onSuccess: qq.bind(self._handlePasteSuccess, self, blob),\n                                identifier: \"pasted image\"\n                            });\n                        }\n                    }\n                });\n            },\n            _createStore: function(initialValue, _readOnlyValues_) {\n                var store = {}, catchall = initialValue, perIdReadOnlyValues = {}, readOnlyValues = _readOnlyValues_, copy = function(orig) {\n                    if (qq.isObject(orig)) {\n                        return qq.extend({}, orig);\n                    }\n                    return orig;\n                }, getReadOnlyValues = function() {\n                    if (qq.isFunction(readOnlyValues)) {\n                        return readOnlyValues();\n                    }\n                    return readOnlyValues;\n                }, includeReadOnlyValues = function(id, existing) {\n                    if (readOnlyValues && qq.isObject(existing)) {\n                        qq.extend(existing, getReadOnlyValues());\n                    }\n                    if (perIdReadOnlyValues[id]) {\n                        qq.extend(existing, perIdReadOnlyValues[id]);\n                    }\n                };\n                return {\n                    set: function(val, id) {\n                        if (id == null) {\n                            store = {};\n                            catchall = copy(val);\n                        } else {\n                            store[id] = copy(val);\n                        }\n                    },\n                    get: function(id) {\n                        var values;\n                        if (id != null && store[id]) {\n                            values = store[id];\n                        } else {\n                            values = copy(catchall);\n                        }\n                        includeReadOnlyValues(id, values);\n                        return copy(values);\n                    },\n                    addReadOnly: function(id, values) {\n                        if (qq.isObject(store)) {\n                            if (id === null) {\n                                if (qq.isFunction(values)) {\n                                    readOnlyValues = values;\n                                } else {\n                                    readOnlyValues = readOnlyValues || {};\n                                    qq.extend(readOnlyValues, values);\n                                }\n                            } else {\n                                perIdReadOnlyValues[id] = perIdReadOnlyValues[id] || {};\n                                qq.extend(perIdReadOnlyValues[id], values);\n                            }\n                        }\n                    },\n                    remove: function(fileId) {\n                        return delete store[fileId];\n                    },\n                    reset: function() {\n                        store = {};\n                        perIdReadOnlyValues = {};\n                        catchall = initialValue;\n                    }\n                };\n            },\n            _createUploadDataTracker: function() {\n                var self = this;\n                return new qq.UploadData({\n                    getName: function(id) {\n                        return self.getName(id);\n                    },\n                    getUuid: function(id) {\n                        return self.getUuid(id);\n                    },\n                    getSize: function(id) {\n                        return self.getSize(id);\n                    },\n                    onStatusChange: function(id, oldStatus, newStatus) {\n                        self._onUploadStatusChange(id, oldStatus, newStatus);\n                        self._options.callbacks.onStatusChange(id, oldStatus, newStatus);\n                        self._maybeAllComplete(id, newStatus);\n                        if (self._totalProgress) {\n                            setTimeout(function() {\n                                self._totalProgress.onStatusChange(id, oldStatus, newStatus);\n                            }, 0);\n                        }\n                    }\n                });\n            },\n            _createUploadButton: function(spec) {\n                var self = this, acceptFiles = spec.accept || this._options.validation.acceptFiles, allowedExtensions = spec.allowedExtensions || this._options.validation.allowedExtensions, button;\n                function allowMultiple() {\n                    if (qq.supportedFeatures.ajaxUploading) {\n                        if (self._options.workarounds.iosEmptyVideos && qq.ios() && !qq.ios6() && self._isAllowedExtension(allowedExtensions, \".mov\")) {\n                            return false;\n                        }\n                        if (spec.multiple === undefined) {\n                            return self._options.multiple;\n                        }\n                        return spec.multiple;\n                    }\n                    return false;\n                }\n                button = new qq.UploadButton({\n                    acceptFiles: acceptFiles,\n                    element: spec.element,\n                    focusClass: this._options.classes.buttonFocus,\n                    folders: spec.folders,\n                    hoverClass: this._options.classes.buttonHover,\n                    ios8BrowserCrashWorkaround: this._options.workarounds.ios8BrowserCrash,\n                    multiple: allowMultiple(),\n                    name: this._options.request.inputName,\n                    onChange: function(input) {\n                        self._onInputChange(input);\n                    },\n                    title: spec.title == null ? this._options.text.fileInputTitle : spec.title\n                });\n                this._disposeSupport.addDisposer(function() {\n                    button.dispose();\n                });\n                self._buttons.push(button);\n                return button;\n            },\n            _createUploadHandler: function(additionalOptions, namespace) {\n                var self = this, lastOnProgress = {}, options = {\n                    debug: this._options.debug,\n                    maxConnections: this._options.maxConnections,\n                    cors: this._options.cors,\n                    paramsStore: this._paramsStore,\n                    endpointStore: this._endpointStore,\n                    chunking: this._options.chunking,\n                    resume: this._options.resume,\n                    blobs: this._options.blobs,\n                    log: qq.bind(self.log, self),\n                    preventRetryParam: this._options.retry.preventRetryResponseProperty,\n                    onProgress: function(id, name, loaded, total) {\n                        if (loaded < 0 || total < 0) {\n                            return;\n                        }\n                        if (lastOnProgress[id]) {\n                            if (lastOnProgress[id].loaded !== loaded || lastOnProgress[id].total !== total) {\n                                self._onProgress(id, name, loaded, total);\n                                self._options.callbacks.onProgress(id, name, loaded, total);\n                            }\n                        } else {\n                            self._onProgress(id, name, loaded, total);\n                            self._options.callbacks.onProgress(id, name, loaded, total);\n                        }\n                        lastOnProgress[id] = {\n                            loaded: loaded,\n                            total: total\n                        };\n                    },\n                    onComplete: function(id, name, result, xhr) {\n                        delete lastOnProgress[id];\n                        var status = self.getUploads({\n                            id: id\n                        }).status, retVal;\n                        if (status === qq.status.UPLOAD_SUCCESSFUL || status === qq.status.UPLOAD_FAILED) {\n                            return;\n                        }\n                        retVal = self._onComplete(id, name, result, xhr);\n                        if (retVal instanceof qq.Promise) {\n                            retVal.done(function() {\n                                self._options.callbacks.onComplete(id, name, result, xhr);\n                            });\n                        } else {\n                            self._options.callbacks.onComplete(id, name, result, xhr);\n                        }\n                    },\n                    onCancel: function(id, name, cancelFinalizationEffort) {\n                        var promise = new qq.Promise();\n                        self._handleCheckedCallback({\n                            name: \"onCancel\",\n                            callback: qq.bind(self._options.callbacks.onCancel, self, id, name),\n                            onFailure: promise.failure,\n                            onSuccess: function() {\n                                cancelFinalizationEffort.then(function() {\n                                    self._onCancel(id, name);\n                                });\n                                promise.success();\n                            },\n                            identifier: id\n                        });\n                        return promise;\n                    },\n                    onUploadPrep: qq.bind(this._onUploadPrep, this),\n                    onUpload: function(id, name) {\n                        self._onUpload(id, name);\n                        var onUploadResult = self._options.callbacks.onUpload(id, name);\n                        if (qq.isGenericPromise(onUploadResult)) {\n                            self.log(qq.format(\"onUpload for {} returned a Promise - waiting for resolution.\", id));\n                            return onUploadResult;\n                        }\n                        return new qq.Promise().success();\n                    },\n                    onUploadChunk: function(id, name, chunkData) {\n                        self._onUploadChunk(id, chunkData);\n                        var onUploadChunkResult = self._options.callbacks.onUploadChunk(id, name, chunkData);\n                        if (qq.isGenericPromise(onUploadChunkResult)) {\n                            self.log(qq.format(\"onUploadChunk for {}.{} returned a Promise - waiting for resolution.\", id, chunkData.partIndex));\n                            return onUploadChunkResult;\n                        }\n                        return new qq.Promise().success();\n                    },\n                    onUploadChunkSuccess: function(id, chunkData, result, xhr) {\n                        self._onUploadChunkSuccess(id, chunkData);\n                        self._options.callbacks.onUploadChunkSuccess.apply(self, arguments);\n                    },\n                    onResume: function(id, name, chunkData, customResumeData) {\n                        return self._options.callbacks.onResume(id, name, chunkData, customResumeData);\n                    },\n                    onAutoRetry: function(id, name, responseJSON, xhr) {\n                        return self._onAutoRetry.apply(self, arguments);\n                    },\n                    onUuidChanged: function(id, newUuid) {\n                        self.log(\"Server requested UUID change from '\" + self.getUuid(id) + \"' to '\" + newUuid + \"'\");\n                        self.setUuid(id, newUuid);\n                    },\n                    getName: qq.bind(self.getName, self),\n                    getUuid: qq.bind(self.getUuid, self),\n                    getSize: qq.bind(self.getSize, self),\n                    setSize: qq.bind(self._setSize, self),\n                    getDataByUuid: function(uuid) {\n                        return self.getUploads({\n                            uuid: uuid\n                        });\n                    },\n                    isQueued: function(id) {\n                        var status = self.getUploads({\n                            id: id\n                        }).status;\n                        return status === qq.status.QUEUED || status === qq.status.SUBMITTED || status === qq.status.UPLOAD_RETRYING || status === qq.status.PAUSED;\n                    },\n                    getIdsInProxyGroup: self._uploadData.getIdsInProxyGroup,\n                    getIdsInBatch: self._uploadData.getIdsInBatch,\n                    isInProgress: function(id) {\n                        return self.getUploads({\n                            id: id\n                        }).status === qq.status.UPLOADING;\n                    },\n                    getCustomResumeData: qq.bind(self._getCustomResumeData, self),\n                    setStatus: function(id, status) {\n                        self._uploadData.setStatus(id, status);\n                    }\n                };\n                qq.each(this._options.request, function(prop, val) {\n                    options[prop] = val;\n                });\n                options.customHeaders = this._customHeadersStore;\n                if (additionalOptions) {\n                    qq.each(additionalOptions, function(key, val) {\n                        options[key] = val;\n                    });\n                }\n                return new qq.UploadHandlerController(options, namespace);\n            },\n            _fileOrBlobRejected: function(id) {\n                this._netUploadedOrQueued--;\n                this._uploadData.setStatus(id, qq.status.REJECTED);\n            },\n            _formatSize: function(bytes) {\n                if (bytes === 0) {\n                    return bytes + this._options.text.sizeSymbols[0];\n                }\n                var i = -1;\n                do {\n                    bytes = bytes / 1e3;\n                    i++;\n                } while (bytes > 999);\n                return Math.max(bytes, .1).toFixed(1) + this._options.text.sizeSymbols[i];\n            },\n            _generateExtraButtonSpecs: function() {\n                var self = this;\n                this._extraButtonSpecs = {};\n                qq.each(this._options.extraButtons, function(idx, extraButtonOptionEntry) {\n                    var multiple = extraButtonOptionEntry.multiple, validation = qq.extend({}, self._options.validation, true), extraButtonSpec = qq.extend({}, extraButtonOptionEntry);\n                    if (multiple === undefined) {\n                        multiple = self._options.multiple;\n                    }\n                    if (extraButtonSpec.validation) {\n                        qq.extend(validation, extraButtonOptionEntry.validation, true);\n                    }\n                    qq.extend(extraButtonSpec, {\n                        multiple: multiple,\n                        validation: validation\n                    }, true);\n                    self._initExtraButton(extraButtonSpec);\n                });\n            },\n            _getButton: function(buttonId) {\n                var extraButtonsSpec = this._extraButtonSpecs[buttonId];\n                if (extraButtonsSpec) {\n                    return extraButtonsSpec.element;\n                } else if (buttonId === this._defaultButtonId) {\n                    return this._options.button;\n                }\n            },\n            _getButtonId: function(buttonOrFileInputOrFile) {\n                var inputs, fileInput, fileBlobOrInput = buttonOrFileInputOrFile;\n                if (fileBlobOrInput instanceof qq.BlobProxy) {\n                    fileBlobOrInput = fileBlobOrInput.referenceBlob;\n                }\n                if (fileBlobOrInput && !qq.isBlob(fileBlobOrInput)) {\n                    if (qq.isFile(fileBlobOrInput)) {\n                        return fileBlobOrInput.qqButtonId;\n                    } else if (fileBlobOrInput.tagName.toLowerCase() === \"input\" && fileBlobOrInput.type.toLowerCase() === \"file\") {\n                        return fileBlobOrInput.getAttribute(qq.UploadButton.BUTTON_ID_ATTR_NAME);\n                    }\n                    inputs = fileBlobOrInput.getElementsByTagName(\"input\");\n                    qq.each(inputs, function(idx, input) {\n                        if (input.getAttribute(\"type\") === \"file\") {\n                            fileInput = input;\n                            return false;\n                        }\n                    });\n                    if (fileInput) {\n                        return fileInput.getAttribute(qq.UploadButton.BUTTON_ID_ATTR_NAME);\n                    }\n                }\n            },\n            _getCustomResumeData: function(fileId) {\n                return this._customResumeDataStore.get(fileId);\n            },\n            _getNotFinished: function() {\n                return this._uploadData.retrieve({\n                    status: [ qq.status.UPLOADING, qq.status.UPLOAD_RETRYING, qq.status.QUEUED, qq.status.SUBMITTING, qq.status.SUBMITTED, qq.status.PAUSED ]\n                }).length;\n            },\n            _getValidationBase: function(buttonId) {\n                var extraButtonSpec = this._extraButtonSpecs[buttonId];\n                return extraButtonSpec ? extraButtonSpec.validation : this._options.validation;\n            },\n            _getValidationDescriptor: function(fileWrapper) {\n                if (fileWrapper.file instanceof qq.BlobProxy) {\n                    return {\n                        name: qq.getFilename(fileWrapper.file.referenceBlob),\n                        size: fileWrapper.file.referenceBlob.size\n                    };\n                }\n                return {\n                    name: this.getUploads({\n                        id: fileWrapper.id\n                    }).name,\n                    size: this.getUploads({\n                        id: fileWrapper.id\n                    }).size\n                };\n            },\n            _getValidationDescriptors: function(fileWrappers) {\n                var self = this, fileDescriptors = [];\n                qq.each(fileWrappers, function(idx, fileWrapper) {\n                    fileDescriptors.push(self._getValidationDescriptor(fileWrapper));\n                });\n                return fileDescriptors;\n            },\n            _handleCameraAccess: function() {\n                if (this._options.camera.ios && qq.ios()) {\n                    var acceptIosCamera = \"image/*;capture=camera\", button = this._options.camera.button, buttonId = button ? this._getButtonId(button) : this._defaultButtonId, optionRoot = this._options;\n                    if (buttonId && buttonId !== this._defaultButtonId) {\n                        optionRoot = this._extraButtonSpecs[buttonId];\n                    }\n                    optionRoot.multiple = false;\n                    if (optionRoot.validation.acceptFiles === null) {\n                        optionRoot.validation.acceptFiles = acceptIosCamera;\n                    } else {\n                        optionRoot.validation.acceptFiles += \",\" + acceptIosCamera;\n                    }\n                    qq.each(this._buttons, function(idx, button) {\n                        if (button.getButtonId() === buttonId) {\n                            button.setMultiple(optionRoot.multiple);\n                            button.setAcceptFiles(optionRoot.acceptFiles);\n                            return false;\n                        }\n                    });\n                }\n            },\n            _handleCheckedCallback: function(details) {\n                var self = this, callbackRetVal = details.callback();\n                if (qq.isGenericPromise(callbackRetVal)) {\n                    this.log(details.name + \" - waiting for \" + details.name + \" promise to be fulfilled for \" + details.identifier);\n                    return callbackRetVal.then(function(successParam) {\n                        self.log(details.name + \" promise success for \" + details.identifier);\n                        details.onSuccess(successParam);\n                    }, function() {\n                        if (details.onFailure) {\n                            self.log(details.name + \" promise failure for \" + details.identifier);\n                            details.onFailure();\n                        } else {\n                            self.log(details.name + \" promise failure for \" + details.identifier);\n                        }\n                    });\n                }\n                if (callbackRetVal !== false) {\n                    details.onSuccess(callbackRetVal);\n                } else {\n                    if (details.onFailure) {\n                        this.log(details.name + \" - return value was 'false' for \" + details.identifier + \".  Invoking failure callback.\");\n                        details.onFailure();\n                    } else {\n                        this.log(details.name + \" - return value was 'false' for \" + details.identifier + \".  Will not proceed.\");\n                    }\n                }\n                return callbackRetVal;\n            },\n            _handleNewFile: function(file, batchId, newFileWrapperList) {\n                var self = this, uuid = qq.getUniqueId(), size = -1, name = qq.getFilename(file), actualFile = file.blob || file, handler = this._customNewFileHandler ? this._customNewFileHandler : qq.bind(self._handleNewFileGeneric, self);\n                if (!qq.isInput(actualFile) && actualFile.size >= 0) {\n                    size = actualFile.size;\n                }\n                handler(actualFile, name, uuid, size, newFileWrapperList, batchId, this._options.request.uuidName, {\n                    uploadData: self._uploadData,\n                    paramsStore: self._paramsStore,\n                    addFileToHandler: function(id, file) {\n                        self._handler.add(id, file);\n                        self._netUploadedOrQueued++;\n                        self._trackButton(id);\n                    }\n                });\n            },\n            _handleNewFileGeneric: function(file, name, uuid, size, fileList, batchId) {\n                var id = this._uploadData.addFile({\n                    uuid: uuid,\n                    name: name,\n                    size: size,\n                    batchId: batchId,\n                    file: file\n                });\n                this._handler.add(id, file);\n                this._trackButton(id);\n                this._netUploadedOrQueued++;\n                fileList.push({\n                    id: id,\n                    file: file\n                });\n            },\n            _handlePasteSuccess: function(blob, extSuppliedName) {\n                var extension = blob.type.split(\"/\")[1], name = extSuppliedName;\n                if (name == null) {\n                    name = this._options.paste.defaultName;\n                }\n                name += \".\" + extension;\n                this.addFiles({\n                    name: name,\n                    blob: blob\n                });\n            },\n            _handleDeleteSuccess: function(id) {\n                if (this.getUploads({\n                    id: id\n                }).status !== qq.status.DELETED) {\n                    var name = this.getName(id);\n                    this._netUploadedOrQueued--;\n                    this._netUploaded--;\n                    this._handler.expunge(id);\n                    this._uploadData.setStatus(id, qq.status.DELETED);\n                    this.log(\"Delete request for '\" + name + \"' has succeeded.\");\n                }\n            },\n            _handleDeleteFailed: function(id, xhrOrXdr) {\n                var name = this.getName(id);\n                this._uploadData.setStatus(id, qq.status.DELETE_FAILED);\n                this.log(\"Delete request for '\" + name + \"' has failed.\", \"error\");\n                if (!xhrOrXdr || xhrOrXdr.withCredentials === undefined) {\n                    this._options.callbacks.onError(id, name, \"Delete request failed\", xhrOrXdr);\n                } else {\n                    this._options.callbacks.onError(id, name, \"Delete request failed with response code \" + xhrOrXdr.status, xhrOrXdr);\n                }\n            },\n            _initExtraButton: function(spec) {\n                var button = this._createUploadButton({\n                    accept: spec.validation.acceptFiles,\n                    allowedExtensions: spec.validation.allowedExtensions,\n                    element: spec.element,\n                    folders: spec.folders,\n                    multiple: spec.multiple,\n                    title: spec.fileInputTitle\n                });\n                this._extraButtonSpecs[button.getButtonId()] = spec;\n            },\n            _initFormSupportAndParams: function() {\n                this._formSupport = qq.FormSupport && new qq.FormSupport(this._options.form, qq.bind(this.uploadStoredFiles, this), qq.bind(this.log, this));\n                if (this._formSupport && this._formSupport.attachedToForm) {\n                    this._paramsStore = this._createStore(this._options.request.params, this._formSupport.getFormInputsAsObject);\n                    this._options.autoUpload = this._formSupport.newAutoUpload;\n                    if (this._formSupport.newEndpoint) {\n                        this._options.request.endpoint = this._formSupport.newEndpoint;\n                    }\n                } else {\n                    this._paramsStore = this._createStore(this._options.request.params);\n                }\n            },\n            _isDeletePossible: function() {\n                if (!qq.DeleteFileAjaxRequester || !this._options.deleteFile.enabled) {\n                    return false;\n                }\n                if (this._options.cors.expected) {\n                    if (qq.supportedFeatures.deleteFileCorsXhr) {\n                        return true;\n                    }\n                    if (qq.supportedFeatures.deleteFileCorsXdr && this._options.cors.allowXdr) {\n                        return true;\n                    }\n                    return false;\n                }\n                return true;\n            },\n            _isAllowedExtension: function(allowed, fileName) {\n                var valid = false;\n                if (!allowed.length) {\n                    return true;\n                }\n                qq.each(allowed, function(idx, allowedExt) {\n                    if (qq.isString(allowedExt)) {\n                        var extRegex = new RegExp(\"\\\\.\" + allowedExt + \"$\", \"i\");\n                        if (fileName.match(extRegex) != null) {\n                            valid = true;\n                            return false;\n                        }\n                    }\n                });\n                return valid;\n            },\n            _itemError: function(code, maybeNameOrNames, item) {\n                var message = this._options.messages[code], allowedExtensions = [], names = [].concat(maybeNameOrNames), name = names[0], buttonId = this._getButtonId(item), validationBase = this._getValidationBase(buttonId), extensionsForMessage, placeholderMatch;\n                function r(name, replacement) {\n                    message = message.replace(name, replacement);\n                }\n                qq.each(validationBase.allowedExtensions, function(idx, allowedExtension) {\n                    if (qq.isString(allowedExtension)) {\n                        allowedExtensions.push(allowedExtension);\n                    }\n                });\n                extensionsForMessage = allowedExtensions.join(\", \").toLowerCase();\n                r(\"{file}\", this._options.formatFileName(name));\n                r(\"{extensions}\", extensionsForMessage);\n                r(\"{sizeLimit}\", this._formatSize(validationBase.sizeLimit));\n                r(\"{minSizeLimit}\", this._formatSize(validationBase.minSizeLimit));\n                placeholderMatch = message.match(/(\\{\\w+\\})/g);\n                if (placeholderMatch !== null) {\n                    qq.each(placeholderMatch, function(idx, placeholder) {\n                        r(placeholder, names[idx]);\n                    });\n                }\n                this._options.callbacks.onError(null, name, message, undefined);\n                return message;\n            },\n            _manualRetry: function(id, callback) {\n                if (this._onBeforeManualRetry(id)) {\n                    this._netUploadedOrQueued++;\n                    this._uploadData.setStatus(id, qq.status.UPLOAD_RETRYING);\n                    if (callback) {\n                        callback(id);\n                    } else {\n                        this._handler.retry(id);\n                    }\n                    return true;\n                }\n            },\n            _maybeAllComplete: function(id, status) {\n                var self = this, notFinished = this._getNotFinished();\n                if (status === qq.status.UPLOAD_SUCCESSFUL) {\n                    this._succeededSinceLastAllComplete.push(id);\n                } else if (status === qq.status.UPLOAD_FAILED) {\n                    this._failedSinceLastAllComplete.push(id);\n                }\n                if (notFinished === 0 && (this._succeededSinceLastAllComplete.length || this._failedSinceLastAllComplete.length)) {\n                    setTimeout(function() {\n                        self._onAllComplete(self._succeededSinceLastAllComplete, self._failedSinceLastAllComplete);\n                    }, 0);\n                }\n            },\n            _maybeHandleIos8SafariWorkaround: function() {\n                var self = this;\n                if (this._options.workarounds.ios8SafariUploads && qq.ios800() && qq.iosSafari()) {\n                    setTimeout(function() {\n                        window.alert(self._options.messages.unsupportedBrowserIos8Safari);\n                    }, 0);\n                    throw new qq.Error(this._options.messages.unsupportedBrowserIos8Safari);\n                }\n            },\n            _maybeParseAndSendUploadError: function(id, name, response, xhr) {\n                if (!response.success) {\n                    if (xhr && xhr.status !== 200 && !response.error) {\n                        this._options.callbacks.onError(id, name, \"XHR returned response code \" + xhr.status, xhr);\n                    } else {\n                        var errorReason = response.error ? response.error : this._options.text.defaultResponseError;\n                        this._options.callbacks.onError(id, name, errorReason, xhr);\n                    }\n                }\n            },\n            _maybeProcessNextItemAfterOnValidateCallback: function(validItem, items, index, params, endpoint) {\n                var self = this;\n                if (items.length > index) {\n                    if (validItem || !this._options.validation.stopOnFirstInvalidFile) {\n                        setTimeout(function() {\n                            var validationDescriptor = self._getValidationDescriptor(items[index]), buttonId = self._getButtonId(items[index].file), button = self._getButton(buttonId);\n                            self._handleCheckedCallback({\n                                name: \"onValidate\",\n                                callback: qq.bind(self._options.callbacks.onValidate, self, validationDescriptor, button),\n                                onSuccess: qq.bind(self._onValidateCallbackSuccess, self, items, index, params, endpoint),\n                                onFailure: qq.bind(self._onValidateCallbackFailure, self, items, index, params, endpoint),\n                                identifier: \"Item '\" + validationDescriptor.name + \"', size: \" + validationDescriptor.size\n                            });\n                        }, 0);\n                    } else if (!validItem) {\n                        for (;index < items.length; index++) {\n                            self._fileOrBlobRejected(items[index].id);\n                        }\n                    }\n                }\n            },\n            _onAllComplete: function(successful, failed) {\n                this._totalProgress && this._totalProgress.onAllComplete(successful, failed, this._preventRetries);\n                this._options.callbacks.onAllComplete(qq.extend([], successful), qq.extend([], failed));\n                this._succeededSinceLastAllComplete = [];\n                this._failedSinceLastAllComplete = [];\n            },\n            _onAutoRetry: function(id, name, responseJSON, xhr, callback) {\n                var self = this;\n                self._preventRetries[id] = responseJSON[self._options.retry.preventRetryResponseProperty];\n                if (self._shouldAutoRetry(id)) {\n                    var retryWaitPeriod = self._options.retry.autoAttemptDelay * 1e3;\n                    self._maybeParseAndSendUploadError.apply(self, arguments);\n                    self._options.callbacks.onAutoRetry(id, name, self._autoRetries[id]);\n                    self._onBeforeAutoRetry(id, name);\n                    self._uploadData.setStatus(id, qq.status.UPLOAD_RETRYING);\n                    self._retryTimeouts[id] = setTimeout(function() {\n                        self.log(\"Starting retry for \" + name + \"...\");\n                        if (callback) {\n                            callback(id);\n                        } else {\n                            self._handler.retry(id);\n                        }\n                    }, retryWaitPeriod);\n                    return true;\n                }\n            },\n            _onBeforeAutoRetry: function(id, name) {\n                this.log(\"Waiting \" + this._options.retry.autoAttemptDelay + \" seconds before retrying \" + name + \"...\");\n            },\n            _onBeforeManualRetry: function(id) {\n                var itemLimit = this._currentItemLimit, fileName;\n                if (this._preventRetries[id]) {\n                    this.log(\"Retries are forbidden for id \" + id, \"warn\");\n                    return false;\n                } else if (this._handler.isValid(id)) {\n                    fileName = this.getName(id);\n                    if (this._options.callbacks.onManualRetry(id, fileName) === false) {\n                        return false;\n                    }\n                    if (itemLimit > 0 && this._netUploadedOrQueued + 1 > itemLimit) {\n                        this._itemError(\"retryFailTooManyItems\");\n                        return false;\n                    }\n                    this.log(\"Retrying upload for '\" + fileName + \"' (id: \" + id + \")...\");\n                    return true;\n                } else {\n                    this.log(\"'\" + id + \"' is not a valid file ID\", \"error\");\n                    return false;\n                }\n            },\n            _onCancel: function(id, name) {\n                this._netUploadedOrQueued--;\n                clearTimeout(this._retryTimeouts[id]);\n                var storedItemIndex = qq.indexOf(this._storedIds, id);\n                if (!this._options.autoUpload && storedItemIndex >= 0) {\n                    this._storedIds.splice(storedItemIndex, 1);\n                }\n                this._uploadData.setStatus(id, qq.status.CANCELED);\n            },\n            _onComplete: function(id, name, result, xhr) {\n                if (!result.success) {\n                    this._netUploadedOrQueued--;\n                    this._uploadData.setStatus(id, qq.status.UPLOAD_FAILED);\n                    if (result[this._options.retry.preventRetryResponseProperty] === true) {\n                        this._preventRetries[id] = true;\n                    }\n                } else {\n                    if (result.thumbnailUrl) {\n                        this._thumbnailUrls[id] = result.thumbnailUrl;\n                    }\n                    this._netUploaded++;\n                    this._uploadData.setStatus(id, qq.status.UPLOAD_SUCCESSFUL);\n                }\n                this._maybeParseAndSendUploadError(id, name, result, xhr);\n                return result.success ? true : false;\n            },\n            _onDelete: function(id) {\n                this._uploadData.setStatus(id, qq.status.DELETING);\n            },\n            _onDeleteComplete: function(id, xhrOrXdr, isError) {\n                var name = this.getName(id);\n                if (isError) {\n                    this._handleDeleteFailed(id, xhrOrXdr);\n                } else {\n                    this._handleDeleteSuccess(id);\n                }\n            },\n            _onInputChange: function(input) {\n                var fileIndex;\n                if (qq.supportedFeatures.ajaxUploading) {\n                    for (fileIndex = 0; fileIndex < input.files.length; fileIndex++) {\n                        this._annotateWithButtonId(input.files[fileIndex], input);\n                    }\n                    this.addFiles(input.files);\n                } else if (input.value.length > 0) {\n                    this.addFiles(input);\n                }\n                qq.each(this._buttons, function(idx, button) {\n                    button.reset();\n                });\n            },\n            _onProgress: function(id, name, loaded, total) {\n                this._totalProgress && this._totalProgress.onIndividualProgress(id, loaded, total);\n            },\n            _onSubmit: function(id, name) {},\n            _onSubmitCallbackSuccess: function(id, name) {\n                this._onSubmit.apply(this, arguments);\n                this._uploadData.setStatus(id, qq.status.SUBMITTED);\n                this._onSubmitted.apply(this, arguments);\n                if (this._options.autoUpload) {\n                    this._options.callbacks.onSubmitted.apply(this, arguments);\n                    this._uploadFile(id);\n                } else {\n                    this._storeForLater(id);\n                    this._options.callbacks.onSubmitted.apply(this, arguments);\n                }\n            },\n            _onSubmitDelete: function(id, onSuccessCallback, additionalMandatedParams) {\n                var uuid = this.getUuid(id), adjustedOnSuccessCallback;\n                if (onSuccessCallback) {\n                    adjustedOnSuccessCallback = qq.bind(onSuccessCallback, this, id, uuid, additionalMandatedParams);\n                }\n                if (this._isDeletePossible()) {\n                    this._handleCheckedCallback({\n                        name: \"onSubmitDelete\",\n                        callback: qq.bind(this._options.callbacks.onSubmitDelete, this, id),\n                        onSuccess: adjustedOnSuccessCallback || qq.bind(this._deleteHandler.sendDelete, this, id, uuid, additionalMandatedParams),\n                        identifier: id\n                    });\n                    return true;\n                } else {\n                    this.log(\"Delete request ignored for ID \" + id + \", delete feature is disabled or request not possible \" + \"due to CORS on a user agent that does not support pre-flighting.\", \"warn\");\n                    return false;\n                }\n            },\n            _onSubmitted: function(id) {},\n            _onTotalProgress: function(loaded, total) {\n                this._options.callbacks.onTotalProgress(loaded, total);\n            },\n            _onUploadPrep: function(id) {},\n            _onUpload: function(id, name) {\n                this._uploadData.setStatus(id, qq.status.UPLOADING);\n            },\n            _onUploadChunk: function(id, chunkData) {},\n            _onUploadChunkSuccess: function(id, chunkData) {\n                if (!this._preventRetries[id] && this._options.retry.enableAuto) {\n                    this._autoRetries[id] = 0;\n                }\n            },\n            _onUploadStatusChange: function(id, oldStatus, newStatus) {\n                if (newStatus === qq.status.PAUSED) {\n                    clearTimeout(this._retryTimeouts[id]);\n                }\n            },\n            _onValidateBatchCallbackFailure: function(fileWrappers) {\n                var self = this;\n                qq.each(fileWrappers, function(idx, fileWrapper) {\n                    self._fileOrBlobRejected(fileWrapper.id);\n                });\n            },\n            _onValidateBatchCallbackSuccess: function(validationDescriptors, items, params, endpoint, button) {\n                var errorMessage, itemLimit = this._currentItemLimit, proposedNetFilesUploadedOrQueued = this._netUploadedOrQueued;\n                if (itemLimit === 0 || proposedNetFilesUploadedOrQueued <= itemLimit) {\n                    if (items.length > 0) {\n                        this._handleCheckedCallback({\n                            name: \"onValidate\",\n                            callback: qq.bind(this._options.callbacks.onValidate, this, validationDescriptors[0], button),\n                            onSuccess: qq.bind(this._onValidateCallbackSuccess, this, items, 0, params, endpoint),\n                            onFailure: qq.bind(this._onValidateCallbackFailure, this, items, 0, params, endpoint),\n                            identifier: \"Item '\" + items[0].file.name + \"', size: \" + items[0].file.size\n                        });\n                    } else {\n                        this._itemError(\"noFilesError\");\n                    }\n                } else {\n                    this._onValidateBatchCallbackFailure(items);\n                    errorMessage = this._options.messages.tooManyItemsError.replace(/\\{netItems\\}/g, proposedNetFilesUploadedOrQueued).replace(/\\{itemLimit\\}/g, itemLimit);\n                    this._batchError(errorMessage);\n                }\n            },\n            _onValidateCallbackFailure: function(items, index, params, endpoint) {\n                var nextIndex = index + 1;\n                this._fileOrBlobRejected(items[index].id, items[index].file.name);\n                this._maybeProcessNextItemAfterOnValidateCallback(false, items, nextIndex, params, endpoint);\n            },\n            _onValidateCallbackSuccess: function(items, index, params, endpoint) {\n                var self = this, nextIndex = index + 1, validationDescriptor = this._getValidationDescriptor(items[index]);\n                this._validateFileOrBlobData(items[index], validationDescriptor).then(function() {\n                    self._upload(items[index].id, params, endpoint);\n                    self._maybeProcessNextItemAfterOnValidateCallback(true, items, nextIndex, params, endpoint);\n                }, function() {\n                    self._maybeProcessNextItemAfterOnValidateCallback(false, items, nextIndex, params, endpoint);\n                });\n            },\n            _prepareItemsForUpload: function(items, params, endpoint) {\n                if (items.length === 0) {\n                    this._itemError(\"noFilesError\");\n                    return;\n                }\n                var validationDescriptors = this._getValidationDescriptors(items), buttonId = this._getButtonId(items[0].file), button = this._getButton(buttonId);\n                this._handleCheckedCallback({\n                    name: \"onValidateBatch\",\n                    callback: qq.bind(this._options.callbacks.onValidateBatch, this, validationDescriptors, button),\n                    onSuccess: qq.bind(this._onValidateBatchCallbackSuccess, this, validationDescriptors, items, params, endpoint, button),\n                    onFailure: qq.bind(this._onValidateBatchCallbackFailure, this, items),\n                    identifier: \"batch validation\"\n                });\n            },\n            _preventLeaveInProgress: function() {\n                var self = this;\n                this._disposeSupport.attach(window, \"beforeunload\", function(e) {\n                    if (self.getInProgress()) {\n                        e = e || window.event;\n                        e.returnValue = self._options.messages.onLeave;\n                        return self._options.messages.onLeave;\n                    }\n                });\n            },\n            _refreshSessionData: function() {\n                var self = this, options = this._options.session;\n                if (qq.Session && this._options.session.endpoint != null) {\n                    if (!this._session) {\n                        qq.extend(options, {\n                            cors: this._options.cors\n                        });\n                        options.log = qq.bind(this.log, this);\n                        options.addFileRecord = qq.bind(this._addCannedFile, this);\n                        this._session = new qq.Session(options);\n                    }\n                    setTimeout(function() {\n                        self._session.refresh().then(function(response, xhrOrXdr) {\n                            self._sessionRequestComplete();\n                            self._options.callbacks.onSessionRequestComplete(response, true, xhrOrXdr);\n                        }, function(response, xhrOrXdr) {\n                            self._options.callbacks.onSessionRequestComplete(response, false, xhrOrXdr);\n                        });\n                    }, 0);\n                }\n            },\n            _sessionRequestComplete: function() {},\n            _setSize: function(id, newSize) {\n                this._uploadData.updateSize(id, newSize);\n                this._totalProgress && this._totalProgress.onNewSize(id);\n            },\n            _shouldAutoRetry: function(id) {\n                var uploadData = this._uploadData.retrieve({\n                    id: id\n                });\n                if (!this._preventRetries[id] && this._options.retry.enableAuto && uploadData.status !== qq.status.PAUSED) {\n                    if (this._autoRetries[id] === undefined) {\n                        this._autoRetries[id] = 0;\n                    }\n                    if (this._autoRetries[id] < this._options.retry.maxAutoAttempts) {\n                        this._autoRetries[id] += 1;\n                        return true;\n                    }\n                }\n                return false;\n            },\n            _storeForLater: function(id) {\n                this._storedIds.push(id);\n            },\n            _trackButton: function(id) {\n                var buttonId;\n                if (qq.supportedFeatures.ajaxUploading) {\n                    buttonId = this._handler.getFile(id).qqButtonId;\n                } else {\n                    buttonId = this._getButtonId(this._handler.getInput(id));\n                }\n                if (buttonId) {\n                    this._buttonIdsForFileIds[id] = buttonId;\n                }\n            },\n            _updateFormSupportAndParams: function(formElementOrId) {\n                this._options.form.element = formElementOrId;\n                this._formSupport = qq.FormSupport && new qq.FormSupport(this._options.form, qq.bind(this.uploadStoredFiles, this), qq.bind(this.log, this));\n                if (this._formSupport && this._formSupport.attachedToForm) {\n                    this._paramsStore.addReadOnly(null, this._formSupport.getFormInputsAsObject);\n                    this._options.autoUpload = this._formSupport.newAutoUpload;\n                    if (this._formSupport.newEndpoint) {\n                        this.setEndpoint(this._formSupport.newEndpoint);\n                    }\n                }\n            },\n            _upload: function(id, params, endpoint) {\n                var name = this.getName(id);\n                if (params) {\n                    this.setParams(params, id);\n                }\n                if (endpoint) {\n                    this.setEndpoint(endpoint, id);\n                }\n                this._handleCheckedCallback({\n                    name: \"onSubmit\",\n                    callback: qq.bind(this._options.callbacks.onSubmit, this, id, name),\n                    onSuccess: qq.bind(this._onSubmitCallbackSuccess, this, id, name),\n                    onFailure: qq.bind(this._fileOrBlobRejected, this, id, name),\n                    identifier: id\n                });\n            },\n            _uploadFile: function(id) {\n                if (!this._handler.upload(id)) {\n                    this._uploadData.setStatus(id, qq.status.QUEUED);\n                }\n            },\n            _uploadStoredFiles: function() {\n                var idToUpload, stillSubmitting, self = this;\n                while (this._storedIds.length) {\n                    idToUpload = this._storedIds.shift();\n                    this._uploadFile(idToUpload);\n                }\n                stillSubmitting = this.getUploads({\n                    status: qq.status.SUBMITTING\n                }).length;\n                if (stillSubmitting) {\n                    qq.log(\"Still waiting for \" + stillSubmitting + \" files to clear submit queue. Will re-parse stored IDs array shortly.\");\n                    setTimeout(function() {\n                        self._uploadStoredFiles();\n                    }, 1e3);\n                }\n            },\n            _validateFileOrBlobData: function(fileWrapper, validationDescriptor) {\n                var self = this, file = function() {\n                    if (fileWrapper.file instanceof qq.BlobProxy) {\n                        return fileWrapper.file.referenceBlob;\n                    }\n                    return fileWrapper.file;\n                }(), name = validationDescriptor.name, size = validationDescriptor.size, buttonId = this._getButtonId(fileWrapper.file), validationBase = this._getValidationBase(buttonId), validityChecker = new qq.Promise();\n                validityChecker.then(function() {}, function() {\n                    self._fileOrBlobRejected(fileWrapper.id, name);\n                });\n                if (qq.isFileOrInput(file) && !this._isAllowedExtension(validationBase.allowedExtensions, name)) {\n                    this._itemError(\"typeError\", name, file);\n                    return validityChecker.failure();\n                }\n                if (!this._options.validation.allowEmpty && size === 0) {\n                    this._itemError(\"emptyError\", name, file);\n                    return validityChecker.failure();\n                }\n                if (size > 0 && validationBase.sizeLimit && size > validationBase.sizeLimit) {\n                    this._itemError(\"sizeError\", name, file);\n                    return validityChecker.failure();\n                }\n                if (size > 0 && size < validationBase.minSizeLimit) {\n                    this._itemError(\"minSizeError\", name, file);\n                    return validityChecker.failure();\n                }\n                if (qq.ImageValidation && qq.supportedFeatures.imagePreviews && qq.isFile(file)) {\n                    new qq.ImageValidation(file, qq.bind(self.log, self)).validate(validationBase.image).then(validityChecker.success, function(errorCode) {\n                        self._itemError(errorCode + \"ImageError\", name, file);\n                        validityChecker.failure();\n                    });\n                } else {\n                    validityChecker.success();\n                }\n                return validityChecker;\n            },\n            _wrapCallbacks: function() {\n                var self, safeCallback, prop;\n                self = this;\n                safeCallback = function(name, callback, args) {\n                    var errorMsg;\n                    try {\n                        return callback.apply(self, args);\n                    } catch (exception) {\n                        errorMsg = exception.message || exception.toString();\n                        self.log(\"Caught exception in '\" + name + \"' callback - \" + errorMsg, \"error\");\n                    }\n                };\n                for (prop in this._options.callbacks) {\n                    (function() {\n                        var callbackName, callbackFunc;\n                        callbackName = prop;\n                        callbackFunc = self._options.callbacks[callbackName];\n                        self._options.callbacks[callbackName] = function() {\n                            return safeCallback(callbackName, callbackFunc, arguments);\n                        };\n                    })();\n                }\n            }\n        };\n    })();\n    (function() {\n        \"use strict\";\n        qq.FineUploaderBasic = function(o) {\n            var self = this;\n            this._options = {\n                debug: false,\n                button: null,\n                multiple: true,\n                maxConnections: 3,\n                disableCancelForFormUploads: false,\n                autoUpload: true,\n                warnBeforeUnload: true,\n                request: {\n                    customHeaders: {},\n                    endpoint: \"/server/upload\",\n                    filenameParam: \"qqfilename\",\n                    forceMultipart: true,\n                    inputName: \"qqfile\",\n                    method: \"POST\",\n                    omitDefaultParams: false,\n                    params: {},\n                    paramsInBody: true,\n                    requireSuccessJson: true,\n                    totalFileSizeName: \"qqtotalfilesize\",\n                    uuidName: \"qquuid\"\n                },\n                validation: {\n                    allowedExtensions: [],\n                    sizeLimit: 0,\n                    minSizeLimit: 0,\n                    itemLimit: 0,\n                    stopOnFirstInvalidFile: true,\n                    acceptFiles: null,\n                    image: {\n                        maxHeight: 0,\n                        maxWidth: 0,\n                        minHeight: 0,\n                        minWidth: 0\n                    },\n                    allowEmpty: false\n                },\n                callbacks: {\n                    onSubmit: function(id, name) {},\n                    onSubmitted: function(id, name) {},\n                    onComplete: function(id, name, responseJSON, maybeXhr) {},\n                    onAllComplete: function(successful, failed) {},\n                    onCancel: function(id, name) {},\n                    onUpload: function(id, name) {},\n                    onUploadChunk: function(id, name, chunkData) {},\n                    onUploadChunkSuccess: function(id, chunkData, responseJSON, xhr) {},\n                    onResume: function(id, fileName, chunkData, customResumeData) {},\n                    onProgress: function(id, name, loaded, total) {},\n                    onTotalProgress: function(loaded, total) {},\n                    onError: function(id, name, reason, maybeXhrOrXdr) {},\n                    onAutoRetry: function(id, name, attemptNumber) {},\n                    onManualRetry: function(id, name) {},\n                    onValidateBatch: function(fileOrBlobData) {},\n                    onValidate: function(fileOrBlobData) {},\n                    onSubmitDelete: function(id) {},\n                    onDelete: function(id) {},\n                    onDeleteComplete: function(id, xhrOrXdr, isError) {},\n                    onPasteReceived: function(blob) {},\n                    onStatusChange: function(id, oldStatus, newStatus) {},\n                    onSessionRequestComplete: function(response, success, xhrOrXdr) {}\n                },\n                messages: {\n                    typeError: \"{file} has an invalid extension. Valid extension(s): {extensions}.\",\n                    sizeError: \"{file} is too large, maximum file size is {sizeLimit}.\",\n                    minSizeError: \"{file} is too small, minimum file size is {minSizeLimit}.\",\n                    emptyError: \"{file} is empty, please select files again without it.\",\n                    noFilesError: \"No files to upload.\",\n                    tooManyItemsError: \"Too many items ({netItems}) would be uploaded.  Item limit is {itemLimit}.\",\n                    maxHeightImageError: \"Image is too tall.\",\n                    maxWidthImageError: \"Image is too wide.\",\n                    minHeightImageError: \"Image is not tall enough.\",\n                    minWidthImageError: \"Image is not wide enough.\",\n                    retryFailTooManyItems: \"Retry failed - you have reached your file limit.\",\n                    onLeave: \"The files are being uploaded, if you leave now the upload will be canceled.\",\n                    unsupportedBrowserIos8Safari: \"Unrecoverable error - this browser does not permit file uploading of any kind due to serious bugs in iOS8 Safari.  Please use iOS8 Chrome until Apple fixes these issues.\"\n                },\n                retry: {\n                    enableAuto: false,\n                    maxAutoAttempts: 3,\n                    autoAttemptDelay: 5,\n                    preventRetryResponseProperty: \"preventRetry\"\n                },\n                classes: {\n                    buttonHover: \"qq-upload-button-hover\",\n                    buttonFocus: \"qq-upload-button-focus\"\n                },\n                chunking: {\n                    enabled: false,\n                    concurrent: {\n                        enabled: false\n                    },\n                    mandatory: false,\n                    paramNames: {\n                        partIndex: \"qqpartindex\",\n                        partByteOffset: \"qqpartbyteoffset\",\n                        chunkSize: \"qqchunksize\",\n                        totalFileSize: \"qqtotalfilesize\",\n                        totalParts: \"qqtotalparts\"\n                    },\n                    partSize: function(id) {\n                        return 2e6;\n                    },\n                    success: {\n                        endpoint: null,\n                        headers: function(id) {\n                            return null;\n                        },\n                        jsonPayload: false,\n                        method: \"POST\",\n                        params: function(id) {\n                            return null;\n                        },\n                        resetOnStatus: []\n                    }\n                },\n                resume: {\n                    enabled: false,\n                    recordsExpireIn: 7,\n                    paramNames: {\n                        resuming: \"qqresume\"\n                    },\n                    customKeys: function(fileId) {\n                        return [];\n                    }\n                },\n                formatFileName: function(fileOrBlobName) {\n                    return fileOrBlobName;\n                },\n                text: {\n                    defaultResponseError: \"Upload failure reason unknown\",\n                    fileInputTitle: \"file input\",\n                    sizeSymbols: [ \"kB\", \"MB\", \"GB\", \"TB\", \"PB\", \"EB\" ]\n                },\n                deleteFile: {\n                    enabled: false,\n                    method: \"DELETE\",\n                    endpoint: \"/server/upload\",\n                    customHeaders: {},\n                    params: {}\n                },\n                cors: {\n                    expected: false,\n                    sendCredentials: false,\n                    allowXdr: false\n                },\n                blobs: {\n                    defaultName: \"misc_data\"\n                },\n                paste: {\n                    targetElement: null,\n                    defaultName: \"pasted_image\"\n                },\n                camera: {\n                    ios: false,\n                    button: null\n                },\n                extraButtons: [],\n                session: {\n                    endpoint: null,\n                    params: {},\n                    customHeaders: {},\n                    refreshOnReset: true\n                },\n                form: {\n                    element: \"qq-form\",\n                    autoUpload: false,\n                    interceptSubmit: true\n                },\n                scaling: {\n                    customResizer: null,\n                    sendOriginal: true,\n                    orient: true,\n                    defaultType: null,\n                    defaultQuality: 80,\n                    failureText: \"Failed to scale\",\n                    includeExif: false,\n                    sizes: []\n                },\n                workarounds: {\n                    iosEmptyVideos: true,\n                    ios8SafariUploads: true,\n                    ios8BrowserCrash: false\n                }\n            };\n            qq.extend(this._options, o, true);\n            this._buttons = [];\n            this._extraButtonSpecs = {};\n            this._buttonIdsForFileIds = [];\n            this._wrapCallbacks();\n            this._disposeSupport = new qq.DisposeSupport();\n            this._storedIds = [];\n            this._autoRetries = [];\n            this._retryTimeouts = [];\n            this._preventRetries = [];\n            this._thumbnailUrls = [];\n            this._netUploadedOrQueued = 0;\n            this._netUploaded = 0;\n            this._uploadData = this._createUploadDataTracker();\n            this._initFormSupportAndParams();\n            this._customHeadersStore = this._createStore(this._options.request.customHeaders);\n            this._deleteFileCustomHeadersStore = this._createStore(this._options.deleteFile.customHeaders);\n            this._deleteFileParamsStore = this._createStore(this._options.deleteFile.params);\n            this._endpointStore = this._createStore(this._options.request.endpoint);\n            this._deleteFileEndpointStore = this._createStore(this._options.deleteFile.endpoint);\n            this._handler = this._createUploadHandler();\n            this._deleteHandler = qq.DeleteFileAjaxRequester && this._createDeleteHandler();\n            if (this._options.button) {\n                this._defaultButtonId = this._createUploadButton({\n                    element: this._options.button,\n                    title: this._options.text.fileInputTitle\n                }).getButtonId();\n            }\n            this._generateExtraButtonSpecs();\n            this._handleCameraAccess();\n            if (this._options.paste.targetElement) {\n                if (qq.PasteSupport) {\n                    this._pasteHandler = this._createPasteHandler();\n                } else {\n                    this.log(\"Paste support module not found\", \"error\");\n                }\n            }\n            this._options.warnBeforeUnload && this._preventLeaveInProgress();\n            this._imageGenerator = qq.ImageGenerator && new qq.ImageGenerator(qq.bind(this.log, this));\n            this._refreshSessionData();\n            this._succeededSinceLastAllComplete = [];\n            this._failedSinceLastAllComplete = [];\n            this._scaler = qq.Scaler && new qq.Scaler(this._options.scaling, qq.bind(this.log, this)) || {};\n            if (this._scaler.enabled) {\n                this._customNewFileHandler = qq.bind(this._scaler.handleNewFile, this._scaler);\n            }\n            if (qq.TotalProgress && qq.supportedFeatures.progressBar) {\n                this._totalProgress = new qq.TotalProgress(qq.bind(this._onTotalProgress, this), function(id) {\n                    var entry = self._uploadData.retrieve({\n                        id: id\n                    });\n                    return entry && entry.size || 0;\n                });\n            }\n            this._currentItemLimit = this._options.validation.itemLimit;\n            this._customResumeDataStore = this._createStore();\n        };\n        qq.FineUploaderBasic.prototype = qq.basePublicApi;\n        qq.extend(qq.FineUploaderBasic.prototype, qq.basePrivateApi);\n    })();\n    qq.AjaxRequester = function(o) {\n        \"use strict\";\n        var log, shouldParamsBeInQueryString, queue = [], requestData = {}, options = {\n            acceptHeader: null,\n            validMethods: [ \"PATCH\", \"POST\", \"PUT\" ],\n            method: \"POST\",\n            contentType: \"application/x-www-form-urlencoded\",\n            maxConnections: 3,\n            customHeaders: {},\n            endpointStore: {},\n            paramsStore: {},\n            mandatedParams: {},\n            allowXRequestedWithAndCacheControl: true,\n            successfulResponseCodes: {\n                DELETE: [ 200, 202, 204 ],\n                PATCH: [ 200, 201, 202, 203, 204 ],\n                POST: [ 200, 201, 202, 203, 204 ],\n                PUT: [ 200, 201, 202, 203, 204 ],\n                GET: [ 200 ]\n            },\n            cors: {\n                expected: false,\n                sendCredentials: false\n            },\n            log: function(str, level) {},\n            onSend: function(id) {},\n            onComplete: function(id, xhrOrXdr, isError) {},\n            onProgress: null\n        };\n        qq.extend(options, o);\n        log = options.log;\n        if (qq.indexOf(options.validMethods, options.method) < 0) {\n            throw new Error(\"'\" + options.method + \"' is not a supported method for this type of request!\");\n        }\n        function isSimpleMethod() {\n            return qq.indexOf([ \"GET\", \"POST\", \"HEAD\" ], options.method) >= 0;\n        }\n        function containsNonSimpleHeaders(headers) {\n            var containsNonSimple = false;\n            qq.each(containsNonSimple, function(idx, header) {\n                if (qq.indexOf([ \"Accept\", \"Accept-Language\", \"Content-Language\", \"Content-Type\" ], header) < 0) {\n                    containsNonSimple = true;\n                    return false;\n                }\n            });\n            return containsNonSimple;\n        }\n        function isXdr(xhr) {\n            return options.cors.expected && xhr.withCredentials === undefined;\n        }\n        function getCorsAjaxTransport() {\n            var xhrOrXdr;\n            if (window.XMLHttpRequest || window.ActiveXObject) {\n                xhrOrXdr = qq.createXhrInstance();\n                if (xhrOrXdr.withCredentials === undefined) {\n                    xhrOrXdr = new XDomainRequest();\n                    xhrOrXdr.onload = function() {};\n                    xhrOrXdr.onerror = function() {};\n                    xhrOrXdr.ontimeout = function() {};\n                    xhrOrXdr.onprogress = function() {};\n                }\n            }\n            return xhrOrXdr;\n        }\n        function getXhrOrXdr(id, suppliedXhr) {\n            var xhrOrXdr = requestData[id] && requestData[id].xhr;\n            if (!xhrOrXdr) {\n                if (suppliedXhr) {\n                    xhrOrXdr = suppliedXhr;\n                } else {\n                    if (options.cors.expected) {\n                        xhrOrXdr = getCorsAjaxTransport();\n                    } else {\n                        xhrOrXdr = qq.createXhrInstance();\n                    }\n                }\n                requestData[id].xhr = xhrOrXdr;\n            }\n            return xhrOrXdr;\n        }\n        function dequeue(id) {\n            var i = qq.indexOf(queue, id), max = options.maxConnections, nextId;\n            delete requestData[id];\n            queue.splice(i, 1);\n            if (queue.length >= max && i < max) {\n                nextId = queue[max - 1];\n                sendRequest(nextId);\n            }\n        }\n        function onComplete(id, xdrError) {\n            var xhr = getXhrOrXdr(id), method = options.method, isError = xdrError === true;\n            dequeue(id);\n            if (isError) {\n                log(method + \" request for \" + id + \" has failed\", \"error\");\n            } else if (!isXdr(xhr) && !isResponseSuccessful(xhr.status)) {\n                isError = true;\n                log(method + \" request for \" + id + \" has failed - response code \" + xhr.status, \"error\");\n            }\n            options.onComplete(id, xhr, isError);\n        }\n        function getParams(id) {\n            var onDemandParams = requestData[id].additionalParams, mandatedParams = options.mandatedParams, params;\n            if (options.paramsStore.get) {\n                params = options.paramsStore.get(id);\n            }\n            if (onDemandParams) {\n                qq.each(onDemandParams, function(name, val) {\n                    params = params || {};\n                    params[name] = val;\n                });\n            }\n            if (mandatedParams) {\n                qq.each(mandatedParams, function(name, val) {\n                    params = params || {};\n                    params[name] = val;\n                });\n            }\n            return params;\n        }\n        function sendRequest(id, optXhr) {\n            var xhr = getXhrOrXdr(id, optXhr), method = options.method, params = getParams(id), payload = requestData[id].payload, url;\n            options.onSend(id);\n            url = createUrl(id, params, requestData[id].additionalQueryParams);\n            if (isXdr(xhr)) {\n                xhr.onload = getXdrLoadHandler(id);\n                xhr.onerror = getXdrErrorHandler(id);\n            } else {\n                xhr.onreadystatechange = getXhrReadyStateChangeHandler(id);\n            }\n            registerForUploadProgress(id);\n            xhr.open(method, url, true);\n            if (options.cors.expected && options.cors.sendCredentials && !isXdr(xhr)) {\n                xhr.withCredentials = true;\n            }\n            setHeaders(id);\n            log(\"Sending \" + method + \" request for \" + id);\n            if (payload) {\n                xhr.send(payload);\n            } else if (shouldParamsBeInQueryString || !params) {\n                xhr.send();\n            } else if (params && options.contentType && options.contentType.toLowerCase().indexOf(\"application/x-www-form-urlencoded\") >= 0) {\n                xhr.send(qq.obj2url(params, \"\"));\n            } else if (params && options.contentType && options.contentType.toLowerCase().indexOf(\"application/json\") >= 0) {\n                xhr.send(JSON.stringify(params));\n            } else {\n                xhr.send(params);\n            }\n            return xhr;\n        }\n        function createUrl(id, params, additionalQueryParams) {\n            var endpoint = options.endpointStore.get(id), addToPath = requestData[id].addToPath;\n            if (addToPath != undefined) {\n                endpoint += \"/\" + addToPath;\n            }\n            if (shouldParamsBeInQueryString && params) {\n                endpoint = qq.obj2url(params, endpoint);\n            }\n            if (additionalQueryParams) {\n                endpoint = qq.obj2url(additionalQueryParams, endpoint);\n            }\n            return endpoint;\n        }\n        function getXhrReadyStateChangeHandler(id) {\n            return function() {\n                if (getXhrOrXdr(id).readyState === 4) {\n                    onComplete(id);\n                }\n            };\n        }\n        function registerForUploadProgress(id) {\n            var onProgress = options.onProgress;\n            if (onProgress) {\n                getXhrOrXdr(id).upload.onprogress = function(e) {\n                    if (e.lengthComputable) {\n                        onProgress(id, e.loaded, e.total);\n                    }\n                };\n            }\n        }\n        function getXdrLoadHandler(id) {\n            return function() {\n                onComplete(id);\n            };\n        }\n        function getXdrErrorHandler(id) {\n            return function() {\n                onComplete(id, true);\n            };\n        }\n        function setHeaders(id) {\n            var xhr = getXhrOrXdr(id), customHeaders = options.customHeaders, onDemandHeaders = requestData[id].additionalHeaders || {}, method = options.method, allHeaders = {};\n            if (!isXdr(xhr)) {\n                options.acceptHeader && xhr.setRequestHeader(\"Accept\", options.acceptHeader);\n                if (options.allowXRequestedWithAndCacheControl) {\n                    if (!options.cors.expected || (!isSimpleMethod() || containsNonSimpleHeaders(customHeaders))) {\n                        xhr.setRequestHeader(\"X-Requested-With\", \"XMLHttpRequest\");\n                        xhr.setRequestHeader(\"Cache-Control\", \"no-cache\");\n                    }\n                }\n                if (options.contentType && (method === \"POST\" || method === \"PUT\")) {\n                    xhr.setRequestHeader(\"Content-Type\", options.contentType);\n                }\n                qq.extend(allHeaders, qq.isFunction(customHeaders) ? customHeaders(id) : customHeaders);\n                qq.extend(allHeaders, onDemandHeaders);\n                qq.each(allHeaders, function(name, val) {\n                    xhr.setRequestHeader(name, val);\n                });\n            }\n        }\n        function isResponseSuccessful(responseCode) {\n            return qq.indexOf(options.successfulResponseCodes[options.method], responseCode) >= 0;\n        }\n        function prepareToSend(id, optXhr, addToPath, additionalParams, additionalQueryParams, additionalHeaders, payload) {\n            requestData[id] = {\n                addToPath: addToPath,\n                additionalParams: additionalParams,\n                additionalQueryParams: additionalQueryParams,\n                additionalHeaders: additionalHeaders,\n                payload: payload\n            };\n            var len = queue.push(id);\n            if (len <= options.maxConnections) {\n                return sendRequest(id, optXhr);\n            }\n        }\n        shouldParamsBeInQueryString = options.method === \"GET\" || options.method === \"DELETE\";\n        qq.extend(this, {\n            initTransport: function(id) {\n                var path, params, headers, payload, cacheBuster, additionalQueryParams;\n                return {\n                    withPath: function(appendToPath) {\n                        path = appendToPath;\n                        return this;\n                    },\n                    withParams: function(additionalParams) {\n                        params = additionalParams;\n                        return this;\n                    },\n                    withQueryParams: function(_additionalQueryParams_) {\n                        additionalQueryParams = _additionalQueryParams_;\n                        return this;\n                    },\n                    withHeaders: function(additionalHeaders) {\n                        headers = additionalHeaders;\n                        return this;\n                    },\n                    withPayload: function(thePayload) {\n                        payload = thePayload;\n                        return this;\n                    },\n                    withCacheBuster: function() {\n                        cacheBuster = true;\n                        return this;\n                    },\n                    send: function(optXhr) {\n                        if (cacheBuster && qq.indexOf([ \"GET\", \"DELETE\" ], options.method) >= 0) {\n                            params.qqtimestamp = new Date().getTime();\n                        }\n                        return prepareToSend(id, optXhr, path, params, additionalQueryParams, headers, payload);\n                    }\n                };\n            },\n            canceled: function(id) {\n                dequeue(id);\n            }\n        });\n    };\n    qq.UploadHandler = function(spec) {\n        \"use strict\";\n        var proxy = spec.proxy, fileState = {}, onCancel = proxy.onCancel, getName = proxy.getName;\n        qq.extend(this, {\n            add: function(id, fileItem) {\n                fileState[id] = fileItem;\n                fileState[id].temp = {};\n            },\n            cancel: function(id) {\n                var self = this, cancelFinalizationEffort = new qq.Promise(), onCancelRetVal = onCancel(id, getName(id), cancelFinalizationEffort);\n                onCancelRetVal.then(function() {\n                    if (self.isValid(id)) {\n                        fileState[id].canceled = true;\n                        self.expunge(id);\n                    }\n                    cancelFinalizationEffort.success();\n                });\n            },\n            expunge: function(id) {\n                delete fileState[id];\n            },\n            getThirdPartyFileId: function(id) {\n                return fileState[id].key;\n            },\n            isValid: function(id) {\n                return fileState[id] !== undefined;\n            },\n            reset: function() {\n                fileState = {};\n            },\n            _getFileState: function(id) {\n                return fileState[id];\n            },\n            _setThirdPartyFileId: function(id, thirdPartyFileId) {\n                fileState[id].key = thirdPartyFileId;\n            },\n            _wasCanceled: function(id) {\n                return !!fileState[id].canceled;\n            }\n        });\n    };\n    qq.UploadHandlerController = function(o, namespace) {\n        \"use strict\";\n        var controller = this, chunkingPossible = false, concurrentChunkingPossible = false, chunking, preventRetryResponse, log, handler, options = {\n            paramsStore: {},\n            maxConnections: 3,\n            chunking: {\n                enabled: false,\n                multiple: {\n                    enabled: false\n                }\n            },\n            log: function(str, level) {},\n            onProgress: function(id, fileName, loaded, total) {},\n            onComplete: function(id, fileName, response, xhr) {},\n            onCancel: function(id, fileName) {},\n            onUploadPrep: function(id) {},\n            onUpload: function(id, fileName) {},\n            onUploadChunk: function(id, fileName, chunkData) {},\n            onUploadChunkSuccess: function(id, chunkData, response, xhr) {},\n            onAutoRetry: function(id, fileName, response, xhr) {},\n            onResume: function(id, fileName, chunkData, customResumeData) {},\n            onUuidChanged: function(id, newUuid) {},\n            getName: function(id) {},\n            setSize: function(id, newSize) {},\n            isQueued: function(id) {},\n            getIdsInProxyGroup: function(id) {},\n            getIdsInBatch: function(id) {},\n            isInProgress: function(id) {}\n        }, chunked = {\n            done: function(id, chunkIdx, response, xhr) {\n                var chunkData = handler._getChunkData(id, chunkIdx);\n                handler._getFileState(id).attemptingResume = false;\n                delete handler._getFileState(id).temp.chunkProgress[chunkIdx];\n                handler._getFileState(id).loaded += chunkData.size;\n                options.onUploadChunkSuccess(id, handler._getChunkDataForCallback(chunkData), response, xhr);\n            },\n            finalize: function(id) {\n                var size = options.getSize(id), name = options.getName(id);\n                log(\"All chunks have been uploaded for \" + id + \" - finalizing....\");\n                handler.finalizeChunks(id).then(function(response, xhr) {\n                    log(\"Finalize successful for \" + id);\n                    var normaizedResponse = upload.normalizeResponse(response, true);\n                    options.onProgress(id, name, size, size);\n                    handler._maybeDeletePersistedChunkData(id);\n                    upload.cleanup(id, normaizedResponse, xhr);\n                }, function(response, xhr) {\n                    var normalizedResponse = upload.normalizeResponse(response, false);\n                    log(\"Problem finalizing chunks for file ID \" + id + \" - \" + normalizedResponse.error, \"error\");\n                    if (normalizedResponse.reset || xhr && options.chunking.success.resetOnStatus.indexOf(xhr.status) >= 0) {\n                        chunked.reset(id);\n                    }\n                    if (!options.onAutoRetry(id, name, normalizedResponse, xhr)) {\n                        upload.cleanup(id, normalizedResponse, xhr);\n                    }\n                });\n            },\n            handleFailure: function(chunkIdx, id, response, xhr) {\n                var name = options.getName(id);\n                log(\"Chunked upload request failed for \" + id + \", chunk \" + chunkIdx);\n                handler.clearCachedChunk(id, chunkIdx);\n                var responseToReport = upload.normalizeResponse(response, false), inProgressIdx;\n                if (responseToReport.reset) {\n                    chunked.reset(id);\n                } else {\n                    var inProgressChunksArray = handler._getFileState(id).chunking.inProgress;\n                    inProgressIdx = inProgressChunksArray ? qq.indexOf(inProgressChunksArray, chunkIdx) : -1;\n                    if (inProgressIdx >= 0) {\n                        handler._getFileState(id).chunking.inProgress.splice(inProgressIdx, 1);\n                        handler._getFileState(id).chunking.remaining.unshift(chunkIdx);\n                    }\n                }\n                if (!handler._getFileState(id).temp.ignoreFailure) {\n                    if (concurrentChunkingPossible) {\n                        handler._getFileState(id).temp.ignoreFailure = true;\n                        log(qq.format(\"Going to attempt to abort these chunks: {}. These are currently in-progress: {}.\", JSON.stringify(Object.keys(handler._getXhrs(id))), JSON.stringify(handler._getFileState(id).chunking.inProgress)));\n                        qq.each(handler._getXhrs(id), function(ckid, ckXhr) {\n                            log(qq.format(\"Attempting to abort file {}.{}. XHR readyState {}. \", id, ckid, ckXhr.readyState));\n                            ckXhr.abort();\n                            ckXhr._cancelled = true;\n                        });\n                        handler.moveInProgressToRemaining(id);\n                        connectionManager.free(id, true);\n                    }\n                    if (!options.onAutoRetry(id, name, responseToReport, xhr)) {\n                        upload.cleanup(id, responseToReport, xhr);\n                    }\n                }\n            },\n            hasMoreParts: function(id) {\n                return !!handler._getFileState(id).chunking.remaining.length;\n            },\n            nextPart: function(id) {\n                var nextIdx = handler._getFileState(id).chunking.remaining.shift();\n                if (nextIdx >= handler._getTotalChunks(id)) {\n                    nextIdx = null;\n                }\n                return nextIdx;\n            },\n            reset: function(id) {\n                log(\"Server or callback has ordered chunking effort to be restarted on next attempt for item ID \" + id, \"error\");\n                handler._maybeDeletePersistedChunkData(id);\n                handler.reevaluateChunking(id);\n                handler._getFileState(id).loaded = 0;\n                handler._getFileState(id).attemptingResume = false;\n            },\n            sendNext: function(id) {\n                var size = options.getSize(id), name = options.getName(id), chunkIdx = chunked.nextPart(id), chunkData = handler._getChunkData(id, chunkIdx), fileState = handler._getFileState(id), resuming = fileState.attemptingResume, inProgressChunks = fileState.chunking.inProgress || [];\n                if (fileState.loaded == null) {\n                    fileState.loaded = 0;\n                }\n                if (resuming && options.onResume(id, name, chunkData, fileState.customResumeData) === false) {\n                    chunked.reset(id);\n                    chunkIdx = chunked.nextPart(id);\n                    chunkData = handler._getChunkData(id, chunkIdx);\n                    resuming = false;\n                }\n                if (chunkIdx == null && inProgressChunks.length === 0) {\n                    chunked.finalize(id);\n                } else {\n                    inProgressChunks.push(chunkIdx);\n                    handler._getFileState(id).chunking.inProgress = inProgressChunks;\n                    if (concurrentChunkingPossible) {\n                        connectionManager.open(id, chunkIdx);\n                    }\n                    if (concurrentChunkingPossible && connectionManager.available() && handler._getFileState(id).chunking.remaining.length) {\n                        chunked.sendNext(id);\n                    }\n                    if (chunkData.blob.size === 0) {\n                        log(qq.format(\"Chunk {} for file {} will not be uploaded, zero sized chunk.\", chunkIdx, id), \"error\");\n                        chunked.handleFailure(chunkIdx, id, \"File is no longer available\", null);\n                    }\n                    var onUploadChunkPromise = options.onUploadChunk(id, name, handler._getChunkDataForCallback(chunkData));\n                    onUploadChunkPromise.then(function(requestOverrides) {\n                        if (!options.isInProgress(id)) {\n                            log(qq.format(\"Not sending chunked upload request for item {}.{} - no longer in progress.\", id, chunkIdx));\n                        } else {\n                            log(qq.format(\"Sending chunked upload request for item {}.{}, bytes {}-{} of {}.\", id, chunkIdx, chunkData.start + 1, chunkData.end, size));\n                            var uploadChunkData = {\n                                chunkIdx: chunkIdx,\n                                id: id,\n                                overrides: requestOverrides,\n                                resuming: resuming\n                            };\n                            handler.uploadChunk(uploadChunkData).then(function success(response, xhr) {\n                                log(\"Chunked upload request succeeded for \" + id + \", chunk \" + chunkIdx);\n                                handler.clearCachedChunk(id, chunkIdx);\n                                var inProgressChunks = handler._getFileState(id).chunking.inProgress || [], responseToReport = upload.normalizeResponse(response, true), inProgressChunkIdx = qq.indexOf(inProgressChunks, chunkIdx);\n                                log(qq.format(\"Chunk {} for file {} uploaded successfully.\", chunkIdx, id));\n                                chunked.done(id, chunkIdx, responseToReport, xhr);\n                                if (inProgressChunkIdx >= 0) {\n                                    inProgressChunks.splice(inProgressChunkIdx, 1);\n                                }\n                                handler._maybePersistChunkedState(id);\n                                if (!chunked.hasMoreParts(id) && inProgressChunks.length === 0) {\n                                    chunked.finalize(id);\n                                } else if (chunked.hasMoreParts(id)) {\n                                    chunked.sendNext(id);\n                                } else {\n                                    log(qq.format(\"File ID {} has no more chunks to send and these chunk indexes are still marked as in-progress: {}\", id, JSON.stringify(inProgressChunks)));\n                                }\n                            }, function failure(response, xhr) {\n                                chunked.handleFailure(chunkIdx, id, response, xhr);\n                            }).done(function() {\n                                handler.clearXhr(id, chunkIdx);\n                            });\n                        }\n                    }, function(error) {\n                        chunked.handleFailure(chunkIdx, id, error, null);\n                    });\n                }\n            }\n        }, connectionManager = {\n            _open: [],\n            _openChunks: {},\n            _waiting: [],\n            available: function() {\n                var max = options.maxConnections, openChunkEntriesCount = 0, openChunksCount = 0;\n                qq.each(connectionManager._openChunks, function(fileId, openChunkIndexes) {\n                    openChunkEntriesCount++;\n                    openChunksCount += openChunkIndexes.length;\n                });\n                return max - (connectionManager._open.length - openChunkEntriesCount + openChunksCount);\n            },\n            free: function(id, dontAllowNext) {\n                var allowNext = !dontAllowNext, waitingIndex = qq.indexOf(connectionManager._waiting, id), connectionsIndex = qq.indexOf(connectionManager._open, id), nextId;\n                delete connectionManager._openChunks[id];\n                if (upload.getProxyOrBlob(id) instanceof qq.BlobProxy) {\n                    log(\"Generated blob upload has ended for \" + id + \", disposing generated blob.\");\n                    delete handler._getFileState(id).file;\n                }\n                if (waitingIndex >= 0) {\n                    connectionManager._waiting.splice(waitingIndex, 1);\n                } else if (allowNext && connectionsIndex >= 0) {\n                    connectionManager._open.splice(connectionsIndex, 1);\n                    nextId = connectionManager._waiting.shift();\n                    if (nextId >= 0) {\n                        connectionManager._open.push(nextId);\n                        upload.start(nextId);\n                    }\n                }\n            },\n            getWaitingOrConnected: function() {\n                var waitingOrConnected = [];\n                qq.each(connectionManager._openChunks, function(fileId, chunks) {\n                    if (chunks && chunks.length) {\n                        waitingOrConnected.push(parseInt(fileId));\n                    }\n                });\n                qq.each(connectionManager._open, function(idx, fileId) {\n                    if (!connectionManager._openChunks[fileId]) {\n                        waitingOrConnected.push(parseInt(fileId));\n                    }\n                });\n                waitingOrConnected = waitingOrConnected.concat(connectionManager._waiting);\n                return waitingOrConnected;\n            },\n            isUsingConnection: function(id) {\n                return qq.indexOf(connectionManager._open, id) >= 0;\n            },\n            open: function(id, chunkIdx) {\n                if (chunkIdx == null) {\n                    connectionManager._waiting.push(id);\n                }\n                if (connectionManager.available()) {\n                    if (chunkIdx == null) {\n                        connectionManager._waiting.pop();\n                        connectionManager._open.push(id);\n                    } else {\n                        (function() {\n                            var openChunksEntry = connectionManager._openChunks[id] || [];\n                            openChunksEntry.push(chunkIdx);\n                            connectionManager._openChunks[id] = openChunksEntry;\n                        })();\n                    }\n                    return true;\n                }\n                return false;\n            },\n            reset: function() {\n                connectionManager._waiting = [];\n                connectionManager._open = [];\n            }\n        }, simple = {\n            send: function(id, name) {\n                var fileState = handler._getFileState(id);\n                if (!fileState) {\n                    log(\"Ignoring send request as this upload may have been cancelled, File ID \" + id, \"warn\");\n                    return;\n                }\n                fileState.loaded = 0;\n                log(\"Sending simple upload request for \" + id);\n                handler.uploadFile(id).then(function(response, optXhr) {\n                    log(\"Simple upload request succeeded for \" + id);\n                    var responseToReport = upload.normalizeResponse(response, true), size = options.getSize(id);\n                    options.onProgress(id, name, size, size);\n                    upload.maybeNewUuid(id, responseToReport);\n                    upload.cleanup(id, responseToReport, optXhr);\n                }, function(response, optXhr) {\n                    log(\"Simple upload request failed for \" + id);\n                    var responseToReport = upload.normalizeResponse(response, false);\n                    if (!options.onAutoRetry(id, name, responseToReport, optXhr)) {\n                        upload.cleanup(id, responseToReport, optXhr);\n                    }\n                });\n            }\n        }, upload = {\n            cancel: function(id) {\n                log(\"Cancelling \" + id);\n                options.paramsStore.remove(id);\n                connectionManager.free(id);\n            },\n            cleanup: function(id, response, optXhr) {\n                var name = options.getName(id);\n                options.onComplete(id, name, response, optXhr);\n                if (handler._getFileState(id)) {\n                    handler._clearXhrs && handler._clearXhrs(id);\n                }\n                connectionManager.free(id);\n            },\n            getProxyOrBlob: function(id) {\n                return handler.getProxy && handler.getProxy(id) || handler.getFile && handler.getFile(id);\n            },\n            initHandler: function() {\n                var handlerType = namespace ? qq[namespace] : qq.traditional, handlerModuleSubtype = qq.supportedFeatures.ajaxUploading ? \"Xhr\" : \"Form\";\n                handler = new handlerType[handlerModuleSubtype + \"UploadHandler\"](options, {\n                    getCustomResumeData: options.getCustomResumeData,\n                    getDataByUuid: options.getDataByUuid,\n                    getName: options.getName,\n                    getSize: options.getSize,\n                    getUuid: options.getUuid,\n                    log: log,\n                    onCancel: options.onCancel,\n                    onProgress: options.onProgress,\n                    onUuidChanged: options.onUuidChanged,\n                    onFinalizing: function(id) {\n                        options.setStatus(id, qq.status.UPLOAD_FINALIZING);\n                    }\n                });\n                if (handler._removeExpiredChunkingRecords) {\n                    handler._removeExpiredChunkingRecords();\n                }\n            },\n            isDeferredEligibleForUpload: function(id) {\n                return options.isQueued(id);\n            },\n            maybeDefer: function(id, blob) {\n                if (blob && !handler.getFile(id) && blob instanceof qq.BlobProxy) {\n                    options.onUploadPrep(id);\n                    log(\"Attempting to generate a blob on-demand for \" + id);\n                    blob.create().then(function(generatedBlob) {\n                        log(\"Generated an on-demand blob for \" + id);\n                        handler.updateBlob(id, generatedBlob);\n                        options.setSize(id, generatedBlob.size);\n                        handler.reevaluateChunking(id);\n                        upload.maybeSendDeferredFiles(id);\n                    }, function(errorMessage) {\n                        var errorResponse = {};\n                        if (errorMessage) {\n                            errorResponse.error = errorMessage;\n                        }\n                        log(qq.format(\"Failed to generate blob for ID {}.  Error message: {}.\", id, errorMessage), \"error\");\n                        options.onComplete(id, options.getName(id), qq.extend(errorResponse, preventRetryResponse), null);\n                        upload.maybeSendDeferredFiles(id);\n                        connectionManager.free(id);\n                    });\n                } else {\n                    return upload.maybeSendDeferredFiles(id);\n                }\n                return false;\n            },\n            maybeSendDeferredFiles: function(id) {\n                var idsInGroup = options.getIdsInProxyGroup(id), uploadedThisId = false;\n                if (idsInGroup && idsInGroup.length) {\n                    log(\"Maybe ready to upload proxy group file \" + id);\n                    qq.each(idsInGroup, function(idx, idInGroup) {\n                        if (upload.isDeferredEligibleForUpload(idInGroup) && !!handler.getFile(idInGroup)) {\n                            uploadedThisId = idInGroup === id;\n                            upload.now(idInGroup);\n                        } else if (upload.isDeferredEligibleForUpload(idInGroup)) {\n                            return false;\n                        }\n                    });\n                } else {\n                    uploadedThisId = true;\n                    upload.now(id);\n                }\n                return uploadedThisId;\n            },\n            maybeNewUuid: function(id, response) {\n                if (response.newUuid !== undefined) {\n                    options.onUuidChanged(id, response.newUuid);\n                }\n            },\n            normalizeResponse: function(originalResponse, successful) {\n                var response = originalResponse;\n                if (!qq.isObject(originalResponse)) {\n                    response = {};\n                    if (qq.isString(originalResponse) && !successful) {\n                        response.error = originalResponse;\n                    }\n                }\n                response.success = successful;\n                return response;\n            },\n            now: function(id) {\n                var name = options.getName(id);\n                if (!controller.isValid(id)) {\n                    throw new qq.Error(id + \" is not a valid file ID to upload!\");\n                }\n                options.onUpload(id, name).then(function(response) {\n                    if (response && response.pause) {\n                        options.setStatus(id, qq.status.PAUSED);\n                        handler.pause(id);\n                        connectionManager.free(id);\n                    } else {\n                        if (chunkingPossible && handler._shouldChunkThisFile(id)) {\n                            chunked.sendNext(id);\n                        } else {\n                            simple.send(id, name);\n                        }\n                    }\n                }, function(error) {\n                    error = error || {};\n                    log(id + \" upload start aborted due to rejected onUpload Promise - details: \" + error, \"error\");\n                    if (!options.onAutoRetry(id, name, error.responseJSON || {})) {\n                        var response = upload.normalizeResponse(error.responseJSON, false);\n                        upload.cleanup(id, response);\n                    }\n                });\n            },\n            start: function(id) {\n                var blobToUpload = upload.getProxyOrBlob(id);\n                if (blobToUpload) {\n                    return upload.maybeDefer(id, blobToUpload);\n                } else {\n                    upload.now(id);\n                    return true;\n                }\n            }\n        };\n        qq.extend(this, {\n            add: function(id, file) {\n                handler.add.apply(this, arguments);\n            },\n            upload: function(id) {\n                if (connectionManager.open(id)) {\n                    return upload.start(id);\n                }\n                return false;\n            },\n            retry: function(id) {\n                if (concurrentChunkingPossible) {\n                    handler._getFileState(id).temp.ignoreFailure = false;\n                }\n                if (connectionManager.isUsingConnection(id)) {\n                    return upload.start(id);\n                } else {\n                    return controller.upload(id);\n                }\n            },\n            cancel: function(id) {\n                var cancelRetVal = handler.cancel(id);\n                if (qq.isGenericPromise(cancelRetVal)) {\n                    cancelRetVal.then(function() {\n                        upload.cancel(id);\n                    });\n                } else if (cancelRetVal !== false) {\n                    upload.cancel(id);\n                }\n            },\n            cancelAll: function() {\n                var waitingOrConnected = connectionManager.getWaitingOrConnected(), i;\n                if (waitingOrConnected.length) {\n                    for (i = waitingOrConnected.length - 1; i >= 0; i--) {\n                        controller.cancel(waitingOrConnected[i]);\n                    }\n                }\n                connectionManager.reset();\n            },\n            getFile: function(id) {\n                if (handler.getProxy && handler.getProxy(id)) {\n                    return handler.getProxy(id).referenceBlob;\n                }\n                return handler.getFile && handler.getFile(id);\n            },\n            isProxied: function(id) {\n                return !!(handler.getProxy && handler.getProxy(id));\n            },\n            getInput: function(id) {\n                if (handler.getInput) {\n                    return handler.getInput(id);\n                }\n            },\n            reset: function() {\n                log(\"Resetting upload handler\");\n                controller.cancelAll();\n                connectionManager.reset();\n                handler.reset();\n            },\n            expunge: function(id) {\n                if (controller.isValid(id)) {\n                    return handler.expunge(id);\n                }\n            },\n            isValid: function(id) {\n                return handler.isValid(id);\n            },\n            hasResumeRecord: function(id) {\n                var key = handler.isValid(id) && handler._getLocalStorageId && handler._getLocalStorageId(id);\n                if (key) {\n                    return !!localStorage.getItem(key);\n                }\n                return false;\n            },\n            getResumableFilesData: function() {\n                if (handler.getResumableFilesData) {\n                    return handler.getResumableFilesData();\n                }\n                return [];\n            },\n            getThirdPartyFileId: function(id) {\n                if (controller.isValid(id)) {\n                    return handler.getThirdPartyFileId(id);\n                }\n            },\n            pause: function(id) {\n                if (controller.isResumable(id) && handler.pause && controller.isValid(id) && handler.pause(id)) {\n                    connectionManager.free(id);\n                    handler.moveInProgressToRemaining(id);\n                    return true;\n                }\n                return false;\n            },\n            isAttemptingResume: function(id) {\n                return !!handler.isAttemptingResume && handler.isAttemptingResume(id);\n            },\n            isResumable: function(id) {\n                return !!handler.isResumable && handler.isResumable(id);\n            }\n        });\n        qq.extend(options, o);\n        log = options.log;\n        chunkingPossible = options.chunking.enabled && qq.supportedFeatures.chunking;\n        concurrentChunkingPossible = chunkingPossible && options.chunking.concurrent.enabled;\n        preventRetryResponse = function() {\n            var response = {};\n            response[options.preventRetryParam] = true;\n            return response;\n        }();\n        upload.initHandler();\n    };\n    qq.WindowReceiveMessage = function(o) {\n        \"use strict\";\n        var options = {\n            log: function(message, level) {}\n        }, callbackWrapperDetachers = {};\n        qq.extend(options, o);\n        qq.extend(this, {\n            receiveMessage: function(id, callback) {\n                var onMessageCallbackWrapper = function(event) {\n                    callback(event.data);\n                };\n                if (window.postMessage) {\n                    callbackWrapperDetachers[id] = qq(window).attach(\"message\", onMessageCallbackWrapper);\n                } else {\n                    log(\"iframe message passing not supported in this browser!\", \"error\");\n                }\n            },\n            stopReceivingMessages: function(id) {\n                if (window.postMessage) {\n                    var detacher = callbackWrapperDetachers[id];\n                    if (detacher) {\n                        detacher();\n                    }\n                }\n            }\n        });\n    };\n    qq.FormUploadHandler = function(spec) {\n        \"use strict\";\n        var options = spec.options, handler = this, proxy = spec.proxy, formHandlerInstanceId = qq.getUniqueId(), onloadCallbacks = {}, detachLoadEvents = {}, postMessageCallbackTimers = {}, isCors = options.isCors, inputName = options.inputName, getUuid = proxy.getUuid, log = proxy.log, corsMessageReceiver = new qq.WindowReceiveMessage({\n            log: log\n        });\n        function expungeFile(id) {\n            delete detachLoadEvents[id];\n            if (isCors) {\n                clearTimeout(postMessageCallbackTimers[id]);\n                delete postMessageCallbackTimers[id];\n                corsMessageReceiver.stopReceivingMessages(id);\n            }\n            var iframe = document.getElementById(handler._getIframeName(id));\n            if (iframe) {\n                iframe.setAttribute(\"src\", \"javascript:false;\");\n                qq(iframe).remove();\n            }\n        }\n        function getFileIdForIframeName(iframeName) {\n            return iframeName.split(\"_\")[0];\n        }\n        function initIframeForUpload(name) {\n            var iframe = qq.toElement(\"<iframe src='javascript:false;' name='\" + name + \"' />\");\n            iframe.setAttribute(\"id\", name);\n            iframe.style.display = \"none\";\n            document.body.appendChild(iframe);\n            return iframe;\n        }\n        function registerPostMessageCallback(iframe, callback) {\n            var iframeName = iframe.id, fileId = getFileIdForIframeName(iframeName), uuid = getUuid(fileId);\n            onloadCallbacks[uuid] = callback;\n            detachLoadEvents[fileId] = qq(iframe).attach(\"load\", function() {\n                if (handler.getInput(fileId)) {\n                    log(\"Received iframe load event for CORS upload request (iframe name \" + iframeName + \")\");\n                    postMessageCallbackTimers[iframeName] = setTimeout(function() {\n                        var errorMessage = \"No valid message received from loaded iframe for iframe name \" + iframeName;\n                        log(errorMessage, \"error\");\n                        callback({\n                            error: errorMessage\n                        });\n                    }, 1e3);\n                }\n            });\n            corsMessageReceiver.receiveMessage(iframeName, function(message) {\n                log(\"Received the following window message: '\" + message + \"'\");\n                var fileId = getFileIdForIframeName(iframeName), response = handler._parseJsonResponse(message), uuid = response.uuid, onloadCallback;\n                if (uuid && onloadCallbacks[uuid]) {\n                    log(\"Handling response for iframe name \" + iframeName);\n                    clearTimeout(postMessageCallbackTimers[iframeName]);\n                    delete postMessageCallbackTimers[iframeName];\n                    handler._detachLoadEvent(iframeName);\n                    onloadCallback = onloadCallbacks[uuid];\n                    delete onloadCallbacks[uuid];\n                    corsMessageReceiver.stopReceivingMessages(iframeName);\n                    onloadCallback(response);\n                } else if (!uuid) {\n                    log(\"'\" + message + \"' does not contain a UUID - ignoring.\");\n                }\n            });\n        }\n        qq.extend(this, new qq.UploadHandler(spec));\n        qq.override(this, function(super_) {\n            return {\n                add: function(id, fileInput) {\n                    super_.add(id, {\n                        input: fileInput\n                    });\n                    fileInput.setAttribute(\"name\", inputName);\n                    if (fileInput.parentNode) {\n                        qq(fileInput).remove();\n                    }\n                },\n                expunge: function(id) {\n                    expungeFile(id);\n                    super_.expunge(id);\n                },\n                isValid: function(id) {\n                    return super_.isValid(id) && handler._getFileState(id).input !== undefined;\n                }\n            };\n        });\n        qq.extend(this, {\n            getInput: function(id) {\n                return handler._getFileState(id).input;\n            },\n            _attachLoadEvent: function(iframe, callback) {\n                var responseDescriptor;\n                if (isCors) {\n                    registerPostMessageCallback(iframe, callback);\n                } else {\n                    detachLoadEvents[iframe.id] = qq(iframe).attach(\"load\", function() {\n                        log(\"Received response for \" + iframe.id);\n                        if (!iframe.parentNode) {\n                            return;\n                        }\n                        try {\n                            if (iframe.contentDocument && iframe.contentDocument.body && iframe.contentDocument.body.innerHTML == \"false\") {\n                                return;\n                            }\n                        } catch (error) {\n                            log(\"Error when attempting to access iframe during handling of upload response (\" + error.message + \")\", \"error\");\n                            responseDescriptor = {\n                                success: false\n                            };\n                        }\n                        callback(responseDescriptor);\n                    });\n                }\n            },\n            _createIframe: function(id) {\n                var iframeName = handler._getIframeName(id);\n                return initIframeForUpload(iframeName);\n            },\n            _detachLoadEvent: function(id) {\n                if (detachLoadEvents[id] !== undefined) {\n                    detachLoadEvents[id]();\n                    delete detachLoadEvents[id];\n                }\n            },\n            _getIframeName: function(fileId) {\n                return fileId + \"_\" + formHandlerInstanceId;\n            },\n            _initFormForUpload: function(spec) {\n                var method = spec.method, endpoint = spec.endpoint, params = spec.params, paramsInBody = spec.paramsInBody, targetName = spec.targetName, form = qq.toElement(\"<form method='\" + method + \"' enctype='multipart/form-data'></form>\"), url = endpoint;\n                if (paramsInBody) {\n                    qq.obj2Inputs(params, form);\n                } else {\n                    url = qq.obj2url(params, endpoint);\n                }\n                form.setAttribute(\"action\", url);\n                form.setAttribute(\"target\", targetName);\n                form.style.display = \"none\";\n                document.body.appendChild(form);\n                return form;\n            },\n            _parseJsonResponse: function(innerHtmlOrMessage) {\n                var response = {};\n                try {\n                    response = qq.parseJson(innerHtmlOrMessage);\n                } catch (error) {\n                    log(\"Error when attempting to parse iframe upload response (\" + error.message + \")\", \"error\");\n                }\n                return response;\n            }\n        });\n    };\n    qq.XhrUploadHandler = function(spec) {\n        \"use strict\";\n        var handler = this, namespace = spec.options.namespace, proxy = spec.proxy, chunking = spec.options.chunking, getChunkSize = function(id) {\n            var fileState = handler._getFileState(id);\n            if (fileState.chunkSize) {\n                return fileState.chunkSize;\n            } else {\n                var chunkSize = chunking.partSize;\n                if (qq.isFunction(chunkSize)) {\n                    chunkSize = chunkSize(id, getSize(id));\n                }\n                fileState.chunkSize = chunkSize;\n                return chunkSize;\n            }\n        }, resume = spec.options.resume, chunkFiles = chunking && spec.options.chunking.enabled && qq.supportedFeatures.chunking, resumeEnabled = resume && spec.options.resume.enabled && chunkFiles && qq.supportedFeatures.resume, getName = proxy.getName, getSize = proxy.getSize, getUuid = proxy.getUuid, getEndpoint = proxy.getEndpoint, getDataByUuid = proxy.getDataByUuid, onUuidChanged = proxy.onUuidChanged, onProgress = proxy.onProgress, log = proxy.log, getCustomResumeData = proxy.getCustomResumeData;\n        function abort(id) {\n            qq.each(handler._getXhrs(id), function(xhrId, xhr) {\n                var ajaxRequester = handler._getAjaxRequester(id, xhrId);\n                xhr.onreadystatechange = null;\n                xhr.upload.onprogress = null;\n                xhr.abort();\n                ajaxRequester && ajaxRequester.canceled && ajaxRequester.canceled(id);\n            });\n        }\n        qq.extend(this, new qq.UploadHandler(spec));\n        qq.override(this, function(super_) {\n            return {\n                add: function(id, blobOrProxy) {\n                    if (qq.isFile(blobOrProxy) || qq.isBlob(blobOrProxy)) {\n                        super_.add(id, {\n                            file: blobOrProxy\n                        });\n                    } else if (blobOrProxy instanceof qq.BlobProxy) {\n                        super_.add(id, {\n                            proxy: blobOrProxy\n                        });\n                    } else {\n                        throw new Error(\"Passed obj is not a File, Blob, or proxy\");\n                    }\n                    handler._initTempState(id);\n                    resumeEnabled && handler._maybePrepareForResume(id);\n                },\n                expunge: function(id) {\n                    abort(id);\n                    handler._maybeDeletePersistedChunkData(id);\n                    handler._clearXhrs(id);\n                    super_.expunge(id);\n                }\n            };\n        });\n        qq.extend(this, {\n            clearCachedChunk: function(id, chunkIdx) {\n                var fileState = handler._getFileState(id);\n                if (fileState) {\n                    delete fileState.temp.cachedChunks[chunkIdx];\n                }\n            },\n            clearXhr: function(id, chunkIdx) {\n                var tempState = handler._getFileState(id).temp;\n                if (tempState.xhrs) {\n                    delete tempState.xhrs[chunkIdx];\n                }\n                if (tempState.ajaxRequesters) {\n                    delete tempState.ajaxRequesters[chunkIdx];\n                }\n            },\n            finalizeChunks: function(id, responseParser) {\n                var lastChunkIdx = handler._getTotalChunks(id) - 1, xhr = handler._getXhr(id, lastChunkIdx);\n                if (responseParser) {\n                    return new qq.Promise().success(responseParser(xhr), xhr);\n                }\n                return new qq.Promise().success({}, xhr);\n            },\n            getFile: function(id) {\n                return handler.isValid(id) && handler._getFileState(id).file;\n            },\n            getProxy: function(id) {\n                return handler.isValid(id) && handler._getFileState(id).proxy;\n            },\n            getResumableFilesData: function() {\n                var resumableFilesData = [];\n                handler._iterateResumeRecords(function(key, uploadData) {\n                    handler.moveInProgressToRemaining(null, uploadData.chunking.inProgress, uploadData.chunking.remaining);\n                    var data = {\n                        name: uploadData.name,\n                        remaining: uploadData.chunking.remaining,\n                        size: uploadData.size,\n                        uuid: uploadData.uuid\n                    };\n                    if (uploadData.key) {\n                        data.key = uploadData.key;\n                    }\n                    if (uploadData.customResumeData) {\n                        data.customResumeData = uploadData.customResumeData;\n                    }\n                    resumableFilesData.push(data);\n                });\n                return resumableFilesData;\n            },\n            isAttemptingResume: function(id) {\n                return handler._getFileState(id).attemptingResume;\n            },\n            isResumable: function(id) {\n                return !!chunking && handler.isValid(id) && !handler._getFileState(id).notResumable;\n            },\n            moveInProgressToRemaining: function(id, optInProgress, optRemaining) {\n                var fileState = handler._getFileState(id) || {}, chunkingState = fileState.chunking || {}, inProgress = optInProgress || chunkingState.inProgress, remaining = optRemaining || chunkingState.remaining;\n                if (inProgress) {\n                    log(qq.format(\"Moving these chunks from in-progress {}, to remaining.\", JSON.stringify(inProgress)));\n                    inProgress.reverse();\n                    qq.each(inProgress, function(idx, chunkIdx) {\n                        remaining.unshift(chunkIdx);\n                    });\n                    inProgress.length = 0;\n                }\n            },\n            pause: function(id) {\n                if (handler.isValid(id)) {\n                    log(qq.format(\"Aborting XHR upload for {} '{}' due to pause instruction.\", id, getName(id)));\n                    handler._getFileState(id).paused = true;\n                    abort(id);\n                    return true;\n                }\n            },\n            reevaluateChunking: function(id) {\n                if (chunking && handler.isValid(id)) {\n                    var state = handler._getFileState(id), totalChunks, i;\n                    delete state.chunking;\n                    state.chunking = {};\n                    totalChunks = handler._getTotalChunks(id);\n                    if (totalChunks > 1 || chunking.mandatory) {\n                        state.chunking.enabled = true;\n                        state.chunking.parts = totalChunks;\n                        state.chunking.remaining = [];\n                        for (i = 0; i < totalChunks; i++) {\n                            state.chunking.remaining.push(i);\n                        }\n                        handler._initTempState(id);\n                    } else {\n                        state.chunking.enabled = false;\n                    }\n                }\n            },\n            updateBlob: function(id, newBlob) {\n                if (handler.isValid(id)) {\n                    handler._getFileState(id).file = newBlob;\n                }\n            },\n            _clearXhrs: function(id) {\n                var tempState = handler._getFileState(id).temp;\n                qq.each(tempState.ajaxRequesters, function(chunkId) {\n                    delete tempState.ajaxRequesters[chunkId];\n                });\n                qq.each(tempState.xhrs, function(chunkId) {\n                    delete tempState.xhrs[chunkId];\n                });\n            },\n            _createXhr: function(id, optChunkIdx) {\n                return handler._registerXhr(id, optChunkIdx, qq.createXhrInstance());\n            },\n            _getAjaxRequester: function(id, optChunkIdx) {\n                var chunkIdx = optChunkIdx == null ? -1 : optChunkIdx;\n                return handler._getFileState(id).temp.ajaxRequesters[chunkIdx];\n            },\n            _getChunkData: function(id, chunkIndex) {\n                var chunkSize = getChunkSize(id), fileSize = getSize(id), fileOrBlob = handler.getFile(id), startBytes = chunkSize * chunkIndex, endBytes = startBytes + chunkSize >= fileSize ? fileSize : startBytes + chunkSize, totalChunks = handler._getTotalChunks(id), cachedChunks = this._getFileState(id).temp.cachedChunks, blob = cachedChunks[chunkIndex] || qq.sliceBlob(fileOrBlob, startBytes, endBytes);\n                cachedChunks[chunkIndex] = blob;\n                return {\n                    part: chunkIndex,\n                    start: startBytes,\n                    end: endBytes,\n                    count: totalChunks,\n                    blob: blob,\n                    size: endBytes - startBytes\n                };\n            },\n            _getChunkDataForCallback: function(chunkData) {\n                return {\n                    partIndex: chunkData.part,\n                    startByte: chunkData.start + 1,\n                    endByte: chunkData.end,\n                    totalParts: chunkData.count\n                };\n            },\n            _getLocalStorageId: function(id) {\n                var formatVersion = \"5.0\", name = getName(id), size = getSize(id), chunkSize = getChunkSize(id), endpoint = getEndpoint(id), customKeys = resume.customKeys(id), localStorageId = qq.format(\"qq{}resume{}-{}-{}-{}-{}\", namespace, formatVersion, name, size, chunkSize, endpoint);\n                customKeys.forEach(function(key) {\n                    localStorageId += \"-\" + key;\n                });\n                return localStorageId;\n            },\n            _getMimeType: function(id) {\n                return handler.getFile(id).type;\n            },\n            _getPersistableData: function(id) {\n                return handler._getFileState(id).chunking;\n            },\n            _getTotalChunks: function(id) {\n                if (chunking) {\n                    var fileSize = getSize(id), chunkSize = getChunkSize(id);\n                    return Math.ceil(fileSize / chunkSize);\n                }\n            },\n            _getXhr: function(id, optChunkIdx) {\n                var chunkIdx = optChunkIdx == null ? -1 : optChunkIdx;\n                return handler._getFileState(id).temp.xhrs[chunkIdx];\n            },\n            _getXhrs: function(id) {\n                return handler._getFileState(id).temp.xhrs;\n            },\n            _iterateResumeRecords: function(callback) {\n                if (resumeEnabled) {\n                    qq.each(localStorage, function(key, item) {\n                        if (key.indexOf(qq.format(\"qq{}resume\", namespace)) === 0) {\n                            var uploadData = JSON.parse(item);\n                            callback(key, uploadData);\n                        }\n                    });\n                }\n            },\n            _initTempState: function(id) {\n                handler._getFileState(id).temp = {\n                    ajaxRequesters: {},\n                    chunkProgress: {},\n                    xhrs: {},\n                    cachedChunks: {}\n                };\n            },\n            _markNotResumable: function(id) {\n                handler._getFileState(id).notResumable = true;\n            },\n            _maybeDeletePersistedChunkData: function(id) {\n                var localStorageId;\n                if (resumeEnabled && handler.isResumable(id)) {\n                    localStorageId = handler._getLocalStorageId(id);\n                    if (localStorageId && localStorage.getItem(localStorageId)) {\n                        localStorage.removeItem(localStorageId);\n                        return true;\n                    }\n                }\n                return false;\n            },\n            _maybePrepareForResume: function(id) {\n                var state = handler._getFileState(id), localStorageId, persistedData;\n                if (resumeEnabled && state.key === undefined) {\n                    localStorageId = handler._getLocalStorageId(id);\n                    persistedData = localStorage.getItem(localStorageId);\n                    if (persistedData) {\n                        persistedData = JSON.parse(persistedData);\n                        if (getDataByUuid(persistedData.uuid)) {\n                            handler._markNotResumable(id);\n                        } else {\n                            log(qq.format(\"Identified file with ID {} and name of {} as resumable.\", id, getName(id)));\n                            onUuidChanged(id, persistedData.uuid);\n                            state.key = persistedData.key;\n                            state.chunking = persistedData.chunking;\n                            state.loaded = persistedData.loaded;\n                            state.customResumeData = persistedData.customResumeData;\n                            state.attemptingResume = true;\n                            handler.moveInProgressToRemaining(id);\n                        }\n                    }\n                }\n            },\n            _maybePersistChunkedState: function(id) {\n                var state = handler._getFileState(id), localStorageId, persistedData;\n                if (resumeEnabled && handler.isResumable(id)) {\n                    var customResumeData = getCustomResumeData(id);\n                    localStorageId = handler._getLocalStorageId(id);\n                    persistedData = {\n                        name: getName(id),\n                        size: getSize(id),\n                        uuid: getUuid(id),\n                        key: state.key,\n                        chunking: state.chunking,\n                        loaded: state.loaded,\n                        lastUpdated: Date.now()\n                    };\n                    if (customResumeData) {\n                        persistedData.customResumeData = customResumeData;\n                    }\n                    try {\n                        localStorage.setItem(localStorageId, JSON.stringify(persistedData));\n                    } catch (error) {\n                        log(qq.format(\"Unable to save resume data for '{}' due to error: '{}'.\", id, error.toString()), \"warn\");\n                    }\n                }\n            },\n            _registerProgressHandler: function(id, chunkIdx, chunkSize) {\n                var xhr = handler._getXhr(id, chunkIdx), name = getName(id), progressCalculator = {\n                    simple: function(loaded, total) {\n                        var fileSize = getSize(id);\n                        if (loaded === total) {\n                            onProgress(id, name, fileSize, fileSize);\n                        } else {\n                            onProgress(id, name, loaded >= fileSize ? fileSize - 1 : loaded, fileSize);\n                        }\n                    },\n                    chunked: function(loaded, total) {\n                        var chunkProgress = handler._getFileState(id).temp.chunkProgress, totalSuccessfullyLoadedForFile = handler._getFileState(id).loaded, loadedForRequest = loaded, totalForRequest = total, totalFileSize = getSize(id), estActualChunkLoaded = loadedForRequest - (totalForRequest - chunkSize), totalLoadedForFile = totalSuccessfullyLoadedForFile;\n                        chunkProgress[chunkIdx] = estActualChunkLoaded;\n                        qq.each(chunkProgress, function(chunkIdx, chunkLoaded) {\n                            totalLoadedForFile += chunkLoaded;\n                        });\n                        onProgress(id, name, totalLoadedForFile, totalFileSize);\n                    }\n                };\n                xhr.upload.onprogress = function(e) {\n                    if (e.lengthComputable) {\n                        var type = chunkSize == null ? \"simple\" : \"chunked\";\n                        progressCalculator[type](e.loaded, e.total);\n                    }\n                };\n            },\n            _registerXhr: function(id, optChunkIdx, xhr, optAjaxRequester) {\n                var xhrsId = optChunkIdx == null ? -1 : optChunkIdx, tempState = handler._getFileState(id).temp;\n                tempState.xhrs = tempState.xhrs || {};\n                tempState.ajaxRequesters = tempState.ajaxRequesters || {};\n                tempState.xhrs[xhrsId] = xhr;\n                if (optAjaxRequester) {\n                    tempState.ajaxRequesters[xhrsId] = optAjaxRequester;\n                }\n                return xhr;\n            },\n            _removeExpiredChunkingRecords: function() {\n                var expirationDays = resume.recordsExpireIn;\n                handler._iterateResumeRecords(function(key, uploadData) {\n                    var expirationDate = new Date(uploadData.lastUpdated);\n                    expirationDate.setDate(expirationDate.getDate() + expirationDays);\n                    if (expirationDate.getTime() <= Date.now()) {\n                        log(\"Removing expired resume record with key \" + key);\n                        localStorage.removeItem(key);\n                    }\n                });\n            },\n            _shouldChunkThisFile: function(id) {\n                var state = handler._getFileState(id);\n                if (state) {\n                    if (!state.chunking) {\n                        handler.reevaluateChunking(id);\n                    }\n                    return state.chunking.enabled;\n                }\n            }\n        });\n    };\n    qq.DeleteFileAjaxRequester = function(o) {\n        \"use strict\";\n        var requester, options = {\n            method: \"DELETE\",\n            uuidParamName: \"qquuid\",\n            endpointStore: {},\n            maxConnections: 3,\n            customHeaders: function(id) {\n                return {};\n            },\n            paramsStore: {},\n            cors: {\n                expected: false,\n                sendCredentials: false\n            },\n            log: function(str, level) {},\n            onDelete: function(id) {},\n            onDeleteComplete: function(id, xhrOrXdr, isError) {}\n        };\n        qq.extend(options, o);\n        function getMandatedParams() {\n            if (options.method.toUpperCase() === \"POST\") {\n                return {\n                    _method: \"DELETE\"\n                };\n            }\n            return {};\n        }\n        requester = qq.extend(this, new qq.AjaxRequester({\n            acceptHeader: \"application/json\",\n            validMethods: [ \"POST\", \"DELETE\" ],\n            method: options.method,\n            endpointStore: options.endpointStore,\n            paramsStore: options.paramsStore,\n            mandatedParams: getMandatedParams(),\n            maxConnections: options.maxConnections,\n            customHeaders: function(id) {\n                return options.customHeaders.get(id);\n            },\n            log: options.log,\n            onSend: options.onDelete,\n            onComplete: options.onDeleteComplete,\n            cors: options.cors\n        }));\n        qq.extend(this, {\n            sendDelete: function(id, uuid, additionalMandatedParams) {\n                var additionalOptions = additionalMandatedParams || {};\n                options.log(\"Submitting delete file request for \" + id);\n                if (options.method === \"DELETE\") {\n                    requester.initTransport(id).withPath(uuid).withParams(additionalOptions).send();\n                } else {\n                    additionalOptions[options.uuidParamName] = uuid;\n                    requester.initTransport(id).withParams(additionalOptions).send();\n                }\n            }\n        });\n    };\n    (function() {\n        function detectSubsampling(img) {\n            var iw = img.naturalWidth, ih = img.naturalHeight, canvas = document.createElement(\"canvas\"), ctx;\n            if (iw * ih > 1024 * 1024) {\n                canvas.width = canvas.height = 1;\n                ctx = canvas.getContext(\"2d\");\n                ctx.drawImage(img, -iw + 1, 0);\n                return ctx.getImageData(0, 0, 1, 1).data[3] === 0;\n            } else {\n                return false;\n            }\n        }\n        function detectVerticalSquash(img, iw, ih) {\n            var canvas = document.createElement(\"canvas\"), sy = 0, ey = ih, py = ih, ctx, data, alpha, ratio;\n            canvas.width = 1;\n            canvas.height = ih;\n            ctx = canvas.getContext(\"2d\");\n            ctx.drawImage(img, 0, 0);\n            data = ctx.getImageData(0, 0, 1, ih).data;\n            while (py > sy) {\n                alpha = data[(py - 1) * 4 + 3];\n                if (alpha === 0) {\n                    ey = py;\n                } else {\n                    sy = py;\n                }\n                py = ey + sy >> 1;\n            }\n            ratio = py / ih;\n            return ratio === 0 ? 1 : ratio;\n        }\n        function renderImageToDataURL(img, blob, options, doSquash) {\n            var canvas = document.createElement(\"canvas\"), mime = options.mime || \"image/jpeg\", promise = new qq.Promise();\n            renderImageToCanvas(img, blob, canvas, options, doSquash).then(function() {\n                promise.success(canvas.toDataURL(mime, options.quality || .8));\n            });\n            return promise;\n        }\n        function maybeCalculateDownsampledDimensions(spec) {\n            var maxPixels = 5241e3;\n            if (!qq.ios()) {\n                throw new qq.Error(\"Downsampled dimensions can only be reliably calculated for iOS!\");\n            }\n            if (spec.origHeight * spec.origWidth > maxPixels) {\n                return {\n                    newHeight: Math.round(Math.sqrt(maxPixels * (spec.origHeight / spec.origWidth))),\n                    newWidth: Math.round(Math.sqrt(maxPixels * (spec.origWidth / spec.origHeight)))\n                };\n            }\n        }\n        function renderImageToCanvas(img, blob, canvas, options, doSquash) {\n            var iw = img.naturalWidth, ih = img.naturalHeight, width = options.width, height = options.height, ctx = canvas.getContext(\"2d\"), promise = new qq.Promise(), modifiedDimensions;\n            ctx.save();\n            if (options.resize) {\n                return renderImageToCanvasWithCustomResizer({\n                    blob: blob,\n                    canvas: canvas,\n                    image: img,\n                    imageHeight: ih,\n                    imageWidth: iw,\n                    orientation: options.orientation,\n                    resize: options.resize,\n                    targetHeight: height,\n                    targetWidth: width\n                });\n            }\n            if (!qq.supportedFeatures.unlimitedScaledImageSize) {\n                modifiedDimensions = maybeCalculateDownsampledDimensions({\n                    origWidth: width,\n                    origHeight: height\n                });\n                if (modifiedDimensions) {\n                    qq.log(qq.format(\"Had to reduce dimensions due to device limitations from {}w / {}h to {}w / {}h\", width, height, modifiedDimensions.newWidth, modifiedDimensions.newHeight), \"warn\");\n                    width = modifiedDimensions.newWidth;\n                    height = modifiedDimensions.newHeight;\n                }\n            }\n            transformCoordinate(canvas, width, height, options.orientation);\n            if (qq.ios()) {\n                (function() {\n                    if (detectSubsampling(img)) {\n                        iw /= 2;\n                        ih /= 2;\n                    }\n                    var d = 1024, tmpCanvas = document.createElement(\"canvas\"), vertSquashRatio = doSquash ? detectVerticalSquash(img, iw, ih) : 1, dw = Math.ceil(d * width / iw), dh = Math.ceil(d * height / ih / vertSquashRatio), sy = 0, dy = 0, tmpCtx, sx, dx;\n                    tmpCanvas.width = tmpCanvas.height = d;\n                    tmpCtx = tmpCanvas.getContext(\"2d\");\n                    while (sy < ih) {\n                        sx = 0;\n                        dx = 0;\n                        while (sx < iw) {\n                            tmpCtx.clearRect(0, 0, d, d);\n                            tmpCtx.drawImage(img, -sx, -sy);\n                            ctx.drawImage(tmpCanvas, 0, 0, d, d, dx, dy, dw, dh);\n                            sx += d;\n                            dx += dw;\n                        }\n                        sy += d;\n                        dy += dh;\n                    }\n                    ctx.restore();\n                    tmpCanvas = tmpCtx = null;\n                })();\n            } else {\n                ctx.drawImage(img, 0, 0, width, height);\n            }\n            canvas.qqImageRendered && canvas.qqImageRendered();\n            promise.success();\n            return promise;\n        }\n        function renderImageToCanvasWithCustomResizer(resizeInfo) {\n            var blob = resizeInfo.blob, image = resizeInfo.image, imageHeight = resizeInfo.imageHeight, imageWidth = resizeInfo.imageWidth, orientation = resizeInfo.orientation, promise = new qq.Promise(), resize = resizeInfo.resize, sourceCanvas = document.createElement(\"canvas\"), sourceCanvasContext = sourceCanvas.getContext(\"2d\"), targetCanvas = resizeInfo.canvas, targetHeight = resizeInfo.targetHeight, targetWidth = resizeInfo.targetWidth;\n            transformCoordinate(sourceCanvas, imageWidth, imageHeight, orientation);\n            targetCanvas.height = targetHeight;\n            targetCanvas.width = targetWidth;\n            sourceCanvasContext.drawImage(image, 0, 0);\n            resize({\n                blob: blob,\n                height: targetHeight,\n                image: image,\n                sourceCanvas: sourceCanvas,\n                targetCanvas: targetCanvas,\n                width: targetWidth\n            }).then(function success() {\n                targetCanvas.qqImageRendered && targetCanvas.qqImageRendered();\n                promise.success();\n            }, promise.failure);\n            return promise;\n        }\n        function transformCoordinate(canvas, width, height, orientation) {\n            switch (orientation) {\n              case 5:\n              case 6:\n              case 7:\n              case 8:\n                canvas.width = height;\n                canvas.height = width;\n                break;\n\n              default:\n                canvas.width = width;\n                canvas.height = height;\n            }\n            var ctx = canvas.getContext(\"2d\");\n            switch (orientation) {\n              case 2:\n                ctx.translate(width, 0);\n                ctx.scale(-1, 1);\n                break;\n\n              case 3:\n                ctx.translate(width, height);\n                ctx.rotate(Math.PI);\n                break;\n\n              case 4:\n                ctx.translate(0, height);\n                ctx.scale(1, -1);\n                break;\n\n              case 5:\n                ctx.rotate(.5 * Math.PI);\n                ctx.scale(1, -1);\n                break;\n\n              case 6:\n                ctx.rotate(.5 * Math.PI);\n                ctx.translate(0, -height);\n                break;\n\n              case 7:\n                ctx.rotate(.5 * Math.PI);\n                ctx.translate(width, -height);\n                ctx.scale(-1, 1);\n                break;\n\n              case 8:\n                ctx.rotate(-.5 * Math.PI);\n                ctx.translate(-width, 0);\n                break;\n\n              default:\n                break;\n            }\n        }\n        function MegaPixImage(srcImage, errorCallback) {\n            var self = this;\n            if (window.Blob && srcImage instanceof Blob) {\n                (function() {\n                    var img = new Image(), URL = window.URL && window.URL.createObjectURL ? window.URL : window.webkitURL && window.webkitURL.createObjectURL ? window.webkitURL : null;\n                    if (!URL) {\n                        throw Error(\"No createObjectURL function found to create blob url\");\n                    }\n                    img.src = URL.createObjectURL(srcImage);\n                    self.blob = srcImage;\n                    srcImage = img;\n                })();\n            }\n            if (!srcImage.naturalWidth && !srcImage.naturalHeight) {\n                srcImage.onload = function() {\n                    var listeners = self.imageLoadListeners;\n                    if (listeners) {\n                        self.imageLoadListeners = null;\n                        setTimeout(function() {\n                            for (var i = 0, len = listeners.length; i < len; i++) {\n                                listeners[i]();\n                            }\n                        }, 0);\n                    }\n                };\n                srcImage.onerror = errorCallback;\n                this.imageLoadListeners = [];\n            }\n            this.srcImage = srcImage;\n        }\n        MegaPixImage.prototype.render = function(target, options) {\n            options = options || {};\n            var self = this, imgWidth = this.srcImage.naturalWidth, imgHeight = this.srcImage.naturalHeight, width = options.width, height = options.height, maxWidth = options.maxWidth, maxHeight = options.maxHeight, doSquash = !this.blob || this.blob.type === \"image/jpeg\", tagName = target.tagName.toLowerCase(), opt;\n            if (this.imageLoadListeners) {\n                this.imageLoadListeners.push(function() {\n                    self.render(target, options);\n                });\n                return;\n            }\n            if (width && !height) {\n                height = imgHeight * width / imgWidth << 0;\n            } else if (height && !width) {\n                width = imgWidth * height / imgHeight << 0;\n            } else {\n                width = imgWidth;\n                height = imgHeight;\n            }\n            if (maxWidth && width > maxWidth) {\n                width = maxWidth;\n                height = imgHeight * width / imgWidth << 0;\n            }\n            if (maxHeight && height > maxHeight) {\n                height = maxHeight;\n                width = imgWidth * height / imgHeight << 0;\n            }\n            opt = {\n                width: width,\n                height: height\n            }, qq.each(options, function(optionsKey, optionsValue) {\n                opt[optionsKey] = optionsValue;\n            });\n            if (tagName === \"img\") {\n                (function() {\n                    var oldTargetSrc = target.src;\n                    renderImageToDataURL(self.srcImage, self.blob, opt, doSquash).then(function(dataUri) {\n                        target.src = dataUri;\n                        oldTargetSrc === target.src && target.onload();\n                    });\n                })();\n            } else if (tagName === \"canvas\") {\n                renderImageToCanvas(this.srcImage, this.blob, target, opt, doSquash);\n            }\n            if (typeof this.onrender === \"function\") {\n                this.onrender(target);\n            }\n        };\n        qq.MegaPixImage = MegaPixImage;\n    })();\n    qq.ImageGenerator = function(log) {\n        \"use strict\";\n        function isImg(el) {\n            return el.tagName.toLowerCase() === \"img\";\n        }\n        function isCanvas(el) {\n            return el.tagName.toLowerCase() === \"canvas\";\n        }\n        function isImgCorsSupported() {\n            return new Image().crossOrigin !== undefined;\n        }\n        function isCanvasSupported() {\n            var canvas = document.createElement(\"canvas\");\n            return canvas.getContext && canvas.getContext(\"2d\");\n        }\n        function determineMimeOfFileName(nameWithPath) {\n            var pathSegments = nameWithPath.split(\"/\"), name = pathSegments[pathSegments.length - 1].split(\"?\")[0], extension = qq.getExtension(name);\n            extension = extension && extension.toLowerCase();\n            switch (extension) {\n              case \"jpeg\":\n              case \"jpg\":\n                return \"image/jpeg\";\n\n              case \"png\":\n                return \"image/png\";\n\n              case \"bmp\":\n                return \"image/bmp\";\n\n              case \"gif\":\n                return \"image/gif\";\n\n              case \"tiff\":\n              case \"tif\":\n                return \"image/tiff\";\n            }\n        }\n        function isCrossOrigin(url) {\n            var targetAnchor = document.createElement(\"a\"), targetProtocol, targetHostname, targetPort;\n            targetAnchor.href = url;\n            targetProtocol = targetAnchor.protocol;\n            targetPort = targetAnchor.port;\n            targetHostname = targetAnchor.hostname;\n            if (targetProtocol.toLowerCase() !== window.location.protocol.toLowerCase()) {\n                return true;\n            }\n            if (targetHostname.toLowerCase() !== window.location.hostname.toLowerCase()) {\n                return true;\n            }\n            if (targetPort !== window.location.port && !qq.ie()) {\n                return true;\n            }\n            return false;\n        }\n        function registerImgLoadListeners(img, promise) {\n            img.onload = function() {\n                img.onload = null;\n                img.onerror = null;\n                promise.success(img);\n            };\n            img.onerror = function() {\n                img.onload = null;\n                img.onerror = null;\n                log(\"Problem drawing thumbnail!\", \"error\");\n                promise.failure(img, \"Problem drawing thumbnail!\");\n            };\n        }\n        function registerCanvasDrawImageListener(canvas, promise) {\n            canvas.qqImageRendered = function() {\n                promise.success(canvas);\n            };\n        }\n        function registerThumbnailRenderedListener(imgOrCanvas, promise) {\n            var registered = isImg(imgOrCanvas) || isCanvas(imgOrCanvas);\n            if (isImg(imgOrCanvas)) {\n                registerImgLoadListeners(imgOrCanvas, promise);\n            } else if (isCanvas(imgOrCanvas)) {\n                registerCanvasDrawImageListener(imgOrCanvas, promise);\n            } else {\n                promise.failure(imgOrCanvas);\n                log(qq.format(\"Element container of type {} is not supported!\", imgOrCanvas.tagName), \"error\");\n            }\n            return registered;\n        }\n        function draw(fileOrBlob, container, options) {\n            var drawPreview = new qq.Promise(), identifier = new qq.Identify(fileOrBlob, log), maxSize = options.maxSize, orient = options.orient == null ? true : options.orient, megapixErrorHandler = function() {\n                container.onerror = null;\n                container.onload = null;\n                log(\"Could not render preview, file may be too large!\", \"error\");\n                drawPreview.failure(container, \"Browser cannot render image!\");\n            };\n            identifier.isPreviewable().then(function(mime) {\n                var dummyExif = {\n                    parse: function() {\n                        return new qq.Promise().success();\n                    }\n                }, exif = orient ? new qq.Exif(fileOrBlob, log) : dummyExif, mpImg = new qq.MegaPixImage(fileOrBlob, megapixErrorHandler);\n                if (registerThumbnailRenderedListener(container, drawPreview)) {\n                    exif.parse().then(function(exif) {\n                        var orientation = exif && exif.Orientation;\n                        mpImg.render(container, {\n                            maxWidth: maxSize,\n                            maxHeight: maxSize,\n                            orientation: orientation,\n                            mime: mime,\n                            resize: options.customResizeFunction\n                        });\n                    }, function(failureMsg) {\n                        log(qq.format(\"EXIF data could not be parsed ({}).  Assuming orientation = 1.\", failureMsg));\n                        mpImg.render(container, {\n                            maxWidth: maxSize,\n                            maxHeight: maxSize,\n                            mime: mime,\n                            resize: options.customResizeFunction\n                        });\n                    });\n                }\n            }, function() {\n                log(\"Not previewable\");\n                drawPreview.failure(container, \"Not previewable\");\n            });\n            return drawPreview;\n        }\n        function drawOnCanvasOrImgFromUrl(url, canvasOrImg, draw, maxSize, customResizeFunction) {\n            var tempImg = new Image(), tempImgRender = new qq.Promise();\n            registerThumbnailRenderedListener(tempImg, tempImgRender);\n            if (isCrossOrigin(url)) {\n                tempImg.crossOrigin = \"anonymous\";\n            }\n            tempImg.src = url;\n            tempImgRender.then(function rendered() {\n                registerThumbnailRenderedListener(canvasOrImg, draw);\n                var mpImg = new qq.MegaPixImage(tempImg);\n                mpImg.render(canvasOrImg, {\n                    maxWidth: maxSize,\n                    maxHeight: maxSize,\n                    mime: determineMimeOfFileName(url),\n                    resize: customResizeFunction\n                });\n            }, draw.failure);\n        }\n        function drawOnImgFromUrlWithCssScaling(url, img, draw, maxSize) {\n            registerThumbnailRenderedListener(img, draw);\n            qq(img).css({\n                maxWidth: maxSize + \"px\",\n                maxHeight: maxSize + \"px\"\n            });\n            img.src = url;\n        }\n        function drawFromUrl(url, container, options) {\n            var draw = new qq.Promise(), scale = options.scale, maxSize = scale ? options.maxSize : null;\n            if (scale && isImg(container)) {\n                if (isCanvasSupported()) {\n                    if (isCrossOrigin(url) && !isImgCorsSupported()) {\n                        drawOnImgFromUrlWithCssScaling(url, container, draw, maxSize);\n                    } else {\n                        drawOnCanvasOrImgFromUrl(url, container, draw, maxSize);\n                    }\n                } else {\n                    drawOnImgFromUrlWithCssScaling(url, container, draw, maxSize);\n                }\n            } else if (isCanvas(container)) {\n                drawOnCanvasOrImgFromUrl(url, container, draw, maxSize);\n            } else if (registerThumbnailRenderedListener(container, draw)) {\n                container.src = url;\n            }\n            return draw;\n        }\n        qq.extend(this, {\n            generate: function(fileBlobOrUrl, container, options) {\n                if (qq.isString(fileBlobOrUrl)) {\n                    log(\"Attempting to update thumbnail based on server response.\");\n                    return drawFromUrl(fileBlobOrUrl, container, options || {});\n                } else {\n                    log(\"Attempting to draw client-side image preview.\");\n                    return draw(fileBlobOrUrl, container, options || {});\n                }\n            }\n        });\n        this._testing = {};\n        this._testing.isImg = isImg;\n        this._testing.isCanvas = isCanvas;\n        this._testing.isCrossOrigin = isCrossOrigin;\n        this._testing.determineMimeOfFileName = determineMimeOfFileName;\n    };\n    qq.Exif = function(fileOrBlob, log) {\n        \"use strict\";\n        var TAG_IDS = [ 274 ], TAG_INFO = {\n            274: {\n                name: \"Orientation\",\n                bytes: 2\n            }\n        };\n        function parseLittleEndian(hex) {\n            var result = 0, pow = 0;\n            while (hex.length > 0) {\n                result += parseInt(hex.substring(0, 2), 16) * Math.pow(2, pow);\n                hex = hex.substring(2, hex.length);\n                pow += 8;\n            }\n            return result;\n        }\n        function seekToApp1(offset, promise) {\n            var theOffset = offset, thePromise = promise;\n            if (theOffset === undefined) {\n                theOffset = 2;\n                thePromise = new qq.Promise();\n            }\n            qq.readBlobToHex(fileOrBlob, theOffset, 4).then(function(hex) {\n                var match = /^ffe([0-9])/.exec(hex), segmentLength;\n                if (match) {\n                    if (match[1] !== \"1\") {\n                        segmentLength = parseInt(hex.slice(4, 8), 16);\n                        seekToApp1(theOffset + segmentLength + 2, thePromise);\n                    } else {\n                        thePromise.success(theOffset);\n                    }\n                } else {\n                    thePromise.failure(\"No EXIF header to be found!\");\n                }\n            });\n            return thePromise;\n        }\n        function getApp1Offset() {\n            var promise = new qq.Promise();\n            qq.readBlobToHex(fileOrBlob, 0, 6).then(function(hex) {\n                if (hex.indexOf(\"ffd8\") !== 0) {\n                    promise.failure(\"Not a valid JPEG!\");\n                } else {\n                    seekToApp1().then(function(offset) {\n                        promise.success(offset);\n                    }, function(error) {\n                        promise.failure(error);\n                    });\n                }\n            });\n            return promise;\n        }\n        function isLittleEndian(app1Start) {\n            var promise = new qq.Promise();\n            qq.readBlobToHex(fileOrBlob, app1Start + 10, 2).then(function(hex) {\n                promise.success(hex === \"4949\");\n            });\n            return promise;\n        }\n        function getDirEntryCount(app1Start, littleEndian) {\n            var promise = new qq.Promise();\n            qq.readBlobToHex(fileOrBlob, app1Start + 18, 2).then(function(hex) {\n                if (littleEndian) {\n                    return promise.success(parseLittleEndian(hex));\n                } else {\n                    promise.success(parseInt(hex, 16));\n                }\n            });\n            return promise;\n        }\n        function getIfd(app1Start, dirEntries) {\n            var offset = app1Start + 20, bytes = dirEntries * 12;\n            return qq.readBlobToHex(fileOrBlob, offset, bytes);\n        }\n        function getDirEntries(ifdHex) {\n            var entries = [], offset = 0;\n            while (offset + 24 <= ifdHex.length) {\n                entries.push(ifdHex.slice(offset, offset + 24));\n                offset += 24;\n            }\n            return entries;\n        }\n        function getTagValues(littleEndian, dirEntries) {\n            var TAG_VAL_OFFSET = 16, tagsToFind = qq.extend([], TAG_IDS), vals = {};\n            qq.each(dirEntries, function(idx, entry) {\n                var idHex = entry.slice(0, 4), id = littleEndian ? parseLittleEndian(idHex) : parseInt(idHex, 16), tagsToFindIdx = tagsToFind.indexOf(id), tagValHex, tagName, tagValLength;\n                if (tagsToFindIdx >= 0) {\n                    tagName = TAG_INFO[id].name;\n                    tagValLength = TAG_INFO[id].bytes;\n                    tagValHex = entry.slice(TAG_VAL_OFFSET, TAG_VAL_OFFSET + tagValLength * 2);\n                    vals[tagName] = littleEndian ? parseLittleEndian(tagValHex) : parseInt(tagValHex, 16);\n                    tagsToFind.splice(tagsToFindIdx, 1);\n                }\n                if (tagsToFind.length === 0) {\n                    return false;\n                }\n            });\n            return vals;\n        }\n        qq.extend(this, {\n            parse: function() {\n                var parser = new qq.Promise(), onParseFailure = function(message) {\n                    log(qq.format(\"EXIF header parse failed: '{}' \", message));\n                    parser.failure(message);\n                };\n                getApp1Offset().then(function(app1Offset) {\n                    log(qq.format(\"Moving forward with EXIF header parsing for '{}'\", fileOrBlob.name === undefined ? \"blob\" : fileOrBlob.name));\n                    isLittleEndian(app1Offset).then(function(littleEndian) {\n                        log(qq.format(\"EXIF Byte order is {} endian\", littleEndian ? \"little\" : \"big\"));\n                        getDirEntryCount(app1Offset, littleEndian).then(function(dirEntryCount) {\n                            log(qq.format(\"Found {} APP1 directory entries\", dirEntryCount));\n                            getIfd(app1Offset, dirEntryCount).then(function(ifdHex) {\n                                var dirEntries = getDirEntries(ifdHex), tagValues = getTagValues(littleEndian, dirEntries);\n                                log(\"Successfully parsed some EXIF tags\");\n                                parser.success(tagValues);\n                            }, onParseFailure);\n                        }, onParseFailure);\n                    }, onParseFailure);\n                }, onParseFailure);\n                return parser;\n            }\n        });\n        this._testing = {};\n        this._testing.parseLittleEndian = parseLittleEndian;\n    };\n    qq.Identify = function(fileOrBlob, log) {\n        \"use strict\";\n        function isIdentifiable(magicBytes, questionableBytes) {\n            var identifiable = false, magicBytesEntries = [].concat(magicBytes);\n            qq.each(magicBytesEntries, function(idx, magicBytesArrayEntry) {\n                if (questionableBytes.indexOf(magicBytesArrayEntry) === 0) {\n                    identifiable = true;\n                    return false;\n                }\n            });\n            return identifiable;\n        }\n        qq.extend(this, {\n            isPreviewable: function() {\n                var self = this, identifier = new qq.Promise(), previewable = false, name = fileOrBlob.name === undefined ? \"blob\" : fileOrBlob.name;\n                log(qq.format(\"Attempting to determine if {} can be rendered in this browser\", name));\n                log(\"First pass: check type attribute of blob object.\");\n                if (this.isPreviewableSync()) {\n                    log(\"Second pass: check for magic bytes in file header.\");\n                    qq.readBlobToHex(fileOrBlob, 0, 4).then(function(hex) {\n                        qq.each(self.PREVIEWABLE_MIME_TYPES, function(mime, bytes) {\n                            if (isIdentifiable(bytes, hex)) {\n                                if (mime !== \"image/tiff\" || qq.supportedFeatures.tiffPreviews) {\n                                    previewable = true;\n                                    identifier.success(mime);\n                                }\n                                return false;\n                            }\n                        });\n                        log(qq.format(\"'{}' is {} able to be rendered in this browser\", name, previewable ? \"\" : \"NOT\"));\n                        if (!previewable) {\n                            identifier.failure();\n                        }\n                    }, function() {\n                        log(\"Error reading file w/ name '\" + name + \"'.  Not able to be rendered in this browser.\");\n                        identifier.failure();\n                    });\n                } else {\n                    identifier.failure();\n                }\n                return identifier;\n            },\n            isPreviewableSync: function() {\n                var fileMime = fileOrBlob.type, isRecognizedImage = qq.indexOf(Object.keys(this.PREVIEWABLE_MIME_TYPES), fileMime) >= 0, previewable = false, name = fileOrBlob.name === undefined ? \"blob\" : fileOrBlob.name;\n                if (isRecognizedImage) {\n                    if (fileMime === \"image/tiff\") {\n                        previewable = qq.supportedFeatures.tiffPreviews;\n                    } else {\n                        previewable = true;\n                    }\n                }\n                !previewable && log(name + \" is not previewable in this browser per the blob's type attr\");\n                return previewable;\n            }\n        });\n    };\n    qq.Identify.prototype.PREVIEWABLE_MIME_TYPES = {\n        \"image/jpeg\": \"ffd8ff\",\n        \"image/gif\": \"474946\",\n        \"image/png\": \"89504e\",\n        \"image/bmp\": \"424d\",\n        \"image/tiff\": [ \"49492a00\", \"4d4d002a\" ]\n    };\n    qq.ImageValidation = function(blob, log) {\n        \"use strict\";\n        function hasNonZeroLimits(limits) {\n            var atLeastOne = false;\n            qq.each(limits, function(limit, value) {\n                if (value > 0) {\n                    atLeastOne = true;\n                    return false;\n                }\n            });\n            return atLeastOne;\n        }\n        function getWidthHeight() {\n            var sizeDetermination = new qq.Promise();\n            new qq.Identify(blob, log).isPreviewable().then(function() {\n                var image = new Image(), url = window.URL && window.URL.createObjectURL ? window.URL : window.webkitURL && window.webkitURL.createObjectURL ? window.webkitURL : null;\n                if (url) {\n                    image.onerror = function() {\n                        log(\"Cannot determine dimensions for image.  May be too large.\", \"error\");\n                        sizeDetermination.failure();\n                    };\n                    image.onload = function() {\n                        sizeDetermination.success({\n                            width: this.width,\n                            height: this.height\n                        });\n                    };\n                    image.src = url.createObjectURL(blob);\n                } else {\n                    log(\"No createObjectURL function available to generate image URL!\", \"error\");\n                    sizeDetermination.failure();\n                }\n            }, sizeDetermination.failure);\n            return sizeDetermination;\n        }\n        function getFailingLimit(limits, dimensions) {\n            var failingLimit;\n            qq.each(limits, function(limitName, limitValue) {\n                if (limitValue > 0) {\n                    var limitMatcher = /(max|min)(Width|Height)/.exec(limitName), dimensionPropName = limitMatcher[2].charAt(0).toLowerCase() + limitMatcher[2].slice(1), actualValue = dimensions[dimensionPropName];\n                    switch (limitMatcher[1]) {\n                      case \"min\":\n                        if (actualValue < limitValue) {\n                            failingLimit = limitName;\n                            return false;\n                        }\n                        break;\n\n                      case \"max\":\n                        if (actualValue > limitValue) {\n                            failingLimit = limitName;\n                            return false;\n                        }\n                        break;\n                    }\n                }\n            });\n            return failingLimit;\n        }\n        this.validate = function(limits) {\n            var validationEffort = new qq.Promise();\n            log(\"Attempting to validate image.\");\n            if (hasNonZeroLimits(limits)) {\n                getWidthHeight().then(function(dimensions) {\n                    var failingLimit = getFailingLimit(limits, dimensions);\n                    if (failingLimit) {\n                        validationEffort.failure(failingLimit);\n                    } else {\n                        validationEffort.success();\n                    }\n                }, validationEffort.success);\n            } else {\n                validationEffort.success();\n            }\n            return validationEffort;\n        };\n    };\n    qq.Session = function(spec) {\n        \"use strict\";\n        var options = {\n            endpoint: null,\n            params: {},\n            customHeaders: {},\n            cors: {},\n            addFileRecord: function(sessionData) {},\n            log: function(message, level) {}\n        };\n        qq.extend(options, spec, true);\n        function isJsonResponseValid(response) {\n            if (qq.isArray(response)) {\n                return true;\n            }\n            options.log(\"Session response is not an array.\", \"error\");\n        }\n        function handleFileItems(fileItems, success, xhrOrXdr, promise) {\n            var someItemsIgnored = false;\n            success = success && isJsonResponseValid(fileItems);\n            if (success) {\n                qq.each(fileItems, function(idx, fileItem) {\n                    if (fileItem.uuid == null) {\n                        someItemsIgnored = true;\n                        options.log(qq.format(\"Session response item {} did not include a valid UUID - ignoring.\", idx), \"error\");\n                    } else if (fileItem.name == null) {\n                        someItemsIgnored = true;\n                        options.log(qq.format(\"Session response item {} did not include a valid name - ignoring.\", idx), \"error\");\n                    } else {\n                        try {\n                            options.addFileRecord(fileItem);\n                            return true;\n                        } catch (err) {\n                            someItemsIgnored = true;\n                            options.log(err.message, \"error\");\n                        }\n                    }\n                    return false;\n                });\n            }\n            promise[success && !someItemsIgnored ? \"success\" : \"failure\"](fileItems, xhrOrXdr);\n        }\n        this.refresh = function() {\n            var refreshEffort = new qq.Promise(), refreshCompleteCallback = function(response, success, xhrOrXdr) {\n                handleFileItems(response, success, xhrOrXdr, refreshEffort);\n            }, requesterOptions = qq.extend({}, options), requester = new qq.SessionAjaxRequester(qq.extend(requesterOptions, {\n                onComplete: refreshCompleteCallback\n            }));\n            requester.queryServer();\n            return refreshEffort;\n        };\n    };\n    qq.SessionAjaxRequester = function(spec) {\n        \"use strict\";\n        var requester, options = {\n            endpoint: null,\n            customHeaders: {},\n            params: {},\n            cors: {\n                expected: false,\n                sendCredentials: false\n            },\n            onComplete: function(response, success, xhrOrXdr) {},\n            log: function(str, level) {}\n        };\n        qq.extend(options, spec);\n        function onComplete(id, xhrOrXdr, isError) {\n            var response = null;\n            if (xhrOrXdr.responseText != null) {\n                try {\n                    response = qq.parseJson(xhrOrXdr.responseText);\n                } catch (err) {\n                    options.log(\"Problem parsing session response: \" + err.message, \"error\");\n                    isError = true;\n                }\n            }\n            options.onComplete(response, !isError, xhrOrXdr);\n        }\n        requester = qq.extend(this, new qq.AjaxRequester({\n            acceptHeader: \"application/json\",\n            validMethods: [ \"GET\" ],\n            method: \"GET\",\n            endpointStore: {\n                get: function() {\n                    return options.endpoint;\n                }\n            },\n            customHeaders: options.customHeaders,\n            log: options.log,\n            onComplete: onComplete,\n            cors: options.cors\n        }));\n        qq.extend(this, {\n            queryServer: function() {\n                var params = qq.extend({}, options.params);\n                options.log(\"Session query request.\");\n                requester.initTransport(\"sessionRefresh\").withParams(params).withCacheBuster().send();\n            }\n        });\n    };\n    qq.Scaler = function(spec, log) {\n        \"use strict\";\n        var self = this, customResizeFunction = spec.customResizer, includeOriginal = spec.sendOriginal, orient = spec.orient, defaultType = spec.defaultType, defaultQuality = spec.defaultQuality / 100, failedToScaleText = spec.failureText, includeExif = spec.includeExif, sizes = this._getSortedSizes(spec.sizes);\n        qq.extend(this, {\n            enabled: qq.supportedFeatures.scaling && sizes.length > 0,\n            getFileRecords: function(originalFileUuid, originalFileName, originalBlobOrBlobData) {\n                var self = this, records = [], originalBlob = originalBlobOrBlobData.blob ? originalBlobOrBlobData.blob : originalBlobOrBlobData, identifier = new qq.Identify(originalBlob, log);\n                if (identifier.isPreviewableSync()) {\n                    qq.each(sizes, function(idx, sizeRecord) {\n                        var outputType = self._determineOutputType({\n                            defaultType: defaultType,\n                            requestedType: sizeRecord.type,\n                            refType: originalBlob.type\n                        });\n                        records.push({\n                            uuid: qq.getUniqueId(),\n                            name: self._getName(originalFileName, {\n                                name: sizeRecord.name,\n                                type: outputType,\n                                refType: originalBlob.type\n                            }),\n                            blob: new qq.BlobProxy(originalBlob, qq.bind(self._generateScaledImage, self, {\n                                customResizeFunction: customResizeFunction,\n                                maxSize: sizeRecord.maxSize,\n                                orient: orient,\n                                type: outputType,\n                                quality: defaultQuality,\n                                failedText: failedToScaleText,\n                                includeExif: includeExif,\n                                log: log\n                            }))\n                        });\n                    });\n                    records.push({\n                        uuid: originalFileUuid,\n                        name: originalFileName,\n                        size: originalBlob.size,\n                        blob: includeOriginal ? originalBlob : null\n                    });\n                } else {\n                    records.push({\n                        uuid: originalFileUuid,\n                        name: originalFileName,\n                        size: originalBlob.size,\n                        blob: originalBlob\n                    });\n                }\n                return records;\n            },\n            handleNewFile: function(file, name, uuid, size, fileList, batchId, uuidParamName, api) {\n                var self = this, buttonId = file.qqButtonId || file.blob && file.blob.qqButtonId, scaledIds = [], originalId = null, addFileToHandler = api.addFileToHandler, uploadData = api.uploadData, paramsStore = api.paramsStore, proxyGroupId = qq.getUniqueId();\n                qq.each(self.getFileRecords(uuid, name, file), function(idx, record) {\n                    var blobSize = record.size, id;\n                    if (record.blob instanceof qq.BlobProxy) {\n                        blobSize = -1;\n                    }\n                    id = uploadData.addFile({\n                        uuid: record.uuid,\n                        name: record.name,\n                        size: blobSize,\n                        batchId: batchId,\n                        proxyGroupId: proxyGroupId\n                    });\n                    if (record.blob instanceof qq.BlobProxy) {\n                        scaledIds.push(id);\n                    } else {\n                        originalId = id;\n                    }\n                    if (record.blob) {\n                        addFileToHandler(id, record.blob);\n                        fileList.push({\n                            id: id,\n                            file: record.blob\n                        });\n                    } else {\n                        uploadData.setStatus(id, qq.status.REJECTED);\n                    }\n                });\n                if (originalId !== null) {\n                    qq.each(scaledIds, function(idx, scaledId) {\n                        var params = {\n                            qqparentuuid: uploadData.retrieve({\n                                id: originalId\n                            }).uuid,\n                            qqparentsize: uploadData.retrieve({\n                                id: originalId\n                            }).size\n                        };\n                        params[uuidParamName] = uploadData.retrieve({\n                            id: scaledId\n                        }).uuid;\n                        uploadData.setParentId(scaledId, originalId);\n                        paramsStore.addReadOnly(scaledId, params);\n                    });\n                    if (scaledIds.length) {\n                        (function() {\n                            var param = {};\n                            param[uuidParamName] = uploadData.retrieve({\n                                id: originalId\n                            }).uuid;\n                            paramsStore.addReadOnly(originalId, param);\n                        })();\n                    }\n                }\n            }\n        });\n    };\n    qq.extend(qq.Scaler.prototype, {\n        scaleImage: function(id, specs, api) {\n            \"use strict\";\n            if (!qq.supportedFeatures.scaling) {\n                throw new qq.Error(\"Scaling is not supported in this browser!\");\n            }\n            var scalingEffort = new qq.Promise(), log = api.log, file = api.getFile(id), uploadData = api.uploadData.retrieve({\n                id: id\n            }), name = uploadData && uploadData.name, uuid = uploadData && uploadData.uuid, scalingOptions = {\n                customResizer: specs.customResizer,\n                sendOriginal: false,\n                orient: specs.orient,\n                defaultType: specs.type || null,\n                defaultQuality: specs.quality,\n                failedToScaleText: \"Unable to scale\",\n                sizes: [ {\n                    name: \"\",\n                    maxSize: specs.maxSize\n                } ]\n            }, scaler = new qq.Scaler(scalingOptions, log);\n            if (!qq.Scaler || !qq.supportedFeatures.imagePreviews || !file) {\n                scalingEffort.failure();\n                log(\"Could not generate requested scaled image for \" + id + \".  \" + \"Scaling is either not possible in this browser, or the file could not be located.\", \"error\");\n            } else {\n                qq.bind(function() {\n                    var record = scaler.getFileRecords(uuid, name, file)[0];\n                    if (record && record.blob instanceof qq.BlobProxy) {\n                        record.blob.create().then(scalingEffort.success, scalingEffort.failure);\n                    } else {\n                        log(id + \" is not a scalable image!\", \"error\");\n                        scalingEffort.failure();\n                    }\n                }, this)();\n            }\n            return scalingEffort;\n        },\n        _determineOutputType: function(spec) {\n            \"use strict\";\n            var requestedType = spec.requestedType, defaultType = spec.defaultType, referenceType = spec.refType;\n            if (!defaultType && !requestedType) {\n                if (referenceType !== \"image/jpeg\") {\n                    return \"image/png\";\n                }\n                return referenceType;\n            }\n            if (!requestedType) {\n                return defaultType;\n            }\n            if (qq.indexOf(Object.keys(qq.Identify.prototype.PREVIEWABLE_MIME_TYPES), requestedType) >= 0) {\n                if (requestedType === \"image/tiff\") {\n                    return qq.supportedFeatures.tiffPreviews ? requestedType : defaultType;\n                }\n                return requestedType;\n            }\n            return defaultType;\n        },\n        _getName: function(originalName, scaledVersionProperties) {\n            \"use strict\";\n            var startOfExt = originalName.lastIndexOf(\".\"), versionType = scaledVersionProperties.type || \"image/png\", referenceType = scaledVersionProperties.refType, scaledName = \"\", scaledExt = qq.getExtension(originalName), nameAppendage = \"\";\n            if (scaledVersionProperties.name && scaledVersionProperties.name.trim().length) {\n                nameAppendage = \" (\" + scaledVersionProperties.name + \")\";\n            }\n            if (startOfExt >= 0) {\n                scaledName = originalName.substr(0, startOfExt);\n                if (referenceType !== versionType) {\n                    scaledExt = versionType.split(\"/\")[1];\n                }\n                scaledName += nameAppendage + \".\" + scaledExt;\n            } else {\n                scaledName = originalName + nameAppendage;\n            }\n            return scaledName;\n        },\n        _getSortedSizes: function(sizes) {\n            \"use strict\";\n            sizes = qq.extend([], sizes);\n            return sizes.sort(function(a, b) {\n                if (a.maxSize > b.maxSize) {\n                    return 1;\n                }\n                if (a.maxSize < b.maxSize) {\n                    return -1;\n                }\n                return 0;\n            });\n        },\n        _generateScaledImage: function(spec, sourceFile) {\n            \"use strict\";\n            var self = this, customResizeFunction = spec.customResizeFunction, log = spec.log, maxSize = spec.maxSize, orient = spec.orient, type = spec.type, quality = spec.quality, failedText = spec.failedText, includeExif = spec.includeExif && sourceFile.type === \"image/jpeg\" && type === \"image/jpeg\", scalingEffort = new qq.Promise(), imageGenerator = new qq.ImageGenerator(log), canvas = document.createElement(\"canvas\");\n            log(\"Attempting to generate scaled version for \" + sourceFile.name);\n            imageGenerator.generate(sourceFile, canvas, {\n                maxSize: maxSize,\n                orient: orient,\n                customResizeFunction: customResizeFunction\n            }).then(function() {\n                var scaledImageDataUri = canvas.toDataURL(type, quality), signalSuccess = function() {\n                    log(\"Success generating scaled version for \" + sourceFile.name);\n                    var blob = qq.dataUriToBlob(scaledImageDataUri);\n                    scalingEffort.success(blob);\n                };\n                if (includeExif) {\n                    self._insertExifHeader(sourceFile, scaledImageDataUri, log).then(function(scaledImageDataUriWithExif) {\n                        scaledImageDataUri = scaledImageDataUriWithExif;\n                        signalSuccess();\n                    }, function() {\n                        log(\"Problem inserting EXIF header into scaled image.  Using scaled image w/out EXIF data.\", \"error\");\n                        signalSuccess();\n                    });\n                } else {\n                    signalSuccess();\n                }\n            }, function() {\n                log(\"Failed attempt to generate scaled version for \" + sourceFile.name, \"error\");\n                scalingEffort.failure(failedText);\n            });\n            return scalingEffort;\n        },\n        _insertExifHeader: function(originalImage, scaledImageDataUri, log) {\n            \"use strict\";\n            var reader = new FileReader(), insertionEffort = new qq.Promise(), originalImageDataUri = \"\";\n            reader.onload = function() {\n                originalImageDataUri = reader.result;\n                insertionEffort.success(qq.ExifRestorer.restore(originalImageDataUri, scaledImageDataUri));\n            };\n            reader.onerror = function() {\n                log(\"Problem reading \" + originalImage.name + \" during attempt to transfer EXIF data to scaled version.\", \"error\");\n                insertionEffort.failure();\n            };\n            reader.readAsDataURL(originalImage);\n            return insertionEffort;\n        },\n        _dataUriToBlob: function(dataUri) {\n            \"use strict\";\n            var byteString, mimeString, arrayBuffer, intArray;\n            if (dataUri.split(\",\")[0].indexOf(\"base64\") >= 0) {\n                byteString = atob(dataUri.split(\",\")[1]);\n            } else {\n                byteString = decodeURI(dataUri.split(\",\")[1]);\n            }\n            mimeString = dataUri.split(\",\")[0].split(\":\")[1].split(\";\")[0];\n            arrayBuffer = new ArrayBuffer(byteString.length);\n            intArray = new Uint8Array(arrayBuffer);\n            qq.each(byteString, function(idx, character) {\n                intArray[idx] = character.charCodeAt(0);\n            });\n            return this._createBlob(arrayBuffer, mimeString);\n        },\n        _createBlob: function(data, mime) {\n            \"use strict\";\n            var BlobBuilder = window.BlobBuilder || window.WebKitBlobBuilder || window.MozBlobBuilder || window.MSBlobBuilder, blobBuilder = BlobBuilder && new BlobBuilder();\n            if (blobBuilder) {\n                blobBuilder.append(data);\n                return blobBuilder.getBlob(mime);\n            } else {\n                return new Blob([ data ], {\n                    type: mime\n                });\n            }\n        }\n    });\n    qq.ExifRestorer = function() {\n        var ExifRestorer = {};\n        ExifRestorer.KEY_STR = \"ABCDEFGHIJKLMNOP\" + \"QRSTUVWXYZabcdef\" + \"ghijklmnopqrstuv\" + \"wxyz0123456789+/\" + \"=\";\n        ExifRestorer.encode64 = function(input) {\n            var output = \"\", chr1, chr2, chr3 = \"\", enc1, enc2, enc3, enc4 = \"\", i = 0;\n            do {\n                chr1 = input[i++];\n                chr2 = input[i++];\n                chr3 = input[i++];\n                enc1 = chr1 >> 2;\n                enc2 = (chr1 & 3) << 4 | chr2 >> 4;\n                enc3 = (chr2 & 15) << 2 | chr3 >> 6;\n                enc4 = chr3 & 63;\n                if (isNaN(chr2)) {\n                    enc3 = enc4 = 64;\n                } else if (isNaN(chr3)) {\n                    enc4 = 64;\n                }\n                output = output + this.KEY_STR.charAt(enc1) + this.KEY_STR.charAt(enc2) + this.KEY_STR.charAt(enc3) + this.KEY_STR.charAt(enc4);\n                chr1 = chr2 = chr3 = \"\";\n                enc1 = enc2 = enc3 = enc4 = \"\";\n            } while (i < input.length);\n            return output;\n        };\n        ExifRestorer.restore = function(origFileBase64, resizedFileBase64) {\n            var expectedBase64Header = \"data:image/jpeg;base64,\";\n            if (!origFileBase64.match(expectedBase64Header)) {\n                return resizedFileBase64;\n            }\n            var rawImage = this.decode64(origFileBase64.replace(expectedBase64Header, \"\"));\n            var segments = this.slice2Segments(rawImage);\n            var image = this.exifManipulation(resizedFileBase64, segments);\n            return expectedBase64Header + this.encode64(image);\n        };\n        ExifRestorer.exifManipulation = function(resizedFileBase64, segments) {\n            var exifArray = this.getExifArray(segments), newImageArray = this.insertExif(resizedFileBase64, exifArray), aBuffer = new Uint8Array(newImageArray);\n            return aBuffer;\n        };\n        ExifRestorer.getExifArray = function(segments) {\n            var seg;\n            for (var x = 0; x < segments.length; x++) {\n                seg = segments[x];\n                if (seg[0] == 255 & seg[1] == 225) {\n                    return seg;\n                }\n            }\n            return [];\n        };\n        ExifRestorer.insertExif = function(resizedFileBase64, exifArray) {\n            var imageData = resizedFileBase64.replace(\"data:image/jpeg;base64,\", \"\"), buf = this.decode64(imageData), separatePoint = buf.indexOf(255, 3), mae = buf.slice(0, separatePoint), ato = buf.slice(separatePoint), array = mae;\n            array = array.concat(exifArray);\n            array = array.concat(ato);\n            return array;\n        };\n        ExifRestorer.slice2Segments = function(rawImageArray) {\n            var head = 0, segments = [];\n            while (1) {\n                if (rawImageArray[head] == 255 & rawImageArray[head + 1] == 218) {\n                    break;\n                }\n                if (rawImageArray[head] == 255 & rawImageArray[head + 1] == 216) {\n                    head += 2;\n                } else {\n                    var length = rawImageArray[head + 2] * 256 + rawImageArray[head + 3], endPoint = head + length + 2, seg = rawImageArray.slice(head, endPoint);\n                    segments.push(seg);\n                    head = endPoint;\n                }\n                if (head > rawImageArray.length) {\n                    break;\n                }\n            }\n            return segments;\n        };\n        ExifRestorer.decode64 = function(input) {\n            var output = \"\", chr1, chr2, chr3 = \"\", enc1, enc2, enc3, enc4 = \"\", i = 0, buf = [];\n            var base64test = /[^A-Za-z0-9\\+\\/\\=]/g;\n            if (base64test.exec(input)) {\n                throw new Error(\"There were invalid base64 characters in the input text.  \" + \"Valid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='\");\n            }\n            input = input.replace(/[^A-Za-z0-9\\+\\/\\=]/g, \"\");\n            do {\n                enc1 = this.KEY_STR.indexOf(input.charAt(i++));\n                enc2 = this.KEY_STR.indexOf(input.charAt(i++));\n                enc3 = this.KEY_STR.indexOf(input.charAt(i++));\n                enc4 = this.KEY_STR.indexOf(input.charAt(i++));\n                chr1 = enc1 << 2 | enc2 >> 4;\n                chr2 = (enc2 & 15) << 4 | enc3 >> 2;\n                chr3 = (enc3 & 3) << 6 | enc4;\n                buf.push(chr1);\n                if (enc3 != 64) {\n                    buf.push(chr2);\n                }\n                if (enc4 != 64) {\n                    buf.push(chr3);\n                }\n                chr1 = chr2 = chr3 = \"\";\n                enc1 = enc2 = enc3 = enc4 = \"\";\n            } while (i < input.length);\n            return buf;\n        };\n        return ExifRestorer;\n    }();\n    qq.TotalProgress = function(callback, getSize) {\n        \"use strict\";\n        var perFileProgress = {}, totalLoaded = 0, totalSize = 0, lastLoadedSent = -1, lastTotalSent = -1, callbackProxy = function(loaded, total) {\n            if (loaded !== lastLoadedSent || total !== lastTotalSent) {\n                callback(loaded, total);\n            }\n            lastLoadedSent = loaded;\n            lastTotalSent = total;\n        }, noRetryableFiles = function(failed, retryable) {\n            var none = true;\n            qq.each(failed, function(idx, failedId) {\n                if (qq.indexOf(retryable, failedId) >= 0) {\n                    none = false;\n                    return false;\n                }\n            });\n            return none;\n        }, onCancel = function(id) {\n            updateTotalProgress(id, -1, -1);\n            delete perFileProgress[id];\n        }, onAllComplete = function(successful, failed, retryable) {\n            if (failed.length === 0 || noRetryableFiles(failed, retryable)) {\n                callbackProxy(totalSize, totalSize);\n                this.reset();\n            }\n        }, onNew = function(id) {\n            var size = getSize(id);\n            if (size > 0) {\n                updateTotalProgress(id, 0, size);\n                perFileProgress[id] = {\n                    loaded: 0,\n                    total: size\n                };\n            }\n        }, updateTotalProgress = function(id, newLoaded, newTotal) {\n            var oldLoaded = perFileProgress[id] ? perFileProgress[id].loaded : 0, oldTotal = perFileProgress[id] ? perFileProgress[id].total : 0;\n            if (newLoaded === -1 && newTotal === -1) {\n                totalLoaded -= oldLoaded;\n                totalSize -= oldTotal;\n            } else {\n                if (newLoaded) {\n                    totalLoaded += newLoaded - oldLoaded;\n                }\n                if (newTotal) {\n                    totalSize += newTotal - oldTotal;\n                }\n            }\n            callbackProxy(totalLoaded, totalSize);\n        };\n        qq.extend(this, {\n            onAllComplete: onAllComplete,\n            onStatusChange: function(id, oldStatus, newStatus) {\n                if (newStatus === qq.status.CANCELED || newStatus === qq.status.REJECTED) {\n                    onCancel(id);\n                } else if (newStatus === qq.status.SUBMITTING) {\n                    onNew(id);\n                }\n            },\n            onIndividualProgress: function(id, loaded, total) {\n                updateTotalProgress(id, loaded, total);\n                perFileProgress[id] = {\n                    loaded: loaded,\n                    total: total\n                };\n            },\n            onNewSize: function(id) {\n                onNew(id);\n            },\n            reset: function() {\n                perFileProgress = {};\n                totalLoaded = 0;\n                totalSize = 0;\n            }\n        });\n    };\n    qq.PasteSupport = function(o) {\n        \"use strict\";\n        var options, detachPasteHandler;\n        options = {\n            targetElement: null,\n            callbacks: {\n                log: function(message, level) {},\n                pasteReceived: function(blob) {}\n            }\n        };\n        function isImage(item) {\n            return item.type && item.type.indexOf(\"image/\") === 0;\n        }\n        function registerPasteHandler() {\n            detachPasteHandler = qq(options.targetElement).attach(\"paste\", function(event) {\n                var clipboardData = event.clipboardData;\n                if (clipboardData) {\n                    qq.each(clipboardData.items, function(idx, item) {\n                        if (isImage(item)) {\n                            var blob = item.getAsFile();\n                            options.callbacks.pasteReceived(blob);\n                        }\n                    });\n                }\n            });\n        }\n        function unregisterPasteHandler() {\n            if (detachPasteHandler) {\n                detachPasteHandler();\n            }\n        }\n        qq.extend(options, o);\n        registerPasteHandler();\n        qq.extend(this, {\n            reset: function() {\n                unregisterPasteHandler();\n            }\n        });\n    };\n    qq.FormSupport = function(options, startUpload, log) {\n        \"use strict\";\n        var self = this, interceptSubmit = options.interceptSubmit, formEl = options.element, autoUpload = options.autoUpload;\n        qq.extend(this, {\n            newEndpoint: null,\n            newAutoUpload: autoUpload,\n            attachedToForm: false,\n            getFormInputsAsObject: function() {\n                if (formEl == null) {\n                    return null;\n                }\n                return self._form2Obj(formEl);\n            }\n        });\n        function determineNewEndpoint(formEl) {\n            if (formEl.getAttribute(\"action\")) {\n                self.newEndpoint = formEl.getAttribute(\"action\");\n            }\n        }\n        function validateForm(formEl, nativeSubmit) {\n            if (formEl.checkValidity && !formEl.checkValidity()) {\n                log(\"Form did not pass validation checks - will not upload.\", \"error\");\n                nativeSubmit();\n            } else {\n                return true;\n            }\n        }\n        function maybeUploadOnSubmit(formEl) {\n            var nativeSubmit = formEl.submit;\n            qq(formEl).attach(\"submit\", function(event) {\n                event = event || window.event;\n                if (event.preventDefault) {\n                    event.preventDefault();\n                } else {\n                    event.returnValue = false;\n                }\n                validateForm(formEl, nativeSubmit) && startUpload();\n            });\n            formEl.submit = function() {\n                validateForm(formEl, nativeSubmit) && startUpload();\n            };\n        }\n        function determineFormEl(formEl) {\n            if (formEl) {\n                if (qq.isString(formEl)) {\n                    formEl = document.getElementById(formEl);\n                }\n                if (formEl) {\n                    log(\"Attaching to form element.\");\n                    determineNewEndpoint(formEl);\n                    interceptSubmit && maybeUploadOnSubmit(formEl);\n                }\n            }\n            return formEl;\n        }\n        formEl = determineFormEl(formEl);\n        this.attachedToForm = !!formEl;\n    };\n    qq.extend(qq.FormSupport.prototype, {\n        _form2Obj: function(form) {\n            \"use strict\";\n            var obj = {}, notIrrelevantType = function(type) {\n                var irrelevantTypes = [ \"button\", \"image\", \"reset\", \"submit\" ];\n                return qq.indexOf(irrelevantTypes, type.toLowerCase()) < 0;\n            }, radioOrCheckbox = function(type) {\n                return qq.indexOf([ \"checkbox\", \"radio\" ], type.toLowerCase()) >= 0;\n            }, ignoreValue = function(el) {\n                if (radioOrCheckbox(el.type) && !el.checked) {\n                    return true;\n                }\n                return el.disabled && el.type.toLowerCase() !== \"hidden\";\n            }, selectValue = function(select) {\n                var value = null;\n                qq.each(qq(select).children(), function(idx, child) {\n                    if (child.tagName.toLowerCase() === \"option\" && child.selected) {\n                        value = child.value;\n                        return false;\n                    }\n                });\n                return value;\n            };\n            qq.each(form.elements, function(idx, el) {\n                if ((qq.isInput(el, true) || el.tagName.toLowerCase() === \"textarea\") && notIrrelevantType(el.type) && !ignoreValue(el)) {\n                    obj[el.name] = el.value;\n                } else if (el.tagName.toLowerCase() === \"select\" && !ignoreValue(el)) {\n                    var value = selectValue(el);\n                    if (value !== null) {\n                        obj[el.name] = value;\n                    }\n                }\n            });\n            return obj;\n        }\n    });\n    qq.CryptoJS = function(Math, undefined) {\n        var C = {};\n        var C_lib = C.lib = {};\n        var Base = C_lib.Base = function() {\n            function F() {}\n            return {\n                extend: function(overrides) {\n                    F.prototype = this;\n                    var subtype = new F();\n                    if (overrides) {\n                        subtype.mixIn(overrides);\n                    }\n                    if (!subtype.hasOwnProperty(\"init\")) {\n                        subtype.init = function() {\n                            subtype.$super.init.apply(this, arguments);\n                        };\n                    }\n                    subtype.init.prototype = subtype;\n                    subtype.$super = this;\n                    return subtype;\n                },\n                create: function() {\n                    var instance = this.extend();\n                    instance.init.apply(instance, arguments);\n                    return instance;\n                },\n                init: function() {},\n                mixIn: function(properties) {\n                    for (var propertyName in properties) {\n                        if (properties.hasOwnProperty(propertyName)) {\n                            this[propertyName] = properties[propertyName];\n                        }\n                    }\n                    if (properties.hasOwnProperty(\"toString\")) {\n                        this.toString = properties.toString;\n                    }\n                },\n                clone: function() {\n                    return this.init.prototype.extend(this);\n                }\n            };\n        }();\n        var WordArray = C_lib.WordArray = Base.extend({\n            init: function(words, sigBytes) {\n                words = this.words = words || [];\n                if (sigBytes != undefined) {\n                    this.sigBytes = sigBytes;\n                } else {\n                    this.sigBytes = words.length * 4;\n                }\n            },\n            toString: function(encoder) {\n                return (encoder || Hex).stringify(this);\n            },\n            concat: function(wordArray) {\n                var thisWords = this.words;\n                var thatWords = wordArray.words;\n                var thisSigBytes = this.sigBytes;\n                var thatSigBytes = wordArray.sigBytes;\n                this.clamp();\n                if (thisSigBytes % 4) {\n                    for (var i = 0; i < thatSigBytes; i++) {\n                        var thatByte = thatWords[i >>> 2] >>> 24 - i % 4 * 8 & 255;\n                        thisWords[thisSigBytes + i >>> 2] |= thatByte << 24 - (thisSigBytes + i) % 4 * 8;\n                    }\n                } else if (thatWords.length > 65535) {\n                    for (var i = 0; i < thatSigBytes; i += 4) {\n                        thisWords[thisSigBytes + i >>> 2] = thatWords[i >>> 2];\n                    }\n                } else {\n                    thisWords.push.apply(thisWords, thatWords);\n                }\n                this.sigBytes += thatSigBytes;\n                return this;\n            },\n            clamp: function() {\n                var words = this.words;\n                var sigBytes = this.sigBytes;\n                words[sigBytes >>> 2] &= 4294967295 << 32 - sigBytes % 4 * 8;\n                words.length = Math.ceil(sigBytes / 4);\n            },\n            clone: function() {\n                var clone = Base.clone.call(this);\n                clone.words = this.words.slice(0);\n                return clone;\n            },\n            random: function(nBytes) {\n                var words = [];\n                for (var i = 0; i < nBytes; i += 4) {\n                    words.push(Math.random() * 4294967296 | 0);\n                }\n                return new WordArray.init(words, nBytes);\n            }\n        });\n        var C_enc = C.enc = {};\n        var Hex = C_enc.Hex = {\n            stringify: function(wordArray) {\n                var words = wordArray.words;\n                var sigBytes = wordArray.sigBytes;\n                var hexChars = [];\n                for (var i = 0; i < sigBytes; i++) {\n                    var bite = words[i >>> 2] >>> 24 - i % 4 * 8 & 255;\n                    hexChars.push((bite >>> 4).toString(16));\n                    hexChars.push((bite & 15).toString(16));\n                }\n                return hexChars.join(\"\");\n            },\n            parse: function(hexStr) {\n                var hexStrLength = hexStr.length;\n                var words = [];\n                for (var i = 0; i < hexStrLength; i += 2) {\n                    words[i >>> 3] |= parseInt(hexStr.substr(i, 2), 16) << 24 - i % 8 * 4;\n                }\n                return new WordArray.init(words, hexStrLength / 2);\n            }\n        };\n        var Latin1 = C_enc.Latin1 = {\n            stringify: function(wordArray) {\n                var words = wordArray.words;\n                var sigBytes = wordArray.sigBytes;\n                var latin1Chars = [];\n                for (var i = 0; i < sigBytes; i++) {\n                    var bite = words[i >>> 2] >>> 24 - i % 4 * 8 & 255;\n                    latin1Chars.push(String.fromCharCode(bite));\n                }\n                return latin1Chars.join(\"\");\n            },\n            parse: function(latin1Str) {\n                var latin1StrLength = latin1Str.length;\n                var words = [];\n                for (var i = 0; i < latin1StrLength; i++) {\n                    words[i >>> 2] |= (latin1Str.charCodeAt(i) & 255) << 24 - i % 4 * 8;\n                }\n                return new WordArray.init(words, latin1StrLength);\n            }\n        };\n        var Utf8 = C_enc.Utf8 = {\n            stringify: function(wordArray) {\n                try {\n                    return decodeURIComponent(escape(Latin1.stringify(wordArray)));\n                } catch (e) {\n                    throw new Error(\"Malformed UTF-8 data\");\n                }\n            },\n            parse: function(utf8Str) {\n                return Latin1.parse(unescape(encodeURIComponent(utf8Str)));\n            }\n        };\n        var BufferedBlockAlgorithm = C_lib.BufferedBlockAlgorithm = Base.extend({\n            reset: function() {\n                this._data = new WordArray.init();\n                this._nDataBytes = 0;\n            },\n            _append: function(data) {\n                if (typeof data == \"string\") {\n                    data = Utf8.parse(data);\n                }\n                this._data.concat(data);\n                this._nDataBytes += data.sigBytes;\n            },\n            _process: function(doFlush) {\n                var data = this._data;\n                var dataWords = data.words;\n                var dataSigBytes = data.sigBytes;\n                var blockSize = this.blockSize;\n                var blockSizeBytes = blockSize * 4;\n                var nBlocksReady = dataSigBytes / blockSizeBytes;\n                if (doFlush) {\n                    nBlocksReady = Math.ceil(nBlocksReady);\n                } else {\n                    nBlocksReady = Math.max((nBlocksReady | 0) - this._minBufferSize, 0);\n                }\n                var nWordsReady = nBlocksReady * blockSize;\n                var nBytesReady = Math.min(nWordsReady * 4, dataSigBytes);\n                if (nWordsReady) {\n                    for (var offset = 0; offset < nWordsReady; offset += blockSize) {\n                        this._doProcessBlock(dataWords, offset);\n                    }\n                    var processedWords = dataWords.splice(0, nWordsReady);\n                    data.sigBytes -= nBytesReady;\n                }\n                return new WordArray.init(processedWords, nBytesReady);\n            },\n            clone: function() {\n                var clone = Base.clone.call(this);\n                clone._data = this._data.clone();\n                return clone;\n            },\n            _minBufferSize: 0\n        });\n        var Hasher = C_lib.Hasher = BufferedBlockAlgorithm.extend({\n            cfg: Base.extend(),\n            init: function(cfg) {\n                this.cfg = this.cfg.extend(cfg);\n                this.reset();\n            },\n            reset: function() {\n                BufferedBlockAlgorithm.reset.call(this);\n                this._doReset();\n            },\n            update: function(messageUpdate) {\n                this._append(messageUpdate);\n                this._process();\n                return this;\n            },\n            finalize: function(messageUpdate) {\n                if (messageUpdate) {\n                    this._append(messageUpdate);\n                }\n                var hash = this._doFinalize();\n                return hash;\n            },\n            blockSize: 512 / 32,\n            _createHelper: function(hasher) {\n                return function(message, cfg) {\n                    return new hasher.init(cfg).finalize(message);\n                };\n            },\n            _createHmacHelper: function(hasher) {\n                return function(message, key) {\n                    return new C_algo.HMAC.init(hasher, key).finalize(message);\n                };\n            }\n        });\n        var C_algo = C.algo = {};\n        return C;\n    }(Math);\n    (function() {\n        var C = qq.CryptoJS;\n        var C_lib = C.lib;\n        var WordArray = C_lib.WordArray;\n        var C_enc = C.enc;\n        var Base64 = C_enc.Base64 = {\n            stringify: function(wordArray) {\n                var words = wordArray.words;\n                var sigBytes = wordArray.sigBytes;\n                var map = this._map;\n                wordArray.clamp();\n                var base64Chars = [];\n                for (var i = 0; i < sigBytes; i += 3) {\n                    var byte1 = words[i >>> 2] >>> 24 - i % 4 * 8 & 255;\n                    var byte2 = words[i + 1 >>> 2] >>> 24 - (i + 1) % 4 * 8 & 255;\n                    var byte3 = words[i + 2 >>> 2] >>> 24 - (i + 2) % 4 * 8 & 255;\n                    var triplet = byte1 << 16 | byte2 << 8 | byte3;\n                    for (var j = 0; j < 4 && i + j * .75 < sigBytes; j++) {\n                        base64Chars.push(map.charAt(triplet >>> 6 * (3 - j) & 63));\n                    }\n                }\n                var paddingChar = map.charAt(64);\n                if (paddingChar) {\n                    while (base64Chars.length % 4) {\n                        base64Chars.push(paddingChar);\n                    }\n                }\n                return base64Chars.join(\"\");\n            },\n            parse: function(base64Str) {\n                var base64StrLength = base64Str.length;\n                var map = this._map;\n                var paddingChar = map.charAt(64);\n                if (paddingChar) {\n                    var paddingIndex = base64Str.indexOf(paddingChar);\n                    if (paddingIndex != -1) {\n                        base64StrLength = paddingIndex;\n                    }\n                }\n                var words = [];\n                var nBytes = 0;\n                for (var i = 0; i < base64StrLength; i++) {\n                    if (i % 4) {\n                        var bits1 = map.indexOf(base64Str.charAt(i - 1)) << i % 4 * 2;\n                        var bits2 = map.indexOf(base64Str.charAt(i)) >>> 6 - i % 4 * 2;\n                        words[nBytes >>> 2] |= (bits1 | bits2) << 24 - nBytes % 4 * 8;\n                        nBytes++;\n                    }\n                }\n                return WordArray.create(words, nBytes);\n            },\n            _map: \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\"\n        };\n    })();\n    (function() {\n        var C = qq.CryptoJS;\n        var C_lib = C.lib;\n        var Base = C_lib.Base;\n        var C_enc = C.enc;\n        var Utf8 = C_enc.Utf8;\n        var C_algo = C.algo;\n        var HMAC = C_algo.HMAC = Base.extend({\n            init: function(hasher, key) {\n                hasher = this._hasher = new hasher.init();\n                if (typeof key == \"string\") {\n                    key = Utf8.parse(key);\n                }\n                var hasherBlockSize = hasher.blockSize;\n                var hasherBlockSizeBytes = hasherBlockSize * 4;\n                if (key.sigBytes > hasherBlockSizeBytes) {\n                    key = hasher.finalize(key);\n                }\n                key.clamp();\n                var oKey = this._oKey = key.clone();\n                var iKey = this._iKey = key.clone();\n                var oKeyWords = oKey.words;\n                var iKeyWords = iKey.words;\n                for (var i = 0; i < hasherBlockSize; i++) {\n                    oKeyWords[i] ^= 1549556828;\n                    iKeyWords[i] ^= 909522486;\n                }\n                oKey.sigBytes = iKey.sigBytes = hasherBlockSizeBytes;\n                this.reset();\n            },\n            reset: function() {\n                var hasher = this._hasher;\n                hasher.reset();\n                hasher.update(this._iKey);\n            },\n            update: function(messageUpdate) {\n                this._hasher.update(messageUpdate);\n                return this;\n            },\n            finalize: function(messageUpdate) {\n                var hasher = this._hasher;\n                var innerHash = hasher.finalize(messageUpdate);\n                hasher.reset();\n                var hmac = hasher.finalize(this._oKey.clone().concat(innerHash));\n                return hmac;\n            }\n        });\n    })();\n    (function() {\n        var C = qq.CryptoJS;\n        var C_lib = C.lib;\n        var WordArray = C_lib.WordArray;\n        var Hasher = C_lib.Hasher;\n        var C_algo = C.algo;\n        var W = [];\n        var SHA1 = C_algo.SHA1 = Hasher.extend({\n            _doReset: function() {\n                this._hash = new WordArray.init([ 1732584193, 4023233417, 2562383102, 271733878, 3285377520 ]);\n            },\n            _doProcessBlock: function(M, offset) {\n                var H = this._hash.words;\n                var a = H[0];\n                var b = H[1];\n                var c = H[2];\n                var d = H[3];\n                var e = H[4];\n                for (var i = 0; i < 80; i++) {\n                    if (i < 16) {\n                        W[i] = M[offset + i] | 0;\n                    } else {\n                        var n = W[i - 3] ^ W[i - 8] ^ W[i - 14] ^ W[i - 16];\n                        W[i] = n << 1 | n >>> 31;\n                    }\n                    var t = (a << 5 | a >>> 27) + e + W[i];\n                    if (i < 20) {\n                        t += (b & c | ~b & d) + 1518500249;\n                    } else if (i < 40) {\n                        t += (b ^ c ^ d) + 1859775393;\n                    } else if (i < 60) {\n                        t += (b & c | b & d | c & d) - 1894007588;\n                    } else {\n                        t += (b ^ c ^ d) - 899497514;\n                    }\n                    e = d;\n                    d = c;\n                    c = b << 30 | b >>> 2;\n                    b = a;\n                    a = t;\n                }\n                H[0] = H[0] + a | 0;\n                H[1] = H[1] + b | 0;\n                H[2] = H[2] + c | 0;\n                H[3] = H[3] + d | 0;\n                H[4] = H[4] + e | 0;\n            },\n            _doFinalize: function() {\n                var data = this._data;\n                var dataWords = data.words;\n                var nBitsTotal = this._nDataBytes * 8;\n                var nBitsLeft = data.sigBytes * 8;\n                dataWords[nBitsLeft >>> 5] |= 128 << 24 - nBitsLeft % 32;\n                dataWords[(nBitsLeft + 64 >>> 9 << 4) + 14] = Math.floor(nBitsTotal / 4294967296);\n                dataWords[(nBitsLeft + 64 >>> 9 << 4) + 15] = nBitsTotal;\n                data.sigBytes = dataWords.length * 4;\n                this._process();\n                return this._hash;\n            },\n            clone: function() {\n                var clone = Hasher.clone.call(this);\n                clone._hash = this._hash.clone();\n                return clone;\n            }\n        });\n        C.SHA1 = Hasher._createHelper(SHA1);\n        C.HmacSHA1 = Hasher._createHmacHelper(SHA1);\n    })();\n    (function(Math) {\n        var C = qq.CryptoJS;\n        var C_lib = C.lib;\n        var WordArray = C_lib.WordArray;\n        var Hasher = C_lib.Hasher;\n        var C_algo = C.algo;\n        var H = [];\n        var K = [];\n        (function() {\n            function isPrime(n) {\n                var sqrtN = Math.sqrt(n);\n                for (var factor = 2; factor <= sqrtN; factor++) {\n                    if (!(n % factor)) {\n                        return false;\n                    }\n                }\n                return true;\n            }\n            function getFractionalBits(n) {\n                return (n - (n | 0)) * 4294967296 | 0;\n            }\n            var n = 2;\n            var nPrime = 0;\n            while (nPrime < 64) {\n                if (isPrime(n)) {\n                    if (nPrime < 8) {\n                        H[nPrime] = getFractionalBits(Math.pow(n, 1 / 2));\n                    }\n                    K[nPrime] = getFractionalBits(Math.pow(n, 1 / 3));\n                    nPrime++;\n                }\n                n++;\n            }\n        })();\n        var W = [];\n        var SHA256 = C_algo.SHA256 = Hasher.extend({\n            _doReset: function() {\n                this._hash = new WordArray.init(H.slice(0));\n            },\n            _doProcessBlock: function(M, offset) {\n                var H = this._hash.words;\n                var a = H[0];\n                var b = H[1];\n                var c = H[2];\n                var d = H[3];\n                var e = H[4];\n                var f = H[5];\n                var g = H[6];\n                var h = H[7];\n                for (var i = 0; i < 64; i++) {\n                    if (i < 16) {\n                        W[i] = M[offset + i] | 0;\n                    } else {\n                        var gamma0x = W[i - 15];\n                        var gamma0 = (gamma0x << 25 | gamma0x >>> 7) ^ (gamma0x << 14 | gamma0x >>> 18) ^ gamma0x >>> 3;\n                        var gamma1x = W[i - 2];\n                        var gamma1 = (gamma1x << 15 | gamma1x >>> 17) ^ (gamma1x << 13 | gamma1x >>> 19) ^ gamma1x >>> 10;\n                        W[i] = gamma0 + W[i - 7] + gamma1 + W[i - 16];\n                    }\n                    var ch = e & f ^ ~e & g;\n                    var maj = a & b ^ a & c ^ b & c;\n                    var sigma0 = (a << 30 | a >>> 2) ^ (a << 19 | a >>> 13) ^ (a << 10 | a >>> 22);\n                    var sigma1 = (e << 26 | e >>> 6) ^ (e << 21 | e >>> 11) ^ (e << 7 | e >>> 25);\n                    var t1 = h + sigma1 + ch + K[i] + W[i];\n                    var t2 = sigma0 + maj;\n                    h = g;\n                    g = f;\n                    f = e;\n                    e = d + t1 | 0;\n                    d = c;\n                    c = b;\n                    b = a;\n                    a = t1 + t2 | 0;\n                }\n                H[0] = H[0] + a | 0;\n                H[1] = H[1] + b | 0;\n                H[2] = H[2] + c | 0;\n                H[3] = H[3] + d | 0;\n                H[4] = H[4] + e | 0;\n                H[5] = H[5] + f | 0;\n                H[6] = H[6] + g | 0;\n                H[7] = H[7] + h | 0;\n            },\n            _doFinalize: function() {\n                var data = this._data;\n                var dataWords = data.words;\n                var nBitsTotal = this._nDataBytes * 8;\n                var nBitsLeft = data.sigBytes * 8;\n                dataWords[nBitsLeft >>> 5] |= 128 << 24 - nBitsLeft % 32;\n                dataWords[(nBitsLeft + 64 >>> 9 << 4) + 14] = Math.floor(nBitsTotal / 4294967296);\n                dataWords[(nBitsLeft + 64 >>> 9 << 4) + 15] = nBitsTotal;\n                data.sigBytes = dataWords.length * 4;\n                this._process();\n                return this._hash;\n            },\n            clone: function() {\n                var clone = Hasher.clone.call(this);\n                clone._hash = this._hash.clone();\n                return clone;\n            }\n        });\n        C.SHA256 = Hasher._createHelper(SHA256);\n        C.HmacSHA256 = Hasher._createHmacHelper(SHA256);\n    })(Math);\n    (function() {\n        if (typeof ArrayBuffer != \"function\") {\n            return;\n        }\n        var C = qq.CryptoJS;\n        var C_lib = C.lib;\n        var WordArray = C_lib.WordArray;\n        var superInit = WordArray.init;\n        var subInit = WordArray.init = function(typedArray) {\n            if (typedArray instanceof ArrayBuffer) {\n                typedArray = new Uint8Array(typedArray);\n            }\n            if (typedArray instanceof Int8Array || typedArray instanceof Uint8ClampedArray || typedArray instanceof Int16Array || typedArray instanceof Uint16Array || typedArray instanceof Int32Array || typedArray instanceof Uint32Array || typedArray instanceof Float32Array || typedArray instanceof Float64Array) {\n                typedArray = new Uint8Array(typedArray.buffer, typedArray.byteOffset, typedArray.byteLength);\n            }\n            if (typedArray instanceof Uint8Array) {\n                var typedArrayByteLength = typedArray.byteLength;\n                var words = [];\n                for (var i = 0; i < typedArrayByteLength; i++) {\n                    words[i >>> 2] |= typedArray[i] << 24 - i % 4 * 8;\n                }\n                superInit.call(this, words, typedArrayByteLength);\n            } else {\n                superInit.apply(this, arguments);\n            }\n        };\n        subInit.prototype = WordArray;\n    })();\n    qq.s3 = qq.s3 || {};\n    qq.s3.util = qq.s3.util || function() {\n        \"use strict\";\n        return {\n            ALGORITHM_PARAM_NAME: \"x-amz-algorithm\",\n            AWS_PARAM_PREFIX: \"x-amz-meta-\",\n            CREDENTIAL_PARAM_NAME: \"x-amz-credential\",\n            DATE_PARAM_NAME: \"x-amz-date\",\n            REDUCED_REDUNDANCY_PARAM_NAME: \"x-amz-storage-class\",\n            REDUCED_REDUNDANCY_PARAM_VALUE: \"REDUCED_REDUNDANCY\",\n            SERVER_SIDE_ENCRYPTION_PARAM_NAME: \"x-amz-server-side-encryption\",\n            SERVER_SIDE_ENCRYPTION_PARAM_VALUE: \"AES256\",\n            SESSION_TOKEN_PARAM_NAME: \"x-amz-security-token\",\n            V4_ALGORITHM_PARAM_VALUE: \"AWS4-HMAC-SHA256\",\n            V4_SIGNATURE_PARAM_NAME: \"x-amz-signature\",\n            CASE_SENSITIVE_PARAM_NAMES: [ \"Cache-Control\", \"Content-Disposition\", \"Content-Encoding\", \"Content-MD5\" ],\n            UNSIGNABLE_REST_HEADER_NAMES: [ \"Cache-Control\", \"Content-Disposition\", \"Content-Encoding\", \"Content-MD5\" ],\n            UNPREFIXED_PARAM_NAMES: [ \"Cache-Control\", \"Content-Disposition\", \"Content-Encoding\", \"Content-MD5\", \"x-amz-server-side-encryption\", \"x-amz-server-side-encryption-aws-kms-key-id\", \"x-amz-server-side-encryption-customer-algorithm\", \"x-amz-server-side-encryption-customer-key\", \"x-amz-server-side-encryption-customer-key-MD5\" ],\n            getBucket: function(endpoint) {\n                var patterns = [ /^(?:https?:\\/\\/)?([a-z0-9.\\-_]+)\\.s3(?:-[a-z0-9\\-]+)?\\.amazonaws\\.com/i, /^(?:https?:\\/\\/)?s3(?:-[a-z0-9\\-]+)?\\.amazonaws\\.com\\/([a-z0-9.\\-_]+)/i, /^(?:https?:\\/\\/)?([a-z0-9.\\-_]+)/i ], bucket;\n                qq.each(patterns, function(idx, pattern) {\n                    var match = pattern.exec(endpoint);\n                    if (match) {\n                        bucket = match[1];\n                        return false;\n                    }\n                });\n                return bucket;\n            },\n            _getPrefixedParamName: function(name) {\n                if (qq.indexOf(qq.s3.util.UNPREFIXED_PARAM_NAMES, name) >= 0) {\n                    return name;\n                }\n                return qq.s3.util.AWS_PARAM_PREFIX + name;\n            },\n            getPolicy: function(spec) {\n                var policy = {}, conditions = [], bucket = spec.bucket, date = spec.date, drift = spec.clockDrift, key = spec.key, accessKey = spec.accessKey, acl = spec.acl, type = spec.type, expectedStatus = spec.expectedStatus, sessionToken = spec.sessionToken, params = spec.params, successRedirectUrl = qq.s3.util.getSuccessRedirectAbsoluteUrl(spec.successRedirectUrl), minFileSize = spec.minFileSize, maxFileSize = spec.maxFileSize, reducedRedundancy = spec.reducedRedundancy, region = spec.region, serverSideEncryption = spec.serverSideEncryption, signatureVersion = spec.signatureVersion;\n                policy.expiration = qq.s3.util.getPolicyExpirationDate(date, drift);\n                conditions.push({\n                    acl: acl\n                });\n                conditions.push({\n                    bucket: bucket\n                });\n                if (type) {\n                    conditions.push({\n                        \"Content-Type\": type\n                    });\n                }\n                if (expectedStatus) {\n                    conditions.push({\n                        success_action_status: expectedStatus.toString()\n                    });\n                }\n                if (successRedirectUrl) {\n                    conditions.push({\n                        success_action_redirect: successRedirectUrl\n                    });\n                }\n                if (reducedRedundancy) {\n                    conditions.push({});\n                    conditions[conditions.length - 1][qq.s3.util.REDUCED_REDUNDANCY_PARAM_NAME] = qq.s3.util.REDUCED_REDUNDANCY_PARAM_VALUE;\n                }\n                if (sessionToken) {\n                    conditions.push({});\n                    conditions[conditions.length - 1][qq.s3.util.SESSION_TOKEN_PARAM_NAME] = sessionToken;\n                }\n                if (serverSideEncryption) {\n                    conditions.push({});\n                    conditions[conditions.length - 1][qq.s3.util.SERVER_SIDE_ENCRYPTION_PARAM_NAME] = qq.s3.util.SERVER_SIDE_ENCRYPTION_PARAM_VALUE;\n                }\n                if (signatureVersion === 2) {\n                    conditions.push({\n                        key: key\n                    });\n                } else if (signatureVersion === 4) {\n                    conditions.push({});\n                    conditions[conditions.length - 1][qq.s3.util.ALGORITHM_PARAM_NAME] = qq.s3.util.V4_ALGORITHM_PARAM_VALUE;\n                    conditions.push({});\n                    conditions[conditions.length - 1].key = key;\n                    conditions.push({});\n                    conditions[conditions.length - 1][qq.s3.util.CREDENTIAL_PARAM_NAME] = qq.s3.util.getV4CredentialsString({\n                        date: date,\n                        key: accessKey,\n                        region: region\n                    });\n                    conditions.push({});\n                    conditions[conditions.length - 1][qq.s3.util.DATE_PARAM_NAME] = qq.s3.util.getV4PolicyDate(date, drift);\n                }\n                qq.each(params, function(name, val) {\n                    var awsParamName = qq.s3.util._getPrefixedParamName(name), param = {};\n                    if (qq.indexOf(qq.s3.util.UNPREFIXED_PARAM_NAMES, awsParamName) >= 0) {\n                        param[awsParamName] = val;\n                    } else {\n                        param[awsParamName] = encodeURIComponent(val);\n                    }\n                    conditions.push(param);\n                });\n                policy.conditions = conditions;\n                qq.s3.util.enforceSizeLimits(policy, minFileSize, maxFileSize);\n                return policy;\n            },\n            refreshPolicyCredentials: function(policy, newSessionToken) {\n                var sessionTokenFound = false;\n                qq.each(policy.conditions, function(oldCondIdx, oldCondObj) {\n                    qq.each(oldCondObj, function(oldCondName, oldCondVal) {\n                        if (oldCondName === qq.s3.util.SESSION_TOKEN_PARAM_NAME) {\n                            oldCondObj[oldCondName] = newSessionToken;\n                            sessionTokenFound = true;\n                        }\n                    });\n                });\n                if (!sessionTokenFound) {\n                    policy.conditions.push({});\n                    policy.conditions[policy.conditions.length - 1][qq.s3.util.SESSION_TOKEN_PARAM_NAME] = newSessionToken;\n                }\n            },\n            generateAwsParams: function(spec, signPolicyCallback) {\n                var awsParams = {}, customParams = spec.params, promise = new qq.Promise(), sessionToken = spec.sessionToken, drift = spec.clockDrift, type = spec.type, key = spec.key, accessKey = spec.accessKey, acl = spec.acl, expectedStatus = spec.expectedStatus, successRedirectUrl = qq.s3.util.getSuccessRedirectAbsoluteUrl(spec.successRedirectUrl), reducedRedundancy = spec.reducedRedundancy, region = spec.region, serverSideEncryption = spec.serverSideEncryption, signatureVersion = spec.signatureVersion, now = new Date(), log = spec.log, policyJson;\n                spec.date = now;\n                policyJson = qq.s3.util.getPolicy(spec);\n                awsParams.key = key;\n                if (type) {\n                    awsParams[\"Content-Type\"] = type;\n                }\n                if (expectedStatus) {\n                    awsParams.success_action_status = expectedStatus;\n                }\n                if (successRedirectUrl) {\n                    awsParams.success_action_redirect = successRedirectUrl;\n                }\n                if (reducedRedundancy) {\n                    awsParams[qq.s3.util.REDUCED_REDUNDANCY_PARAM_NAME] = qq.s3.util.REDUCED_REDUNDANCY_PARAM_VALUE;\n                }\n                if (serverSideEncryption) {\n                    awsParams[qq.s3.util.SERVER_SIDE_ENCRYPTION_PARAM_NAME] = qq.s3.util.SERVER_SIDE_ENCRYPTION_PARAM_VALUE;\n                }\n                if (sessionToken) {\n                    awsParams[qq.s3.util.SESSION_TOKEN_PARAM_NAME] = sessionToken;\n                }\n                awsParams.acl = acl;\n                qq.each(customParams, function(name, val) {\n                    var awsParamName = qq.s3.util._getPrefixedParamName(name);\n                    if (qq.indexOf(qq.s3.util.UNPREFIXED_PARAM_NAMES, awsParamName) >= 0) {\n                        awsParams[awsParamName] = val;\n                    } else {\n                        awsParams[awsParamName] = encodeURIComponent(val);\n                    }\n                });\n                if (signatureVersion === 2) {\n                    awsParams.AWSAccessKeyId = accessKey;\n                } else if (signatureVersion === 4) {\n                    awsParams[qq.s3.util.ALGORITHM_PARAM_NAME] = qq.s3.util.V4_ALGORITHM_PARAM_VALUE;\n                    awsParams[qq.s3.util.CREDENTIAL_PARAM_NAME] = qq.s3.util.getV4CredentialsString({\n                        date: now,\n                        key: accessKey,\n                        region: region\n                    });\n                    awsParams[qq.s3.util.DATE_PARAM_NAME] = qq.s3.util.getV4PolicyDate(now, drift);\n                }\n                signPolicyCallback(policyJson).then(function(policyAndSignature, updatedAccessKey, updatedSessionToken) {\n                    awsParams.policy = policyAndSignature.policy;\n                    if (spec.signatureVersion === 2) {\n                        awsParams.signature = policyAndSignature.signature;\n                        if (updatedAccessKey) {\n                            awsParams.AWSAccessKeyId = updatedAccessKey;\n                        }\n                    } else if (spec.signatureVersion === 4) {\n                        awsParams[qq.s3.util.V4_SIGNATURE_PARAM_NAME] = policyAndSignature.signature;\n                    }\n                    if (updatedSessionToken) {\n                        awsParams[qq.s3.util.SESSION_TOKEN_PARAM_NAME] = updatedSessionToken;\n                    }\n                    promise.success(awsParams);\n                }, function(errorMessage) {\n                    errorMessage = errorMessage || \"Can't continue further with request to S3 as we did not receive \" + \"a valid signature and policy from the server.\";\n                    log(\"Policy signing failed.  \" + errorMessage, \"error\");\n                    promise.failure(errorMessage);\n                });\n                return promise;\n            },\n            enforceSizeLimits: function(policy, minSize, maxSize) {\n                var adjustedMinSize = minSize < 0 ? 0 : minSize, adjustedMaxSize = maxSize <= 0 ? 9007199254740992 : maxSize;\n                if (minSize > 0 || maxSize > 0) {\n                    policy.conditions.push([ \"content-length-range\", adjustedMinSize.toString(), adjustedMaxSize.toString() ]);\n                }\n            },\n            getPolicyExpirationDate: function(date, drift) {\n                var adjustedDate = new Date(date.getTime() + drift);\n                return qq.s3.util.getPolicyDate(adjustedDate, 5);\n            },\n            getCredentialsDate: function(date) {\n                return date.getUTCFullYear() + \"\" + (\"0\" + (date.getUTCMonth() + 1)).slice(-2) + (\"0\" + date.getUTCDate()).slice(-2);\n            },\n            getPolicyDate: function(date, _minutesToAdd_) {\n                var minutesToAdd = _minutesToAdd_ || 0, pad, r;\n                date.setMinutes(date.getMinutes() + (minutesToAdd || 0));\n                if (Date.prototype.toISOString) {\n                    return date.toISOString();\n                } else {\n                    pad = function(number) {\n                        r = String(number);\n                        if (r.length === 1) {\n                            r = \"0\" + r;\n                        }\n                        return r;\n                    };\n                    return date.getUTCFullYear() + \"-\" + pad(date.getUTCMonth() + 1) + \"-\" + pad(date.getUTCDate()) + \"T\" + pad(date.getUTCHours()) + \":\" + pad(date.getUTCMinutes()) + \":\" + pad(date.getUTCSeconds()) + \".\" + String((date.getUTCMilliseconds() / 1e3).toFixed(3)).slice(2, 5) + \"Z\";\n                }\n            },\n            parseIframeResponse: function(iframe) {\n                var doc = iframe.contentDocument || iframe.contentWindow.document, queryString = doc.location.search, match = /bucket=(.+)&key=(.+)&etag=(.+)/.exec(queryString);\n                if (match) {\n                    return {\n                        bucket: match[1],\n                        key: match[2],\n                        etag: match[3].replace(/%22/g, \"\")\n                    };\n                }\n            },\n            getSuccessRedirectAbsoluteUrl: function(successRedirectUrl) {\n                if (successRedirectUrl) {\n                    var targetAnchorContainer = document.createElement(\"div\"), targetAnchor;\n                    if (qq.ie7()) {\n                        targetAnchorContainer.innerHTML = \"<a href='\" + successRedirectUrl + \"'></a>\";\n                        targetAnchor = targetAnchorContainer.firstChild;\n                        return targetAnchor.href;\n                    } else {\n                        targetAnchor = document.createElement(\"a\");\n                        targetAnchor.href = successRedirectUrl;\n                        targetAnchor.href = targetAnchor.href;\n                        return targetAnchor.href;\n                    }\n                }\n            },\n            getV4CredentialsString: function(spec) {\n                return spec.key + \"/\" + qq.s3.util.getCredentialsDate(spec.date) + \"/\" + spec.region + \"/s3/aws4_request\";\n            },\n            getV4PolicyDate: function(date, drift) {\n                var adjustedDate = new Date(date.getTime() + drift);\n                return qq.s3.util.getCredentialsDate(adjustedDate) + \"T\" + (\"0\" + adjustedDate.getUTCHours()).slice(-2) + (\"0\" + adjustedDate.getUTCMinutes()).slice(-2) + (\"0\" + adjustedDate.getUTCSeconds()).slice(-2) + \"Z\";\n            },\n            encodeQueryStringParam: function(param) {\n                var percentEncoded = encodeURIComponent(param);\n                percentEncoded = percentEncoded.replace(/[!'()]/g, escape);\n                percentEncoded = percentEncoded.replace(/\\*/g, \"%2A\");\n                return percentEncoded.replace(/%20/g, \"+\");\n            },\n            uriEscape: function(string) {\n                var output = encodeURIComponent(string);\n                output = output.replace(/[^A-Za-z0-9_.~\\-%]+/g, escape);\n                output = output.replace(/[*]/g, function(ch) {\n                    return \"%\" + ch.charCodeAt(0).toString(16).toUpperCase();\n                });\n                return output;\n            },\n            uriEscapePath: function(path) {\n                var parts = [];\n                qq.each(path.split(\"/\"), function(idx, item) {\n                    parts.push(qq.s3.util.uriEscape(item));\n                });\n                return parts.join(\"/\");\n            }\n        };\n    }();\n    (function() {\n        \"use strict\";\n        qq.nonTraditionalBasePublicApi = {\n            setUploadSuccessParams: function(params, id) {\n                this._uploadSuccessParamsStore.set(params, id);\n            },\n            setUploadSuccessEndpoint: function(endpoint, id) {\n                this._uploadSuccessEndpointStore.set(endpoint, id);\n            }\n        };\n        qq.nonTraditionalBasePrivateApi = {\n            _onComplete: function(id, name, result, xhr) {\n                var success = result.success ? true : false, self = this, onCompleteArgs = arguments, successEndpoint = this._uploadSuccessEndpointStore.get(id), successCustomHeaders = this._options.uploadSuccess.customHeaders, successMethod = this._options.uploadSuccess.method, cors = this._options.cors, promise = new qq.Promise(), uploadSuccessParams = this._uploadSuccessParamsStore.get(id), fileParams = this._paramsStore.get(id), onSuccessFromServer = function(successRequestResult) {\n                    delete self._failedSuccessRequestCallbacks[id];\n                    qq.extend(result, successRequestResult);\n                    qq.FineUploaderBasic.prototype._onComplete.apply(self, onCompleteArgs);\n                    promise.success(successRequestResult);\n                }, onFailureFromServer = function(successRequestResult) {\n                    var callback = submitSuccessRequest;\n                    qq.extend(result, successRequestResult);\n                    if (result && result.reset) {\n                        callback = null;\n                    }\n                    if (!callback) {\n                        delete self._failedSuccessRequestCallbacks[id];\n                    } else {\n                        self._failedSuccessRequestCallbacks[id] = callback;\n                    }\n                    if (!self._onAutoRetry(id, name, result, xhr, callback)) {\n                        qq.FineUploaderBasic.prototype._onComplete.apply(self, onCompleteArgs);\n                        promise.failure(successRequestResult);\n                    }\n                }, submitSuccessRequest, successAjaxRequester;\n                if (success && successEndpoint) {\n                    successAjaxRequester = new qq.UploadSuccessAjaxRequester({\n                        endpoint: successEndpoint,\n                        method: successMethod,\n                        customHeaders: successCustomHeaders,\n                        cors: cors,\n                        log: qq.bind(this.log, this)\n                    });\n                    qq.extend(uploadSuccessParams, self._getEndpointSpecificParams(id, result, xhr), true);\n                    fileParams && qq.extend(uploadSuccessParams, fileParams, true);\n                    submitSuccessRequest = qq.bind(function() {\n                        successAjaxRequester.sendSuccessRequest(id, uploadSuccessParams).then(onSuccessFromServer, onFailureFromServer);\n                    }, self);\n                    submitSuccessRequest();\n                    return promise;\n                }\n                return qq.FineUploaderBasic.prototype._onComplete.apply(this, arguments);\n            },\n            _manualRetry: function(id) {\n                var successRequestCallback = this._failedSuccessRequestCallbacks[id];\n                return qq.FineUploaderBasic.prototype._manualRetry.call(this, id, successRequestCallback);\n            }\n        };\n    })();\n    (function() {\n        \"use strict\";\n        qq.s3.FineUploaderBasic = function(o) {\n            var options = {\n                request: {\n                    accessKey: null,\n                    clockDrift: 0\n                },\n                objectProperties: {\n                    acl: \"private\",\n                    bucket: qq.bind(function(id) {\n                        return qq.s3.util.getBucket(this.getEndpoint(id));\n                    }, this),\n                    host: qq.bind(function(id) {\n                        return /(?:http|https):\\/\\/(.+)(?:\\/.+)?/.exec(this._endpointStore.get(id))[1];\n                    }, this),\n                    key: \"uuid\",\n                    reducedRedundancy: false,\n                    region: \"us-east-1\",\n                    serverSideEncryption: false\n                },\n                credentials: {\n                    accessKey: null,\n                    secretKey: null,\n                    expiration: null,\n                    sessionToken: null\n                },\n                signature: {\n                    customHeaders: {},\n                    endpoint: null,\n                    version: 2\n                },\n                uploadSuccess: {\n                    endpoint: null,\n                    method: \"POST\",\n                    params: {},\n                    customHeaders: {}\n                },\n                iframeSupport: {\n                    localBlankPagePath: null\n                },\n                chunking: {\n                    partSize: 5242880\n                },\n                cors: {\n                    allowXdr: true\n                },\n                callbacks: {\n                    onCredentialsExpired: function() {}\n                }\n            };\n            qq.extend(options, o, true);\n            if (!this.setCredentials(options.credentials, true)) {\n                this._currentCredentials.accessKey = options.request.accessKey;\n            }\n            this._aclStore = this._createStore(options.objectProperties.acl);\n            qq.FineUploaderBasic.call(this, options);\n            this._uploadSuccessParamsStore = this._createStore(this._options.uploadSuccess.params);\n            this._uploadSuccessEndpointStore = this._createStore(this._options.uploadSuccess.endpoint);\n            this._failedSuccessRequestCallbacks = {};\n            this._cannedKeys = {};\n            this._cannedBuckets = {};\n            this._buckets = {};\n            this._hosts = {};\n        };\n        qq.extend(qq.s3.FineUploaderBasic.prototype, qq.basePublicApi);\n        qq.extend(qq.s3.FineUploaderBasic.prototype, qq.basePrivateApi);\n        qq.extend(qq.s3.FineUploaderBasic.prototype, qq.nonTraditionalBasePublicApi);\n        qq.extend(qq.s3.FineUploaderBasic.prototype, qq.nonTraditionalBasePrivateApi);\n        qq.extend(qq.s3.FineUploaderBasic.prototype, {\n            getBucket: function(id) {\n                if (this._cannedBuckets[id] == null) {\n                    return this._buckets[id];\n                }\n                return this._cannedBuckets[id];\n            },\n            getKey: function(id) {\n                if (this._cannedKeys[id] == null) {\n                    return this._handler.getThirdPartyFileId(id);\n                }\n                return this._cannedKeys[id];\n            },\n            reset: function() {\n                qq.FineUploaderBasic.prototype.reset.call(this);\n                this._failedSuccessRequestCallbacks = [];\n                this._buckets = {};\n                this._hosts = {};\n            },\n            setCredentials: function(credentials, ignoreEmpty) {\n                if (credentials && credentials.secretKey) {\n                    if (!credentials.accessKey) {\n                        throw new qq.Error(\"Invalid credentials: no accessKey\");\n                    } else if (!credentials.expiration) {\n                        throw new qq.Error(\"Invalid credentials: no expiration\");\n                    } else {\n                        this._currentCredentials = qq.extend({}, credentials);\n                        if (qq.isString(credentials.expiration)) {\n                            this._currentCredentials.expiration = new Date(credentials.expiration);\n                        }\n                    }\n                    return true;\n                } else if (!ignoreEmpty) {\n                    throw new qq.Error(\"Invalid credentials parameter!\");\n                } else {\n                    this._currentCredentials = {};\n                }\n            },\n            setAcl: function(acl, id) {\n                this._aclStore.set(acl, id);\n            },\n            _createUploadHandler: function() {\n                var self = this, additionalOptions = {\n                    aclStore: this._aclStore,\n                    getBucket: qq.bind(this._determineBucket, this),\n                    getHost: qq.bind(this._determineHost, this),\n                    getKeyName: qq.bind(this._determineKeyName, this),\n                    iframeSupport: this._options.iframeSupport,\n                    objectProperties: this._options.objectProperties,\n                    signature: this._options.signature,\n                    clockDrift: this._options.request.clockDrift,\n                    validation: {\n                        minSizeLimit: this._options.validation.minSizeLimit,\n                        maxSizeLimit: this._options.validation.sizeLimit\n                    }\n                };\n                qq.override(this._endpointStore, function(super_) {\n                    return {\n                        get: function(id) {\n                            var endpoint = super_.get(id);\n                            if (endpoint.indexOf(\"http\") < 0) {\n                                return \"http://\" + endpoint;\n                            }\n                            return endpoint;\n                        }\n                    };\n                });\n                qq.override(this._paramsStore, function(super_) {\n                    return {\n                        get: function(id) {\n                            var oldParams = super_.get(id), modifiedParams = {};\n                            qq.each(oldParams, function(name, val) {\n                                var paramName = name;\n                                if (qq.indexOf(qq.s3.util.CASE_SENSITIVE_PARAM_NAMES, paramName) < 0) {\n                                    paramName = paramName.toLowerCase();\n                                }\n                                modifiedParams[paramName] = qq.isFunction(val) ? val() : val;\n                            });\n                            return modifiedParams;\n                        }\n                    };\n                });\n                additionalOptions.signature.credentialsProvider = {\n                    get: function() {\n                        return self._currentCredentials;\n                    },\n                    onExpired: function() {\n                        var updateCredentials = new qq.Promise(), callbackRetVal = self._options.callbacks.onCredentialsExpired();\n                        if (qq.isGenericPromise(callbackRetVal)) {\n                            callbackRetVal.then(function(credentials) {\n                                try {\n                                    self.setCredentials(credentials);\n                                    updateCredentials.success();\n                                } catch (error) {\n                                    self.log(\"Invalid credentials returned from onCredentialsExpired callback! (\" + error.message + \")\", \"error\");\n                                    updateCredentials.failure(\"onCredentialsExpired did not return valid credentials.\");\n                                }\n                            }, function(errorMsg) {\n                                self.log(\"onCredentialsExpired callback indicated failure! (\" + errorMsg + \")\", \"error\");\n                                updateCredentials.failure(\"onCredentialsExpired callback failed.\");\n                            });\n                        } else {\n                            self.log(\"onCredentialsExpired callback did not return a promise!\", \"error\");\n                            updateCredentials.failure(\"Unexpected return value for onCredentialsExpired.\");\n                        }\n                        return updateCredentials;\n                    }\n                };\n                return qq.FineUploaderBasic.prototype._createUploadHandler.call(this, additionalOptions, \"s3\");\n            },\n            _determineObjectPropertyValue: function(id, property) {\n                var maybe = this._options.objectProperties[property], promise = new qq.Promise(), self = this;\n                if (qq.isFunction(maybe)) {\n                    maybe = maybe(id);\n                    if (qq.isGenericPromise(maybe)) {\n                        promise = maybe;\n                    } else {\n                        promise.success(maybe);\n                    }\n                } else if (qq.isString(maybe)) {\n                    promise.success(maybe);\n                }\n                promise.then(function success(value) {\n                    self[\"_\" + property + \"s\"][id] = value;\n                }, function failure(errorMsg) {\n                    qq.log(\"Problem determining \" + property + \" for ID \" + id + \" (\" + errorMsg + \")\", \"error\");\n                });\n                return promise;\n            },\n            _determineBucket: function(id) {\n                return this._determineObjectPropertyValue(id, \"bucket\");\n            },\n            _determineHost: function(id) {\n                return this._determineObjectPropertyValue(id, \"host\");\n            },\n            _determineKeyName: function(id, filename) {\n                var promise = new qq.Promise(), keynameLogic = this._options.objectProperties.key, extension = qq.getExtension(filename), onGetKeynameFailure = promise.failure, onGetKeynameSuccess = function(keyname, extension) {\n                    var keynameToUse = keyname;\n                    if (extension !== undefined) {\n                        keynameToUse += \".\" + extension;\n                    }\n                    promise.success(keynameToUse);\n                };\n                switch (keynameLogic) {\n                  case \"uuid\":\n                    onGetKeynameSuccess(this.getUuid(id), extension);\n                    break;\n\n                  case \"filename\":\n                    onGetKeynameSuccess(filename);\n                    break;\n\n                  default:\n                    if (qq.isFunction(keynameLogic)) {\n                        this._handleKeynameFunction(keynameLogic, id, onGetKeynameSuccess, onGetKeynameFailure);\n                    } else {\n                        this.log(keynameLogic + \" is not a valid value for the s3.keyname option!\", \"error\");\n                        onGetKeynameFailure();\n                    }\n                }\n                return promise;\n            },\n            _handleKeynameFunction: function(keynameFunc, id, successCallback, failureCallback) {\n                var self = this, onSuccess = function(keyname) {\n                    successCallback(keyname);\n                }, onFailure = function(reason) {\n                    self.log(qq.format(\"Failed to retrieve key name for {}.  Reason: {}\", id, reason || \"null\"), \"error\");\n                    failureCallback(reason);\n                }, keyname = keynameFunc.call(this, id);\n                if (qq.isGenericPromise(keyname)) {\n                    keyname.then(onSuccess, onFailure);\n                } else if (keyname == null) {\n                    onFailure();\n                } else {\n                    onSuccess(keyname);\n                }\n            },\n            _getEndpointSpecificParams: function(id, response, maybeXhr) {\n                var params = {\n                    key: this.getKey(id),\n                    uuid: this.getUuid(id),\n                    name: this.getName(id),\n                    bucket: this.getBucket(id)\n                };\n                if (maybeXhr && maybeXhr.getResponseHeader(\"ETag\")) {\n                    params.etag = maybeXhr.getResponseHeader(\"ETag\");\n                } else if (response.etag) {\n                    params.etag = response.etag;\n                }\n                return params;\n            },\n            _onSubmitDelete: function(id, onSuccessCallback) {\n                var additionalMandatedParams = {\n                    key: this.getKey(id),\n                    bucket: this.getBucket(id)\n                };\n                return qq.FineUploaderBasic.prototype._onSubmitDelete.call(this, id, onSuccessCallback, additionalMandatedParams);\n            },\n            _addCannedFile: function(sessionData) {\n                var id;\n                if (sessionData.s3Key == null) {\n                    throw new qq.Error(\"Did not find s3Key property in server session response.  This is required!\");\n                } else {\n                    id = qq.FineUploaderBasic.prototype._addCannedFile.apply(this, arguments);\n                    this._cannedKeys[id] = sessionData.s3Key;\n                    this._cannedBuckets[id] = sessionData.s3Bucket;\n                }\n                return id;\n            }\n        });\n    })();\n    if (!window.Uint8ClampedArray) {\n        window.Uint8ClampedArray = function() {};\n    }\n    qq.s3.RequestSigner = function(o) {\n        \"use strict\";\n        var requester, thisSignatureRequester = this, pendingSignatures = {}, options = {\n            expectingPolicy: false,\n            method: \"POST\",\n            signatureSpec: {\n                drift: 0,\n                credentialsProvider: {},\n                endpoint: null,\n                customHeaders: {},\n                version: 2\n            },\n            maxConnections: 3,\n            endpointStore: {},\n            paramsStore: {},\n            cors: {\n                expected: false,\n                sendCredentials: false\n            },\n            log: function(str, level) {}\n        }, credentialsProvider, generateHeaders = function(signatureConstructor, signature, promise) {\n            var headers = signatureConstructor.getHeaders();\n            if (options.signatureSpec.version === 4) {\n                headers.Authorization = qq.s3.util.V4_ALGORITHM_PARAM_VALUE + \" Credential=\" + options.signatureSpec.credentialsProvider.get().accessKey + \"/\" + qq.s3.util.getCredentialsDate(signatureConstructor.getRequestDate()) + \"/\" + options.signatureSpec.region + \"/\" + \"s3/aws4_request,\" + \"SignedHeaders=\" + signatureConstructor.getSignedHeaders() + \",\" + \"Signature=\" + signature;\n            } else {\n                headers.Authorization = \"AWS \" + options.signatureSpec.credentialsProvider.get().accessKey + \":\" + signature;\n            }\n            promise.success(headers, signatureConstructor.getEndOfUrl());\n        }, v2 = {\n            getStringToSign: function(signatureSpec) {\n                return qq.format(\"{}\\n{}\\n{}\\n\\n{}/{}/{}\", signatureSpec.method, signatureSpec.contentMd5 || \"\", signatureSpec.contentType || \"\", signatureSpec.headersStr || \"\\n\", signatureSpec.bucket, signatureSpec.endOfUrl);\n            },\n            signApiRequest: function(signatureConstructor, headersStr, signatureEffort) {\n                var headersWordArray = qq.CryptoJS.enc.Utf8.parse(headersStr), headersHmacSha1 = qq.CryptoJS.HmacSHA1(headersWordArray, credentialsProvider.get().secretKey), headersHmacSha1Base64 = qq.CryptoJS.enc.Base64.stringify(headersHmacSha1);\n                generateHeaders(signatureConstructor, headersHmacSha1Base64, signatureEffort);\n            },\n            signPolicy: function(policy, signatureEffort, updatedAccessKey, updatedSessionToken) {\n                var policyStr = JSON.stringify(policy), policyWordArray = qq.CryptoJS.enc.Utf8.parse(policyStr), base64Policy = qq.CryptoJS.enc.Base64.stringify(policyWordArray), policyHmacSha1 = qq.CryptoJS.HmacSHA1(base64Policy, credentialsProvider.get().secretKey), policyHmacSha1Base64 = qq.CryptoJS.enc.Base64.stringify(policyHmacSha1);\n                signatureEffort.success({\n                    policy: base64Policy,\n                    signature: policyHmacSha1Base64\n                }, updatedAccessKey, updatedSessionToken);\n            }\n        }, v4 = {\n            getCanonicalQueryString: function(endOfUri) {\n                var queryParamIdx = endOfUri.indexOf(\"?\"), canonicalQueryString = \"\", encodedQueryParams, encodedQueryParamNames, queryStrings;\n                if (queryParamIdx >= 0) {\n                    encodedQueryParams = {};\n                    queryStrings = endOfUri.substr(queryParamIdx + 1).split(\"&\");\n                    qq.each(queryStrings, function(idx, queryString) {\n                        var nameAndVal = queryString.split(\"=\"), paramVal = nameAndVal[1];\n                        if (paramVal == null) {\n                            paramVal = \"\";\n                        }\n                        encodedQueryParams[encodeURIComponent(nameAndVal[0])] = encodeURIComponent(paramVal);\n                    });\n                    encodedQueryParamNames = Object.keys(encodedQueryParams).sort();\n                    encodedQueryParamNames.forEach(function(encodedQueryParamName, idx) {\n                        canonicalQueryString += encodedQueryParamName + \"=\" + encodedQueryParams[encodedQueryParamName];\n                        if (idx < encodedQueryParamNames.length - 1) {\n                            canonicalQueryString += \"&\";\n                        }\n                    });\n                }\n                return canonicalQueryString;\n            },\n            getCanonicalRequest: function(signatureSpec) {\n                return qq.format(\"{}\\n{}\\n{}\\n{}\\n{}\\n{}\", signatureSpec.method, v4.getCanonicalUri(signatureSpec.endOfUrl), v4.getCanonicalQueryString(signatureSpec.endOfUrl), signatureSpec.headersStr || \"\\n\", v4.getSignedHeaders(signatureSpec.headerNames), signatureSpec.hashedContent);\n            },\n            getCanonicalUri: function(endOfUri) {\n                var path = endOfUri, queryParamIdx = endOfUri.indexOf(\"?\");\n                if (queryParamIdx > 0) {\n                    path = endOfUri.substr(0, queryParamIdx);\n                }\n                return \"/\" + path;\n            },\n            getEncodedHashedPayload: function(body) {\n                var promise = new qq.Promise(), reader;\n                if (qq.isBlob(body)) {\n                    reader = new FileReader();\n                    reader.onloadend = function(e) {\n                        if (e.target.readyState === FileReader.DONE) {\n                            if (e.target.error) {\n                                promise.failure(e.target.error);\n                            } else {\n                                var wordArray = qq.CryptoJS.lib.WordArray.create(e.target.result);\n                                promise.success(qq.CryptoJS.SHA256(wordArray).toString());\n                            }\n                        }\n                    };\n                    reader.readAsArrayBuffer(body);\n                } else {\n                    body = body || \"\";\n                    promise.success(qq.CryptoJS.SHA256(body).toString());\n                }\n                return promise;\n            },\n            getScope: function(date, region) {\n                return qq.s3.util.getCredentialsDate(date) + \"/\" + region + \"/s3/aws4_request\";\n            },\n            getStringToSign: function(signatureSpec) {\n                var canonicalRequest = v4.getCanonicalRequest(signatureSpec), date = qq.s3.util.getV4PolicyDate(signatureSpec.date, signatureSpec.drift), hashedRequest = qq.CryptoJS.SHA256(canonicalRequest).toString(), scope = v4.getScope(signatureSpec.date, options.signatureSpec.region), stringToSignTemplate = \"AWS4-HMAC-SHA256\\n{}\\n{}\\n{}\";\n                return {\n                    hashed: qq.format(stringToSignTemplate, date, scope, hashedRequest),\n                    raw: qq.format(stringToSignTemplate, date, scope, canonicalRequest)\n                };\n            },\n            getSignedHeaders: function(headerNames) {\n                var signedHeaders = \"\";\n                headerNames.forEach(function(headerName, idx) {\n                    signedHeaders += headerName.toLowerCase();\n                    if (idx < headerNames.length - 1) {\n                        signedHeaders += \";\";\n                    }\n                });\n                return signedHeaders;\n            },\n            signApiRequest: function(signatureConstructor, headersStr, signatureEffort) {\n                var secretKey = credentialsProvider.get().secretKey, headersPattern = /.+\\n.+\\n(\\d+)\\/(.+)\\/s3\\/.+\\n(.+)/, matches = headersPattern.exec(headersStr), dateKey, dateRegionKey, dateRegionServiceKey, signingKey;\n                dateKey = qq.CryptoJS.HmacSHA256(matches[1], \"AWS4\" + secretKey);\n                dateRegionKey = qq.CryptoJS.HmacSHA256(matches[2], dateKey);\n                dateRegionServiceKey = qq.CryptoJS.HmacSHA256(\"s3\", dateRegionKey);\n                signingKey = qq.CryptoJS.HmacSHA256(\"aws4_request\", dateRegionServiceKey);\n                generateHeaders(signatureConstructor, qq.CryptoJS.HmacSHA256(headersStr, signingKey), signatureEffort);\n            },\n            signPolicy: function(policy, signatureEffort, updatedAccessKey, updatedSessionToken) {\n                var policyStr = JSON.stringify(policy), policyWordArray = qq.CryptoJS.enc.Utf8.parse(policyStr), base64Policy = qq.CryptoJS.enc.Base64.stringify(policyWordArray), secretKey = credentialsProvider.get().secretKey, credentialPattern = /.+\\/(.+)\\/(.+)\\/s3\\/aws4_request/, credentialCondition = function() {\n                    var credential = null;\n                    qq.each(policy.conditions, function(key, condition) {\n                        var val = condition[\"x-amz-credential\"];\n                        if (val) {\n                            credential = val;\n                            return false;\n                        }\n                    });\n                    return credential;\n                }(), matches, dateKey, dateRegionKey, dateRegionServiceKey, signingKey;\n                matches = credentialPattern.exec(credentialCondition);\n                dateKey = qq.CryptoJS.HmacSHA256(matches[1], \"AWS4\" + secretKey);\n                dateRegionKey = qq.CryptoJS.HmacSHA256(matches[2], dateKey);\n                dateRegionServiceKey = qq.CryptoJS.HmacSHA256(\"s3\", dateRegionKey);\n                signingKey = qq.CryptoJS.HmacSHA256(\"aws4_request\", dateRegionServiceKey);\n                signatureEffort.success({\n                    policy: base64Policy,\n                    signature: qq.CryptoJS.HmacSHA256(base64Policy, signingKey).toString()\n                }, updatedAccessKey, updatedSessionToken);\n            }\n        };\n        qq.extend(options, o, true);\n        credentialsProvider = options.signatureSpec.credentialsProvider;\n        function handleSignatureReceived(id, xhrOrXdr, isError) {\n            var responseJson = xhrOrXdr.responseText, pendingSignatureData = pendingSignatures[id], promise = pendingSignatureData.promise, signatureConstructor = pendingSignatureData.signatureConstructor, errorMessage, response;\n            delete pendingSignatures[id];\n            if (responseJson) {\n                try {\n                    response = qq.parseJson(responseJson);\n                } catch (error) {\n                    options.log(\"Error attempting to parse signature response: \" + error, \"error\");\n                }\n            }\n            if (response && response.error) {\n                isError = true;\n                errorMessage = response.error;\n            } else if (response && response.invalid) {\n                isError = true;\n                errorMessage = \"Invalid policy document or request headers!\";\n            } else if (response) {\n                if (options.expectingPolicy && !response.policy) {\n                    isError = true;\n                    errorMessage = \"Response does not include the base64 encoded policy!\";\n                } else if (!response.signature) {\n                    isError = true;\n                    errorMessage = \"Response does not include the signature!\";\n                }\n            } else {\n                isError = true;\n                errorMessage = \"Received an empty or invalid response from the server!\";\n            }\n            if (isError) {\n                if (errorMessage) {\n                    options.log(errorMessage, \"error\");\n                }\n                promise.failure(errorMessage);\n            } else if (signatureConstructor) {\n                generateHeaders(signatureConstructor, response.signature, promise);\n            } else {\n                promise.success(response);\n            }\n        }\n        function getStringToSignArtifacts(id, version, requestInfo) {\n            var promise = new qq.Promise(), method = \"POST\", headerNames = [], headersStr = \"\", now = new Date(), endOfUrl, signatureSpec, toSign, generateStringToSign = function(requestInfo) {\n                var contentMd5, headerIndexesToRemove = [];\n                qq.each(requestInfo.headers, function(name) {\n                    headerNames.push(name);\n                });\n                headerNames.sort();\n                qq.each(headerNames, function(idx, headerName) {\n                    if (qq.indexOf(qq.s3.util.UNSIGNABLE_REST_HEADER_NAMES, headerName) < 0) {\n                        headersStr += headerName.toLowerCase() + \":\" + requestInfo.headers[headerName].trim() + \"\\n\";\n                    } else if (headerName === \"Content-MD5\") {\n                        contentMd5 = requestInfo.headers[headerName];\n                    } else {\n                        headerIndexesToRemove.unshift(idx);\n                    }\n                });\n                qq.each(headerIndexesToRemove, function(idx, headerIdx) {\n                    headerNames.splice(headerIdx, 1);\n                });\n                signatureSpec = {\n                    bucket: requestInfo.bucket,\n                    contentMd5: contentMd5,\n                    contentType: requestInfo.contentType,\n                    date: now,\n                    drift: options.signatureSpec.drift,\n                    endOfUrl: endOfUrl,\n                    hashedContent: requestInfo.hashedContent,\n                    headerNames: headerNames,\n                    headersStr: headersStr,\n                    method: method\n                };\n                toSign = version === 2 ? v2.getStringToSign(signatureSpec) : v4.getStringToSign(signatureSpec);\n                return {\n                    date: now,\n                    endOfUrl: endOfUrl,\n                    signedHeaders: version === 4 ? v4.getSignedHeaders(signatureSpec.headerNames) : null,\n                    toSign: version === 4 ? toSign.hashed : toSign,\n                    toSignRaw: version === 4 ? toSign.raw : toSign\n                };\n            };\n            switch (requestInfo.type) {\n              case thisSignatureRequester.REQUEST_TYPE.MULTIPART_ABORT:\n                method = \"DELETE\";\n                endOfUrl = qq.format(\"uploadId={}\", requestInfo.uploadId);\n                break;\n\n              case thisSignatureRequester.REQUEST_TYPE.MULTIPART_INITIATE:\n                endOfUrl = \"uploads\";\n                break;\n\n              case thisSignatureRequester.REQUEST_TYPE.MULTIPART_COMPLETE:\n                endOfUrl = qq.format(\"uploadId={}\", requestInfo.uploadId);\n                break;\n\n              case thisSignatureRequester.REQUEST_TYPE.MULTIPART_UPLOAD:\n                method = \"PUT\";\n                endOfUrl = qq.format(\"partNumber={}&uploadId={}\", requestInfo.partNum, requestInfo.uploadId);\n                break;\n            }\n            endOfUrl = requestInfo.key + \"?\" + endOfUrl;\n            if (version === 4) {\n                v4.getEncodedHashedPayload(requestInfo.content).then(function(hashedContent) {\n                    requestInfo.headers[\"x-amz-content-sha256\"] = hashedContent;\n                    requestInfo.headers.Host = requestInfo.host;\n                    requestInfo.headers[\"x-amz-date\"] = qq.s3.util.getV4PolicyDate(now, options.signatureSpec.drift);\n                    requestInfo.hashedContent = hashedContent;\n                    promise.success(generateStringToSign(requestInfo));\n                }, function(err) {\n                    promise.failure(err);\n                });\n            } else {\n                promise.success(generateStringToSign(requestInfo));\n            }\n            return promise;\n        }\n        function determineSignatureClientSide(id, toBeSigned, signatureEffort, updatedAccessKey, updatedSessionToken) {\n            var updatedHeaders;\n            if (toBeSigned.signatureConstructor) {\n                if (updatedSessionToken) {\n                    updatedHeaders = toBeSigned.signatureConstructor.getHeaders();\n                    updatedHeaders[qq.s3.util.SESSION_TOKEN_PARAM_NAME] = updatedSessionToken;\n                    toBeSigned.signatureConstructor.withHeaders(updatedHeaders);\n                }\n                toBeSigned.signatureConstructor.getToSign(id).then(function(signatureArtifacts) {\n                    signApiRequest(toBeSigned.signatureConstructor, signatureArtifacts.stringToSign, signatureEffort);\n                }, function(err) {\n                    signatureEffort.failure(err);\n                });\n            } else {\n                updatedSessionToken && qq.s3.util.refreshPolicyCredentials(toBeSigned, updatedSessionToken);\n                signPolicy(toBeSigned, signatureEffort, updatedAccessKey, updatedSessionToken);\n            }\n        }\n        function signPolicy(policy, signatureEffort, updatedAccessKey, updatedSessionToken) {\n            if (options.signatureSpec.version === 4) {\n                v4.signPolicy(policy, signatureEffort, updatedAccessKey, updatedSessionToken);\n            } else {\n                v2.signPolicy(policy, signatureEffort, updatedAccessKey, updatedSessionToken);\n            }\n        }\n        function signApiRequest(signatureConstructor, headersStr, signatureEffort) {\n            if (options.signatureSpec.version === 4) {\n                v4.signApiRequest(signatureConstructor, headersStr, signatureEffort);\n            } else {\n                v2.signApiRequest(signatureConstructor, headersStr, signatureEffort);\n            }\n        }\n        requester = qq.extend(this, new qq.AjaxRequester({\n            acceptHeader: \"application/json\",\n            method: options.method,\n            contentType: \"application/json; charset=utf-8\",\n            endpointStore: {\n                get: function() {\n                    return options.signatureSpec.endpoint;\n                }\n            },\n            paramsStore: options.paramsStore,\n            maxConnections: options.maxConnections,\n            customHeaders: options.signatureSpec.customHeaders,\n            log: options.log,\n            onComplete: handleSignatureReceived,\n            cors: options.cors\n        }));\n        qq.extend(this, {\n            getSignature: function(id, toBeSigned) {\n                var params = toBeSigned, signatureConstructor = toBeSigned.signatureConstructor, signatureEffort = new qq.Promise(), queryParams;\n                if (options.signatureSpec.version === 4) {\n                    queryParams = {\n                        v4: true\n                    };\n                }\n                if (credentialsProvider.get().secretKey && qq.CryptoJS) {\n                    if (credentialsProvider.get().expiration.getTime() > Date.now()) {\n                        determineSignatureClientSide(id, toBeSigned, signatureEffort);\n                    } else {\n                        credentialsProvider.onExpired().then(function() {\n                            determineSignatureClientSide(id, toBeSigned, signatureEffort, credentialsProvider.get().accessKey, credentialsProvider.get().sessionToken);\n                        }, function(errorMsg) {\n                            options.log(\"Attempt to update expired credentials apparently failed! Unable to sign request.  \", \"error\");\n                            signatureEffort.failure(\"Unable to sign request - expired credentials.\");\n                        });\n                    }\n                } else {\n                    options.log(\"Submitting S3 signature request for \" + id);\n                    if (signatureConstructor) {\n                        signatureConstructor.getToSign(id).then(function(signatureArtifacts) {\n                            params = {\n                                headers: signatureArtifacts.stringToSignRaw\n                            };\n                            requester.initTransport(id).withParams(params).withQueryParams(queryParams).send();\n                        }, function(err) {\n                            options.log(\"Failed to construct signature. \", \"error\");\n                            signatureEffort.failure(\"Failed to construct signature.\");\n                        });\n                    } else {\n                        requester.initTransport(id).withParams(params).withQueryParams(queryParams).send();\n                    }\n                    pendingSignatures[id] = {\n                        promise: signatureEffort,\n                        signatureConstructor: signatureConstructor\n                    };\n                }\n                return signatureEffort;\n            },\n            constructStringToSign: function(type, bucket, host, key) {\n                var headers = {}, uploadId, content, contentType, partNum, artifacts;\n                return {\n                    withHeaders: function(theHeaders) {\n                        headers = theHeaders;\n                        return this;\n                    },\n                    withUploadId: function(theUploadId) {\n                        uploadId = theUploadId;\n                        return this;\n                    },\n                    withContent: function(theContent) {\n                        content = theContent;\n                        return this;\n                    },\n                    withContentType: function(theContentType) {\n                        contentType = theContentType;\n                        return this;\n                    },\n                    withPartNum: function(thePartNum) {\n                        partNum = thePartNum;\n                        return this;\n                    },\n                    getToSign: function(id) {\n                        var sessionToken = credentialsProvider.get().sessionToken, promise = new qq.Promise(), adjustedDate = new Date(Date.now() + options.signatureSpec.drift);\n                        headers[\"x-amz-date\"] = adjustedDate.toUTCString();\n                        if (sessionToken) {\n                            headers[qq.s3.util.SESSION_TOKEN_PARAM_NAME] = sessionToken;\n                        }\n                        getStringToSignArtifacts(id, options.signatureSpec.version, {\n                            bucket: bucket,\n                            content: content,\n                            contentType: contentType,\n                            headers: headers,\n                            host: host,\n                            key: key,\n                            partNum: partNum,\n                            type: type,\n                            uploadId: uploadId\n                        }).then(function(_artifacts_) {\n                            artifacts = _artifacts_;\n                            promise.success({\n                                headers: function() {\n                                    if (contentType) {\n                                        headers[\"Content-Type\"] = contentType;\n                                    }\n                                    delete headers.Host;\n                                    return headers;\n                                }(),\n                                date: artifacts.date,\n                                endOfUrl: artifacts.endOfUrl,\n                                signedHeaders: artifacts.signedHeaders,\n                                stringToSign: artifacts.toSign,\n                                stringToSignRaw: artifacts.toSignRaw\n                            });\n                        }, function(err) {\n                            promise.failure(err);\n                        });\n                        return promise;\n                    },\n                    getHeaders: function() {\n                        return qq.extend({}, headers);\n                    },\n                    getEndOfUrl: function() {\n                        return artifacts && artifacts.endOfUrl;\n                    },\n                    getRequestDate: function() {\n                        return artifacts && artifacts.date;\n                    },\n                    getSignedHeaders: function() {\n                        return artifacts && artifacts.signedHeaders;\n                    }\n                };\n            }\n        });\n    };\n    qq.s3.RequestSigner.prototype.REQUEST_TYPE = {\n        MULTIPART_INITIATE: \"multipart_initiate\",\n        MULTIPART_COMPLETE: \"multipart_complete\",\n        MULTIPART_ABORT: \"multipart_abort\",\n        MULTIPART_UPLOAD: \"multipart_upload\"\n    };\n    qq.UploadSuccessAjaxRequester = function(o) {\n        \"use strict\";\n        var requester, pendingRequests = [], options = {\n            method: \"POST\",\n            endpoint: null,\n            maxConnections: 3,\n            customHeaders: {},\n            paramsStore: {},\n            cors: {\n                expected: false,\n                sendCredentials: false\n            },\n            log: function(str, level) {}\n        };\n        qq.extend(options, o);\n        function handleSuccessResponse(id, xhrOrXdr, isError) {\n            var promise = pendingRequests[id], responseJson = xhrOrXdr.responseText, successIndicator = {\n                success: true\n            }, failureIndicator = {\n                success: false\n            }, parsedResponse;\n            delete pendingRequests[id];\n            options.log(qq.format(\"Received the following response body to an upload success request for id {}: {}\", id, responseJson));\n            try {\n                parsedResponse = qq.parseJson(responseJson);\n                if (isError || parsedResponse && (parsedResponse.error || parsedResponse.success === false)) {\n                    options.log(\"Upload success request was rejected by the server.\", \"error\");\n                    promise.failure(qq.extend(parsedResponse, failureIndicator));\n                } else {\n                    options.log(\"Upload success was acknowledged by the server.\");\n                    promise.success(qq.extend(parsedResponse, successIndicator));\n                }\n            } catch (error) {\n                if (isError) {\n                    options.log(qq.format(\"Your server indicated failure in its upload success request response for id {}!\", id), \"error\");\n                    promise.failure(failureIndicator);\n                } else {\n                    options.log(\"Upload success was acknowledged by the server.\");\n                    promise.success(successIndicator);\n                }\n            }\n        }\n        requester = qq.extend(this, new qq.AjaxRequester({\n            acceptHeader: \"application/json\",\n            method: options.method,\n            endpointStore: {\n                get: function() {\n                    return options.endpoint;\n                }\n            },\n            paramsStore: options.paramsStore,\n            maxConnections: options.maxConnections,\n            customHeaders: options.customHeaders,\n            log: options.log,\n            onComplete: handleSuccessResponse,\n            cors: options.cors\n        }));\n        qq.extend(this, {\n            sendSuccessRequest: function(id, spec) {\n                var promise = new qq.Promise();\n                options.log(\"Submitting upload success request/notification for \" + id);\n                requester.initTransport(id).withParams(spec).send();\n                pendingRequests[id] = promise;\n                return promise;\n            }\n        });\n    };\n    qq.s3.InitiateMultipartAjaxRequester = function(o) {\n        \"use strict\";\n        var requester, pendingInitiateRequests = {}, options = {\n            filenameParam: \"qqfilename\",\n            method: \"POST\",\n            endpointStore: null,\n            paramsStore: null,\n            signatureSpec: null,\n            aclStore: null,\n            reducedRedundancy: false,\n            serverSideEncryption: false,\n            maxConnections: 3,\n            getContentType: function(id) {},\n            getBucket: function(id) {},\n            getHost: function(id) {},\n            getKey: function(id) {},\n            getName: function(id) {},\n            log: function(str, level) {}\n        }, getSignatureAjaxRequester;\n        qq.extend(options, o);\n        getSignatureAjaxRequester = new qq.s3.RequestSigner({\n            endpointStore: options.endpointStore,\n            signatureSpec: options.signatureSpec,\n            cors: options.cors,\n            log: options.log\n        });\n        function getHeaders(id) {\n            var bucket = options.getBucket(id), host = options.getHost(id), headers = {}, promise = new qq.Promise(), key = options.getKey(id), signatureConstructor;\n            headers[\"x-amz-acl\"] = options.aclStore.get(id);\n            if (options.reducedRedundancy) {\n                headers[qq.s3.util.REDUCED_REDUNDANCY_PARAM_NAME] = qq.s3.util.REDUCED_REDUNDANCY_PARAM_VALUE;\n            }\n            if (options.serverSideEncryption) {\n                headers[qq.s3.util.SERVER_SIDE_ENCRYPTION_PARAM_NAME] = qq.s3.util.SERVER_SIDE_ENCRYPTION_PARAM_VALUE;\n            }\n            headers[qq.s3.util.AWS_PARAM_PREFIX + options.filenameParam] = encodeURIComponent(options.getName(id));\n            qq.each(options.paramsStore.get(id), function(name, val) {\n                if (qq.indexOf(qq.s3.util.UNPREFIXED_PARAM_NAMES, name) >= 0) {\n                    headers[name] = val;\n                } else {\n                    headers[qq.s3.util.AWS_PARAM_PREFIX + name] = encodeURIComponent(val);\n                }\n            });\n            signatureConstructor = getSignatureAjaxRequester.constructStringToSign(getSignatureAjaxRequester.REQUEST_TYPE.MULTIPART_INITIATE, bucket, host, key).withContentType(options.getContentType(id)).withHeaders(headers);\n            getSignatureAjaxRequester.getSignature(id, {\n                signatureConstructor: signatureConstructor\n            }).then(promise.success, promise.failure);\n            return promise;\n        }\n        function handleInitiateRequestComplete(id, xhr, isError) {\n            var promise = pendingInitiateRequests[id], domParser = new DOMParser(), responseDoc = domParser.parseFromString(xhr.responseText, \"application/xml\"), uploadIdElements, messageElements, uploadId, errorMessage, status;\n            delete pendingInitiateRequests[id];\n            if (isError) {\n                status = xhr.status;\n                messageElements = responseDoc.getElementsByTagName(\"Message\");\n                if (messageElements.length > 0) {\n                    errorMessage = messageElements[0].textContent;\n                }\n            } else {\n                uploadIdElements = responseDoc.getElementsByTagName(\"UploadId\");\n                if (uploadIdElements.length > 0) {\n                    uploadId = uploadIdElements[0].textContent;\n                } else {\n                    errorMessage = \"Upload ID missing from request\";\n                }\n            }\n            if (uploadId === undefined) {\n                if (errorMessage) {\n                    options.log(qq.format(\"Specific problem detected initiating multipart upload request for {}: '{}'.\", id, errorMessage), \"error\");\n                } else {\n                    options.log(qq.format(\"Unexplained error with initiate multipart upload request for {}.  Status code {}.\", id, status), \"error\");\n                }\n                promise.failure(\"Problem initiating upload request.\", xhr);\n            } else {\n                options.log(qq.format(\"Initiate multipart upload request successful for {}.  Upload ID is {}\", id, uploadId));\n                promise.success(uploadId, xhr);\n            }\n        }\n        requester = qq.extend(this, new qq.AjaxRequester({\n            method: options.method,\n            contentType: null,\n            endpointStore: options.endpointStore,\n            maxConnections: options.maxConnections,\n            allowXRequestedWithAndCacheControl: false,\n            log: options.log,\n            onComplete: handleInitiateRequestComplete,\n            successfulResponseCodes: {\n                POST: [ 200 ]\n            }\n        }));\n        qq.extend(this, {\n            send: function(id) {\n                var promise = new qq.Promise();\n                getHeaders(id).then(function(headers, endOfUrl) {\n                    options.log(\"Submitting S3 initiate multipart upload request for \" + id);\n                    pendingInitiateRequests[id] = promise;\n                    requester.initTransport(id).withPath(endOfUrl).withHeaders(headers).send();\n                }, promise.failure);\n                return promise;\n            }\n        });\n    };\n    qq.s3.CompleteMultipartAjaxRequester = function(o) {\n        \"use strict\";\n        var requester, pendingCompleteRequests = {}, options = {\n            method: \"POST\",\n            contentType: \"text/xml\",\n            endpointStore: null,\n            signatureSpec: null,\n            maxConnections: 3,\n            getBucket: function(id) {},\n            getHost: function(id) {},\n            getKey: function(id) {},\n            log: function(str, level) {}\n        }, getSignatureAjaxRequester;\n        qq.extend(options, o);\n        getSignatureAjaxRequester = new qq.s3.RequestSigner({\n            endpointStore: options.endpointStore,\n            signatureSpec: options.signatureSpec,\n            cors: options.cors,\n            log: options.log\n        });\n        function getHeaders(id, uploadId, body) {\n            var headers = {}, promise = new qq.Promise(), bucket = options.getBucket(id), host = options.getHost(id), signatureConstructor = getSignatureAjaxRequester.constructStringToSign(getSignatureAjaxRequester.REQUEST_TYPE.MULTIPART_COMPLETE, bucket, host, options.getKey(id)).withUploadId(uploadId).withContent(body).withContentType(\"application/xml; charset=UTF-8\");\n            getSignatureAjaxRequester.getSignature(id, {\n                signatureConstructor: signatureConstructor\n            }).then(promise.success, promise.failure);\n            return promise;\n        }\n        function handleCompleteRequestComplete(id, xhr, isError) {\n            var promise = pendingCompleteRequests[id], domParser = new DOMParser(), bucket = options.getBucket(id), key = options.getKey(id), responseDoc = domParser.parseFromString(xhr.responseText, \"application/xml\"), bucketEls = responseDoc.getElementsByTagName(\"Bucket\"), keyEls = responseDoc.getElementsByTagName(\"Key\");\n            delete pendingCompleteRequests[id];\n            options.log(qq.format(\"Complete response status {}, body = {}\", xhr.status, xhr.responseText));\n            if (isError) {\n                options.log(qq.format(\"Complete Multipart Upload request for {} failed with status {}.\", id, xhr.status), \"error\");\n            } else {\n                if (bucketEls.length && keyEls.length) {\n                    if (bucketEls[0].textContent !== bucket) {\n                        isError = true;\n                        options.log(qq.format(\"Wrong bucket in response to Complete Multipart Upload request for {}.\", id), \"error\");\n                    }\n                } else {\n                    isError = true;\n                    options.log(qq.format(\"Missing bucket and/or key in response to Complete Multipart Upload request for {}.\", id), \"error\");\n                }\n            }\n            if (isError) {\n                promise.failure(\"Problem combining the file parts!\", xhr);\n            } else {\n                promise.success({}, xhr);\n            }\n        }\n        function getCompleteRequestBody(etagEntries) {\n            var doc = document.implementation.createDocument(null, \"CompleteMultipartUpload\", null);\n            etagEntries.sort(function(a, b) {\n                return a.part - b.part;\n            });\n            qq.each(etagEntries, function(idx, etagEntry) {\n                var part = etagEntry.part, etag = etagEntry.etag, partEl = doc.createElement(\"Part\"), partNumEl = doc.createElement(\"PartNumber\"), partNumTextEl = doc.createTextNode(part), etagTextEl = doc.createTextNode(etag), etagEl = doc.createElement(\"ETag\");\n                etagEl.appendChild(etagTextEl);\n                partNumEl.appendChild(partNumTextEl);\n                partEl.appendChild(partNumEl);\n                partEl.appendChild(etagEl);\n                qq(doc).children()[0].appendChild(partEl);\n            });\n            return new XMLSerializer().serializeToString(doc);\n        }\n        requester = qq.extend(this, new qq.AjaxRequester({\n            method: options.method,\n            contentType: \"application/xml; charset=UTF-8\",\n            endpointStore: options.endpointStore,\n            maxConnections: options.maxConnections,\n            allowXRequestedWithAndCacheControl: false,\n            log: options.log,\n            onComplete: handleCompleteRequestComplete,\n            successfulResponseCodes: {\n                POST: [ 200 ]\n            }\n        }));\n        qq.extend(this, {\n            send: function(id, uploadId, etagEntries) {\n                var promise = new qq.Promise(), body = getCompleteRequestBody(etagEntries);\n                getHeaders(id, uploadId, body).then(function(headers, endOfUrl) {\n                    options.log(\"Submitting S3 complete multipart upload request for \" + id);\n                    pendingCompleteRequests[id] = promise;\n                    delete headers[\"Content-Type\"];\n                    requester.initTransport(id).withPath(endOfUrl).withHeaders(headers).withPayload(body).send();\n                }, promise.failure);\n                return promise;\n            }\n        });\n    };\n    qq.s3.AbortMultipartAjaxRequester = function(o) {\n        \"use strict\";\n        var requester, options = {\n            method: \"DELETE\",\n            endpointStore: null,\n            signatureSpec: null,\n            maxConnections: 3,\n            getBucket: function(id) {},\n            getHost: function(id) {},\n            getKey: function(id) {},\n            log: function(str, level) {}\n        }, getSignatureAjaxRequester;\n        qq.extend(options, o);\n        getSignatureAjaxRequester = new qq.s3.RequestSigner({\n            endpointStore: options.endpointStore,\n            signatureSpec: options.signatureSpec,\n            cors: options.cors,\n            log: options.log\n        });\n        function getHeaders(id, uploadId) {\n            var headers = {}, promise = new qq.Promise(), bucket = options.getBucket(id), host = options.getHost(id), signatureConstructor = getSignatureAjaxRequester.constructStringToSign(getSignatureAjaxRequester.REQUEST_TYPE.MULTIPART_ABORT, bucket, host, options.getKey(id)).withUploadId(uploadId);\n            getSignatureAjaxRequester.getSignature(id, {\n                signatureConstructor: signatureConstructor\n            }).then(promise.success, promise.failure);\n            return promise;\n        }\n        function handleAbortRequestComplete(id, xhr, isError) {\n            var domParser = new DOMParser(), responseDoc = domParser.parseFromString(xhr.responseText, \"application/xml\"), errorEls = responseDoc.getElementsByTagName(\"Error\"), awsErrorMsg;\n            options.log(qq.format(\"Abort response status {}, body = {}\", xhr.status, xhr.responseText));\n            if (isError) {\n                options.log(qq.format(\"Abort Multipart Upload request for {} failed with status {}.\", id, xhr.status), \"error\");\n            } else {\n                if (errorEls.length) {\n                    isError = true;\n                    awsErrorMsg = responseDoc.getElementsByTagName(\"Message\")[0].textContent;\n                    options.log(qq.format(\"Failed to Abort Multipart Upload request for {}.  Error: {}\", id, awsErrorMsg), \"error\");\n                } else {\n                    options.log(qq.format(\"Abort MPU request succeeded for file ID {}.\", id));\n                }\n            }\n        }\n        requester = qq.extend(this, new qq.AjaxRequester({\n            validMethods: [ \"DELETE\" ],\n            method: options.method,\n            contentType: null,\n            endpointStore: options.endpointStore,\n            maxConnections: options.maxConnections,\n            allowXRequestedWithAndCacheControl: false,\n            log: options.log,\n            onComplete: handleAbortRequestComplete,\n            successfulResponseCodes: {\n                DELETE: [ 204 ]\n            }\n        }));\n        qq.extend(this, {\n            send: function(id, uploadId) {\n                getHeaders(id, uploadId).then(function(headers, endOfUrl) {\n                    options.log(\"Submitting S3 Abort multipart upload request for \" + id);\n                    requester.initTransport(id).withPath(endOfUrl).withHeaders(headers).send();\n                });\n            }\n        });\n    };\n    qq.s3.XhrUploadHandler = function(spec, proxy) {\n        \"use strict\";\n        var getName = proxy.getName, log = proxy.log, clockDrift = spec.clockDrift, expectedStatus = 200, onGetBucket = spec.getBucket, onGetHost = spec.getHost, onGetKeyName = spec.getKeyName, filenameParam = spec.filenameParam, paramsStore = spec.paramsStore, endpointStore = spec.endpointStore, aclStore = spec.aclStore, reducedRedundancy = spec.objectProperties.reducedRedundancy, region = spec.objectProperties.region, serverSideEncryption = spec.objectProperties.serverSideEncryption, validation = spec.validation, signature = qq.extend({\n            region: region,\n            drift: clockDrift\n        }, spec.signature), handler = this, credentialsProvider = spec.signature.credentialsProvider, chunked = {\n            combine: function(id) {\n                var uploadId = handler._getPersistableData(id).uploadId, etagMap = handler._getPersistableData(id).etags, result = new qq.Promise();\n                requesters.completeMultipart.send(id, uploadId, etagMap).then(result.success, function failure(reason, xhr) {\n                    result.failure(upload.done(id, xhr).response, xhr);\n                });\n                return result;\n            },\n            done: function(id, xhr, chunkIdx) {\n                var response = upload.response.parse(id, xhr), etag;\n                if (response.success) {\n                    etag = xhr.getResponseHeader(\"ETag\");\n                    if (!handler._getPersistableData(id).etags) {\n                        handler._getPersistableData(id).etags = [];\n                    }\n                    handler._getPersistableData(id).etags.push({\n                        part: chunkIdx + 1,\n                        etag: etag\n                    });\n                }\n            },\n            initHeaders: function(id, chunkIdx, blob) {\n                var headers = {}, bucket = upload.bucket.getName(id), host = upload.host.getName(id), key = upload.key.urlSafe(id), promise = new qq.Promise(), signatureConstructor = requesters.restSignature.constructStringToSign(requesters.restSignature.REQUEST_TYPE.MULTIPART_UPLOAD, bucket, host, key).withPartNum(chunkIdx + 1).withContent(blob).withUploadId(handler._getPersistableData(id).uploadId);\n                requesters.restSignature.getSignature(id + \".\" + chunkIdx, {\n                    signatureConstructor: signatureConstructor\n                }).then(promise.success, promise.failure);\n                return promise;\n            },\n            put: function(id, chunkIdx) {\n                var xhr = handler._createXhr(id, chunkIdx), chunkData = handler._getChunkData(id, chunkIdx), domain = spec.endpointStore.get(id), promise = new qq.Promise();\n                chunked.initHeaders(id, chunkIdx, chunkData.blob).then(function(headers, endOfUrl) {\n                    if (xhr._cancelled) {\n                        log(qq.format(\"Upload of item {}.{} cancelled. Upload will not start after successful signature request.\", id, chunkIdx));\n                        promise.failure({\n                            error: \"Chunk upload cancelled\"\n                        });\n                    } else {\n                        var url = domain + \"/\" + endOfUrl;\n                        handler._registerProgressHandler(id, chunkIdx, chunkData.size);\n                        upload.track(id, xhr, chunkIdx).then(promise.success, promise.failure);\n                        xhr.open(\"PUT\", url, true);\n                        var hasContentType = false;\n                        qq.each(headers, function(name, val) {\n                            if (name === \"Content-Type\") {\n                                hasContentType = true;\n                            }\n                            xhr.setRequestHeader(name, val);\n                        });\n                        if (!hasContentType) {\n                            xhr.setRequestHeader(\"Content-Type\", \"\");\n                        }\n                        xhr.send(chunkData.blob);\n                    }\n                }, function() {\n                    promise.failure({\n                        error: \"Problem signing the chunk!\"\n                    }, xhr);\n                });\n                return promise;\n            },\n            send: function(id, chunkIdx) {\n                var promise = new qq.Promise();\n                chunked.setup(id).then(function() {\n                    chunked.put(id, chunkIdx).then(promise.success, promise.failure);\n                }, function(errorMessage, xhr) {\n                    promise.failure({\n                        error: errorMessage\n                    }, xhr);\n                });\n                return promise;\n            },\n            setup: function(id) {\n                var promise = new qq.Promise(), uploadId = handler._getPersistableData(id).uploadId, uploadIdPromise = new qq.Promise();\n                if (!uploadId) {\n                    handler._getPersistableData(id).uploadId = uploadIdPromise;\n                    requesters.initiateMultipart.send(id).then(function(uploadId) {\n                        handler._getPersistableData(id).uploadId = uploadId;\n                        uploadIdPromise.success(uploadId);\n                        promise.success(uploadId);\n                    }, function(errorMsg, xhr) {\n                        handler._getPersistableData(id).uploadId = null;\n                        promise.failure(errorMsg, xhr);\n                        uploadIdPromise.failure(errorMsg, xhr);\n                    });\n                } else if (uploadId instanceof qq.Promise) {\n                    uploadId.then(function(uploadId) {\n                        promise.success(uploadId);\n                    });\n                } else {\n                    promise.success(uploadId);\n                }\n                return promise;\n            }\n        }, requesters = {\n            abortMultipart: new qq.s3.AbortMultipartAjaxRequester({\n                endpointStore: endpointStore,\n                signatureSpec: signature,\n                cors: spec.cors,\n                log: log,\n                getBucket: function(id) {\n                    return upload.bucket.getName(id);\n                },\n                getHost: function(id) {\n                    return upload.host.getName(id);\n                },\n                getKey: function(id) {\n                    return upload.key.urlSafe(id);\n                }\n            }),\n            completeMultipart: new qq.s3.CompleteMultipartAjaxRequester({\n                endpointStore: endpointStore,\n                signatureSpec: signature,\n                cors: spec.cors,\n                log: log,\n                getBucket: function(id) {\n                    return upload.bucket.getName(id);\n                },\n                getHost: function(id) {\n                    return upload.host.getName(id);\n                },\n                getKey: function(id) {\n                    return upload.key.urlSafe(id);\n                }\n            }),\n            initiateMultipart: new qq.s3.InitiateMultipartAjaxRequester({\n                filenameParam: filenameParam,\n                endpointStore: endpointStore,\n                paramsStore: paramsStore,\n                signatureSpec: signature,\n                aclStore: aclStore,\n                reducedRedundancy: reducedRedundancy,\n                serverSideEncryption: serverSideEncryption,\n                cors: spec.cors,\n                log: log,\n                getContentType: function(id) {\n                    return handler._getMimeType(id);\n                },\n                getBucket: function(id) {\n                    return upload.bucket.getName(id);\n                },\n                getHost: function(id) {\n                    return upload.host.getName(id);\n                },\n                getKey: function(id) {\n                    return upload.key.urlSafe(id);\n                },\n                getName: function(id) {\n                    return getName(id);\n                }\n            }),\n            policySignature: new qq.s3.RequestSigner({\n                expectingPolicy: true,\n                signatureSpec: signature,\n                cors: spec.cors,\n                log: log\n            }),\n            restSignature: new qq.s3.RequestSigner({\n                endpointStore: endpointStore,\n                signatureSpec: signature,\n                cors: spec.cors,\n                log: log\n            })\n        }, simple = {\n            initParams: function(id) {\n                var customParams = paramsStore.get(id);\n                customParams[filenameParam] = getName(id);\n                return qq.s3.util.generateAwsParams({\n                    endpoint: endpointStore.get(id),\n                    clockDrift: clockDrift,\n                    params: customParams,\n                    type: handler._getMimeType(id),\n                    bucket: upload.bucket.getName(id),\n                    key: handler.getThirdPartyFileId(id),\n                    accessKey: credentialsProvider.get().accessKey,\n                    sessionToken: credentialsProvider.get().sessionToken,\n                    acl: aclStore.get(id),\n                    expectedStatus: expectedStatus,\n                    minFileSize: validation.minSizeLimit,\n                    maxFileSize: validation.maxSizeLimit,\n                    reducedRedundancy: reducedRedundancy,\n                    region: region,\n                    serverSideEncryption: serverSideEncryption,\n                    signatureVersion: signature.version,\n                    log: log\n                }, qq.bind(requesters.policySignature.getSignature, this, id));\n            },\n            send: function(id) {\n                var promise = new qq.Promise(), xhr = handler._createXhr(id), fileOrBlob = handler.getFile(id);\n                handler._registerProgressHandler(id);\n                upload.track(id, xhr).then(promise.success, promise.failure);\n                simple.setup(id, xhr, fileOrBlob).then(function(toSend) {\n                    log(\"Sending upload request for \" + id);\n                    xhr.send(toSend);\n                }, promise.failure);\n                return promise;\n            },\n            setup: function(id, xhr, fileOrBlob) {\n                var formData = new FormData(), endpoint = endpointStore.get(id), url = endpoint, promise = new qq.Promise();\n                simple.initParams(id).then(function(awsParams) {\n                    xhr.open(\"POST\", url, true);\n                    qq.obj2FormData(awsParams, formData);\n                    formData.append(\"file\", fileOrBlob);\n                    promise.success(formData);\n                }, function(errorMessage) {\n                    promise.failure({\n                        error: errorMessage\n                    });\n                });\n                return promise;\n            }\n        }, upload = {\n            bucket: {\n                promise: function(id) {\n                    var promise = new qq.Promise(), cachedBucket = handler._getFileState(id).bucket;\n                    if (cachedBucket) {\n                        promise.success(cachedBucket);\n                    } else {\n                        onGetBucket(id).then(function(bucket) {\n                            handler._getFileState(id).bucket = bucket;\n                            promise.success(bucket);\n                        }, promise.failure);\n                    }\n                    return promise;\n                },\n                getName: function(id) {\n                    return handler._getFileState(id).bucket;\n                }\n            },\n            host: {\n                promise: function(id) {\n                    var promise = new qq.Promise(), cachedHost = handler._getFileState(id).host;\n                    if (cachedHost) {\n                        promise.success(cachedHost);\n                    } else {\n                        onGetHost(id).then(function(host) {\n                            handler._getFileState(id).host = host;\n                            promise.success(host);\n                        }, promise.failure);\n                    }\n                    return promise;\n                },\n                getName: function(id) {\n                    return handler._getFileState(id).host;\n                }\n            },\n            done: function(id, xhr) {\n                var response = upload.response.parse(id, xhr), isError = response.success !== true;\n                if (isError && upload.response.shouldReset(response.code)) {\n                    log(\"This is an unrecoverable error, we must restart the upload entirely on the next retry attempt.\", \"error\");\n                    response.reset = true;\n                }\n                return {\n                    success: !isError,\n                    response: response\n                };\n            },\n            key: {\n                promise: function(id) {\n                    var promise = new qq.Promise(), key = handler.getThirdPartyFileId(id);\n                    if (key == null) {\n                        handler._setThirdPartyFileId(id, promise);\n                        onGetKeyName(id, getName(id)).then(function(keyName) {\n                            handler._setThirdPartyFileId(id, keyName);\n                            promise.success(keyName);\n                        }, function(errorReason) {\n                            handler._setThirdPartyFileId(id, null);\n                            promise.failure(errorReason);\n                        });\n                    } else if (qq.isGenericPromise(key)) {\n                        key.then(promise.success, promise.failure);\n                    } else {\n                        promise.success(key);\n                    }\n                    return promise;\n                },\n                urlSafe: function(id) {\n                    var encodedKey = handler.getThirdPartyFileId(id);\n                    return qq.s3.util.uriEscapePath(encodedKey);\n                }\n            },\n            response: {\n                parse: function(id, xhr) {\n                    var response = {}, parsedErrorProps;\n                    try {\n                        log(qq.format(\"Received response status {} with body: {}\", xhr.status, xhr.responseText));\n                        if (xhr.status === expectedStatus) {\n                            response.success = true;\n                        } else {\n                            parsedErrorProps = upload.response.parseError(xhr.responseText);\n                            if (parsedErrorProps) {\n                                response.error = parsedErrorProps.message;\n                                response.code = parsedErrorProps.code;\n                            }\n                        }\n                    } catch (error) {\n                        log(\"Error when attempting to parse xhr response text (\" + error.message + \")\", \"error\");\n                    }\n                    return response;\n                },\n                parseError: function(awsResponseXml) {\n                    var parser = new DOMParser(), parsedDoc = parser.parseFromString(awsResponseXml, \"application/xml\"), errorEls = parsedDoc.getElementsByTagName(\"Error\"), errorDetails = {}, codeEls, messageEls;\n                    if (errorEls.length) {\n                        codeEls = parsedDoc.getElementsByTagName(\"Code\");\n                        messageEls = parsedDoc.getElementsByTagName(\"Message\");\n                        if (messageEls.length) {\n                            errorDetails.message = messageEls[0].textContent;\n                        }\n                        if (codeEls.length) {\n                            errorDetails.code = codeEls[0].textContent;\n                        }\n                        return errorDetails;\n                    }\n                },\n                shouldReset: function(errorCode) {\n                    return errorCode === \"EntityTooSmall\" || errorCode === \"InvalidPart\" || errorCode === \"InvalidPartOrder\" || errorCode === \"NoSuchUpload\";\n                }\n            },\n            start: function(params) {\n                var id = params.id;\n                var optChunkIdx = params.chunkIdx;\n                var promise = new qq.Promise();\n                upload.key.promise(id).then(function() {\n                    upload.bucket.promise(id).then(function() {\n                        upload.host.promise(id).then(function() {\n                            if (optChunkIdx == null) {\n                                simple.send(id).then(promise.success, promise.failure);\n                            } else {\n                                chunked.send(id, optChunkIdx).then(promise.success, promise.failure);\n                            }\n                        });\n                    });\n                }, function(errorReason) {\n                    promise.failure({\n                        error: errorReason\n                    });\n                });\n                return promise;\n            },\n            track: function(id, xhr, optChunkIdx) {\n                var promise = new qq.Promise();\n                xhr.onreadystatechange = function() {\n                    if (xhr.readyState === 4) {\n                        var result;\n                        if (optChunkIdx == null) {\n                            result = upload.done(id, xhr);\n                            promise[result.success ? \"success\" : \"failure\"](result.response, xhr);\n                        } else {\n                            chunked.done(id, xhr, optChunkIdx);\n                            result = upload.done(id, xhr);\n                            promise[result.success ? \"success\" : \"failure\"](result.response, xhr);\n                        }\n                    }\n                };\n                return promise;\n            }\n        };\n        qq.extend(this, {\n            uploadChunk: upload.start,\n            uploadFile: function(id) {\n                return upload.start({\n                    id: id\n                });\n            }\n        });\n        qq.extend(this, new qq.XhrUploadHandler({\n            options: qq.extend({\n                namespace: \"s3\"\n            }, spec),\n            proxy: qq.extend({\n                getEndpoint: spec.endpointStore.get\n            }, proxy)\n        }));\n        qq.override(this, function(super_) {\n            return {\n                expunge: function(id) {\n                    var uploadId = handler._getPersistableData(id) && handler._getPersistableData(id).uploadId, existedInLocalStorage = handler._maybeDeletePersistedChunkData(id);\n                    if (uploadId !== undefined && existedInLocalStorage) {\n                        requesters.abortMultipart.send(id, uploadId);\n                    }\n                    super_.expunge(id);\n                },\n                finalizeChunks: function(id) {\n                    return chunked.combine(id);\n                },\n                _getLocalStorageId: function(id) {\n                    var baseStorageId = super_._getLocalStorageId(id), bucketName = upload.bucket.getName(id);\n                    return baseStorageId + \"-\" + bucketName;\n                }\n            };\n        });\n    };\n    qq.s3.FormUploadHandler = function(options, proxy) {\n        \"use strict\";\n        var handler = this, clockDrift = options.clockDrift, onUuidChanged = proxy.onUuidChanged, getName = proxy.getName, getUuid = proxy.getUuid, log = proxy.log, onGetBucket = options.getBucket, onGetKeyName = options.getKeyName, filenameParam = options.filenameParam, paramsStore = options.paramsStore, endpointStore = options.endpointStore, aclStore = options.aclStore, reducedRedundancy = options.objectProperties.reducedRedundancy, region = options.objectProperties.region, serverSideEncryption = options.objectProperties.serverSideEncryption, validation = options.validation, signature = options.signature, successRedirectUrl = options.iframeSupport.localBlankPagePath, credentialsProvider = options.signature.credentialsProvider, getSignatureAjaxRequester = new qq.s3.RequestSigner({\n            signatureSpec: signature,\n            cors: options.cors,\n            log: log\n        });\n        if (successRedirectUrl === undefined) {\n            throw new Error(\"successRedirectEndpoint MUST be defined if you intend to use browsers that do not support the File API!\");\n        }\n        function isValidResponse(id, iframe) {\n            var response, endpoint = options.endpointStore.get(id), bucket = handler._getFileState(id).bucket, doc, innerHtml, responseData;\n            try {\n                doc = iframe.contentDocument || iframe.contentWindow.document;\n                innerHtml = doc.body.innerHTML;\n                responseData = qq.s3.util.parseIframeResponse(iframe);\n                if (responseData.bucket === bucket && responseData.key === qq.s3.util.encodeQueryStringParam(handler.getThirdPartyFileId(id))) {\n                    return true;\n                }\n                log(\"Response from AWS included an unexpected bucket or key name.\", \"error\");\n            } catch (error) {\n                log(\"Error when attempting to parse form upload response (\" + error.message + \")\", \"error\");\n            }\n            return false;\n        }\n        function generateAwsParams(id) {\n            var customParams = paramsStore.get(id);\n            customParams[filenameParam] = getName(id);\n            return qq.s3.util.generateAwsParams({\n                endpoint: endpointStore.get(id),\n                clockDrift: clockDrift,\n                params: customParams,\n                bucket: handler._getFileState(id).bucket,\n                key: handler.getThirdPartyFileId(id),\n                accessKey: credentialsProvider.get().accessKey,\n                sessionToken: credentialsProvider.get().sessionToken,\n                acl: aclStore.get(id),\n                minFileSize: validation.minSizeLimit,\n                maxFileSize: validation.maxSizeLimit,\n                successRedirectUrl: successRedirectUrl,\n                reducedRedundancy: reducedRedundancy,\n                region: region,\n                serverSideEncryption: serverSideEncryption,\n                signatureVersion: signature.version,\n                log: log\n            }, qq.bind(getSignatureAjaxRequester.getSignature, this, id));\n        }\n        function createForm(id, iframe) {\n            var promise = new qq.Promise(), method = \"POST\", endpoint = options.endpointStore.get(id), fileName = getName(id);\n            generateAwsParams(id).then(function(params) {\n                var form = handler._initFormForUpload({\n                    method: method,\n                    endpoint: endpoint,\n                    params: params,\n                    paramsInBody: true,\n                    targetName: iframe.name\n                });\n                promise.success(form);\n            }, function(errorMessage) {\n                promise.failure(errorMessage);\n                handleFinishedUpload(id, iframe, fileName, {\n                    error: errorMessage\n                });\n            });\n            return promise;\n        }\n        function handleUpload(id) {\n            var iframe = handler._createIframe(id), input = handler.getInput(id), promise = new qq.Promise();\n            createForm(id, iframe).then(function(form) {\n                form.appendChild(input);\n                handler._attachLoadEvent(iframe, function(response) {\n                    log(\"iframe loaded\");\n                    if (response) {\n                        if (response.success === false) {\n                            log(\"Amazon likely rejected the upload request\", \"error\");\n                            promise.failure(response);\n                        }\n                    } else {\n                        response = {};\n                        response.success = isValidResponse(id, iframe);\n                        if (response.success === false) {\n                            log(\"A success response was received by Amazon, but it was invalid in some way.\", \"error\");\n                            promise.failure(response);\n                        } else {\n                            qq.extend(response, qq.s3.util.parseIframeResponse(iframe));\n                            promise.success(response);\n                        }\n                    }\n                    handleFinishedUpload(id, iframe);\n                });\n                log(\"Sending upload request for \" + id);\n                form.submit();\n                qq(form).remove();\n            }, promise.failure);\n            return promise;\n        }\n        function handleFinishedUpload(id, iframe) {\n            handler._detachLoadEvent(id);\n            iframe && qq(iframe).remove();\n        }\n        qq.extend(this, new qq.FormUploadHandler({\n            options: {\n                isCors: false,\n                inputName: \"file\"\n            },\n            proxy: {\n                onCancel: options.onCancel,\n                onUuidChanged: onUuidChanged,\n                getName: getName,\n                getUuid: getUuid,\n                log: log\n            }\n        }));\n        qq.extend(this, {\n            uploadFile: function(id) {\n                var name = getName(id), promise = new qq.Promise();\n                if (handler.getThirdPartyFileId(id)) {\n                    if (handler._getFileState(id).bucket) {\n                        handleUpload(id).then(promise.success, promise.failure);\n                    } else {\n                        onGetBucket(id).then(function(bucket) {\n                            handler._getFileState(id).bucket = bucket;\n                            handleUpload(id).then(promise.success, promise.failure);\n                        });\n                    }\n                } else {\n                    onGetKeyName(id, name).then(function(key) {\n                        onGetBucket(id).then(function(bucket) {\n                            handler._getFileState(id).bucket = bucket;\n                            handler._setThirdPartyFileId(id, key);\n                            handleUpload(id).then(promise.success, promise.failure);\n                        }, function(errorReason) {\n                            promise.failure({\n                                error: errorReason\n                            });\n                        });\n                    }, function(errorReason) {\n                        promise.failure({\n                            error: errorReason\n                        });\n                    });\n                }\n                return promise;\n            }\n        });\n    };\n})(window);\n//# sourceMappingURL=s3.fine-uploader.core.js.map","\"use strict\";\n\nmodule.exports = require(\"../../s3.fine-uploader/s3.fine-uploader.core\");\n","// Fine Uploader 5.16.2 - MIT licensed. http://fineuploader.com\n(function(global) {\n    var qq = function(element) {\n        \"use strict\";\n        return {\n            hide: function() {\n                element.style.display = \"none\";\n                return this;\n            },\n            attach: function(type, fn) {\n                if (element.addEventListener) {\n                    element.addEventListener(type, fn, false);\n                } else if (element.attachEvent) {\n                    element.attachEvent(\"on\" + type, fn);\n                }\n                return function() {\n                    qq(element).detach(type, fn);\n                };\n            },\n            detach: function(type, fn) {\n                if (element.removeEventListener) {\n                    element.removeEventListener(type, fn, false);\n                } else if (element.attachEvent) {\n                    element.detachEvent(\"on\" + type, fn);\n                }\n                return this;\n            },\n            contains: function(descendant) {\n                if (!descendant) {\n                    return false;\n                }\n                if (element === descendant) {\n                    return true;\n                }\n                if (element.contains) {\n                    return element.contains(descendant);\n                } else {\n                    return !!(descendant.compareDocumentPosition(element) & 8);\n                }\n            },\n            insertBefore: function(elementB) {\n                elementB.parentNode.insertBefore(element, elementB);\n                return this;\n            },\n            remove: function() {\n                element.parentNode.removeChild(element);\n                return this;\n            },\n            css: function(styles) {\n                if (element.style == null) {\n                    throw new qq.Error(\"Can't apply style to node as it is not on the HTMLElement prototype chain!\");\n                }\n                if (styles.opacity != null) {\n                    if (typeof element.style.opacity !== \"string\" && typeof element.filters !== \"undefined\") {\n                        styles.filter = \"alpha(opacity=\" + Math.round(100 * styles.opacity) + \")\";\n                    }\n                }\n                qq.extend(element.style, styles);\n                return this;\n            },\n            hasClass: function(name, considerParent) {\n                var re = new RegExp(\"(^| )\" + name + \"( |$)\");\n                return re.test(element.className) || !!(considerParent && re.test(element.parentNode.className));\n            },\n            addClass: function(name) {\n                if (!qq(element).hasClass(name)) {\n                    element.className += \" \" + name;\n                }\n                return this;\n            },\n            removeClass: function(name) {\n                var re = new RegExp(\"(^| )\" + name + \"( |$)\");\n                element.className = element.className.replace(re, \" \").replace(/^\\s+|\\s+$/g, \"\");\n                return this;\n            },\n            getByClass: function(className, first) {\n                var candidates, result = [];\n                if (first && element.querySelector) {\n                    return element.querySelector(\".\" + className);\n                } else if (element.querySelectorAll) {\n                    return element.querySelectorAll(\".\" + className);\n                }\n                candidates = element.getElementsByTagName(\"*\");\n                qq.each(candidates, function(idx, val) {\n                    if (qq(val).hasClass(className)) {\n                        result.push(val);\n                    }\n                });\n                return first ? result[0] : result;\n            },\n            getFirstByClass: function(className) {\n                return qq(element).getByClass(className, true);\n            },\n            children: function() {\n                var children = [], child = element.firstChild;\n                while (child) {\n                    if (child.nodeType === 1) {\n                        children.push(child);\n                    }\n                    child = child.nextSibling;\n                }\n                return children;\n            },\n            setText: function(text) {\n                element.innerText = text;\n                element.textContent = text;\n                return this;\n            },\n            clearText: function() {\n                return qq(element).setText(\"\");\n            },\n            hasAttribute: function(attrName) {\n                var attrVal;\n                if (element.hasAttribute) {\n                    if (!element.hasAttribute(attrName)) {\n                        return false;\n                    }\n                    return /^false$/i.exec(element.getAttribute(attrName)) == null;\n                } else {\n                    attrVal = element[attrName];\n                    if (attrVal === undefined) {\n                        return false;\n                    }\n                    return /^false$/i.exec(attrVal) == null;\n                }\n            }\n        };\n    };\n    (function() {\n        \"use strict\";\n        qq.canvasToBlob = function(canvas, mime, quality) {\n            return qq.dataUriToBlob(canvas.toDataURL(mime, quality));\n        };\n        qq.dataUriToBlob = function(dataUri) {\n            var arrayBuffer, byteString, createBlob = function(data, mime) {\n                var BlobBuilder = window.BlobBuilder || window.WebKitBlobBuilder || window.MozBlobBuilder || window.MSBlobBuilder, blobBuilder = BlobBuilder && new BlobBuilder();\n                if (blobBuilder) {\n                    blobBuilder.append(data);\n                    return blobBuilder.getBlob(mime);\n                } else {\n                    return new Blob([ data ], {\n                        type: mime\n                    });\n                }\n            }, intArray, mimeString;\n            if (dataUri.split(\",\")[0].indexOf(\"base64\") >= 0) {\n                byteString = atob(dataUri.split(\",\")[1]);\n            } else {\n                byteString = decodeURI(dataUri.split(\",\")[1]);\n            }\n            mimeString = dataUri.split(\",\")[0].split(\":\")[1].split(\";\")[0];\n            arrayBuffer = new ArrayBuffer(byteString.length);\n            intArray = new Uint8Array(arrayBuffer);\n            qq.each(byteString, function(idx, character) {\n                intArray[idx] = character.charCodeAt(0);\n            });\n            return createBlob(arrayBuffer, mimeString);\n        };\n        qq.log = function(message, level) {\n            if (window.console) {\n                if (!level || level === \"info\") {\n                    window.console.log(message);\n                } else {\n                    if (window.console[level]) {\n                        window.console[level](message);\n                    } else {\n                        window.console.log(\"<\" + level + \"> \" + message);\n                    }\n                }\n            }\n        };\n        qq.isObject = function(variable) {\n            return variable && !variable.nodeType && Object.prototype.toString.call(variable) === \"[object Object]\";\n        };\n        qq.isFunction = function(variable) {\n            return typeof variable === \"function\";\n        };\n        qq.isArray = function(value) {\n            return Object.prototype.toString.call(value) === \"[object Array]\" || value && window.ArrayBuffer && value.buffer && value.buffer.constructor === ArrayBuffer;\n        };\n        qq.isItemList = function(maybeItemList) {\n            return Object.prototype.toString.call(maybeItemList) === \"[object DataTransferItemList]\";\n        };\n        qq.isNodeList = function(maybeNodeList) {\n            return Object.prototype.toString.call(maybeNodeList) === \"[object NodeList]\" || maybeNodeList.item && maybeNodeList.namedItem;\n        };\n        qq.isString = function(maybeString) {\n            return Object.prototype.toString.call(maybeString) === \"[object String]\";\n        };\n        qq.trimStr = function(string) {\n            if (String.prototype.trim) {\n                return string.trim();\n            }\n            return string.replace(/^\\s+|\\s+$/g, \"\");\n        };\n        qq.format = function(str) {\n            var args = Array.prototype.slice.call(arguments, 1), newStr = str, nextIdxToReplace = newStr.indexOf(\"{}\");\n            qq.each(args, function(idx, val) {\n                var strBefore = newStr.substring(0, nextIdxToReplace), strAfter = newStr.substring(nextIdxToReplace + 2);\n                newStr = strBefore + val + strAfter;\n                nextIdxToReplace = newStr.indexOf(\"{}\", nextIdxToReplace + val.length);\n                if (nextIdxToReplace < 0) {\n                    return false;\n                }\n            });\n            return newStr;\n        };\n        qq.isFile = function(maybeFile) {\n            return window.File && Object.prototype.toString.call(maybeFile) === \"[object File]\";\n        };\n        qq.isFileList = function(maybeFileList) {\n            return window.FileList && Object.prototype.toString.call(maybeFileList) === \"[object FileList]\";\n        };\n        qq.isFileOrInput = function(maybeFileOrInput) {\n            return qq.isFile(maybeFileOrInput) || qq.isInput(maybeFileOrInput);\n        };\n        qq.isInput = function(maybeInput, notFile) {\n            var evaluateType = function(type) {\n                var normalizedType = type.toLowerCase();\n                if (notFile) {\n                    return normalizedType !== \"file\";\n                }\n                return normalizedType === \"file\";\n            };\n            if (window.HTMLInputElement) {\n                if (Object.prototype.toString.call(maybeInput) === \"[object HTMLInputElement]\") {\n                    if (maybeInput.type && evaluateType(maybeInput.type)) {\n                        return true;\n                    }\n                }\n            }\n            if (maybeInput.tagName) {\n                if (maybeInput.tagName.toLowerCase() === \"input\") {\n                    if (maybeInput.type && evaluateType(maybeInput.type)) {\n                        return true;\n                    }\n                }\n            }\n            return false;\n        };\n        qq.isBlob = function(maybeBlob) {\n            if (window.Blob && Object.prototype.toString.call(maybeBlob) === \"[object Blob]\") {\n                return true;\n            }\n        };\n        qq.isXhrUploadSupported = function() {\n            var input = document.createElement(\"input\");\n            input.type = \"file\";\n            return input.multiple !== undefined && typeof File !== \"undefined\" && typeof FormData !== \"undefined\" && typeof qq.createXhrInstance().upload !== \"undefined\";\n        };\n        qq.createXhrInstance = function() {\n            if (window.XMLHttpRequest) {\n                return new XMLHttpRequest();\n            }\n            try {\n                return new ActiveXObject(\"MSXML2.XMLHTTP.3.0\");\n            } catch (error) {\n                qq.log(\"Neither XHR or ActiveX are supported!\", \"error\");\n                return null;\n            }\n        };\n        qq.isFolderDropSupported = function(dataTransfer) {\n            return dataTransfer.items && dataTransfer.items.length > 0 && dataTransfer.items[0].webkitGetAsEntry;\n        };\n        qq.isFileChunkingSupported = function() {\n            return !qq.androidStock() && qq.isXhrUploadSupported() && (File.prototype.slice !== undefined || File.prototype.webkitSlice !== undefined || File.prototype.mozSlice !== undefined);\n        };\n        qq.sliceBlob = function(fileOrBlob, start, end) {\n            var slicer = fileOrBlob.slice || fileOrBlob.mozSlice || fileOrBlob.webkitSlice;\n            return slicer.call(fileOrBlob, start, end);\n        };\n        qq.arrayBufferToHex = function(buffer) {\n            var bytesAsHex = \"\", bytes = new Uint8Array(buffer);\n            qq.each(bytes, function(idx, byt) {\n                var byteAsHexStr = byt.toString(16);\n                if (byteAsHexStr.length < 2) {\n                    byteAsHexStr = \"0\" + byteAsHexStr;\n                }\n                bytesAsHex += byteAsHexStr;\n            });\n            return bytesAsHex;\n        };\n        qq.readBlobToHex = function(blob, startOffset, length) {\n            var initialBlob = qq.sliceBlob(blob, startOffset, startOffset + length), fileReader = new FileReader(), promise = new qq.Promise();\n            fileReader.onload = function() {\n                promise.success(qq.arrayBufferToHex(fileReader.result));\n            };\n            fileReader.onerror = promise.failure;\n            fileReader.readAsArrayBuffer(initialBlob);\n            return promise;\n        };\n        qq.extend = function(first, second, extendNested) {\n            qq.each(second, function(prop, val) {\n                if (extendNested && qq.isObject(val)) {\n                    if (first[prop] === undefined) {\n                        first[prop] = {};\n                    }\n                    qq.extend(first[prop], val, true);\n                } else {\n                    first[prop] = val;\n                }\n            });\n            return first;\n        };\n        qq.override = function(target, sourceFn) {\n            var super_ = {}, source = sourceFn(super_);\n            qq.each(source, function(srcPropName, srcPropVal) {\n                if (target[srcPropName] !== undefined) {\n                    super_[srcPropName] = target[srcPropName];\n                }\n                target[srcPropName] = srcPropVal;\n            });\n            return target;\n        };\n        qq.indexOf = function(arr, elt, from) {\n            if (arr.indexOf) {\n                return arr.indexOf(elt, from);\n            }\n            from = from || 0;\n            var len = arr.length;\n            if (from < 0) {\n                from += len;\n            }\n            for (;from < len; from += 1) {\n                if (arr.hasOwnProperty(from) && arr[from] === elt) {\n                    return from;\n                }\n            }\n            return -1;\n        };\n        qq.getUniqueId = function() {\n            return \"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(/[xy]/g, function(c) {\n                var r = Math.random() * 16 | 0, v = c == \"x\" ? r : r & 3 | 8;\n                return v.toString(16);\n            });\n        };\n        qq.ie = function() {\n            return navigator.userAgent.indexOf(\"MSIE\") !== -1 || navigator.userAgent.indexOf(\"Trident\") !== -1;\n        };\n        qq.ie7 = function() {\n            return navigator.userAgent.indexOf(\"MSIE 7\") !== -1;\n        };\n        qq.ie8 = function() {\n            return navigator.userAgent.indexOf(\"MSIE 8\") !== -1;\n        };\n        qq.ie10 = function() {\n            return navigator.userAgent.indexOf(\"MSIE 10\") !== -1;\n        };\n        qq.ie11 = function() {\n            return qq.ie() && navigator.userAgent.indexOf(\"rv:11\") !== -1;\n        };\n        qq.edge = function() {\n            return navigator.userAgent.indexOf(\"Edge\") >= 0;\n        };\n        qq.safari = function() {\n            return navigator.vendor !== undefined && navigator.vendor.indexOf(\"Apple\") !== -1;\n        };\n        qq.chrome = function() {\n            return navigator.vendor !== undefined && navigator.vendor.indexOf(\"Google\") !== -1;\n        };\n        qq.opera = function() {\n            return navigator.vendor !== undefined && navigator.vendor.indexOf(\"Opera\") !== -1;\n        };\n        qq.firefox = function() {\n            return !qq.edge() && !qq.ie11() && navigator.userAgent.indexOf(\"Mozilla\") !== -1 && navigator.vendor !== undefined && navigator.vendor === \"\";\n        };\n        qq.windows = function() {\n            return navigator.platform === \"Win32\";\n        };\n        qq.android = function() {\n            return navigator.userAgent.toLowerCase().indexOf(\"android\") !== -1;\n        };\n        qq.androidStock = function() {\n            return qq.android() && navigator.userAgent.toLowerCase().indexOf(\"chrome\") < 0;\n        };\n        qq.ios6 = function() {\n            return qq.ios() && navigator.userAgent.indexOf(\" OS 6_\") !== -1;\n        };\n        qq.ios7 = function() {\n            return qq.ios() && navigator.userAgent.indexOf(\" OS 7_\") !== -1;\n        };\n        qq.ios8 = function() {\n            return qq.ios() && navigator.userAgent.indexOf(\" OS 8_\") !== -1;\n        };\n        qq.ios800 = function() {\n            return qq.ios() && navigator.userAgent.indexOf(\" OS 8_0 \") !== -1;\n        };\n        qq.ios = function() {\n            return navigator.userAgent.indexOf(\"iPad\") !== -1 || navigator.userAgent.indexOf(\"iPod\") !== -1 || navigator.userAgent.indexOf(\"iPhone\") !== -1;\n        };\n        qq.iosChrome = function() {\n            return qq.ios() && navigator.userAgent.indexOf(\"CriOS\") !== -1;\n        };\n        qq.iosSafari = function() {\n            return qq.ios() && !qq.iosChrome() && navigator.userAgent.indexOf(\"Safari\") !== -1;\n        };\n        qq.iosSafariWebView = function() {\n            return qq.ios() && !qq.iosChrome() && !qq.iosSafari();\n        };\n        qq.preventDefault = function(e) {\n            if (e.preventDefault) {\n                e.preventDefault();\n            } else {\n                e.returnValue = false;\n            }\n        };\n        qq.toElement = function() {\n            var div = document.createElement(\"div\");\n            return function(html) {\n                div.innerHTML = html;\n                var element = div.firstChild;\n                div.removeChild(element);\n                return element;\n            };\n        }();\n        qq.each = function(iterableItem, callback) {\n            var keyOrIndex, retVal;\n            if (iterableItem) {\n                if (window.Storage && iterableItem.constructor === window.Storage) {\n                    for (keyOrIndex = 0; keyOrIndex < iterableItem.length; keyOrIndex++) {\n                        retVal = callback(iterableItem.key(keyOrIndex), iterableItem.getItem(iterableItem.key(keyOrIndex)));\n                        if (retVal === false) {\n                            break;\n                        }\n                    }\n                } else if (qq.isArray(iterableItem) || qq.isItemList(iterableItem) || qq.isNodeList(iterableItem)) {\n                    for (keyOrIndex = 0; keyOrIndex < iterableItem.length; keyOrIndex++) {\n                        retVal = callback(keyOrIndex, iterableItem[keyOrIndex]);\n                        if (retVal === false) {\n                            break;\n                        }\n                    }\n                } else if (qq.isString(iterableItem)) {\n                    for (keyOrIndex = 0; keyOrIndex < iterableItem.length; keyOrIndex++) {\n                        retVal = callback(keyOrIndex, iterableItem.charAt(keyOrIndex));\n                        if (retVal === false) {\n                            break;\n                        }\n                    }\n                } else {\n                    for (keyOrIndex in iterableItem) {\n                        if (Object.prototype.hasOwnProperty.call(iterableItem, keyOrIndex)) {\n                            retVal = callback(keyOrIndex, iterableItem[keyOrIndex]);\n                            if (retVal === false) {\n                                break;\n                            }\n                        }\n                    }\n                }\n            }\n        };\n        qq.bind = function(oldFunc, context) {\n            if (qq.isFunction(oldFunc)) {\n                var args = Array.prototype.slice.call(arguments, 2);\n                return function() {\n                    var newArgs = qq.extend([], args);\n                    if (arguments.length) {\n                        newArgs = newArgs.concat(Array.prototype.slice.call(arguments));\n                    }\n                    return oldFunc.apply(context, newArgs);\n                };\n            }\n            throw new Error(\"first parameter must be a function!\");\n        };\n        qq.obj2url = function(obj, temp, prefixDone) {\n            var uristrings = [], prefix = \"&\", add = function(nextObj, i) {\n                var nextTemp = temp ? /\\[\\]$/.test(temp) ? temp : temp + \"[\" + i + \"]\" : i;\n                if (nextTemp !== \"undefined\" && i !== \"undefined\") {\n                    uristrings.push(typeof nextObj === \"object\" ? qq.obj2url(nextObj, nextTemp, true) : Object.prototype.toString.call(nextObj) === \"[object Function]\" ? encodeURIComponent(nextTemp) + \"=\" + encodeURIComponent(nextObj()) : encodeURIComponent(nextTemp) + \"=\" + encodeURIComponent(nextObj));\n                }\n            };\n            if (!prefixDone && temp) {\n                prefix = /\\?/.test(temp) ? /\\?$/.test(temp) ? \"\" : \"&\" : \"?\";\n                uristrings.push(temp);\n                uristrings.push(qq.obj2url(obj));\n            } else if (Object.prototype.toString.call(obj) === \"[object Array]\" && typeof obj !== \"undefined\") {\n                qq.each(obj, function(idx, val) {\n                    add(val, idx);\n                });\n            } else if (typeof obj !== \"undefined\" && obj !== null && typeof obj === \"object\") {\n                qq.each(obj, function(prop, val) {\n                    add(val, prop);\n                });\n            } else {\n                uristrings.push(encodeURIComponent(temp) + \"=\" + encodeURIComponent(obj));\n            }\n            if (temp) {\n                return uristrings.join(prefix);\n            } else {\n                return uristrings.join(prefix).replace(/^&/, \"\").replace(/%20/g, \"+\");\n            }\n        };\n        qq.obj2FormData = function(obj, formData, arrayKeyName) {\n            if (!formData) {\n                formData = new FormData();\n            }\n            qq.each(obj, function(key, val) {\n                key = arrayKeyName ? arrayKeyName + \"[\" + key + \"]\" : key;\n                if (qq.isObject(val)) {\n                    qq.obj2FormData(val, formData, key);\n                } else if (qq.isFunction(val)) {\n                    formData.append(key, val());\n                } else {\n                    formData.append(key, val);\n                }\n            });\n            return formData;\n        };\n        qq.obj2Inputs = function(obj, form) {\n            var input;\n            if (!form) {\n                form = document.createElement(\"form\");\n            }\n            qq.obj2FormData(obj, {\n                append: function(key, val) {\n                    input = document.createElement(\"input\");\n                    input.setAttribute(\"name\", key);\n                    input.setAttribute(\"value\", val);\n                    form.appendChild(input);\n                }\n            });\n            return form;\n        };\n        qq.parseJson = function(json) {\n            if (window.JSON && qq.isFunction(JSON.parse)) {\n                return JSON.parse(json);\n            } else {\n                return eval(\"(\" + json + \")\");\n            }\n        };\n        qq.getExtension = function(filename) {\n            var extIdx = filename.lastIndexOf(\".\") + 1;\n            if (extIdx > 0) {\n                return filename.substr(extIdx, filename.length - extIdx);\n            }\n        };\n        qq.getFilename = function(blobOrFileInput) {\n            if (qq.isInput(blobOrFileInput)) {\n                return blobOrFileInput.value.replace(/.*(\\/|\\\\)/, \"\");\n            } else if (qq.isFile(blobOrFileInput)) {\n                if (blobOrFileInput.fileName !== null && blobOrFileInput.fileName !== undefined) {\n                    return blobOrFileInput.fileName;\n                }\n            }\n            return blobOrFileInput.name;\n        };\n        qq.DisposeSupport = function() {\n            var disposers = [];\n            return {\n                dispose: function() {\n                    var disposer;\n                    do {\n                        disposer = disposers.shift();\n                        if (disposer) {\n                            disposer();\n                        }\n                    } while (disposer);\n                },\n                attach: function() {\n                    var args = arguments;\n                    this.addDisposer(qq(args[0]).attach.apply(this, Array.prototype.slice.call(arguments, 1)));\n                },\n                addDisposer: function(disposeFunction) {\n                    disposers.push(disposeFunction);\n                }\n            };\n        };\n    })();\n    (function() {\n        \"use strict\";\n        if (typeof define === \"function\" && define.amd) {\n            define(function() {\n                return qq;\n            });\n        } else if (typeof module !== \"undefined\" && module.exports) {\n            module.exports = qq;\n        } else {\n            global.qq = qq;\n        }\n    })();\n    (function() {\n        \"use strict\";\n        qq.Error = function(message) {\n            this.message = \"[Fine Uploader \" + qq.version + \"] \" + message;\n        };\n        qq.Error.prototype = new Error();\n    })();\n    qq.version = \"5.16.2\";\n    qq.supportedFeatures = function() {\n        \"use strict\";\n        var supportsUploading, supportsUploadingBlobs, supportsFileDrop, supportsAjaxFileUploading, supportsFolderDrop, supportsChunking, supportsResume, supportsUploadViaPaste, supportsUploadCors, supportsDeleteFileXdr, supportsDeleteFileCorsXhr, supportsDeleteFileCors, supportsFolderSelection, supportsImagePreviews, supportsUploadProgress;\n        function testSupportsFileInputElement() {\n            var supported = true, tempInput;\n            try {\n                tempInput = document.createElement(\"input\");\n                tempInput.type = \"file\";\n                qq(tempInput).hide();\n                if (tempInput.disabled) {\n                    supported = false;\n                }\n            } catch (ex) {\n                supported = false;\n            }\n            return supported;\n        }\n        function isChrome14OrHigher() {\n            return (qq.chrome() || qq.opera()) && navigator.userAgent.match(/Chrome\\/[1][4-9]|Chrome\\/[2-9][0-9]/) !== undefined;\n        }\n        function isCrossOriginXhrSupported() {\n            if (window.XMLHttpRequest) {\n                var xhr = qq.createXhrInstance();\n                return xhr.withCredentials !== undefined;\n            }\n            return false;\n        }\n        function isXdrSupported() {\n            return window.XDomainRequest !== undefined;\n        }\n        function isCrossOriginAjaxSupported() {\n            if (isCrossOriginXhrSupported()) {\n                return true;\n            }\n            return isXdrSupported();\n        }\n        function isFolderSelectionSupported() {\n            return document.createElement(\"input\").webkitdirectory !== undefined;\n        }\n        function isLocalStorageSupported() {\n            try {\n                return !!window.localStorage && qq.isFunction(window.localStorage.setItem);\n            } catch (error) {\n                return false;\n            }\n        }\n        function isDragAndDropSupported() {\n            var span = document.createElement(\"span\");\n            return (\"draggable\" in span || \"ondragstart\" in span && \"ondrop\" in span) && !qq.android() && !qq.ios();\n        }\n        supportsUploading = testSupportsFileInputElement();\n        supportsAjaxFileUploading = supportsUploading && qq.isXhrUploadSupported();\n        supportsUploadingBlobs = supportsAjaxFileUploading && !qq.androidStock();\n        supportsFileDrop = supportsAjaxFileUploading && isDragAndDropSupported();\n        supportsFolderDrop = supportsFileDrop && function() {\n            var input = document.createElement(\"input\");\n            input.type = \"file\";\n            return !!(\"webkitdirectory\" in (input || document.querySelectorAll(\"input[type=file]\")[0]));\n        }();\n        supportsChunking = supportsAjaxFileUploading && qq.isFileChunkingSupported();\n        supportsResume = supportsAjaxFileUploading && supportsChunking && isLocalStorageSupported();\n        supportsUploadViaPaste = supportsAjaxFileUploading && isChrome14OrHigher();\n        supportsUploadCors = supportsUploading && (window.postMessage !== undefined || supportsAjaxFileUploading);\n        supportsDeleteFileCorsXhr = isCrossOriginXhrSupported();\n        supportsDeleteFileXdr = isXdrSupported();\n        supportsDeleteFileCors = isCrossOriginAjaxSupported();\n        supportsFolderSelection = isFolderSelectionSupported();\n        supportsImagePreviews = supportsAjaxFileUploading && window.FileReader !== undefined;\n        supportsUploadProgress = function() {\n            if (supportsAjaxFileUploading) {\n                return !qq.androidStock() && !qq.iosChrome();\n            }\n            return false;\n        }();\n        return {\n            ajaxUploading: supportsAjaxFileUploading,\n            blobUploading: supportsUploadingBlobs,\n            canDetermineSize: supportsAjaxFileUploading,\n            chunking: supportsChunking,\n            deleteFileCors: supportsDeleteFileCors,\n            deleteFileCorsXdr: supportsDeleteFileXdr,\n            deleteFileCorsXhr: supportsDeleteFileCorsXhr,\n            dialogElement: !!window.HTMLDialogElement,\n            fileDrop: supportsFileDrop,\n            folderDrop: supportsFolderDrop,\n            folderSelection: supportsFolderSelection,\n            imagePreviews: supportsImagePreviews,\n            imageValidation: supportsImagePreviews,\n            itemSizeValidation: supportsAjaxFileUploading,\n            pause: supportsChunking,\n            progressBar: supportsUploadProgress,\n            resume: supportsResume,\n            scaling: supportsImagePreviews && supportsUploadingBlobs,\n            tiffPreviews: qq.safari(),\n            unlimitedScaledImageSize: !qq.ios(),\n            uploading: supportsUploading,\n            uploadCors: supportsUploadCors,\n            uploadCustomHeaders: supportsAjaxFileUploading,\n            uploadNonMultipart: supportsAjaxFileUploading,\n            uploadViaPaste: supportsUploadViaPaste\n        };\n    }();\n    qq.isGenericPromise = function(maybePromise) {\n        \"use strict\";\n        return !!(maybePromise && maybePromise.then && qq.isFunction(maybePromise.then));\n    };\n    qq.Promise = function() {\n        \"use strict\";\n        var successArgs, failureArgs, successCallbacks = [], failureCallbacks = [], doneCallbacks = [], state = 0;\n        qq.extend(this, {\n            then: function(onSuccess, onFailure) {\n                if (state === 0) {\n                    if (onSuccess) {\n                        successCallbacks.push(onSuccess);\n                    }\n                    if (onFailure) {\n                        failureCallbacks.push(onFailure);\n                    }\n                } else if (state === -1) {\n                    onFailure && onFailure.apply(null, failureArgs);\n                } else if (onSuccess) {\n                    onSuccess.apply(null, successArgs);\n                }\n                return this;\n            },\n            done: function(callback) {\n                if (state === 0) {\n                    doneCallbacks.push(callback);\n                } else {\n                    callback.apply(null, failureArgs === undefined ? successArgs : failureArgs);\n                }\n                return this;\n            },\n            success: function() {\n                state = 1;\n                successArgs = arguments;\n                if (successCallbacks.length) {\n                    qq.each(successCallbacks, function(idx, callback) {\n                        callback.apply(null, successArgs);\n                    });\n                }\n                if (doneCallbacks.length) {\n                    qq.each(doneCallbacks, function(idx, callback) {\n                        callback.apply(null, successArgs);\n                    });\n                }\n                return this;\n            },\n            failure: function() {\n                state = -1;\n                failureArgs = arguments;\n                if (failureCallbacks.length) {\n                    qq.each(failureCallbacks, function(idx, callback) {\n                        callback.apply(null, failureArgs);\n                    });\n                }\n                if (doneCallbacks.length) {\n                    qq.each(doneCallbacks, function(idx, callback) {\n                        callback.apply(null, failureArgs);\n                    });\n                }\n                return this;\n            }\n        });\n    };\n    qq.BlobProxy = function(referenceBlob, onCreate) {\n        \"use strict\";\n        qq.extend(this, {\n            referenceBlob: referenceBlob,\n            create: function() {\n                return onCreate(referenceBlob);\n            }\n        });\n    };\n    qq.UploadButton = function(o) {\n        \"use strict\";\n        var self = this, disposeSupport = new qq.DisposeSupport(), options = {\n            acceptFiles: null,\n            element: null,\n            focusClass: \"qq-upload-button-focus\",\n            folders: false,\n            hoverClass: \"qq-upload-button-hover\",\n            ios8BrowserCrashWorkaround: false,\n            multiple: false,\n            name: \"qqfile\",\n            onChange: function(input) {},\n            title: null\n        }, input, buttonId;\n        qq.extend(options, o);\n        buttonId = qq.getUniqueId();\n        function createInput() {\n            var input = document.createElement(\"input\");\n            input.setAttribute(qq.UploadButton.BUTTON_ID_ATTR_NAME, buttonId);\n            input.setAttribute(\"title\", options.title);\n            self.setMultiple(options.multiple, input);\n            if (options.folders && qq.supportedFeatures.folderSelection) {\n                input.setAttribute(\"webkitdirectory\", \"\");\n            }\n            if (options.acceptFiles) {\n                input.setAttribute(\"accept\", options.acceptFiles);\n            }\n            input.setAttribute(\"type\", \"file\");\n            input.setAttribute(\"name\", options.name);\n            qq(input).css({\n                position: \"absolute\",\n                right: 0,\n                top: 0,\n                fontFamily: \"Arial\",\n                fontSize: qq.ie() && !qq.ie8() ? \"3500px\" : \"118px\",\n                margin: 0,\n                padding: 0,\n                cursor: \"pointer\",\n                opacity: 0\n            });\n            !qq.ie7() && qq(input).css({\n                height: \"100%\"\n            });\n            options.element.appendChild(input);\n            disposeSupport.attach(input, \"change\", function() {\n                options.onChange(input);\n            });\n            disposeSupport.attach(input, \"mouseover\", function() {\n                qq(options.element).addClass(options.hoverClass);\n            });\n            disposeSupport.attach(input, \"mouseout\", function() {\n                qq(options.element).removeClass(options.hoverClass);\n            });\n            disposeSupport.attach(input, \"focus\", function() {\n                qq(options.element).addClass(options.focusClass);\n            });\n            disposeSupport.attach(input, \"blur\", function() {\n                qq(options.element).removeClass(options.focusClass);\n            });\n            return input;\n        }\n        qq(options.element).css({\n            position: \"relative\",\n            overflow: \"hidden\",\n            direction: \"ltr\"\n        });\n        qq.extend(this, {\n            getInput: function() {\n                return input;\n            },\n            getButtonId: function() {\n                return buttonId;\n            },\n            setMultiple: function(isMultiple, optInput) {\n                var input = optInput || this.getInput();\n                if (options.ios8BrowserCrashWorkaround && qq.ios8() && (qq.iosChrome() || qq.iosSafariWebView())) {\n                    input.setAttribute(\"multiple\", \"\");\n                } else {\n                    if (isMultiple) {\n                        input.setAttribute(\"multiple\", \"\");\n                    } else {\n                        input.removeAttribute(\"multiple\");\n                    }\n                }\n            },\n            setAcceptFiles: function(acceptFiles) {\n                if (acceptFiles !== options.acceptFiles) {\n                    input.setAttribute(\"accept\", acceptFiles);\n                }\n            },\n            reset: function() {\n                if (input.parentNode) {\n                    qq(input).remove();\n                }\n                qq(options.element).removeClass(options.focusClass);\n                input = null;\n                input = createInput();\n            }\n        });\n        input = createInput();\n    };\n    qq.UploadButton.BUTTON_ID_ATTR_NAME = \"qq-button-id\";\n    qq.UploadData = function(uploaderProxy) {\n        \"use strict\";\n        var data = [], byUuid = {}, byStatus = {}, byProxyGroupId = {}, byBatchId = {};\n        function getDataByIds(idOrIds) {\n            if (qq.isArray(idOrIds)) {\n                var entries = [];\n                qq.each(idOrIds, function(idx, id) {\n                    entries.push(data[id]);\n                });\n                return entries;\n            }\n            return data[idOrIds];\n        }\n        function getDataByUuids(uuids) {\n            if (qq.isArray(uuids)) {\n                var entries = [];\n                qq.each(uuids, function(idx, uuid) {\n                    entries.push(data[byUuid[uuid]]);\n                });\n                return entries;\n            }\n            return data[byUuid[uuids]];\n        }\n        function getDataByStatus(status) {\n            var statusResults = [], statuses = [].concat(status);\n            qq.each(statuses, function(index, statusEnum) {\n                var statusResultIndexes = byStatus[statusEnum];\n                if (statusResultIndexes !== undefined) {\n                    qq.each(statusResultIndexes, function(i, dataIndex) {\n                        statusResults.push(data[dataIndex]);\n                    });\n                }\n            });\n            return statusResults;\n        }\n        qq.extend(this, {\n            addFile: function(spec) {\n                var status = spec.status || qq.status.SUBMITTING, id = data.push({\n                    name: spec.name,\n                    originalName: spec.name,\n                    uuid: spec.uuid,\n                    size: spec.size == null ? -1 : spec.size,\n                    status: status,\n                    file: spec.file\n                }) - 1;\n                if (spec.batchId) {\n                    data[id].batchId = spec.batchId;\n                    if (byBatchId[spec.batchId] === undefined) {\n                        byBatchId[spec.batchId] = [];\n                    }\n                    byBatchId[spec.batchId].push(id);\n                }\n                if (spec.proxyGroupId) {\n                    data[id].proxyGroupId = spec.proxyGroupId;\n                    if (byProxyGroupId[spec.proxyGroupId] === undefined) {\n                        byProxyGroupId[spec.proxyGroupId] = [];\n                    }\n                    byProxyGroupId[spec.proxyGroupId].push(id);\n                }\n                data[id].id = id;\n                byUuid[spec.uuid] = id;\n                if (byStatus[status] === undefined) {\n                    byStatus[status] = [];\n                }\n                byStatus[status].push(id);\n                spec.onBeforeStatusChange && spec.onBeforeStatusChange(id);\n                uploaderProxy.onStatusChange(id, null, status);\n                return id;\n            },\n            retrieve: function(optionalFilter) {\n                if (qq.isObject(optionalFilter) && data.length) {\n                    if (optionalFilter.id !== undefined) {\n                        return getDataByIds(optionalFilter.id);\n                    } else if (optionalFilter.uuid !== undefined) {\n                        return getDataByUuids(optionalFilter.uuid);\n                    } else if (optionalFilter.status) {\n                        return getDataByStatus(optionalFilter.status);\n                    }\n                } else {\n                    return qq.extend([], data, true);\n                }\n            },\n            removeFileRef: function(id) {\n                var record = getDataByIds(id);\n                if (record) {\n                    delete record.file;\n                }\n            },\n            reset: function() {\n                data = [];\n                byUuid = {};\n                byStatus = {};\n                byBatchId = {};\n            },\n            setStatus: function(id, newStatus) {\n                var oldStatus = data[id].status, byStatusOldStatusIndex = qq.indexOf(byStatus[oldStatus], id);\n                byStatus[oldStatus].splice(byStatusOldStatusIndex, 1);\n                data[id].status = newStatus;\n                if (byStatus[newStatus] === undefined) {\n                    byStatus[newStatus] = [];\n                }\n                byStatus[newStatus].push(id);\n                uploaderProxy.onStatusChange(id, oldStatus, newStatus);\n            },\n            uuidChanged: function(id, newUuid) {\n                var oldUuid = data[id].uuid;\n                data[id].uuid = newUuid;\n                byUuid[newUuid] = id;\n                delete byUuid[oldUuid];\n            },\n            updateName: function(id, newName) {\n                data[id].name = newName;\n            },\n            updateSize: function(id, newSize) {\n                data[id].size = newSize;\n            },\n            setParentId: function(targetId, parentId) {\n                data[targetId].parentId = parentId;\n            },\n            getIdsInProxyGroup: function(id) {\n                var proxyGroupId = data[id].proxyGroupId;\n                if (proxyGroupId) {\n                    return byProxyGroupId[proxyGroupId];\n                }\n                return [];\n            },\n            getIdsInBatch: function(id) {\n                var batchId = data[id].batchId;\n                return byBatchId[batchId];\n            }\n        });\n    };\n    qq.status = {\n        SUBMITTING: \"submitting\",\n        SUBMITTED: \"submitted\",\n        REJECTED: \"rejected\",\n        QUEUED: \"queued\",\n        CANCELED: \"canceled\",\n        PAUSED: \"paused\",\n        UPLOADING: \"uploading\",\n        UPLOAD_FINALIZING: \"upload finalizing\",\n        UPLOAD_RETRYING: \"retrying upload\",\n        UPLOAD_SUCCESSFUL: \"upload successful\",\n        UPLOAD_FAILED: \"upload failed\",\n        DELETE_FAILED: \"delete failed\",\n        DELETING: \"deleting\",\n        DELETED: \"deleted\"\n    };\n    (function() {\n        \"use strict\";\n        qq.basePublicApi = {\n            addBlobs: function(blobDataOrArray, params, endpoint) {\n                this.addFiles(blobDataOrArray, params, endpoint);\n            },\n            addInitialFiles: function(cannedFileList) {\n                var self = this;\n                qq.each(cannedFileList, function(index, cannedFile) {\n                    self._addCannedFile(cannedFile);\n                });\n            },\n            addFiles: function(data, params, endpoint) {\n                this._maybeHandleIos8SafariWorkaround();\n                var batchId = this._storedIds.length === 0 ? qq.getUniqueId() : this._currentBatchId, processBlob = qq.bind(function(blob) {\n                    this._handleNewFile({\n                        blob: blob,\n                        name: this._options.blobs.defaultName\n                    }, batchId, verifiedFiles);\n                }, this), processBlobData = qq.bind(function(blobData) {\n                    this._handleNewFile(blobData, batchId, verifiedFiles);\n                }, this), processCanvas = qq.bind(function(canvas) {\n                    var blob = qq.canvasToBlob(canvas);\n                    this._handleNewFile({\n                        blob: blob,\n                        name: this._options.blobs.defaultName + \".png\"\n                    }, batchId, verifiedFiles);\n                }, this), processCanvasData = qq.bind(function(canvasData) {\n                    var normalizedQuality = canvasData.quality && canvasData.quality / 100, blob = qq.canvasToBlob(canvasData.canvas, canvasData.type, normalizedQuality);\n                    this._handleNewFile({\n                        blob: blob,\n                        name: canvasData.name\n                    }, batchId, verifiedFiles);\n                }, this), processFileOrInput = qq.bind(function(fileOrInput) {\n                    if (qq.isInput(fileOrInput) && qq.supportedFeatures.ajaxUploading) {\n                        var files = Array.prototype.slice.call(fileOrInput.files), self = this;\n                        qq.each(files, function(idx, file) {\n                            self._handleNewFile(file, batchId, verifiedFiles);\n                        });\n                    } else {\n                        this._handleNewFile(fileOrInput, batchId, verifiedFiles);\n                    }\n                }, this), normalizeData = function() {\n                    if (qq.isFileList(data)) {\n                        data = Array.prototype.slice.call(data);\n                    }\n                    data = [].concat(data);\n                }, self = this, verifiedFiles = [];\n                this._currentBatchId = batchId;\n                if (data) {\n                    normalizeData();\n                    qq.each(data, function(idx, fileContainer) {\n                        if (qq.isFileOrInput(fileContainer)) {\n                            processFileOrInput(fileContainer);\n                        } else if (qq.isBlob(fileContainer)) {\n                            processBlob(fileContainer);\n                        } else if (qq.isObject(fileContainer)) {\n                            if (fileContainer.blob && fileContainer.name) {\n                                processBlobData(fileContainer);\n                            } else if (fileContainer.canvas && fileContainer.name) {\n                                processCanvasData(fileContainer);\n                            }\n                        } else if (fileContainer.tagName && fileContainer.tagName.toLowerCase() === \"canvas\") {\n                            processCanvas(fileContainer);\n                        } else {\n                            self.log(fileContainer + \" is not a valid file container!  Ignoring!\", \"warn\");\n                        }\n                    });\n                    this.log(\"Received \" + verifiedFiles.length + \" files.\");\n                    this._prepareItemsForUpload(verifiedFiles, params, endpoint);\n                }\n            },\n            cancel: function(id) {\n                var uploadData = this._uploadData.retrieve({\n                    id: id\n                });\n                if (uploadData && uploadData.status === qq.status.UPLOAD_FINALIZING) {\n                    this.log(qq.format(\"Ignoring cancel for file ID {} ({}).  Finalizing upload.\", id, this.getName(id)), \"error\");\n                } else {\n                    this._handler.cancel(id);\n                }\n            },\n            cancelAll: function() {\n                var storedIdsCopy = [], self = this;\n                qq.extend(storedIdsCopy, this._storedIds);\n                qq.each(storedIdsCopy, function(idx, storedFileId) {\n                    self.cancel(storedFileId);\n                });\n                this._handler.cancelAll();\n            },\n            clearStoredFiles: function() {\n                this._storedIds = [];\n            },\n            continueUpload: function(id) {\n                var uploadData = this._uploadData.retrieve({\n                    id: id\n                });\n                if (!qq.supportedFeatures.pause || !this._options.chunking.enabled) {\n                    return false;\n                }\n                if (uploadData.status === qq.status.PAUSED) {\n                    this.log(qq.format(\"Paused file ID {} ({}) will be continued.  Not paused.\", id, this.getName(id)));\n                    this._uploadFile(id);\n                    return true;\n                } else {\n                    this.log(qq.format(\"Ignoring continue for file ID {} ({}).  Not paused.\", id, this.getName(id)), \"error\");\n                }\n                return false;\n            },\n            deleteFile: function(id) {\n                return this._onSubmitDelete(id);\n            },\n            doesExist: function(fileOrBlobId) {\n                return this._handler.isValid(fileOrBlobId);\n            },\n            drawThumbnail: function(fileId, imgOrCanvas, maxSize, fromServer, customResizeFunction) {\n                var promiseToReturn = new qq.Promise(), fileOrUrl, options;\n                if (this._imageGenerator) {\n                    fileOrUrl = this._thumbnailUrls[fileId];\n                    options = {\n                        customResizeFunction: customResizeFunction,\n                        maxSize: maxSize > 0 ? maxSize : null,\n                        scale: maxSize > 0\n                    };\n                    if (!fromServer && qq.supportedFeatures.imagePreviews) {\n                        fileOrUrl = this.getFile(fileId);\n                    }\n                    if (fileOrUrl == null) {\n                        promiseToReturn.failure({\n                            container: imgOrCanvas,\n                            error: \"File or URL not found.\"\n                        });\n                    } else {\n                        this._imageGenerator.generate(fileOrUrl, imgOrCanvas, options).then(function success(modifiedContainer) {\n                            promiseToReturn.success(modifiedContainer);\n                        }, function failure(container, reason) {\n                            promiseToReturn.failure({\n                                container: container,\n                                error: reason || \"Problem generating thumbnail\"\n                            });\n                        });\n                    }\n                } else {\n                    promiseToReturn.failure({\n                        container: imgOrCanvas,\n                        error: \"Missing image generator module\"\n                    });\n                }\n                return promiseToReturn;\n            },\n            getButton: function(fileId) {\n                return this._getButton(this._buttonIdsForFileIds[fileId]);\n            },\n            getEndpoint: function(fileId) {\n                return this._endpointStore.get(fileId);\n            },\n            getFile: function(fileOrBlobId) {\n                var file = this._handler.getFile(fileOrBlobId);\n                var uploadDataRecord;\n                if (!file) {\n                    uploadDataRecord = this._uploadData.retrieve({\n                        id: fileOrBlobId\n                    });\n                    if (uploadDataRecord) {\n                        file = uploadDataRecord.file;\n                    }\n                }\n                return file || null;\n            },\n            getInProgress: function() {\n                return this._uploadData.retrieve({\n                    status: [ qq.status.UPLOADING, qq.status.UPLOAD_RETRYING, qq.status.QUEUED ]\n                }).length;\n            },\n            getName: function(id) {\n                return this._uploadData.retrieve({\n                    id: id\n                }).name;\n            },\n            getParentId: function(id) {\n                var uploadDataEntry = this.getUploads({\n                    id: id\n                }), parentId = null;\n                if (uploadDataEntry) {\n                    if (uploadDataEntry.parentId !== undefined) {\n                        parentId = uploadDataEntry.parentId;\n                    }\n                }\n                return parentId;\n            },\n            getResumableFilesData: function() {\n                return this._handler.getResumableFilesData();\n            },\n            getSize: function(id) {\n                return this._uploadData.retrieve({\n                    id: id\n                }).size;\n            },\n            getNetUploads: function() {\n                return this._netUploaded;\n            },\n            getRemainingAllowedItems: function() {\n                var allowedItems = this._currentItemLimit;\n                if (allowedItems > 0) {\n                    return allowedItems - this._netUploadedOrQueued;\n                }\n                return null;\n            },\n            getUploads: function(optionalFilter) {\n                return this._uploadData.retrieve(optionalFilter);\n            },\n            getUuid: function(id) {\n                return this._uploadData.retrieve({\n                    id: id\n                }).uuid;\n            },\n            isResumable: function(id) {\n                return this._handler.hasResumeRecord(id);\n            },\n            log: function(str, level) {\n                if (this._options.debug && (!level || level === \"info\")) {\n                    qq.log(\"[Fine Uploader \" + qq.version + \"] \" + str);\n                } else if (level && level !== \"info\") {\n                    qq.log(\"[Fine Uploader \" + qq.version + \"] \" + str, level);\n                }\n            },\n            pauseUpload: function(id) {\n                var uploadData = this._uploadData.retrieve({\n                    id: id\n                });\n                if (!qq.supportedFeatures.pause || !this._options.chunking.enabled) {\n                    return false;\n                }\n                if (qq.indexOf([ qq.status.UPLOADING, qq.status.UPLOAD_RETRYING ], uploadData.status) >= 0) {\n                    if (this._handler.pause(id)) {\n                        this._uploadData.setStatus(id, qq.status.PAUSED);\n                        return true;\n                    } else {\n                        this.log(qq.format(\"Unable to pause file ID {} ({}).\", id, this.getName(id)), \"error\");\n                    }\n                } else {\n                    this.log(qq.format(\"Ignoring pause for file ID {} ({}).  Not in progress.\", id, this.getName(id)), \"error\");\n                }\n                return false;\n            },\n            removeFileRef: function(id) {\n                this._handler.expunge(id);\n                this._uploadData.removeFileRef(id);\n            },\n            reset: function() {\n                this.log(\"Resetting uploader...\");\n                this._handler.reset();\n                this._storedIds = [];\n                this._autoRetries = [];\n                this._retryTimeouts = [];\n                this._preventRetries = [];\n                this._thumbnailUrls = [];\n                qq.each(this._buttons, function(idx, button) {\n                    button.reset();\n                });\n                this._paramsStore.reset();\n                this._endpointStore.reset();\n                this._netUploadedOrQueued = 0;\n                this._netUploaded = 0;\n                this._uploadData.reset();\n                this._buttonIdsForFileIds = [];\n                this._pasteHandler && this._pasteHandler.reset();\n                this._options.session.refreshOnReset && this._refreshSessionData();\n                this._succeededSinceLastAllComplete = [];\n                this._failedSinceLastAllComplete = [];\n                this._totalProgress && this._totalProgress.reset();\n                this._customResumeDataStore.reset();\n            },\n            retry: function(id) {\n                return this._manualRetry(id);\n            },\n            scaleImage: function(id, specs) {\n                var self = this;\n                return qq.Scaler.prototype.scaleImage(id, specs, {\n                    log: qq.bind(self.log, self),\n                    getFile: qq.bind(self.getFile, self),\n                    uploadData: self._uploadData\n                });\n            },\n            setCustomHeaders: function(headers, id) {\n                this._customHeadersStore.set(headers, id);\n            },\n            setCustomResumeData: function(id, data) {\n                this._customResumeDataStore.set(data, id);\n            },\n            setDeleteFileCustomHeaders: function(headers, id) {\n                this._deleteFileCustomHeadersStore.set(headers, id);\n            },\n            setDeleteFileEndpoint: function(endpoint, id) {\n                this._deleteFileEndpointStore.set(endpoint, id);\n            },\n            setDeleteFileParams: function(params, id) {\n                this._deleteFileParamsStore.set(params, id);\n            },\n            setEndpoint: function(endpoint, id) {\n                this._endpointStore.set(endpoint, id);\n            },\n            setForm: function(elementOrId) {\n                this._updateFormSupportAndParams(elementOrId);\n            },\n            setItemLimit: function(newItemLimit) {\n                this._currentItemLimit = newItemLimit;\n            },\n            setName: function(id, newName) {\n                this._uploadData.updateName(id, newName);\n            },\n            setParams: function(params, id) {\n                this._paramsStore.set(params, id);\n            },\n            setUuid: function(id, newUuid) {\n                return this._uploadData.uuidChanged(id, newUuid);\n            },\n            setStatus: function(id, newStatus) {\n                var fileRecord = this.getUploads({\n                    id: id\n                });\n                if (!fileRecord) {\n                    throw new qq.Error(id + \" is not a valid file ID.\");\n                }\n                switch (newStatus) {\n                  case qq.status.DELETED:\n                    this._onDeleteComplete(id, null, false);\n                    break;\n\n                  case qq.status.DELETE_FAILED:\n                    this._onDeleteComplete(id, null, true);\n                    break;\n\n                  default:\n                    var errorMessage = \"Method setStatus called on '\" + name + \"' not implemented yet for \" + newStatus;\n                    this.log(errorMessage);\n                    throw new qq.Error(errorMessage);\n                }\n            },\n            uploadStoredFiles: function() {\n                if (this._storedIds.length === 0) {\n                    this._itemError(\"noFilesError\");\n                } else {\n                    this._uploadStoredFiles();\n                }\n            }\n        };\n        qq.basePrivateApi = {\n            _addCannedFile: function(sessionData) {\n                var self = this;\n                return this._uploadData.addFile({\n                    uuid: sessionData.uuid,\n                    name: sessionData.name,\n                    size: sessionData.size,\n                    status: qq.status.UPLOAD_SUCCESSFUL,\n                    onBeforeStatusChange: function(id) {\n                        sessionData.deleteFileEndpoint && self.setDeleteFileEndpoint(sessionData.deleteFileEndpoint, id);\n                        sessionData.deleteFileParams && self.setDeleteFileParams(sessionData.deleteFileParams, id);\n                        if (sessionData.thumbnailUrl) {\n                            self._thumbnailUrls[id] = sessionData.thumbnailUrl;\n                        }\n                        self._netUploaded++;\n                        self._netUploadedOrQueued++;\n                    }\n                });\n            },\n            _annotateWithButtonId: function(file, associatedInput) {\n                if (qq.isFile(file)) {\n                    file.qqButtonId = this._getButtonId(associatedInput);\n                }\n            },\n            _batchError: function(message) {\n                this._options.callbacks.onError(null, null, message, undefined);\n            },\n            _createDeleteHandler: function() {\n                var self = this;\n                return new qq.DeleteFileAjaxRequester({\n                    method: this._options.deleteFile.method.toUpperCase(),\n                    maxConnections: this._options.maxConnections,\n                    uuidParamName: this._options.request.uuidName,\n                    customHeaders: this._deleteFileCustomHeadersStore,\n                    paramsStore: this._deleteFileParamsStore,\n                    endpointStore: this._deleteFileEndpointStore,\n                    cors: this._options.cors,\n                    log: qq.bind(self.log, self),\n                    onDelete: function(id) {\n                        self._onDelete(id);\n                        self._options.callbacks.onDelete(id);\n                    },\n                    onDeleteComplete: function(id, xhrOrXdr, isError) {\n                        self._onDeleteComplete(id, xhrOrXdr, isError);\n                        self._options.callbacks.onDeleteComplete(id, xhrOrXdr, isError);\n                    }\n                });\n            },\n            _createPasteHandler: function() {\n                var self = this;\n                return new qq.PasteSupport({\n                    targetElement: this._options.paste.targetElement,\n                    callbacks: {\n                        log: qq.bind(self.log, self),\n                        pasteReceived: function(blob) {\n                            self._handleCheckedCallback({\n                                name: \"onPasteReceived\",\n                                callback: qq.bind(self._options.callbacks.onPasteReceived, self, blob),\n                                onSuccess: qq.bind(self._handlePasteSuccess, self, blob),\n                                identifier: \"pasted image\"\n                            });\n                        }\n                    }\n                });\n            },\n            _createStore: function(initialValue, _readOnlyValues_) {\n                var store = {}, catchall = initialValue, perIdReadOnlyValues = {}, readOnlyValues = _readOnlyValues_, copy = function(orig) {\n                    if (qq.isObject(orig)) {\n                        return qq.extend({}, orig);\n                    }\n                    return orig;\n                }, getReadOnlyValues = function() {\n                    if (qq.isFunction(readOnlyValues)) {\n                        return readOnlyValues();\n                    }\n                    return readOnlyValues;\n                }, includeReadOnlyValues = function(id, existing) {\n                    if (readOnlyValues && qq.isObject(existing)) {\n                        qq.extend(existing, getReadOnlyValues());\n                    }\n                    if (perIdReadOnlyValues[id]) {\n                        qq.extend(existing, perIdReadOnlyValues[id]);\n                    }\n                };\n                return {\n                    set: function(val, id) {\n                        if (id == null) {\n                            store = {};\n                            catchall = copy(val);\n                        } else {\n                            store[id] = copy(val);\n                        }\n                    },\n                    get: function(id) {\n                        var values;\n                        if (id != null && store[id]) {\n                            values = store[id];\n                        } else {\n                            values = copy(catchall);\n                        }\n                        includeReadOnlyValues(id, values);\n                        return copy(values);\n                    },\n                    addReadOnly: function(id, values) {\n                        if (qq.isObject(store)) {\n                            if (id === null) {\n                                if (qq.isFunction(values)) {\n                                    readOnlyValues = values;\n                                } else {\n                                    readOnlyValues = readOnlyValues || {};\n                                    qq.extend(readOnlyValues, values);\n                                }\n                            } else {\n                                perIdReadOnlyValues[id] = perIdReadOnlyValues[id] || {};\n                                qq.extend(perIdReadOnlyValues[id], values);\n                            }\n                        }\n                    },\n                    remove: function(fileId) {\n                        return delete store[fileId];\n                    },\n                    reset: function() {\n                        store = {};\n                        perIdReadOnlyValues = {};\n                        catchall = initialValue;\n                    }\n                };\n            },\n            _createUploadDataTracker: function() {\n                var self = this;\n                return new qq.UploadData({\n                    getName: function(id) {\n                        return self.getName(id);\n                    },\n                    getUuid: function(id) {\n                        return self.getUuid(id);\n                    },\n                    getSize: function(id) {\n                        return self.getSize(id);\n                    },\n                    onStatusChange: function(id, oldStatus, newStatus) {\n                        self._onUploadStatusChange(id, oldStatus, newStatus);\n                        self._options.callbacks.onStatusChange(id, oldStatus, newStatus);\n                        self._maybeAllComplete(id, newStatus);\n                        if (self._totalProgress) {\n                            setTimeout(function() {\n                                self._totalProgress.onStatusChange(id, oldStatus, newStatus);\n                            }, 0);\n                        }\n                    }\n                });\n            },\n            _createUploadButton: function(spec) {\n                var self = this, acceptFiles = spec.accept || this._options.validation.acceptFiles, allowedExtensions = spec.allowedExtensions || this._options.validation.allowedExtensions, button;\n                function allowMultiple() {\n                    if (qq.supportedFeatures.ajaxUploading) {\n                        if (self._options.workarounds.iosEmptyVideos && qq.ios() && !qq.ios6() && self._isAllowedExtension(allowedExtensions, \".mov\")) {\n                            return false;\n                        }\n                        if (spec.multiple === undefined) {\n                            return self._options.multiple;\n                        }\n                        return spec.multiple;\n                    }\n                    return false;\n                }\n                button = new qq.UploadButton({\n                    acceptFiles: acceptFiles,\n                    element: spec.element,\n                    focusClass: this._options.classes.buttonFocus,\n                    folders: spec.folders,\n                    hoverClass: this._options.classes.buttonHover,\n                    ios8BrowserCrashWorkaround: this._options.workarounds.ios8BrowserCrash,\n                    multiple: allowMultiple(),\n                    name: this._options.request.inputName,\n                    onChange: function(input) {\n                        self._onInputChange(input);\n                    },\n                    title: spec.title == null ? this._options.text.fileInputTitle : spec.title\n                });\n                this._disposeSupport.addDisposer(function() {\n                    button.dispose();\n                });\n                self._buttons.push(button);\n                return button;\n            },\n            _createUploadHandler: function(additionalOptions, namespace) {\n                var self = this, lastOnProgress = {}, options = {\n                    debug: this._options.debug,\n                    maxConnections: this._options.maxConnections,\n                    cors: this._options.cors,\n                    paramsStore: this._paramsStore,\n                    endpointStore: this._endpointStore,\n                    chunking: this._options.chunking,\n                    resume: this._options.resume,\n                    blobs: this._options.blobs,\n                    log: qq.bind(self.log, self),\n                    preventRetryParam: this._options.retry.preventRetryResponseProperty,\n                    onProgress: function(id, name, loaded, total) {\n                        if (loaded < 0 || total < 0) {\n                            return;\n                        }\n                        if (lastOnProgress[id]) {\n                            if (lastOnProgress[id].loaded !== loaded || lastOnProgress[id].total !== total) {\n                                self._onProgress(id, name, loaded, total);\n                                self._options.callbacks.onProgress(id, name, loaded, total);\n                            }\n                        } else {\n                            self._onProgress(id, name, loaded, total);\n                            self._options.callbacks.onProgress(id, name, loaded, total);\n                        }\n                        lastOnProgress[id] = {\n                            loaded: loaded,\n                            total: total\n                        };\n                    },\n                    onComplete: function(id, name, result, xhr) {\n                        delete lastOnProgress[id];\n                        var status = self.getUploads({\n                            id: id\n                        }).status, retVal;\n                        if (status === qq.status.UPLOAD_SUCCESSFUL || status === qq.status.UPLOAD_FAILED) {\n                            return;\n                        }\n                        retVal = self._onComplete(id, name, result, xhr);\n                        if (retVal instanceof qq.Promise) {\n                            retVal.done(function() {\n                                self._options.callbacks.onComplete(id, name, result, xhr);\n                            });\n                        } else {\n                            self._options.callbacks.onComplete(id, name, result, xhr);\n                        }\n                    },\n                    onCancel: function(id, name, cancelFinalizationEffort) {\n                        var promise = new qq.Promise();\n                        self._handleCheckedCallback({\n                            name: \"onCancel\",\n                            callback: qq.bind(self._options.callbacks.onCancel, self, id, name),\n                            onFailure: promise.failure,\n                            onSuccess: function() {\n                                cancelFinalizationEffort.then(function() {\n                                    self._onCancel(id, name);\n                                });\n                                promise.success();\n                            },\n                            identifier: id\n                        });\n                        return promise;\n                    },\n                    onUploadPrep: qq.bind(this._onUploadPrep, this),\n                    onUpload: function(id, name) {\n                        self._onUpload(id, name);\n                        var onUploadResult = self._options.callbacks.onUpload(id, name);\n                        if (qq.isGenericPromise(onUploadResult)) {\n                            self.log(qq.format(\"onUpload for {} returned a Promise - waiting for resolution.\", id));\n                            return onUploadResult;\n                        }\n                        return new qq.Promise().success();\n                    },\n                    onUploadChunk: function(id, name, chunkData) {\n                        self._onUploadChunk(id, chunkData);\n                        var onUploadChunkResult = self._options.callbacks.onUploadChunk(id, name, chunkData);\n                        if (qq.isGenericPromise(onUploadChunkResult)) {\n                            self.log(qq.format(\"onUploadChunk for {}.{} returned a Promise - waiting for resolution.\", id, chunkData.partIndex));\n                            return onUploadChunkResult;\n                        }\n                        return new qq.Promise().success();\n                    },\n                    onUploadChunkSuccess: function(id, chunkData, result, xhr) {\n                        self._onUploadChunkSuccess(id, chunkData);\n                        self._options.callbacks.onUploadChunkSuccess.apply(self, arguments);\n                    },\n                    onResume: function(id, name, chunkData, customResumeData) {\n                        return self._options.callbacks.onResume(id, name, chunkData, customResumeData);\n                    },\n                    onAutoRetry: function(id, name, responseJSON, xhr) {\n                        return self._onAutoRetry.apply(self, arguments);\n                    },\n                    onUuidChanged: function(id, newUuid) {\n                        self.log(\"Server requested UUID change from '\" + self.getUuid(id) + \"' to '\" + newUuid + \"'\");\n                        self.setUuid(id, newUuid);\n                    },\n                    getName: qq.bind(self.getName, self),\n                    getUuid: qq.bind(self.getUuid, self),\n                    getSize: qq.bind(self.getSize, self),\n                    setSize: qq.bind(self._setSize, self),\n                    getDataByUuid: function(uuid) {\n                        return self.getUploads({\n                            uuid: uuid\n                        });\n                    },\n                    isQueued: function(id) {\n                        var status = self.getUploads({\n                            id: id\n                        }).status;\n                        return status === qq.status.QUEUED || status === qq.status.SUBMITTED || status === qq.status.UPLOAD_RETRYING || status === qq.status.PAUSED;\n                    },\n                    getIdsInProxyGroup: self._uploadData.getIdsInProxyGroup,\n                    getIdsInBatch: self._uploadData.getIdsInBatch,\n                    isInProgress: function(id) {\n                        return self.getUploads({\n                            id: id\n                        }).status === qq.status.UPLOADING;\n                    },\n                    getCustomResumeData: qq.bind(self._getCustomResumeData, self),\n                    setStatus: function(id, status) {\n                        self._uploadData.setStatus(id, status);\n                    }\n                };\n                qq.each(this._options.request, function(prop, val) {\n                    options[prop] = val;\n                });\n                options.customHeaders = this._customHeadersStore;\n                if (additionalOptions) {\n                    qq.each(additionalOptions, function(key, val) {\n                        options[key] = val;\n                    });\n                }\n                return new qq.UploadHandlerController(options, namespace);\n            },\n            _fileOrBlobRejected: function(id) {\n                this._netUploadedOrQueued--;\n                this._uploadData.setStatus(id, qq.status.REJECTED);\n            },\n            _formatSize: function(bytes) {\n                if (bytes === 0) {\n                    return bytes + this._options.text.sizeSymbols[0];\n                }\n                var i = -1;\n                do {\n                    bytes = bytes / 1e3;\n                    i++;\n                } while (bytes > 999);\n                return Math.max(bytes, .1).toFixed(1) + this._options.text.sizeSymbols[i];\n            },\n            _generateExtraButtonSpecs: function() {\n                var self = this;\n                this._extraButtonSpecs = {};\n                qq.each(this._options.extraButtons, function(idx, extraButtonOptionEntry) {\n                    var multiple = extraButtonOptionEntry.multiple, validation = qq.extend({}, self._options.validation, true), extraButtonSpec = qq.extend({}, extraButtonOptionEntry);\n                    if (multiple === undefined) {\n                        multiple = self._options.multiple;\n                    }\n                    if (extraButtonSpec.validation) {\n                        qq.extend(validation, extraButtonOptionEntry.validation, true);\n                    }\n                    qq.extend(extraButtonSpec, {\n                        multiple: multiple,\n                        validation: validation\n                    }, true);\n                    self._initExtraButton(extraButtonSpec);\n                });\n            },\n            _getButton: function(buttonId) {\n                var extraButtonsSpec = this._extraButtonSpecs[buttonId];\n                if (extraButtonsSpec) {\n                    return extraButtonsSpec.element;\n                } else if (buttonId === this._defaultButtonId) {\n                    return this._options.button;\n                }\n            },\n            _getButtonId: function(buttonOrFileInputOrFile) {\n                var inputs, fileInput, fileBlobOrInput = buttonOrFileInputOrFile;\n                if (fileBlobOrInput instanceof qq.BlobProxy) {\n                    fileBlobOrInput = fileBlobOrInput.referenceBlob;\n                }\n                if (fileBlobOrInput && !qq.isBlob(fileBlobOrInput)) {\n                    if (qq.isFile(fileBlobOrInput)) {\n                        return fileBlobOrInput.qqButtonId;\n                    } else if (fileBlobOrInput.tagName.toLowerCase() === \"input\" && fileBlobOrInput.type.toLowerCase() === \"file\") {\n                        return fileBlobOrInput.getAttribute(qq.UploadButton.BUTTON_ID_ATTR_NAME);\n                    }\n                    inputs = fileBlobOrInput.getElementsByTagName(\"input\");\n                    qq.each(inputs, function(idx, input) {\n                        if (input.getAttribute(\"type\") === \"file\") {\n                            fileInput = input;\n                            return false;\n                        }\n                    });\n                    if (fileInput) {\n                        return fileInput.getAttribute(qq.UploadButton.BUTTON_ID_ATTR_NAME);\n                    }\n                }\n            },\n            _getCustomResumeData: function(fileId) {\n                return this._customResumeDataStore.get(fileId);\n            },\n            _getNotFinished: function() {\n                return this._uploadData.retrieve({\n                    status: [ qq.status.UPLOADING, qq.status.UPLOAD_RETRYING, qq.status.QUEUED, qq.status.SUBMITTING, qq.status.SUBMITTED, qq.status.PAUSED ]\n                }).length;\n            },\n            _getValidationBase: function(buttonId) {\n                var extraButtonSpec = this._extraButtonSpecs[buttonId];\n                return extraButtonSpec ? extraButtonSpec.validation : this._options.validation;\n            },\n            _getValidationDescriptor: function(fileWrapper) {\n                if (fileWrapper.file instanceof qq.BlobProxy) {\n                    return {\n                        name: qq.getFilename(fileWrapper.file.referenceBlob),\n                        size: fileWrapper.file.referenceBlob.size\n                    };\n                }\n                return {\n                    name: this.getUploads({\n                        id: fileWrapper.id\n                    }).name,\n                    size: this.getUploads({\n                        id: fileWrapper.id\n                    }).size\n                };\n            },\n            _getValidationDescriptors: function(fileWrappers) {\n                var self = this, fileDescriptors = [];\n                qq.each(fileWrappers, function(idx, fileWrapper) {\n                    fileDescriptors.push(self._getValidationDescriptor(fileWrapper));\n                });\n                return fileDescriptors;\n            },\n            _handleCameraAccess: function() {\n                if (this._options.camera.ios && qq.ios()) {\n                    var acceptIosCamera = \"image/*;capture=camera\", button = this._options.camera.button, buttonId = button ? this._getButtonId(button) : this._defaultButtonId, optionRoot = this._options;\n                    if (buttonId && buttonId !== this._defaultButtonId) {\n                        optionRoot = this._extraButtonSpecs[buttonId];\n                    }\n                    optionRoot.multiple = false;\n                    if (optionRoot.validation.acceptFiles === null) {\n                        optionRoot.validation.acceptFiles = acceptIosCamera;\n                    } else {\n                        optionRoot.validation.acceptFiles += \",\" + acceptIosCamera;\n                    }\n                    qq.each(this._buttons, function(idx, button) {\n                        if (button.getButtonId() === buttonId) {\n                            button.setMultiple(optionRoot.multiple);\n                            button.setAcceptFiles(optionRoot.acceptFiles);\n                            return false;\n                        }\n                    });\n                }\n            },\n            _handleCheckedCallback: function(details) {\n                var self = this, callbackRetVal = details.callback();\n                if (qq.isGenericPromise(callbackRetVal)) {\n                    this.log(details.name + \" - waiting for \" + details.name + \" promise to be fulfilled for \" + details.identifier);\n                    return callbackRetVal.then(function(successParam) {\n                        self.log(details.name + \" promise success for \" + details.identifier);\n                        details.onSuccess(successParam);\n                    }, function() {\n                        if (details.onFailure) {\n                            self.log(details.name + \" promise failure for \" + details.identifier);\n                            details.onFailure();\n                        } else {\n                            self.log(details.name + \" promise failure for \" + details.identifier);\n                        }\n                    });\n                }\n                if (callbackRetVal !== false) {\n                    details.onSuccess(callbackRetVal);\n                } else {\n                    if (details.onFailure) {\n                        this.log(details.name + \" - return value was 'false' for \" + details.identifier + \".  Invoking failure callback.\");\n                        details.onFailure();\n                    } else {\n                        this.log(details.name + \" - return value was 'false' for \" + details.identifier + \".  Will not proceed.\");\n                    }\n                }\n                return callbackRetVal;\n            },\n            _handleNewFile: function(file, batchId, newFileWrapperList) {\n                var self = this, uuid = qq.getUniqueId(), size = -1, name = qq.getFilename(file), actualFile = file.blob || file, handler = this._customNewFileHandler ? this._customNewFileHandler : qq.bind(self._handleNewFileGeneric, self);\n                if (!qq.isInput(actualFile) && actualFile.size >= 0) {\n                    size = actualFile.size;\n                }\n                handler(actualFile, name, uuid, size, newFileWrapperList, batchId, this._options.request.uuidName, {\n                    uploadData: self._uploadData,\n                    paramsStore: self._paramsStore,\n                    addFileToHandler: function(id, file) {\n                        self._handler.add(id, file);\n                        self._netUploadedOrQueued++;\n                        self._trackButton(id);\n                    }\n                });\n            },\n            _handleNewFileGeneric: function(file, name, uuid, size, fileList, batchId) {\n                var id = this._uploadData.addFile({\n                    uuid: uuid,\n                    name: name,\n                    size: size,\n                    batchId: batchId,\n                    file: file\n                });\n                this._handler.add(id, file);\n                this._trackButton(id);\n                this._netUploadedOrQueued++;\n                fileList.push({\n                    id: id,\n                    file: file\n                });\n            },\n            _handlePasteSuccess: function(blob, extSuppliedName) {\n                var extension = blob.type.split(\"/\")[1], name = extSuppliedName;\n                if (name == null) {\n                    name = this._options.paste.defaultName;\n                }\n                name += \".\" + extension;\n                this.addFiles({\n                    name: name,\n                    blob: blob\n                });\n            },\n            _handleDeleteSuccess: function(id) {\n                if (this.getUploads({\n                    id: id\n                }).status !== qq.status.DELETED) {\n                    var name = this.getName(id);\n                    this._netUploadedOrQueued--;\n                    this._netUploaded--;\n                    this._handler.expunge(id);\n                    this._uploadData.setStatus(id, qq.status.DELETED);\n                    this.log(\"Delete request for '\" + name + \"' has succeeded.\");\n                }\n            },\n            _handleDeleteFailed: function(id, xhrOrXdr) {\n                var name = this.getName(id);\n                this._uploadData.setStatus(id, qq.status.DELETE_FAILED);\n                this.log(\"Delete request for '\" + name + \"' has failed.\", \"error\");\n                if (!xhrOrXdr || xhrOrXdr.withCredentials === undefined) {\n                    this._options.callbacks.onError(id, name, \"Delete request failed\", xhrOrXdr);\n                } else {\n                    this._options.callbacks.onError(id, name, \"Delete request failed with response code \" + xhrOrXdr.status, xhrOrXdr);\n                }\n            },\n            _initExtraButton: function(spec) {\n                var button = this._createUploadButton({\n                    accept: spec.validation.acceptFiles,\n                    allowedExtensions: spec.validation.allowedExtensions,\n                    element: spec.element,\n                    folders: spec.folders,\n                    multiple: spec.multiple,\n                    title: spec.fileInputTitle\n                });\n                this._extraButtonSpecs[button.getButtonId()] = spec;\n            },\n            _initFormSupportAndParams: function() {\n                this._formSupport = qq.FormSupport && new qq.FormSupport(this._options.form, qq.bind(this.uploadStoredFiles, this), qq.bind(this.log, this));\n                if (this._formSupport && this._formSupport.attachedToForm) {\n                    this._paramsStore = this._createStore(this._options.request.params, this._formSupport.getFormInputsAsObject);\n                    this._options.autoUpload = this._formSupport.newAutoUpload;\n                    if (this._formSupport.newEndpoint) {\n                        this._options.request.endpoint = this._formSupport.newEndpoint;\n                    }\n                } else {\n                    this._paramsStore = this._createStore(this._options.request.params);\n                }\n            },\n            _isDeletePossible: function() {\n                if (!qq.DeleteFileAjaxRequester || !this._options.deleteFile.enabled) {\n                    return false;\n                }\n                if (this._options.cors.expected) {\n                    if (qq.supportedFeatures.deleteFileCorsXhr) {\n                        return true;\n                    }\n                    if (qq.supportedFeatures.deleteFileCorsXdr && this._options.cors.allowXdr) {\n                        return true;\n                    }\n                    return false;\n                }\n                return true;\n            },\n            _isAllowedExtension: function(allowed, fileName) {\n                var valid = false;\n                if (!allowed.length) {\n                    return true;\n                }\n                qq.each(allowed, function(idx, allowedExt) {\n                    if (qq.isString(allowedExt)) {\n                        var extRegex = new RegExp(\"\\\\.\" + allowedExt + \"$\", \"i\");\n                        if (fileName.match(extRegex) != null) {\n                            valid = true;\n                            return false;\n                        }\n                    }\n                });\n                return valid;\n            },\n            _itemError: function(code, maybeNameOrNames, item) {\n                var message = this._options.messages[code], allowedExtensions = [], names = [].concat(maybeNameOrNames), name = names[0], buttonId = this._getButtonId(item), validationBase = this._getValidationBase(buttonId), extensionsForMessage, placeholderMatch;\n                function r(name, replacement) {\n                    message = message.replace(name, replacement);\n                }\n                qq.each(validationBase.allowedExtensions, function(idx, allowedExtension) {\n                    if (qq.isString(allowedExtension)) {\n                        allowedExtensions.push(allowedExtension);\n                    }\n                });\n                extensionsForMessage = allowedExtensions.join(\", \").toLowerCase();\n                r(\"{file}\", this._options.formatFileName(name));\n                r(\"{extensions}\", extensionsForMessage);\n                r(\"{sizeLimit}\", this._formatSize(validationBase.sizeLimit));\n                r(\"{minSizeLimit}\", this._formatSize(validationBase.minSizeLimit));\n                placeholderMatch = message.match(/(\\{\\w+\\})/g);\n                if (placeholderMatch !== null) {\n                    qq.each(placeholderMatch, function(idx, placeholder) {\n                        r(placeholder, names[idx]);\n                    });\n                }\n                this._options.callbacks.onError(null, name, message, undefined);\n                return message;\n            },\n            _manualRetry: function(id, callback) {\n                if (this._onBeforeManualRetry(id)) {\n                    this._netUploadedOrQueued++;\n                    this._uploadData.setStatus(id, qq.status.UPLOAD_RETRYING);\n                    if (callback) {\n                        callback(id);\n                    } else {\n                        this._handler.retry(id);\n                    }\n                    return true;\n                }\n            },\n            _maybeAllComplete: function(id, status) {\n                var self = this, notFinished = this._getNotFinished();\n                if (status === qq.status.UPLOAD_SUCCESSFUL) {\n                    this._succeededSinceLastAllComplete.push(id);\n                } else if (status === qq.status.UPLOAD_FAILED) {\n                    this._failedSinceLastAllComplete.push(id);\n                }\n                if (notFinished === 0 && (this._succeededSinceLastAllComplete.length || this._failedSinceLastAllComplete.length)) {\n                    setTimeout(function() {\n                        self._onAllComplete(self._succeededSinceLastAllComplete, self._failedSinceLastAllComplete);\n                    }, 0);\n                }\n            },\n            _maybeHandleIos8SafariWorkaround: function() {\n                var self = this;\n                if (this._options.workarounds.ios8SafariUploads && qq.ios800() && qq.iosSafari()) {\n                    setTimeout(function() {\n                        window.alert(self._options.messages.unsupportedBrowserIos8Safari);\n                    }, 0);\n                    throw new qq.Error(this._options.messages.unsupportedBrowserIos8Safari);\n                }\n            },\n            _maybeParseAndSendUploadError: function(id, name, response, xhr) {\n                if (!response.success) {\n                    if (xhr && xhr.status !== 200 && !response.error) {\n                        this._options.callbacks.onError(id, name, \"XHR returned response code \" + xhr.status, xhr);\n                    } else {\n                        var errorReason = response.error ? response.error : this._options.text.defaultResponseError;\n                        this._options.callbacks.onError(id, name, errorReason, xhr);\n                    }\n                }\n            },\n            _maybeProcessNextItemAfterOnValidateCallback: function(validItem, items, index, params, endpoint) {\n                var self = this;\n                if (items.length > index) {\n                    if (validItem || !this._options.validation.stopOnFirstInvalidFile) {\n                        setTimeout(function() {\n                            var validationDescriptor = self._getValidationDescriptor(items[index]), buttonId = self._getButtonId(items[index].file), button = self._getButton(buttonId);\n                            self._handleCheckedCallback({\n                                name: \"onValidate\",\n                                callback: qq.bind(self._options.callbacks.onValidate, self, validationDescriptor, button),\n                                onSuccess: qq.bind(self._onValidateCallbackSuccess, self, items, index, params, endpoint),\n                                onFailure: qq.bind(self._onValidateCallbackFailure, self, items, index, params, endpoint),\n                                identifier: \"Item '\" + validationDescriptor.name + \"', size: \" + validationDescriptor.size\n                            });\n                        }, 0);\n                    } else if (!validItem) {\n                        for (;index < items.length; index++) {\n                            self._fileOrBlobRejected(items[index].id);\n                        }\n                    }\n                }\n            },\n            _onAllComplete: function(successful, failed) {\n                this._totalProgress && this._totalProgress.onAllComplete(successful, failed, this._preventRetries);\n                this._options.callbacks.onAllComplete(qq.extend([], successful), qq.extend([], failed));\n                this._succeededSinceLastAllComplete = [];\n                this._failedSinceLastAllComplete = [];\n            },\n            _onAutoRetry: function(id, name, responseJSON, xhr, callback) {\n                var self = this;\n                self._preventRetries[id] = responseJSON[self._options.retry.preventRetryResponseProperty];\n                if (self._shouldAutoRetry(id)) {\n                    var retryWaitPeriod = self._options.retry.autoAttemptDelay * 1e3;\n                    self._maybeParseAndSendUploadError.apply(self, arguments);\n                    self._options.callbacks.onAutoRetry(id, name, self._autoRetries[id]);\n                    self._onBeforeAutoRetry(id, name);\n                    self._uploadData.setStatus(id, qq.status.UPLOAD_RETRYING);\n                    self._retryTimeouts[id] = setTimeout(function() {\n                        self.log(\"Starting retry for \" + name + \"...\");\n                        if (callback) {\n                            callback(id);\n                        } else {\n                            self._handler.retry(id);\n                        }\n                    }, retryWaitPeriod);\n                    return true;\n                }\n            },\n            _onBeforeAutoRetry: function(id, name) {\n                this.log(\"Waiting \" + this._options.retry.autoAttemptDelay + \" seconds before retrying \" + name + \"...\");\n            },\n            _onBeforeManualRetry: function(id) {\n                var itemLimit = this._currentItemLimit, fileName;\n                if (this._preventRetries[id]) {\n                    this.log(\"Retries are forbidden for id \" + id, \"warn\");\n                    return false;\n                } else if (this._handler.isValid(id)) {\n                    fileName = this.getName(id);\n                    if (this._options.callbacks.onManualRetry(id, fileName) === false) {\n                        return false;\n                    }\n                    if (itemLimit > 0 && this._netUploadedOrQueued + 1 > itemLimit) {\n                        this._itemError(\"retryFailTooManyItems\");\n                        return false;\n                    }\n                    this.log(\"Retrying upload for '\" + fileName + \"' (id: \" + id + \")...\");\n                    return true;\n                } else {\n                    this.log(\"'\" + id + \"' is not a valid file ID\", \"error\");\n                    return false;\n                }\n            },\n            _onCancel: function(id, name) {\n                this._netUploadedOrQueued--;\n                clearTimeout(this._retryTimeouts[id]);\n                var storedItemIndex = qq.indexOf(this._storedIds, id);\n                if (!this._options.autoUpload && storedItemIndex >= 0) {\n                    this._storedIds.splice(storedItemIndex, 1);\n                }\n                this._uploadData.setStatus(id, qq.status.CANCELED);\n            },\n            _onComplete: function(id, name, result, xhr) {\n                if (!result.success) {\n                    this._netUploadedOrQueued--;\n                    this._uploadData.setStatus(id, qq.status.UPLOAD_FAILED);\n                    if (result[this._options.retry.preventRetryResponseProperty] === true) {\n                        this._preventRetries[id] = true;\n                    }\n                } else {\n                    if (result.thumbnailUrl) {\n                        this._thumbnailUrls[id] = result.thumbnailUrl;\n                    }\n                    this._netUploaded++;\n                    this._uploadData.setStatus(id, qq.status.UPLOAD_SUCCESSFUL);\n                }\n                this._maybeParseAndSendUploadError(id, name, result, xhr);\n                return result.success ? true : false;\n            },\n            _onDelete: function(id) {\n                this._uploadData.setStatus(id, qq.status.DELETING);\n            },\n            _onDeleteComplete: function(id, xhrOrXdr, isError) {\n                var name = this.getName(id);\n                if (isError) {\n                    this._handleDeleteFailed(id, xhrOrXdr);\n                } else {\n                    this._handleDeleteSuccess(id);\n                }\n            },\n            _onInputChange: function(input) {\n                var fileIndex;\n                if (qq.supportedFeatures.ajaxUploading) {\n                    for (fileIndex = 0; fileIndex < input.files.length; fileIndex++) {\n                        this._annotateWithButtonId(input.files[fileIndex], input);\n                    }\n                    this.addFiles(input.files);\n                } else if (input.value.length > 0) {\n                    this.addFiles(input);\n                }\n                qq.each(this._buttons, function(idx, button) {\n                    button.reset();\n                });\n            },\n            _onProgress: function(id, name, loaded, total) {\n                this._totalProgress && this._totalProgress.onIndividualProgress(id, loaded, total);\n            },\n            _onSubmit: function(id, name) {},\n            _onSubmitCallbackSuccess: function(id, name) {\n                this._onSubmit.apply(this, arguments);\n                this._uploadData.setStatus(id, qq.status.SUBMITTED);\n                this._onSubmitted.apply(this, arguments);\n                if (this._options.autoUpload) {\n                    this._options.callbacks.onSubmitted.apply(this, arguments);\n                    this._uploadFile(id);\n                } else {\n                    this._storeForLater(id);\n                    this._options.callbacks.onSubmitted.apply(this, arguments);\n                }\n            },\n            _onSubmitDelete: function(id, onSuccessCallback, additionalMandatedParams) {\n                var uuid = this.getUuid(id), adjustedOnSuccessCallback;\n                if (onSuccessCallback) {\n                    adjustedOnSuccessCallback = qq.bind(onSuccessCallback, this, id, uuid, additionalMandatedParams);\n                }\n                if (this._isDeletePossible()) {\n                    this._handleCheckedCallback({\n                        name: \"onSubmitDelete\",\n                        callback: qq.bind(this._options.callbacks.onSubmitDelete, this, id),\n                        onSuccess: adjustedOnSuccessCallback || qq.bind(this._deleteHandler.sendDelete, this, id, uuid, additionalMandatedParams),\n                        identifier: id\n                    });\n                    return true;\n                } else {\n                    this.log(\"Delete request ignored for ID \" + id + \", delete feature is disabled or request not possible \" + \"due to CORS on a user agent that does not support pre-flighting.\", \"warn\");\n                    return false;\n                }\n            },\n            _onSubmitted: function(id) {},\n            _onTotalProgress: function(loaded, total) {\n                this._options.callbacks.onTotalProgress(loaded, total);\n            },\n            _onUploadPrep: function(id) {},\n            _onUpload: function(id, name) {\n                this._uploadData.setStatus(id, qq.status.UPLOADING);\n            },\n            _onUploadChunk: function(id, chunkData) {},\n            _onUploadChunkSuccess: function(id, chunkData) {\n                if (!this._preventRetries[id] && this._options.retry.enableAuto) {\n                    this._autoRetries[id] = 0;\n                }\n            },\n            _onUploadStatusChange: function(id, oldStatus, newStatus) {\n                if (newStatus === qq.status.PAUSED) {\n                    clearTimeout(this._retryTimeouts[id]);\n                }\n            },\n            _onValidateBatchCallbackFailure: function(fileWrappers) {\n                var self = this;\n                qq.each(fileWrappers, function(idx, fileWrapper) {\n                    self._fileOrBlobRejected(fileWrapper.id);\n                });\n            },\n            _onValidateBatchCallbackSuccess: function(validationDescriptors, items, params, endpoint, button) {\n                var errorMessage, itemLimit = this._currentItemLimit, proposedNetFilesUploadedOrQueued = this._netUploadedOrQueued;\n                if (itemLimit === 0 || proposedNetFilesUploadedOrQueued <= itemLimit) {\n                    if (items.length > 0) {\n                        this._handleCheckedCallback({\n                            name: \"onValidate\",\n                            callback: qq.bind(this._options.callbacks.onValidate, this, validationDescriptors[0], button),\n                            onSuccess: qq.bind(this._onValidateCallbackSuccess, this, items, 0, params, endpoint),\n                            onFailure: qq.bind(this._onValidateCallbackFailure, this, items, 0, params, endpoint),\n                            identifier: \"Item '\" + items[0].file.name + \"', size: \" + items[0].file.size\n                        });\n                    } else {\n                        this._itemError(\"noFilesError\");\n                    }\n                } else {\n                    this._onValidateBatchCallbackFailure(items);\n                    errorMessage = this._options.messages.tooManyItemsError.replace(/\\{netItems\\}/g, proposedNetFilesUploadedOrQueued).replace(/\\{itemLimit\\}/g, itemLimit);\n                    this._batchError(errorMessage);\n                }\n            },\n            _onValidateCallbackFailure: function(items, index, params, endpoint) {\n                var nextIndex = index + 1;\n                this._fileOrBlobRejected(items[index].id, items[index].file.name);\n                this._maybeProcessNextItemAfterOnValidateCallback(false, items, nextIndex, params, endpoint);\n            },\n            _onValidateCallbackSuccess: function(items, index, params, endpoint) {\n                var self = this, nextIndex = index + 1, validationDescriptor = this._getValidationDescriptor(items[index]);\n                this._validateFileOrBlobData(items[index], validationDescriptor).then(function() {\n                    self._upload(items[index].id, params, endpoint);\n                    self._maybeProcessNextItemAfterOnValidateCallback(true, items, nextIndex, params, endpoint);\n                }, function() {\n                    self._maybeProcessNextItemAfterOnValidateCallback(false, items, nextIndex, params, endpoint);\n                });\n            },\n            _prepareItemsForUpload: function(items, params, endpoint) {\n                if (items.length === 0) {\n                    this._itemError(\"noFilesError\");\n                    return;\n                }\n                var validationDescriptors = this._getValidationDescriptors(items), buttonId = this._getButtonId(items[0].file), button = this._getButton(buttonId);\n                this._handleCheckedCallback({\n                    name: \"onValidateBatch\",\n                    callback: qq.bind(this._options.callbacks.onValidateBatch, this, validationDescriptors, button),\n                    onSuccess: qq.bind(this._onValidateBatchCallbackSuccess, this, validationDescriptors, items, params, endpoint, button),\n                    onFailure: qq.bind(this._onValidateBatchCallbackFailure, this, items),\n                    identifier: \"batch validation\"\n                });\n            },\n            _preventLeaveInProgress: function() {\n                var self = this;\n                this._disposeSupport.attach(window, \"beforeunload\", function(e) {\n                    if (self.getInProgress()) {\n                        e = e || window.event;\n                        e.returnValue = self._options.messages.onLeave;\n                        return self._options.messages.onLeave;\n                    }\n                });\n            },\n            _refreshSessionData: function() {\n                var self = this, options = this._options.session;\n                if (qq.Session && this._options.session.endpoint != null) {\n                    if (!this._session) {\n                        qq.extend(options, {\n                            cors: this._options.cors\n                        });\n                        options.log = qq.bind(this.log, this);\n                        options.addFileRecord = qq.bind(this._addCannedFile, this);\n                        this._session = new qq.Session(options);\n                    }\n                    setTimeout(function() {\n                        self._session.refresh().then(function(response, xhrOrXdr) {\n                            self._sessionRequestComplete();\n                            self._options.callbacks.onSessionRequestComplete(response, true, xhrOrXdr);\n                        }, function(response, xhrOrXdr) {\n                            self._options.callbacks.onSessionRequestComplete(response, false, xhrOrXdr);\n                        });\n                    }, 0);\n                }\n            },\n            _sessionRequestComplete: function() {},\n            _setSize: function(id, newSize) {\n                this._uploadData.updateSize(id, newSize);\n                this._totalProgress && this._totalProgress.onNewSize(id);\n            },\n            _shouldAutoRetry: function(id) {\n                var uploadData = this._uploadData.retrieve({\n                    id: id\n                });\n                if (!this._preventRetries[id] && this._options.retry.enableAuto && uploadData.status !== qq.status.PAUSED) {\n                    if (this._autoRetries[id] === undefined) {\n                        this._autoRetries[id] = 0;\n                    }\n                    if (this._autoRetries[id] < this._options.retry.maxAutoAttempts) {\n                        this._autoRetries[id] += 1;\n                        return true;\n                    }\n                }\n                return false;\n            },\n            _storeForLater: function(id) {\n                this._storedIds.push(id);\n            },\n            _trackButton: function(id) {\n                var buttonId;\n                if (qq.supportedFeatures.ajaxUploading) {\n                    buttonId = this._handler.getFile(id).qqButtonId;\n                } else {\n                    buttonId = this._getButtonId(this._handler.getInput(id));\n                }\n                if (buttonId) {\n                    this._buttonIdsForFileIds[id] = buttonId;\n                }\n            },\n            _updateFormSupportAndParams: function(formElementOrId) {\n                this._options.form.element = formElementOrId;\n                this._formSupport = qq.FormSupport && new qq.FormSupport(this._options.form, qq.bind(this.uploadStoredFiles, this), qq.bind(this.log, this));\n                if (this._formSupport && this._formSupport.attachedToForm) {\n                    this._paramsStore.addReadOnly(null, this._formSupport.getFormInputsAsObject);\n                    this._options.autoUpload = this._formSupport.newAutoUpload;\n                    if (this._formSupport.newEndpoint) {\n                        this.setEndpoint(this._formSupport.newEndpoint);\n                    }\n                }\n            },\n            _upload: function(id, params, endpoint) {\n                var name = this.getName(id);\n                if (params) {\n                    this.setParams(params, id);\n                }\n                if (endpoint) {\n                    this.setEndpoint(endpoint, id);\n                }\n                this._handleCheckedCallback({\n                    name: \"onSubmit\",\n                    callback: qq.bind(this._options.callbacks.onSubmit, this, id, name),\n                    onSuccess: qq.bind(this._onSubmitCallbackSuccess, this, id, name),\n                    onFailure: qq.bind(this._fileOrBlobRejected, this, id, name),\n                    identifier: id\n                });\n            },\n            _uploadFile: function(id) {\n                if (!this._handler.upload(id)) {\n                    this._uploadData.setStatus(id, qq.status.QUEUED);\n                }\n            },\n            _uploadStoredFiles: function() {\n                var idToUpload, stillSubmitting, self = this;\n                while (this._storedIds.length) {\n                    idToUpload = this._storedIds.shift();\n                    this._uploadFile(idToUpload);\n                }\n                stillSubmitting = this.getUploads({\n                    status: qq.status.SUBMITTING\n                }).length;\n                if (stillSubmitting) {\n                    qq.log(\"Still waiting for \" + stillSubmitting + \" files to clear submit queue. Will re-parse stored IDs array shortly.\");\n                    setTimeout(function() {\n                        self._uploadStoredFiles();\n                    }, 1e3);\n                }\n            },\n            _validateFileOrBlobData: function(fileWrapper, validationDescriptor) {\n                var self = this, file = function() {\n                    if (fileWrapper.file instanceof qq.BlobProxy) {\n                        return fileWrapper.file.referenceBlob;\n                    }\n                    return fileWrapper.file;\n                }(), name = validationDescriptor.name, size = validationDescriptor.size, buttonId = this._getButtonId(fileWrapper.file), validationBase = this._getValidationBase(buttonId), validityChecker = new qq.Promise();\n                validityChecker.then(function() {}, function() {\n                    self._fileOrBlobRejected(fileWrapper.id, name);\n                });\n                if (qq.isFileOrInput(file) && !this._isAllowedExtension(validationBase.allowedExtensions, name)) {\n                    this._itemError(\"typeError\", name, file);\n                    return validityChecker.failure();\n                }\n                if (!this._options.validation.allowEmpty && size === 0) {\n                    this._itemError(\"emptyError\", name, file);\n                    return validityChecker.failure();\n                }\n                if (size > 0 && validationBase.sizeLimit && size > validationBase.sizeLimit) {\n                    this._itemError(\"sizeError\", name, file);\n                    return validityChecker.failure();\n                }\n                if (size > 0 && size < validationBase.minSizeLimit) {\n                    this._itemError(\"minSizeError\", name, file);\n                    return validityChecker.failure();\n                }\n                if (qq.ImageValidation && qq.supportedFeatures.imagePreviews && qq.isFile(file)) {\n                    new qq.ImageValidation(file, qq.bind(self.log, self)).validate(validationBase.image).then(validityChecker.success, function(errorCode) {\n                        self._itemError(errorCode + \"ImageError\", name, file);\n                        validityChecker.failure();\n                    });\n                } else {\n                    validityChecker.success();\n                }\n                return validityChecker;\n            },\n            _wrapCallbacks: function() {\n                var self, safeCallback, prop;\n                self = this;\n                safeCallback = function(name, callback, args) {\n                    var errorMsg;\n                    try {\n                        return callback.apply(self, args);\n                    } catch (exception) {\n                        errorMsg = exception.message || exception.toString();\n                        self.log(\"Caught exception in '\" + name + \"' callback - \" + errorMsg, \"error\");\n                    }\n                };\n                for (prop in this._options.callbacks) {\n                    (function() {\n                        var callbackName, callbackFunc;\n                        callbackName = prop;\n                        callbackFunc = self._options.callbacks[callbackName];\n                        self._options.callbacks[callbackName] = function() {\n                            return safeCallback(callbackName, callbackFunc, arguments);\n                        };\n                    })();\n                }\n            }\n        };\n    })();\n    (function() {\n        \"use strict\";\n        qq.FineUploaderBasic = function(o) {\n            var self = this;\n            this._options = {\n                debug: false,\n                button: null,\n                multiple: true,\n                maxConnections: 3,\n                disableCancelForFormUploads: false,\n                autoUpload: true,\n                warnBeforeUnload: true,\n                request: {\n                    customHeaders: {},\n                    endpoint: \"/server/upload\",\n                    filenameParam: \"qqfilename\",\n                    forceMultipart: true,\n                    inputName: \"qqfile\",\n                    method: \"POST\",\n                    omitDefaultParams: false,\n                    params: {},\n                    paramsInBody: true,\n                    requireSuccessJson: true,\n                    totalFileSizeName: \"qqtotalfilesize\",\n                    uuidName: \"qquuid\"\n                },\n                validation: {\n                    allowedExtensions: [],\n                    sizeLimit: 0,\n                    minSizeLimit: 0,\n                    itemLimit: 0,\n                    stopOnFirstInvalidFile: true,\n                    acceptFiles: null,\n                    image: {\n                        maxHeight: 0,\n                        maxWidth: 0,\n                        minHeight: 0,\n                        minWidth: 0\n                    },\n                    allowEmpty: false\n                },\n                callbacks: {\n                    onSubmit: function(id, name) {},\n                    onSubmitted: function(id, name) {},\n                    onComplete: function(id, name, responseJSON, maybeXhr) {},\n                    onAllComplete: function(successful, failed) {},\n                    onCancel: function(id, name) {},\n                    onUpload: function(id, name) {},\n                    onUploadChunk: function(id, name, chunkData) {},\n                    onUploadChunkSuccess: function(id, chunkData, responseJSON, xhr) {},\n                    onResume: function(id, fileName, chunkData, customResumeData) {},\n                    onProgress: function(id, name, loaded, total) {},\n                    onTotalProgress: function(loaded, total) {},\n                    onError: function(id, name, reason, maybeXhrOrXdr) {},\n                    onAutoRetry: function(id, name, attemptNumber) {},\n                    onManualRetry: function(id, name) {},\n                    onValidateBatch: function(fileOrBlobData) {},\n                    onValidate: function(fileOrBlobData) {},\n                    onSubmitDelete: function(id) {},\n                    onDelete: function(id) {},\n                    onDeleteComplete: function(id, xhrOrXdr, isError) {},\n                    onPasteReceived: function(blob) {},\n                    onStatusChange: function(id, oldStatus, newStatus) {},\n                    onSessionRequestComplete: function(response, success, xhrOrXdr) {}\n                },\n                messages: {\n                    typeError: \"{file} has an invalid extension. Valid extension(s): {extensions}.\",\n                    sizeError: \"{file} is too large, maximum file size is {sizeLimit}.\",\n                    minSizeError: \"{file} is too small, minimum file size is {minSizeLimit}.\",\n                    emptyError: \"{file} is empty, please select files again without it.\",\n                    noFilesError: \"No files to upload.\",\n                    tooManyItemsError: \"Too many items ({netItems}) would be uploaded.  Item limit is {itemLimit}.\",\n                    maxHeightImageError: \"Image is too tall.\",\n                    maxWidthImageError: \"Image is too wide.\",\n                    minHeightImageError: \"Image is not tall enough.\",\n                    minWidthImageError: \"Image is not wide enough.\",\n                    retryFailTooManyItems: \"Retry failed - you have reached your file limit.\",\n                    onLeave: \"The files are being uploaded, if you leave now the upload will be canceled.\",\n                    unsupportedBrowserIos8Safari: \"Unrecoverable error - this browser does not permit file uploading of any kind due to serious bugs in iOS8 Safari.  Please use iOS8 Chrome until Apple fixes these issues.\"\n                },\n                retry: {\n                    enableAuto: false,\n                    maxAutoAttempts: 3,\n                    autoAttemptDelay: 5,\n                    preventRetryResponseProperty: \"preventRetry\"\n                },\n                classes: {\n                    buttonHover: \"qq-upload-button-hover\",\n                    buttonFocus: \"qq-upload-button-focus\"\n                },\n                chunking: {\n                    enabled: false,\n                    concurrent: {\n                        enabled: false\n                    },\n                    mandatory: false,\n                    paramNames: {\n                        partIndex: \"qqpartindex\",\n                        partByteOffset: \"qqpartbyteoffset\",\n                        chunkSize: \"qqchunksize\",\n                        totalFileSize: \"qqtotalfilesize\",\n                        totalParts: \"qqtotalparts\"\n                    },\n                    partSize: function(id) {\n                        return 2e6;\n                    },\n                    success: {\n                        endpoint: null,\n                        headers: function(id) {\n                            return null;\n                        },\n                        jsonPayload: false,\n                        method: \"POST\",\n                        params: function(id) {\n                            return null;\n                        },\n                        resetOnStatus: []\n                    }\n                },\n                resume: {\n                    enabled: false,\n                    recordsExpireIn: 7,\n                    paramNames: {\n                        resuming: \"qqresume\"\n                    },\n                    customKeys: function(fileId) {\n                        return [];\n                    }\n                },\n                formatFileName: function(fileOrBlobName) {\n                    return fileOrBlobName;\n                },\n                text: {\n                    defaultResponseError: \"Upload failure reason unknown\",\n                    fileInputTitle: \"file input\",\n                    sizeSymbols: [ \"kB\", \"MB\", \"GB\", \"TB\", \"PB\", \"EB\" ]\n                },\n                deleteFile: {\n                    enabled: false,\n                    method: \"DELETE\",\n                    endpoint: \"/server/upload\",\n                    customHeaders: {},\n                    params: {}\n                },\n                cors: {\n                    expected: false,\n                    sendCredentials: false,\n                    allowXdr: false\n                },\n                blobs: {\n                    defaultName: \"misc_data\"\n                },\n                paste: {\n                    targetElement: null,\n                    defaultName: \"pasted_image\"\n                },\n                camera: {\n                    ios: false,\n                    button: null\n                },\n                extraButtons: [],\n                session: {\n                    endpoint: null,\n                    params: {},\n                    customHeaders: {},\n                    refreshOnReset: true\n                },\n                form: {\n                    element: \"qq-form\",\n                    autoUpload: false,\n                    interceptSubmit: true\n                },\n                scaling: {\n                    customResizer: null,\n                    sendOriginal: true,\n                    orient: true,\n                    defaultType: null,\n                    defaultQuality: 80,\n                    failureText: \"Failed to scale\",\n                    includeExif: false,\n                    sizes: []\n                },\n                workarounds: {\n                    iosEmptyVideos: true,\n                    ios8SafariUploads: true,\n                    ios8BrowserCrash: false\n                }\n            };\n            qq.extend(this._options, o, true);\n            this._buttons = [];\n            this._extraButtonSpecs = {};\n            this._buttonIdsForFileIds = [];\n            this._wrapCallbacks();\n            this._disposeSupport = new qq.DisposeSupport();\n            this._storedIds = [];\n            this._autoRetries = [];\n            this._retryTimeouts = [];\n            this._preventRetries = [];\n            this._thumbnailUrls = [];\n            this._netUploadedOrQueued = 0;\n            this._netUploaded = 0;\n            this._uploadData = this._createUploadDataTracker();\n            this._initFormSupportAndParams();\n            this._customHeadersStore = this._createStore(this._options.request.customHeaders);\n            this._deleteFileCustomHeadersStore = this._createStore(this._options.deleteFile.customHeaders);\n            this._deleteFileParamsStore = this._createStore(this._options.deleteFile.params);\n            this._endpointStore = this._createStore(this._options.request.endpoint);\n            this._deleteFileEndpointStore = this._createStore(this._options.deleteFile.endpoint);\n            this._handler = this._createUploadHandler();\n            this._deleteHandler = qq.DeleteFileAjaxRequester && this._createDeleteHandler();\n            if (this._options.button) {\n                this._defaultButtonId = this._createUploadButton({\n                    element: this._options.button,\n                    title: this._options.text.fileInputTitle\n                }).getButtonId();\n            }\n            this._generateExtraButtonSpecs();\n            this._handleCameraAccess();\n            if (this._options.paste.targetElement) {\n                if (qq.PasteSupport) {\n                    this._pasteHandler = this._createPasteHandler();\n                } else {\n                    this.log(\"Paste support module not found\", \"error\");\n                }\n            }\n            this._options.warnBeforeUnload && this._preventLeaveInProgress();\n            this._imageGenerator = qq.ImageGenerator && new qq.ImageGenerator(qq.bind(this.log, this));\n            this._refreshSessionData();\n            this._succeededSinceLastAllComplete = [];\n            this._failedSinceLastAllComplete = [];\n            this._scaler = qq.Scaler && new qq.Scaler(this._options.scaling, qq.bind(this.log, this)) || {};\n            if (this._scaler.enabled) {\n                this._customNewFileHandler = qq.bind(this._scaler.handleNewFile, this._scaler);\n            }\n            if (qq.TotalProgress && qq.supportedFeatures.progressBar) {\n                this._totalProgress = new qq.TotalProgress(qq.bind(this._onTotalProgress, this), function(id) {\n                    var entry = self._uploadData.retrieve({\n                        id: id\n                    });\n                    return entry && entry.size || 0;\n                });\n            }\n            this._currentItemLimit = this._options.validation.itemLimit;\n            this._customResumeDataStore = this._createStore();\n        };\n        qq.FineUploaderBasic.prototype = qq.basePublicApi;\n        qq.extend(qq.FineUploaderBasic.prototype, qq.basePrivateApi);\n    })();\n    qq.AjaxRequester = function(o) {\n        \"use strict\";\n        var log, shouldParamsBeInQueryString, queue = [], requestData = {}, options = {\n            acceptHeader: null,\n            validMethods: [ \"PATCH\", \"POST\", \"PUT\" ],\n            method: \"POST\",\n            contentType: \"application/x-www-form-urlencoded\",\n            maxConnections: 3,\n            customHeaders: {},\n            endpointStore: {},\n            paramsStore: {},\n            mandatedParams: {},\n            allowXRequestedWithAndCacheControl: true,\n            successfulResponseCodes: {\n                DELETE: [ 200, 202, 204 ],\n                PATCH: [ 200, 201, 202, 203, 204 ],\n                POST: [ 200, 201, 202, 203, 204 ],\n                PUT: [ 200, 201, 202, 203, 204 ],\n                GET: [ 200 ]\n            },\n            cors: {\n                expected: false,\n                sendCredentials: false\n            },\n            log: function(str, level) {},\n            onSend: function(id) {},\n            onComplete: function(id, xhrOrXdr, isError) {},\n            onProgress: null\n        };\n        qq.extend(options, o);\n        log = options.log;\n        if (qq.indexOf(options.validMethods, options.method) < 0) {\n            throw new Error(\"'\" + options.method + \"' is not a supported method for this type of request!\");\n        }\n        function isSimpleMethod() {\n            return qq.indexOf([ \"GET\", \"POST\", \"HEAD\" ], options.method) >= 0;\n        }\n        function containsNonSimpleHeaders(headers) {\n            var containsNonSimple = false;\n            qq.each(containsNonSimple, function(idx, header) {\n                if (qq.indexOf([ \"Accept\", \"Accept-Language\", \"Content-Language\", \"Content-Type\" ], header) < 0) {\n                    containsNonSimple = true;\n                    return false;\n                }\n            });\n            return containsNonSimple;\n        }\n        function isXdr(xhr) {\n            return options.cors.expected && xhr.withCredentials === undefined;\n        }\n        function getCorsAjaxTransport() {\n            var xhrOrXdr;\n            if (window.XMLHttpRequest || window.ActiveXObject) {\n                xhrOrXdr = qq.createXhrInstance();\n                if (xhrOrXdr.withCredentials === undefined) {\n                    xhrOrXdr = new XDomainRequest();\n                    xhrOrXdr.onload = function() {};\n                    xhrOrXdr.onerror = function() {};\n                    xhrOrXdr.ontimeout = function() {};\n                    xhrOrXdr.onprogress = function() {};\n                }\n            }\n            return xhrOrXdr;\n        }\n        function getXhrOrXdr(id, suppliedXhr) {\n            var xhrOrXdr = requestData[id] && requestData[id].xhr;\n            if (!xhrOrXdr) {\n                if (suppliedXhr) {\n                    xhrOrXdr = suppliedXhr;\n                } else {\n                    if (options.cors.expected) {\n                        xhrOrXdr = getCorsAjaxTransport();\n                    } else {\n                        xhrOrXdr = qq.createXhrInstance();\n                    }\n                }\n                requestData[id].xhr = xhrOrXdr;\n            }\n            return xhrOrXdr;\n        }\n        function dequeue(id) {\n            var i = qq.indexOf(queue, id), max = options.maxConnections, nextId;\n            delete requestData[id];\n            queue.splice(i, 1);\n            if (queue.length >= max && i < max) {\n                nextId = queue[max - 1];\n                sendRequest(nextId);\n            }\n        }\n        function onComplete(id, xdrError) {\n            var xhr = getXhrOrXdr(id), method = options.method, isError = xdrError === true;\n            dequeue(id);\n            if (isError) {\n                log(method + \" request for \" + id + \" has failed\", \"error\");\n            } else if (!isXdr(xhr) && !isResponseSuccessful(xhr.status)) {\n                isError = true;\n                log(method + \" request for \" + id + \" has failed - response code \" + xhr.status, \"error\");\n            }\n            options.onComplete(id, xhr, isError);\n        }\n        function getParams(id) {\n            var onDemandParams = requestData[id].additionalParams, mandatedParams = options.mandatedParams, params;\n            if (options.paramsStore.get) {\n                params = options.paramsStore.get(id);\n            }\n            if (onDemandParams) {\n                qq.each(onDemandParams, function(name, val) {\n                    params = params || {};\n                    params[name] = val;\n                });\n            }\n            if (mandatedParams) {\n                qq.each(mandatedParams, function(name, val) {\n                    params = params || {};\n                    params[name] = val;\n                });\n            }\n            return params;\n        }\n        function sendRequest(id, optXhr) {\n            var xhr = getXhrOrXdr(id, optXhr), method = options.method, params = getParams(id), payload = requestData[id].payload, url;\n            options.onSend(id);\n            url = createUrl(id, params, requestData[id].additionalQueryParams);\n            if (isXdr(xhr)) {\n                xhr.onload = getXdrLoadHandler(id);\n                xhr.onerror = getXdrErrorHandler(id);\n            } else {\n                xhr.onreadystatechange = getXhrReadyStateChangeHandler(id);\n            }\n            registerForUploadProgress(id);\n            xhr.open(method, url, true);\n            if (options.cors.expected && options.cors.sendCredentials && !isXdr(xhr)) {\n                xhr.withCredentials = true;\n            }\n            setHeaders(id);\n            log(\"Sending \" + method + \" request for \" + id);\n            if (payload) {\n                xhr.send(payload);\n            } else if (shouldParamsBeInQueryString || !params) {\n                xhr.send();\n            } else if (params && options.contentType && options.contentType.toLowerCase().indexOf(\"application/x-www-form-urlencoded\") >= 0) {\n                xhr.send(qq.obj2url(params, \"\"));\n            } else if (params && options.contentType && options.contentType.toLowerCase().indexOf(\"application/json\") >= 0) {\n                xhr.send(JSON.stringify(params));\n            } else {\n                xhr.send(params);\n            }\n            return xhr;\n        }\n        function createUrl(id, params, additionalQueryParams) {\n            var endpoint = options.endpointStore.get(id), addToPath = requestData[id].addToPath;\n            if (addToPath != undefined) {\n                endpoint += \"/\" + addToPath;\n            }\n            if (shouldParamsBeInQueryString && params) {\n                endpoint = qq.obj2url(params, endpoint);\n            }\n            if (additionalQueryParams) {\n                endpoint = qq.obj2url(additionalQueryParams, endpoint);\n            }\n            return endpoint;\n        }\n        function getXhrReadyStateChangeHandler(id) {\n            return function() {\n                if (getXhrOrXdr(id).readyState === 4) {\n                    onComplete(id);\n                }\n            };\n        }\n        function registerForUploadProgress(id) {\n            var onProgress = options.onProgress;\n            if (onProgress) {\n                getXhrOrXdr(id).upload.onprogress = function(e) {\n                    if (e.lengthComputable) {\n                        onProgress(id, e.loaded, e.total);\n                    }\n                };\n            }\n        }\n        function getXdrLoadHandler(id) {\n            return function() {\n                onComplete(id);\n            };\n        }\n        function getXdrErrorHandler(id) {\n            return function() {\n                onComplete(id, true);\n            };\n        }\n        function setHeaders(id) {\n            var xhr = getXhrOrXdr(id), customHeaders = options.customHeaders, onDemandHeaders = requestData[id].additionalHeaders || {}, method = options.method, allHeaders = {};\n            if (!isXdr(xhr)) {\n                options.acceptHeader && xhr.setRequestHeader(\"Accept\", options.acceptHeader);\n                if (options.allowXRequestedWithAndCacheControl) {\n                    if (!options.cors.expected || (!isSimpleMethod() || containsNonSimpleHeaders(customHeaders))) {\n                        xhr.setRequestHeader(\"X-Requested-With\", \"XMLHttpRequest\");\n                        xhr.setRequestHeader(\"Cache-Control\", \"no-cache\");\n                    }\n                }\n                if (options.contentType && (method === \"POST\" || method === \"PUT\")) {\n                    xhr.setRequestHeader(\"Content-Type\", options.contentType);\n                }\n                qq.extend(allHeaders, qq.isFunction(customHeaders) ? customHeaders(id) : customHeaders);\n                qq.extend(allHeaders, onDemandHeaders);\n                qq.each(allHeaders, function(name, val) {\n                    xhr.setRequestHeader(name, val);\n                });\n            }\n        }\n        function isResponseSuccessful(responseCode) {\n            return qq.indexOf(options.successfulResponseCodes[options.method], responseCode) >= 0;\n        }\n        function prepareToSend(id, optXhr, addToPath, additionalParams, additionalQueryParams, additionalHeaders, payload) {\n            requestData[id] = {\n                addToPath: addToPath,\n                additionalParams: additionalParams,\n                additionalQueryParams: additionalQueryParams,\n                additionalHeaders: additionalHeaders,\n                payload: payload\n            };\n            var len = queue.push(id);\n            if (len <= options.maxConnections) {\n                return sendRequest(id, optXhr);\n            }\n        }\n        shouldParamsBeInQueryString = options.method === \"GET\" || options.method === \"DELETE\";\n        qq.extend(this, {\n            initTransport: function(id) {\n                var path, params, headers, payload, cacheBuster, additionalQueryParams;\n                return {\n                    withPath: function(appendToPath) {\n                        path = appendToPath;\n                        return this;\n                    },\n                    withParams: function(additionalParams) {\n                        params = additionalParams;\n                        return this;\n                    },\n                    withQueryParams: function(_additionalQueryParams_) {\n                        additionalQueryParams = _additionalQueryParams_;\n                        return this;\n                    },\n                    withHeaders: function(additionalHeaders) {\n                        headers = additionalHeaders;\n                        return this;\n                    },\n                    withPayload: function(thePayload) {\n                        payload = thePayload;\n                        return this;\n                    },\n                    withCacheBuster: function() {\n                        cacheBuster = true;\n                        return this;\n                    },\n                    send: function(optXhr) {\n                        if (cacheBuster && qq.indexOf([ \"GET\", \"DELETE\" ], options.method) >= 0) {\n                            params.qqtimestamp = new Date().getTime();\n                        }\n                        return prepareToSend(id, optXhr, path, params, additionalQueryParams, headers, payload);\n                    }\n                };\n            },\n            canceled: function(id) {\n                dequeue(id);\n            }\n        });\n    };\n    qq.UploadHandler = function(spec) {\n        \"use strict\";\n        var proxy = spec.proxy, fileState = {}, onCancel = proxy.onCancel, getName = proxy.getName;\n        qq.extend(this, {\n            add: function(id, fileItem) {\n                fileState[id] = fileItem;\n                fileState[id].temp = {};\n            },\n            cancel: function(id) {\n                var self = this, cancelFinalizationEffort = new qq.Promise(), onCancelRetVal = onCancel(id, getName(id), cancelFinalizationEffort);\n                onCancelRetVal.then(function() {\n                    if (self.isValid(id)) {\n                        fileState[id].canceled = true;\n                        self.expunge(id);\n                    }\n                    cancelFinalizationEffort.success();\n                });\n            },\n            expunge: function(id) {\n                delete fileState[id];\n            },\n            getThirdPartyFileId: function(id) {\n                return fileState[id].key;\n            },\n            isValid: function(id) {\n                return fileState[id] !== undefined;\n            },\n            reset: function() {\n                fileState = {};\n            },\n            _getFileState: function(id) {\n                return fileState[id];\n            },\n            _setThirdPartyFileId: function(id, thirdPartyFileId) {\n                fileState[id].key = thirdPartyFileId;\n            },\n            _wasCanceled: function(id) {\n                return !!fileState[id].canceled;\n            }\n        });\n    };\n    qq.UploadHandlerController = function(o, namespace) {\n        \"use strict\";\n        var controller = this, chunkingPossible = false, concurrentChunkingPossible = false, chunking, preventRetryResponse, log, handler, options = {\n            paramsStore: {},\n            maxConnections: 3,\n            chunking: {\n                enabled: false,\n                multiple: {\n                    enabled: false\n                }\n            },\n            log: function(str, level) {},\n            onProgress: function(id, fileName, loaded, total) {},\n            onComplete: function(id, fileName, response, xhr) {},\n            onCancel: function(id, fileName) {},\n            onUploadPrep: function(id) {},\n            onUpload: function(id, fileName) {},\n            onUploadChunk: function(id, fileName, chunkData) {},\n            onUploadChunkSuccess: function(id, chunkData, response, xhr) {},\n            onAutoRetry: function(id, fileName, response, xhr) {},\n            onResume: function(id, fileName, chunkData, customResumeData) {},\n            onUuidChanged: function(id, newUuid) {},\n            getName: function(id) {},\n            setSize: function(id, newSize) {},\n            isQueued: function(id) {},\n            getIdsInProxyGroup: function(id) {},\n            getIdsInBatch: function(id) {},\n            isInProgress: function(id) {}\n        }, chunked = {\n            done: function(id, chunkIdx, response, xhr) {\n                var chunkData = handler._getChunkData(id, chunkIdx);\n                handler._getFileState(id).attemptingResume = false;\n                delete handler._getFileState(id).temp.chunkProgress[chunkIdx];\n                handler._getFileState(id).loaded += chunkData.size;\n                options.onUploadChunkSuccess(id, handler._getChunkDataForCallback(chunkData), response, xhr);\n            },\n            finalize: function(id) {\n                var size = options.getSize(id), name = options.getName(id);\n                log(\"All chunks have been uploaded for \" + id + \" - finalizing....\");\n                handler.finalizeChunks(id).then(function(response, xhr) {\n                    log(\"Finalize successful for \" + id);\n                    var normaizedResponse = upload.normalizeResponse(response, true);\n                    options.onProgress(id, name, size, size);\n                    handler._maybeDeletePersistedChunkData(id);\n                    upload.cleanup(id, normaizedResponse, xhr);\n                }, function(response, xhr) {\n                    var normalizedResponse = upload.normalizeResponse(response, false);\n                    log(\"Problem finalizing chunks for file ID \" + id + \" - \" + normalizedResponse.error, \"error\");\n                    if (normalizedResponse.reset || xhr && options.chunking.success.resetOnStatus.indexOf(xhr.status) >= 0) {\n                        chunked.reset(id);\n                    }\n                    if (!options.onAutoRetry(id, name, normalizedResponse, xhr)) {\n                        upload.cleanup(id, normalizedResponse, xhr);\n                    }\n                });\n            },\n            handleFailure: function(chunkIdx, id, response, xhr) {\n                var name = options.getName(id);\n                log(\"Chunked upload request failed for \" + id + \", chunk \" + chunkIdx);\n                handler.clearCachedChunk(id, chunkIdx);\n                var responseToReport = upload.normalizeResponse(response, false), inProgressIdx;\n                if (responseToReport.reset) {\n                    chunked.reset(id);\n                } else {\n                    var inProgressChunksArray = handler._getFileState(id).chunking.inProgress;\n                    inProgressIdx = inProgressChunksArray ? qq.indexOf(inProgressChunksArray, chunkIdx) : -1;\n                    if (inProgressIdx >= 0) {\n                        handler._getFileState(id).chunking.inProgress.splice(inProgressIdx, 1);\n                        handler._getFileState(id).chunking.remaining.unshift(chunkIdx);\n                    }\n                }\n                if (!handler._getFileState(id).temp.ignoreFailure) {\n                    if (concurrentChunkingPossible) {\n                        handler._getFileState(id).temp.ignoreFailure = true;\n                        log(qq.format(\"Going to attempt to abort these chunks: {}. These are currently in-progress: {}.\", JSON.stringify(Object.keys(handler._getXhrs(id))), JSON.stringify(handler._getFileState(id).chunking.inProgress)));\n                        qq.each(handler._getXhrs(id), function(ckid, ckXhr) {\n                            log(qq.format(\"Attempting to abort file {}.{}. XHR readyState {}. \", id, ckid, ckXhr.readyState));\n                            ckXhr.abort();\n                            ckXhr._cancelled = true;\n                        });\n                        handler.moveInProgressToRemaining(id);\n                        connectionManager.free(id, true);\n                    }\n                    if (!options.onAutoRetry(id, name, responseToReport, xhr)) {\n                        upload.cleanup(id, responseToReport, xhr);\n                    }\n                }\n            },\n            hasMoreParts: function(id) {\n                return !!handler._getFileState(id).chunking.remaining.length;\n            },\n            nextPart: function(id) {\n                var nextIdx = handler._getFileState(id).chunking.remaining.shift();\n                if (nextIdx >= handler._getTotalChunks(id)) {\n                    nextIdx = null;\n                }\n                return nextIdx;\n            },\n            reset: function(id) {\n                log(\"Server or callback has ordered chunking effort to be restarted on next attempt for item ID \" + id, \"error\");\n                handler._maybeDeletePersistedChunkData(id);\n                handler.reevaluateChunking(id);\n                handler._getFileState(id).loaded = 0;\n                handler._getFileState(id).attemptingResume = false;\n            },\n            sendNext: function(id) {\n                var size = options.getSize(id), name = options.getName(id), chunkIdx = chunked.nextPart(id), chunkData = handler._getChunkData(id, chunkIdx), fileState = handler._getFileState(id), resuming = fileState.attemptingResume, inProgressChunks = fileState.chunking.inProgress || [];\n                if (fileState.loaded == null) {\n                    fileState.loaded = 0;\n                }\n                if (resuming && options.onResume(id, name, chunkData, fileState.customResumeData) === false) {\n                    chunked.reset(id);\n                    chunkIdx = chunked.nextPart(id);\n                    chunkData = handler._getChunkData(id, chunkIdx);\n                    resuming = false;\n                }\n                if (chunkIdx == null && inProgressChunks.length === 0) {\n                    chunked.finalize(id);\n                } else {\n                    inProgressChunks.push(chunkIdx);\n                    handler._getFileState(id).chunking.inProgress = inProgressChunks;\n                    if (concurrentChunkingPossible) {\n                        connectionManager.open(id, chunkIdx);\n                    }\n                    if (concurrentChunkingPossible && connectionManager.available() && handler._getFileState(id).chunking.remaining.length) {\n                        chunked.sendNext(id);\n                    }\n                    if (chunkData.blob.size === 0) {\n                        log(qq.format(\"Chunk {} for file {} will not be uploaded, zero sized chunk.\", chunkIdx, id), \"error\");\n                        chunked.handleFailure(chunkIdx, id, \"File is no longer available\", null);\n                    }\n                    var onUploadChunkPromise = options.onUploadChunk(id, name, handler._getChunkDataForCallback(chunkData));\n                    onUploadChunkPromise.then(function(requestOverrides) {\n                        if (!options.isInProgress(id)) {\n                            log(qq.format(\"Not sending chunked upload request for item {}.{} - no longer in progress.\", id, chunkIdx));\n                        } else {\n                            log(qq.format(\"Sending chunked upload request for item {}.{}, bytes {}-{} of {}.\", id, chunkIdx, chunkData.start + 1, chunkData.end, size));\n                            var uploadChunkData = {\n                                chunkIdx: chunkIdx,\n                                id: id,\n                                overrides: requestOverrides,\n                                resuming: resuming\n                            };\n                            handler.uploadChunk(uploadChunkData).then(function success(response, xhr) {\n                                log(\"Chunked upload request succeeded for \" + id + \", chunk \" + chunkIdx);\n                                handler.clearCachedChunk(id, chunkIdx);\n                                var inProgressChunks = handler._getFileState(id).chunking.inProgress || [], responseToReport = upload.normalizeResponse(response, true), inProgressChunkIdx = qq.indexOf(inProgressChunks, chunkIdx);\n                                log(qq.format(\"Chunk {} for file {} uploaded successfully.\", chunkIdx, id));\n                                chunked.done(id, chunkIdx, responseToReport, xhr);\n                                if (inProgressChunkIdx >= 0) {\n                                    inProgressChunks.splice(inProgressChunkIdx, 1);\n                                }\n                                handler._maybePersistChunkedState(id);\n                                if (!chunked.hasMoreParts(id) && inProgressChunks.length === 0) {\n                                    chunked.finalize(id);\n                                } else if (chunked.hasMoreParts(id)) {\n                                    chunked.sendNext(id);\n                                } else {\n                                    log(qq.format(\"File ID {} has no more chunks to send and these chunk indexes are still marked as in-progress: {}\", id, JSON.stringify(inProgressChunks)));\n                                }\n                            }, function failure(response, xhr) {\n                                chunked.handleFailure(chunkIdx, id, response, xhr);\n                            }).done(function() {\n                                handler.clearXhr(id, chunkIdx);\n                            });\n                        }\n                    }, function(error) {\n                        chunked.handleFailure(chunkIdx, id, error, null);\n                    });\n                }\n            }\n        }, connectionManager = {\n            _open: [],\n            _openChunks: {},\n            _waiting: [],\n            available: function() {\n                var max = options.maxConnections, openChunkEntriesCount = 0, openChunksCount = 0;\n                qq.each(connectionManager._openChunks, function(fileId, openChunkIndexes) {\n                    openChunkEntriesCount++;\n                    openChunksCount += openChunkIndexes.length;\n                });\n                return max - (connectionManager._open.length - openChunkEntriesCount + openChunksCount);\n            },\n            free: function(id, dontAllowNext) {\n                var allowNext = !dontAllowNext, waitingIndex = qq.indexOf(connectionManager._waiting, id), connectionsIndex = qq.indexOf(connectionManager._open, id), nextId;\n                delete connectionManager._openChunks[id];\n                if (upload.getProxyOrBlob(id) instanceof qq.BlobProxy) {\n                    log(\"Generated blob upload has ended for \" + id + \", disposing generated blob.\");\n                    delete handler._getFileState(id).file;\n                }\n                if (waitingIndex >= 0) {\n                    connectionManager._waiting.splice(waitingIndex, 1);\n                } else if (allowNext && connectionsIndex >= 0) {\n                    connectionManager._open.splice(connectionsIndex, 1);\n                    nextId = connectionManager._waiting.shift();\n                    if (nextId >= 0) {\n                        connectionManager._open.push(nextId);\n                        upload.start(nextId);\n                    }\n                }\n            },\n            getWaitingOrConnected: function() {\n                var waitingOrConnected = [];\n                qq.each(connectionManager._openChunks, function(fileId, chunks) {\n                    if (chunks && chunks.length) {\n                        waitingOrConnected.push(parseInt(fileId));\n                    }\n                });\n                qq.each(connectionManager._open, function(idx, fileId) {\n                    if (!connectionManager._openChunks[fileId]) {\n                        waitingOrConnected.push(parseInt(fileId));\n                    }\n                });\n                waitingOrConnected = waitingOrConnected.concat(connectionManager._waiting);\n                return waitingOrConnected;\n            },\n            isUsingConnection: function(id) {\n                return qq.indexOf(connectionManager._open, id) >= 0;\n            },\n            open: function(id, chunkIdx) {\n                if (chunkIdx == null) {\n                    connectionManager._waiting.push(id);\n                }\n                if (connectionManager.available()) {\n                    if (chunkIdx == null) {\n                        connectionManager._waiting.pop();\n                        connectionManager._open.push(id);\n                    } else {\n                        (function() {\n                            var openChunksEntry = connectionManager._openChunks[id] || [];\n                            openChunksEntry.push(chunkIdx);\n                            connectionManager._openChunks[id] = openChunksEntry;\n                        })();\n                    }\n                    return true;\n                }\n                return false;\n            },\n            reset: function() {\n                connectionManager._waiting = [];\n                connectionManager._open = [];\n            }\n        }, simple = {\n            send: function(id, name) {\n                var fileState = handler._getFileState(id);\n                if (!fileState) {\n                    log(\"Ignoring send request as this upload may have been cancelled, File ID \" + id, \"warn\");\n                    return;\n                }\n                fileState.loaded = 0;\n                log(\"Sending simple upload request for \" + id);\n                handler.uploadFile(id).then(function(response, optXhr) {\n                    log(\"Simple upload request succeeded for \" + id);\n                    var responseToReport = upload.normalizeResponse(response, true), size = options.getSize(id);\n                    options.onProgress(id, name, size, size);\n                    upload.maybeNewUuid(id, responseToReport);\n                    upload.cleanup(id, responseToReport, optXhr);\n                }, function(response, optXhr) {\n                    log(\"Simple upload request failed for \" + id);\n                    var responseToReport = upload.normalizeResponse(response, false);\n                    if (!options.onAutoRetry(id, name, responseToReport, optXhr)) {\n                        upload.cleanup(id, responseToReport, optXhr);\n                    }\n                });\n            }\n        }, upload = {\n            cancel: function(id) {\n                log(\"Cancelling \" + id);\n                options.paramsStore.remove(id);\n                connectionManager.free(id);\n            },\n            cleanup: function(id, response, optXhr) {\n                var name = options.getName(id);\n                options.onComplete(id, name, response, optXhr);\n                if (handler._getFileState(id)) {\n                    handler._clearXhrs && handler._clearXhrs(id);\n                }\n                connectionManager.free(id);\n            },\n            getProxyOrBlob: function(id) {\n                return handler.getProxy && handler.getProxy(id) || handler.getFile && handler.getFile(id);\n            },\n            initHandler: function() {\n                var handlerType = namespace ? qq[namespace] : qq.traditional, handlerModuleSubtype = qq.supportedFeatures.ajaxUploading ? \"Xhr\" : \"Form\";\n                handler = new handlerType[handlerModuleSubtype + \"UploadHandler\"](options, {\n                    getCustomResumeData: options.getCustomResumeData,\n                    getDataByUuid: options.getDataByUuid,\n                    getName: options.getName,\n                    getSize: options.getSize,\n                    getUuid: options.getUuid,\n                    log: log,\n                    onCancel: options.onCancel,\n                    onProgress: options.onProgress,\n                    onUuidChanged: options.onUuidChanged,\n                    onFinalizing: function(id) {\n                        options.setStatus(id, qq.status.UPLOAD_FINALIZING);\n                    }\n                });\n                if (handler._removeExpiredChunkingRecords) {\n                    handler._removeExpiredChunkingRecords();\n                }\n            },\n            isDeferredEligibleForUpload: function(id) {\n                return options.isQueued(id);\n            },\n            maybeDefer: function(id, blob) {\n                if (blob && !handler.getFile(id) && blob instanceof qq.BlobProxy) {\n                    options.onUploadPrep(id);\n                    log(\"Attempting to generate a blob on-demand for \" + id);\n                    blob.create().then(function(generatedBlob) {\n                        log(\"Generated an on-demand blob for \" + id);\n                        handler.updateBlob(id, generatedBlob);\n                        options.setSize(id, generatedBlob.size);\n                        handler.reevaluateChunking(id);\n                        upload.maybeSendDeferredFiles(id);\n                    }, function(errorMessage) {\n                        var errorResponse = {};\n                        if (errorMessage) {\n                            errorResponse.error = errorMessage;\n                        }\n                        log(qq.format(\"Failed to generate blob for ID {}.  Error message: {}.\", id, errorMessage), \"error\");\n                        options.onComplete(id, options.getName(id), qq.extend(errorResponse, preventRetryResponse), null);\n                        upload.maybeSendDeferredFiles(id);\n                        connectionManager.free(id);\n                    });\n                } else {\n                    return upload.maybeSendDeferredFiles(id);\n                }\n                return false;\n            },\n            maybeSendDeferredFiles: function(id) {\n                var idsInGroup = options.getIdsInProxyGroup(id), uploadedThisId = false;\n                if (idsInGroup && idsInGroup.length) {\n                    log(\"Maybe ready to upload proxy group file \" + id);\n                    qq.each(idsInGroup, function(idx, idInGroup) {\n                        if (upload.isDeferredEligibleForUpload(idInGroup) && !!handler.getFile(idInGroup)) {\n                            uploadedThisId = idInGroup === id;\n                            upload.now(idInGroup);\n                        } else if (upload.isDeferredEligibleForUpload(idInGroup)) {\n                            return false;\n                        }\n                    });\n                } else {\n                    uploadedThisId = true;\n                    upload.now(id);\n                }\n                return uploadedThisId;\n            },\n            maybeNewUuid: function(id, response) {\n                if (response.newUuid !== undefined) {\n                    options.onUuidChanged(id, response.newUuid);\n                }\n            },\n            normalizeResponse: function(originalResponse, successful) {\n                var response = originalResponse;\n                if (!qq.isObject(originalResponse)) {\n                    response = {};\n                    if (qq.isString(originalResponse) && !successful) {\n                        response.error = originalResponse;\n                    }\n                }\n                response.success = successful;\n                return response;\n            },\n            now: function(id) {\n                var name = options.getName(id);\n                if (!controller.isValid(id)) {\n                    throw new qq.Error(id + \" is not a valid file ID to upload!\");\n                }\n                options.onUpload(id, name).then(function(response) {\n                    if (response && response.pause) {\n                        options.setStatus(id, qq.status.PAUSED);\n                        handler.pause(id);\n                        connectionManager.free(id);\n                    } else {\n                        if (chunkingPossible && handler._shouldChunkThisFile(id)) {\n                            chunked.sendNext(id);\n                        } else {\n                            simple.send(id, name);\n                        }\n                    }\n                }, function(error) {\n                    error = error || {};\n                    log(id + \" upload start aborted due to rejected onUpload Promise - details: \" + error, \"error\");\n                    if (!options.onAutoRetry(id, name, error.responseJSON || {})) {\n                        var response = upload.normalizeResponse(error.responseJSON, false);\n                        upload.cleanup(id, response);\n                    }\n                });\n            },\n            start: function(id) {\n                var blobToUpload = upload.getProxyOrBlob(id);\n                if (blobToUpload) {\n                    return upload.maybeDefer(id, blobToUpload);\n                } else {\n                    upload.now(id);\n                    return true;\n                }\n            }\n        };\n        qq.extend(this, {\n            add: function(id, file) {\n                handler.add.apply(this, arguments);\n            },\n            upload: function(id) {\n                if (connectionManager.open(id)) {\n                    return upload.start(id);\n                }\n                return false;\n            },\n            retry: function(id) {\n                if (concurrentChunkingPossible) {\n                    handler._getFileState(id).temp.ignoreFailure = false;\n                }\n                if (connectionManager.isUsingConnection(id)) {\n                    return upload.start(id);\n                } else {\n                    return controller.upload(id);\n                }\n            },\n            cancel: function(id) {\n                var cancelRetVal = handler.cancel(id);\n                if (qq.isGenericPromise(cancelRetVal)) {\n                    cancelRetVal.then(function() {\n                        upload.cancel(id);\n                    });\n                } else if (cancelRetVal !== false) {\n                    upload.cancel(id);\n                }\n            },\n            cancelAll: function() {\n                var waitingOrConnected = connectionManager.getWaitingOrConnected(), i;\n                if (waitingOrConnected.length) {\n                    for (i = waitingOrConnected.length - 1; i >= 0; i--) {\n                        controller.cancel(waitingOrConnected[i]);\n                    }\n                }\n                connectionManager.reset();\n            },\n            getFile: function(id) {\n                if (handler.getProxy && handler.getProxy(id)) {\n                    return handler.getProxy(id).referenceBlob;\n                }\n                return handler.getFile && handler.getFile(id);\n            },\n            isProxied: function(id) {\n                return !!(handler.getProxy && handler.getProxy(id));\n            },\n            getInput: function(id) {\n                if (handler.getInput) {\n                    return handler.getInput(id);\n                }\n            },\n            reset: function() {\n                log(\"Resetting upload handler\");\n                controller.cancelAll();\n                connectionManager.reset();\n                handler.reset();\n            },\n            expunge: function(id) {\n                if (controller.isValid(id)) {\n                    return handler.expunge(id);\n                }\n            },\n            isValid: function(id) {\n                return handler.isValid(id);\n            },\n            hasResumeRecord: function(id) {\n                var key = handler.isValid(id) && handler._getLocalStorageId && handler._getLocalStorageId(id);\n                if (key) {\n                    return !!localStorage.getItem(key);\n                }\n                return false;\n            },\n            getResumableFilesData: function() {\n                if (handler.getResumableFilesData) {\n                    return handler.getResumableFilesData();\n                }\n                return [];\n            },\n            getThirdPartyFileId: function(id) {\n                if (controller.isValid(id)) {\n                    return handler.getThirdPartyFileId(id);\n                }\n            },\n            pause: function(id) {\n                if (controller.isResumable(id) && handler.pause && controller.isValid(id) && handler.pause(id)) {\n                    connectionManager.free(id);\n                    handler.moveInProgressToRemaining(id);\n                    return true;\n                }\n                return false;\n            },\n            isAttemptingResume: function(id) {\n                return !!handler.isAttemptingResume && handler.isAttemptingResume(id);\n            },\n            isResumable: function(id) {\n                return !!handler.isResumable && handler.isResumable(id);\n            }\n        });\n        qq.extend(options, o);\n        log = options.log;\n        chunkingPossible = options.chunking.enabled && qq.supportedFeatures.chunking;\n        concurrentChunkingPossible = chunkingPossible && options.chunking.concurrent.enabled;\n        preventRetryResponse = function() {\n            var response = {};\n            response[options.preventRetryParam] = true;\n            return response;\n        }();\n        upload.initHandler();\n    };\n    qq.WindowReceiveMessage = function(o) {\n        \"use strict\";\n        var options = {\n            log: function(message, level) {}\n        }, callbackWrapperDetachers = {};\n        qq.extend(options, o);\n        qq.extend(this, {\n            receiveMessage: function(id, callback) {\n                var onMessageCallbackWrapper = function(event) {\n                    callback(event.data);\n                };\n                if (window.postMessage) {\n                    callbackWrapperDetachers[id] = qq(window).attach(\"message\", onMessageCallbackWrapper);\n                } else {\n                    log(\"iframe message passing not supported in this browser!\", \"error\");\n                }\n            },\n            stopReceivingMessages: function(id) {\n                if (window.postMessage) {\n                    var detacher = callbackWrapperDetachers[id];\n                    if (detacher) {\n                        detacher();\n                    }\n                }\n            }\n        });\n    };\n    qq.FormUploadHandler = function(spec) {\n        \"use strict\";\n        var options = spec.options, handler = this, proxy = spec.proxy, formHandlerInstanceId = qq.getUniqueId(), onloadCallbacks = {}, detachLoadEvents = {}, postMessageCallbackTimers = {}, isCors = options.isCors, inputName = options.inputName, getUuid = proxy.getUuid, log = proxy.log, corsMessageReceiver = new qq.WindowReceiveMessage({\n            log: log\n        });\n        function expungeFile(id) {\n            delete detachLoadEvents[id];\n            if (isCors) {\n                clearTimeout(postMessageCallbackTimers[id]);\n                delete postMessageCallbackTimers[id];\n                corsMessageReceiver.stopReceivingMessages(id);\n            }\n            var iframe = document.getElementById(handler._getIframeName(id));\n            if (iframe) {\n                iframe.setAttribute(\"src\", \"javascript:false;\");\n                qq(iframe).remove();\n            }\n        }\n        function getFileIdForIframeName(iframeName) {\n            return iframeName.split(\"_\")[0];\n        }\n        function initIframeForUpload(name) {\n            var iframe = qq.toElement(\"<iframe src='javascript:false;' name='\" + name + \"' />\");\n            iframe.setAttribute(\"id\", name);\n            iframe.style.display = \"none\";\n            document.body.appendChild(iframe);\n            return iframe;\n        }\n        function registerPostMessageCallback(iframe, callback) {\n            var iframeName = iframe.id, fileId = getFileIdForIframeName(iframeName), uuid = getUuid(fileId);\n            onloadCallbacks[uuid] = callback;\n            detachLoadEvents[fileId] = qq(iframe).attach(\"load\", function() {\n                if (handler.getInput(fileId)) {\n                    log(\"Received iframe load event for CORS upload request (iframe name \" + iframeName + \")\");\n                    postMessageCallbackTimers[iframeName] = setTimeout(function() {\n                        var errorMessage = \"No valid message received from loaded iframe for iframe name \" + iframeName;\n                        log(errorMessage, \"error\");\n                        callback({\n                            error: errorMessage\n                        });\n                    }, 1e3);\n                }\n            });\n            corsMessageReceiver.receiveMessage(iframeName, function(message) {\n                log(\"Received the following window message: '\" + message + \"'\");\n                var fileId = getFileIdForIframeName(iframeName), response = handler._parseJsonResponse(message), uuid = response.uuid, onloadCallback;\n                if (uuid && onloadCallbacks[uuid]) {\n                    log(\"Handling response for iframe name \" + iframeName);\n                    clearTimeout(postMessageCallbackTimers[iframeName]);\n                    delete postMessageCallbackTimers[iframeName];\n                    handler._detachLoadEvent(iframeName);\n                    onloadCallback = onloadCallbacks[uuid];\n                    delete onloadCallbacks[uuid];\n                    corsMessageReceiver.stopReceivingMessages(iframeName);\n                    onloadCallback(response);\n                } else if (!uuid) {\n                    log(\"'\" + message + \"' does not contain a UUID - ignoring.\");\n                }\n            });\n        }\n        qq.extend(this, new qq.UploadHandler(spec));\n        qq.override(this, function(super_) {\n            return {\n                add: function(id, fileInput) {\n                    super_.add(id, {\n                        input: fileInput\n                    });\n                    fileInput.setAttribute(\"name\", inputName);\n                    if (fileInput.parentNode) {\n                        qq(fileInput).remove();\n                    }\n                },\n                expunge: function(id) {\n                    expungeFile(id);\n                    super_.expunge(id);\n                },\n                isValid: function(id) {\n                    return super_.isValid(id) && handler._getFileState(id).input !== undefined;\n                }\n            };\n        });\n        qq.extend(this, {\n            getInput: function(id) {\n                return handler._getFileState(id).input;\n            },\n            _attachLoadEvent: function(iframe, callback) {\n                var responseDescriptor;\n                if (isCors) {\n                    registerPostMessageCallback(iframe, callback);\n                } else {\n                    detachLoadEvents[iframe.id] = qq(iframe).attach(\"load\", function() {\n                        log(\"Received response for \" + iframe.id);\n                        if (!iframe.parentNode) {\n                            return;\n                        }\n                        try {\n                            if (iframe.contentDocument && iframe.contentDocument.body && iframe.contentDocument.body.innerHTML == \"false\") {\n                                return;\n                            }\n                        } catch (error) {\n                            log(\"Error when attempting to access iframe during handling of upload response (\" + error.message + \")\", \"error\");\n                            responseDescriptor = {\n                                success: false\n                            };\n                        }\n                        callback(responseDescriptor);\n                    });\n                }\n            },\n            _createIframe: function(id) {\n                var iframeName = handler._getIframeName(id);\n                return initIframeForUpload(iframeName);\n            },\n            _detachLoadEvent: function(id) {\n                if (detachLoadEvents[id] !== undefined) {\n                    detachLoadEvents[id]();\n                    delete detachLoadEvents[id];\n                }\n            },\n            _getIframeName: function(fileId) {\n                return fileId + \"_\" + formHandlerInstanceId;\n            },\n            _initFormForUpload: function(spec) {\n                var method = spec.method, endpoint = spec.endpoint, params = spec.params, paramsInBody = spec.paramsInBody, targetName = spec.targetName, form = qq.toElement(\"<form method='\" + method + \"' enctype='multipart/form-data'></form>\"), url = endpoint;\n                if (paramsInBody) {\n                    qq.obj2Inputs(params, form);\n                } else {\n                    url = qq.obj2url(params, endpoint);\n                }\n                form.setAttribute(\"action\", url);\n                form.setAttribute(\"target\", targetName);\n                form.style.display = \"none\";\n                document.body.appendChild(form);\n                return form;\n            },\n            _parseJsonResponse: function(innerHtmlOrMessage) {\n                var response = {};\n                try {\n                    response = qq.parseJson(innerHtmlOrMessage);\n                } catch (error) {\n                    log(\"Error when attempting to parse iframe upload response (\" + error.message + \")\", \"error\");\n                }\n                return response;\n            }\n        });\n    };\n    qq.XhrUploadHandler = function(spec) {\n        \"use strict\";\n        var handler = this, namespace = spec.options.namespace, proxy = spec.proxy, chunking = spec.options.chunking, getChunkSize = function(id) {\n            var fileState = handler._getFileState(id);\n            if (fileState.chunkSize) {\n                return fileState.chunkSize;\n            } else {\n                var chunkSize = chunking.partSize;\n                if (qq.isFunction(chunkSize)) {\n                    chunkSize = chunkSize(id, getSize(id));\n                }\n                fileState.chunkSize = chunkSize;\n                return chunkSize;\n            }\n        }, resume = spec.options.resume, chunkFiles = chunking && spec.options.chunking.enabled && qq.supportedFeatures.chunking, resumeEnabled = resume && spec.options.resume.enabled && chunkFiles && qq.supportedFeatures.resume, getName = proxy.getName, getSize = proxy.getSize, getUuid = proxy.getUuid, getEndpoint = proxy.getEndpoint, getDataByUuid = proxy.getDataByUuid, onUuidChanged = proxy.onUuidChanged, onProgress = proxy.onProgress, log = proxy.log, getCustomResumeData = proxy.getCustomResumeData;\n        function abort(id) {\n            qq.each(handler._getXhrs(id), function(xhrId, xhr) {\n                var ajaxRequester = handler._getAjaxRequester(id, xhrId);\n                xhr.onreadystatechange = null;\n                xhr.upload.onprogress = null;\n                xhr.abort();\n                ajaxRequester && ajaxRequester.canceled && ajaxRequester.canceled(id);\n            });\n        }\n        qq.extend(this, new qq.UploadHandler(spec));\n        qq.override(this, function(super_) {\n            return {\n                add: function(id, blobOrProxy) {\n                    if (qq.isFile(blobOrProxy) || qq.isBlob(blobOrProxy)) {\n                        super_.add(id, {\n                            file: blobOrProxy\n                        });\n                    } else if (blobOrProxy instanceof qq.BlobProxy) {\n                        super_.add(id, {\n                            proxy: blobOrProxy\n                        });\n                    } else {\n                        throw new Error(\"Passed obj is not a File, Blob, or proxy\");\n                    }\n                    handler._initTempState(id);\n                    resumeEnabled && handler._maybePrepareForResume(id);\n                },\n                expunge: function(id) {\n                    abort(id);\n                    handler._maybeDeletePersistedChunkData(id);\n                    handler._clearXhrs(id);\n                    super_.expunge(id);\n                }\n            };\n        });\n        qq.extend(this, {\n            clearCachedChunk: function(id, chunkIdx) {\n                var fileState = handler._getFileState(id);\n                if (fileState) {\n                    delete fileState.temp.cachedChunks[chunkIdx];\n                }\n            },\n            clearXhr: function(id, chunkIdx) {\n                var tempState = handler._getFileState(id).temp;\n                if (tempState.xhrs) {\n                    delete tempState.xhrs[chunkIdx];\n                }\n                if (tempState.ajaxRequesters) {\n                    delete tempState.ajaxRequesters[chunkIdx];\n                }\n            },\n            finalizeChunks: function(id, responseParser) {\n                var lastChunkIdx = handler._getTotalChunks(id) - 1, xhr = handler._getXhr(id, lastChunkIdx);\n                if (responseParser) {\n                    return new qq.Promise().success(responseParser(xhr), xhr);\n                }\n                return new qq.Promise().success({}, xhr);\n            },\n            getFile: function(id) {\n                return handler.isValid(id) && handler._getFileState(id).file;\n            },\n            getProxy: function(id) {\n                return handler.isValid(id) && handler._getFileState(id).proxy;\n            },\n            getResumableFilesData: function() {\n                var resumableFilesData = [];\n                handler._iterateResumeRecords(function(key, uploadData) {\n                    handler.moveInProgressToRemaining(null, uploadData.chunking.inProgress, uploadData.chunking.remaining);\n                    var data = {\n                        name: uploadData.name,\n                        remaining: uploadData.chunking.remaining,\n                        size: uploadData.size,\n                        uuid: uploadData.uuid\n                    };\n                    if (uploadData.key) {\n                        data.key = uploadData.key;\n                    }\n                    if (uploadData.customResumeData) {\n                        data.customResumeData = uploadData.customResumeData;\n                    }\n                    resumableFilesData.push(data);\n                });\n                return resumableFilesData;\n            },\n            isAttemptingResume: function(id) {\n                return handler._getFileState(id).attemptingResume;\n            },\n            isResumable: function(id) {\n                return !!chunking && handler.isValid(id) && !handler._getFileState(id).notResumable;\n            },\n            moveInProgressToRemaining: function(id, optInProgress, optRemaining) {\n                var fileState = handler._getFileState(id) || {}, chunkingState = fileState.chunking || {}, inProgress = optInProgress || chunkingState.inProgress, remaining = optRemaining || chunkingState.remaining;\n                if (inProgress) {\n                    log(qq.format(\"Moving these chunks from in-progress {}, to remaining.\", JSON.stringify(inProgress)));\n                    inProgress.reverse();\n                    qq.each(inProgress, function(idx, chunkIdx) {\n                        remaining.unshift(chunkIdx);\n                    });\n                    inProgress.length = 0;\n                }\n            },\n            pause: function(id) {\n                if (handler.isValid(id)) {\n                    log(qq.format(\"Aborting XHR upload for {} '{}' due to pause instruction.\", id, getName(id)));\n                    handler._getFileState(id).paused = true;\n                    abort(id);\n                    return true;\n                }\n            },\n            reevaluateChunking: function(id) {\n                if (chunking && handler.isValid(id)) {\n                    var state = handler._getFileState(id), totalChunks, i;\n                    delete state.chunking;\n                    state.chunking = {};\n                    totalChunks = handler._getTotalChunks(id);\n                    if (totalChunks > 1 || chunking.mandatory) {\n                        state.chunking.enabled = true;\n                        state.chunking.parts = totalChunks;\n                        state.chunking.remaining = [];\n                        for (i = 0; i < totalChunks; i++) {\n                            state.chunking.remaining.push(i);\n                        }\n                        handler._initTempState(id);\n                    } else {\n                        state.chunking.enabled = false;\n                    }\n                }\n            },\n            updateBlob: function(id, newBlob) {\n                if (handler.isValid(id)) {\n                    handler._getFileState(id).file = newBlob;\n                }\n            },\n            _clearXhrs: function(id) {\n                var tempState = handler._getFileState(id).temp;\n                qq.each(tempState.ajaxRequesters, function(chunkId) {\n                    delete tempState.ajaxRequesters[chunkId];\n                });\n                qq.each(tempState.xhrs, function(chunkId) {\n                    delete tempState.xhrs[chunkId];\n                });\n            },\n            _createXhr: function(id, optChunkIdx) {\n                return handler._registerXhr(id, optChunkIdx, qq.createXhrInstance());\n            },\n            _getAjaxRequester: function(id, optChunkIdx) {\n                var chunkIdx = optChunkIdx == null ? -1 : optChunkIdx;\n                return handler._getFileState(id).temp.ajaxRequesters[chunkIdx];\n            },\n            _getChunkData: function(id, chunkIndex) {\n                var chunkSize = getChunkSize(id), fileSize = getSize(id), fileOrBlob = handler.getFile(id), startBytes = chunkSize * chunkIndex, endBytes = startBytes + chunkSize >= fileSize ? fileSize : startBytes + chunkSize, totalChunks = handler._getTotalChunks(id), cachedChunks = this._getFileState(id).temp.cachedChunks, blob = cachedChunks[chunkIndex] || qq.sliceBlob(fileOrBlob, startBytes, endBytes);\n                cachedChunks[chunkIndex] = blob;\n                return {\n                    part: chunkIndex,\n                    start: startBytes,\n                    end: endBytes,\n                    count: totalChunks,\n                    blob: blob,\n                    size: endBytes - startBytes\n                };\n            },\n            _getChunkDataForCallback: function(chunkData) {\n                return {\n                    partIndex: chunkData.part,\n                    startByte: chunkData.start + 1,\n                    endByte: chunkData.end,\n                    totalParts: chunkData.count\n                };\n            },\n            _getLocalStorageId: function(id) {\n                var formatVersion = \"5.0\", name = getName(id), size = getSize(id), chunkSize = getChunkSize(id), endpoint = getEndpoint(id), customKeys = resume.customKeys(id), localStorageId = qq.format(\"qq{}resume{}-{}-{}-{}-{}\", namespace, formatVersion, name, size, chunkSize, endpoint);\n                customKeys.forEach(function(key) {\n                    localStorageId += \"-\" + key;\n                });\n                return localStorageId;\n            },\n            _getMimeType: function(id) {\n                return handler.getFile(id).type;\n            },\n            _getPersistableData: function(id) {\n                return handler._getFileState(id).chunking;\n            },\n            _getTotalChunks: function(id) {\n                if (chunking) {\n                    var fileSize = getSize(id), chunkSize = getChunkSize(id);\n                    return Math.ceil(fileSize / chunkSize);\n                }\n            },\n            _getXhr: function(id, optChunkIdx) {\n                var chunkIdx = optChunkIdx == null ? -1 : optChunkIdx;\n                return handler._getFileState(id).temp.xhrs[chunkIdx];\n            },\n            _getXhrs: function(id) {\n                return handler._getFileState(id).temp.xhrs;\n            },\n            _iterateResumeRecords: function(callback) {\n                if (resumeEnabled) {\n                    qq.each(localStorage, function(key, item) {\n                        if (key.indexOf(qq.format(\"qq{}resume\", namespace)) === 0) {\n                            var uploadData = JSON.parse(item);\n                            callback(key, uploadData);\n                        }\n                    });\n                }\n            },\n            _initTempState: function(id) {\n                handler._getFileState(id).temp = {\n                    ajaxRequesters: {},\n                    chunkProgress: {},\n                    xhrs: {},\n                    cachedChunks: {}\n                };\n            },\n            _markNotResumable: function(id) {\n                handler._getFileState(id).notResumable = true;\n            },\n            _maybeDeletePersistedChunkData: function(id) {\n                var localStorageId;\n                if (resumeEnabled && handler.isResumable(id)) {\n                    localStorageId = handler._getLocalStorageId(id);\n                    if (localStorageId && localStorage.getItem(localStorageId)) {\n                        localStorage.removeItem(localStorageId);\n                        return true;\n                    }\n                }\n                return false;\n            },\n            _maybePrepareForResume: function(id) {\n                var state = handler._getFileState(id), localStorageId, persistedData;\n                if (resumeEnabled && state.key === undefined) {\n                    localStorageId = handler._getLocalStorageId(id);\n                    persistedData = localStorage.getItem(localStorageId);\n                    if (persistedData) {\n                        persistedData = JSON.parse(persistedData);\n                        if (getDataByUuid(persistedData.uuid)) {\n                            handler._markNotResumable(id);\n                        } else {\n                            log(qq.format(\"Identified file with ID {} and name of {} as resumable.\", id, getName(id)));\n                            onUuidChanged(id, persistedData.uuid);\n                            state.key = persistedData.key;\n                            state.chunking = persistedData.chunking;\n                            state.loaded = persistedData.loaded;\n                            state.customResumeData = persistedData.customResumeData;\n                            state.attemptingResume = true;\n                            handler.moveInProgressToRemaining(id);\n                        }\n                    }\n                }\n            },\n            _maybePersistChunkedState: function(id) {\n                var state = handler._getFileState(id), localStorageId, persistedData;\n                if (resumeEnabled && handler.isResumable(id)) {\n                    var customResumeData = getCustomResumeData(id);\n                    localStorageId = handler._getLocalStorageId(id);\n                    persistedData = {\n                        name: getName(id),\n                        size: getSize(id),\n                        uuid: getUuid(id),\n                        key: state.key,\n                        chunking: state.chunking,\n                        loaded: state.loaded,\n                        lastUpdated: Date.now()\n                    };\n                    if (customResumeData) {\n                        persistedData.customResumeData = customResumeData;\n                    }\n                    try {\n                        localStorage.setItem(localStorageId, JSON.stringify(persistedData));\n                    } catch (error) {\n                        log(qq.format(\"Unable to save resume data for '{}' due to error: '{}'.\", id, error.toString()), \"warn\");\n                    }\n                }\n            },\n            _registerProgressHandler: function(id, chunkIdx, chunkSize) {\n                var xhr = handler._getXhr(id, chunkIdx), name = getName(id), progressCalculator = {\n                    simple: function(loaded, total) {\n                        var fileSize = getSize(id);\n                        if (loaded === total) {\n                            onProgress(id, name, fileSize, fileSize);\n                        } else {\n                            onProgress(id, name, loaded >= fileSize ? fileSize - 1 : loaded, fileSize);\n                        }\n                    },\n                    chunked: function(loaded, total) {\n                        var chunkProgress = handler._getFileState(id).temp.chunkProgress, totalSuccessfullyLoadedForFile = handler._getFileState(id).loaded, loadedForRequest = loaded, totalForRequest = total, totalFileSize = getSize(id), estActualChunkLoaded = loadedForRequest - (totalForRequest - chunkSize), totalLoadedForFile = totalSuccessfullyLoadedForFile;\n                        chunkProgress[chunkIdx] = estActualChunkLoaded;\n                        qq.each(chunkProgress, function(chunkIdx, chunkLoaded) {\n                            totalLoadedForFile += chunkLoaded;\n                        });\n                        onProgress(id, name, totalLoadedForFile, totalFileSize);\n                    }\n                };\n                xhr.upload.onprogress = function(e) {\n                    if (e.lengthComputable) {\n                        var type = chunkSize == null ? \"simple\" : \"chunked\";\n                        progressCalculator[type](e.loaded, e.total);\n                    }\n                };\n            },\n            _registerXhr: function(id, optChunkIdx, xhr, optAjaxRequester) {\n                var xhrsId = optChunkIdx == null ? -1 : optChunkIdx, tempState = handler._getFileState(id).temp;\n                tempState.xhrs = tempState.xhrs || {};\n                tempState.ajaxRequesters = tempState.ajaxRequesters || {};\n                tempState.xhrs[xhrsId] = xhr;\n                if (optAjaxRequester) {\n                    tempState.ajaxRequesters[xhrsId] = optAjaxRequester;\n                }\n                return xhr;\n            },\n            _removeExpiredChunkingRecords: function() {\n                var expirationDays = resume.recordsExpireIn;\n                handler._iterateResumeRecords(function(key, uploadData) {\n                    var expirationDate = new Date(uploadData.lastUpdated);\n                    expirationDate.setDate(expirationDate.getDate() + expirationDays);\n                    if (expirationDate.getTime() <= Date.now()) {\n                        log(\"Removing expired resume record with key \" + key);\n                        localStorage.removeItem(key);\n                    }\n                });\n            },\n            _shouldChunkThisFile: function(id) {\n                var state = handler._getFileState(id);\n                if (state) {\n                    if (!state.chunking) {\n                        handler.reevaluateChunking(id);\n                    }\n                    return state.chunking.enabled;\n                }\n            }\n        });\n    };\n    qq.DeleteFileAjaxRequester = function(o) {\n        \"use strict\";\n        var requester, options = {\n            method: \"DELETE\",\n            uuidParamName: \"qquuid\",\n            endpointStore: {},\n            maxConnections: 3,\n            customHeaders: function(id) {\n                return {};\n            },\n            paramsStore: {},\n            cors: {\n                expected: false,\n                sendCredentials: false\n            },\n            log: function(str, level) {},\n            onDelete: function(id) {},\n            onDeleteComplete: function(id, xhrOrXdr, isError) {}\n        };\n        qq.extend(options, o);\n        function getMandatedParams() {\n            if (options.method.toUpperCase() === \"POST\") {\n                return {\n                    _method: \"DELETE\"\n                };\n            }\n            return {};\n        }\n        requester = qq.extend(this, new qq.AjaxRequester({\n            acceptHeader: \"application/json\",\n            validMethods: [ \"POST\", \"DELETE\" ],\n            method: options.method,\n            endpointStore: options.endpointStore,\n            paramsStore: options.paramsStore,\n            mandatedParams: getMandatedParams(),\n            maxConnections: options.maxConnections,\n            customHeaders: function(id) {\n                return options.customHeaders.get(id);\n            },\n            log: options.log,\n            onSend: options.onDelete,\n            onComplete: options.onDeleteComplete,\n            cors: options.cors\n        }));\n        qq.extend(this, {\n            sendDelete: function(id, uuid, additionalMandatedParams) {\n                var additionalOptions = additionalMandatedParams || {};\n                options.log(\"Submitting delete file request for \" + id);\n                if (options.method === \"DELETE\") {\n                    requester.initTransport(id).withPath(uuid).withParams(additionalOptions).send();\n                } else {\n                    additionalOptions[options.uuidParamName] = uuid;\n                    requester.initTransport(id).withParams(additionalOptions).send();\n                }\n            }\n        });\n    };\n    (function() {\n        function detectSubsampling(img) {\n            var iw = img.naturalWidth, ih = img.naturalHeight, canvas = document.createElement(\"canvas\"), ctx;\n            if (iw * ih > 1024 * 1024) {\n                canvas.width = canvas.height = 1;\n                ctx = canvas.getContext(\"2d\");\n                ctx.drawImage(img, -iw + 1, 0);\n                return ctx.getImageData(0, 0, 1, 1).data[3] === 0;\n            } else {\n                return false;\n            }\n        }\n        function detectVerticalSquash(img, iw, ih) {\n            var canvas = document.createElement(\"canvas\"), sy = 0, ey = ih, py = ih, ctx, data, alpha, ratio;\n            canvas.width = 1;\n            canvas.height = ih;\n            ctx = canvas.getContext(\"2d\");\n            ctx.drawImage(img, 0, 0);\n            data = ctx.getImageData(0, 0, 1, ih).data;\n            while (py > sy) {\n                alpha = data[(py - 1) * 4 + 3];\n                if (alpha === 0) {\n                    ey = py;\n                } else {\n                    sy = py;\n                }\n                py = ey + sy >> 1;\n            }\n            ratio = py / ih;\n            return ratio === 0 ? 1 : ratio;\n        }\n        function renderImageToDataURL(img, blob, options, doSquash) {\n            var canvas = document.createElement(\"canvas\"), mime = options.mime || \"image/jpeg\", promise = new qq.Promise();\n            renderImageToCanvas(img, blob, canvas, options, doSquash).then(function() {\n                promise.success(canvas.toDataURL(mime, options.quality || .8));\n            });\n            return promise;\n        }\n        function maybeCalculateDownsampledDimensions(spec) {\n            var maxPixels = 5241e3;\n            if (!qq.ios()) {\n                throw new qq.Error(\"Downsampled dimensions can only be reliably calculated for iOS!\");\n            }\n            if (spec.origHeight * spec.origWidth > maxPixels) {\n                return {\n                    newHeight: Math.round(Math.sqrt(maxPixels * (spec.origHeight / spec.origWidth))),\n                    newWidth: Math.round(Math.sqrt(maxPixels * (spec.origWidth / spec.origHeight)))\n                };\n            }\n        }\n        function renderImageToCanvas(img, blob, canvas, options, doSquash) {\n            var iw = img.naturalWidth, ih = img.naturalHeight, width = options.width, height = options.height, ctx = canvas.getContext(\"2d\"), promise = new qq.Promise(), modifiedDimensions;\n            ctx.save();\n            if (options.resize) {\n                return renderImageToCanvasWithCustomResizer({\n                    blob: blob,\n                    canvas: canvas,\n                    image: img,\n                    imageHeight: ih,\n                    imageWidth: iw,\n                    orientation: options.orientation,\n                    resize: options.resize,\n                    targetHeight: height,\n                    targetWidth: width\n                });\n            }\n            if (!qq.supportedFeatures.unlimitedScaledImageSize) {\n                modifiedDimensions = maybeCalculateDownsampledDimensions({\n                    origWidth: width,\n                    origHeight: height\n                });\n                if (modifiedDimensions) {\n                    qq.log(qq.format(\"Had to reduce dimensions due to device limitations from {}w / {}h to {}w / {}h\", width, height, modifiedDimensions.newWidth, modifiedDimensions.newHeight), \"warn\");\n                    width = modifiedDimensions.newWidth;\n                    height = modifiedDimensions.newHeight;\n                }\n            }\n            transformCoordinate(canvas, width, height, options.orientation);\n            if (qq.ios()) {\n                (function() {\n                    if (detectSubsampling(img)) {\n                        iw /= 2;\n                        ih /= 2;\n                    }\n                    var d = 1024, tmpCanvas = document.createElement(\"canvas\"), vertSquashRatio = doSquash ? detectVerticalSquash(img, iw, ih) : 1, dw = Math.ceil(d * width / iw), dh = Math.ceil(d * height / ih / vertSquashRatio), sy = 0, dy = 0, tmpCtx, sx, dx;\n                    tmpCanvas.width = tmpCanvas.height = d;\n                    tmpCtx = tmpCanvas.getContext(\"2d\");\n                    while (sy < ih) {\n                        sx = 0;\n                        dx = 0;\n                        while (sx < iw) {\n                            tmpCtx.clearRect(0, 0, d, d);\n                            tmpCtx.drawImage(img, -sx, -sy);\n                            ctx.drawImage(tmpCanvas, 0, 0, d, d, dx, dy, dw, dh);\n                            sx += d;\n                            dx += dw;\n                        }\n                        sy += d;\n                        dy += dh;\n                    }\n                    ctx.restore();\n                    tmpCanvas = tmpCtx = null;\n                })();\n            } else {\n                ctx.drawImage(img, 0, 0, width, height);\n            }\n            canvas.qqImageRendered && canvas.qqImageRendered();\n            promise.success();\n            return promise;\n        }\n        function renderImageToCanvasWithCustomResizer(resizeInfo) {\n            var blob = resizeInfo.blob, image = resizeInfo.image, imageHeight = resizeInfo.imageHeight, imageWidth = resizeInfo.imageWidth, orientation = resizeInfo.orientation, promise = new qq.Promise(), resize = resizeInfo.resize, sourceCanvas = document.createElement(\"canvas\"), sourceCanvasContext = sourceCanvas.getContext(\"2d\"), targetCanvas = resizeInfo.canvas, targetHeight = resizeInfo.targetHeight, targetWidth = resizeInfo.targetWidth;\n            transformCoordinate(sourceCanvas, imageWidth, imageHeight, orientation);\n            targetCanvas.height = targetHeight;\n            targetCanvas.width = targetWidth;\n            sourceCanvasContext.drawImage(image, 0, 0);\n            resize({\n                blob: blob,\n                height: targetHeight,\n                image: image,\n                sourceCanvas: sourceCanvas,\n                targetCanvas: targetCanvas,\n                width: targetWidth\n            }).then(function success() {\n                targetCanvas.qqImageRendered && targetCanvas.qqImageRendered();\n                promise.success();\n            }, promise.failure);\n            return promise;\n        }\n        function transformCoordinate(canvas, width, height, orientation) {\n            switch (orientation) {\n              case 5:\n              case 6:\n              case 7:\n              case 8:\n                canvas.width = height;\n                canvas.height = width;\n                break;\n\n              default:\n                canvas.width = width;\n                canvas.height = height;\n            }\n            var ctx = canvas.getContext(\"2d\");\n            switch (orientation) {\n              case 2:\n                ctx.translate(width, 0);\n                ctx.scale(-1, 1);\n                break;\n\n              case 3:\n                ctx.translate(width, height);\n                ctx.rotate(Math.PI);\n                break;\n\n              case 4:\n                ctx.translate(0, height);\n                ctx.scale(1, -1);\n                break;\n\n              case 5:\n                ctx.rotate(.5 * Math.PI);\n                ctx.scale(1, -1);\n                break;\n\n              case 6:\n                ctx.rotate(.5 * Math.PI);\n                ctx.translate(0, -height);\n                break;\n\n              case 7:\n                ctx.rotate(.5 * Math.PI);\n                ctx.translate(width, -height);\n                ctx.scale(-1, 1);\n                break;\n\n              case 8:\n                ctx.rotate(-.5 * Math.PI);\n                ctx.translate(-width, 0);\n                break;\n\n              default:\n                break;\n            }\n        }\n        function MegaPixImage(srcImage, errorCallback) {\n            var self = this;\n            if (window.Blob && srcImage instanceof Blob) {\n                (function() {\n                    var img = new Image(), URL = window.URL && window.URL.createObjectURL ? window.URL : window.webkitURL && window.webkitURL.createObjectURL ? window.webkitURL : null;\n                    if (!URL) {\n                        throw Error(\"No createObjectURL function found to create blob url\");\n                    }\n                    img.src = URL.createObjectURL(srcImage);\n                    self.blob = srcImage;\n                    srcImage = img;\n                })();\n            }\n            if (!srcImage.naturalWidth && !srcImage.naturalHeight) {\n                srcImage.onload = function() {\n                    var listeners = self.imageLoadListeners;\n                    if (listeners) {\n                        self.imageLoadListeners = null;\n                        setTimeout(function() {\n                            for (var i = 0, len = listeners.length; i < len; i++) {\n                                listeners[i]();\n                            }\n                        }, 0);\n                    }\n                };\n                srcImage.onerror = errorCallback;\n                this.imageLoadListeners = [];\n            }\n            this.srcImage = srcImage;\n        }\n        MegaPixImage.prototype.render = function(target, options) {\n            options = options || {};\n            var self = this, imgWidth = this.srcImage.naturalWidth, imgHeight = this.srcImage.naturalHeight, width = options.width, height = options.height, maxWidth = options.maxWidth, maxHeight = options.maxHeight, doSquash = !this.blob || this.blob.type === \"image/jpeg\", tagName = target.tagName.toLowerCase(), opt;\n            if (this.imageLoadListeners) {\n                this.imageLoadListeners.push(function() {\n                    self.render(target, options);\n                });\n                return;\n            }\n            if (width && !height) {\n                height = imgHeight * width / imgWidth << 0;\n            } else if (height && !width) {\n                width = imgWidth * height / imgHeight << 0;\n            } else {\n                width = imgWidth;\n                height = imgHeight;\n            }\n            if (maxWidth && width > maxWidth) {\n                width = maxWidth;\n                height = imgHeight * width / imgWidth << 0;\n            }\n            if (maxHeight && height > maxHeight) {\n                height = maxHeight;\n                width = imgWidth * height / imgHeight << 0;\n            }\n            opt = {\n                width: width,\n                height: height\n            }, qq.each(options, function(optionsKey, optionsValue) {\n                opt[optionsKey] = optionsValue;\n            });\n            if (tagName === \"img\") {\n                (function() {\n                    var oldTargetSrc = target.src;\n                    renderImageToDataURL(self.srcImage, self.blob, opt, doSquash).then(function(dataUri) {\n                        target.src = dataUri;\n                        oldTargetSrc === target.src && target.onload();\n                    });\n                })();\n            } else if (tagName === \"canvas\") {\n                renderImageToCanvas(this.srcImage, this.blob, target, opt, doSquash);\n            }\n            if (typeof this.onrender === \"function\") {\n                this.onrender(target);\n            }\n        };\n        qq.MegaPixImage = MegaPixImage;\n    })();\n    qq.ImageGenerator = function(log) {\n        \"use strict\";\n        function isImg(el) {\n            return el.tagName.toLowerCase() === \"img\";\n        }\n        function isCanvas(el) {\n            return el.tagName.toLowerCase() === \"canvas\";\n        }\n        function isImgCorsSupported() {\n            return new Image().crossOrigin !== undefined;\n        }\n        function isCanvasSupported() {\n            var canvas = document.createElement(\"canvas\");\n            return canvas.getContext && canvas.getContext(\"2d\");\n        }\n        function determineMimeOfFileName(nameWithPath) {\n            var pathSegments = nameWithPath.split(\"/\"), name = pathSegments[pathSegments.length - 1].split(\"?\")[0], extension = qq.getExtension(name);\n            extension = extension && extension.toLowerCase();\n            switch (extension) {\n              case \"jpeg\":\n              case \"jpg\":\n                return \"image/jpeg\";\n\n              case \"png\":\n                return \"image/png\";\n\n              case \"bmp\":\n                return \"image/bmp\";\n\n              case \"gif\":\n                return \"image/gif\";\n\n              case \"tiff\":\n              case \"tif\":\n                return \"image/tiff\";\n            }\n        }\n        function isCrossOrigin(url) {\n            var targetAnchor = document.createElement(\"a\"), targetProtocol, targetHostname, targetPort;\n            targetAnchor.href = url;\n            targetProtocol = targetAnchor.protocol;\n            targetPort = targetAnchor.port;\n            targetHostname = targetAnchor.hostname;\n            if (targetProtocol.toLowerCase() !== window.location.protocol.toLowerCase()) {\n                return true;\n            }\n            if (targetHostname.toLowerCase() !== window.location.hostname.toLowerCase()) {\n                return true;\n            }\n            if (targetPort !== window.location.port && !qq.ie()) {\n                return true;\n            }\n            return false;\n        }\n        function registerImgLoadListeners(img, promise) {\n            img.onload = function() {\n                img.onload = null;\n                img.onerror = null;\n                promise.success(img);\n            };\n            img.onerror = function() {\n                img.onload = null;\n                img.onerror = null;\n                log(\"Problem drawing thumbnail!\", \"error\");\n                promise.failure(img, \"Problem drawing thumbnail!\");\n            };\n        }\n        function registerCanvasDrawImageListener(canvas, promise) {\n            canvas.qqImageRendered = function() {\n                promise.success(canvas);\n            };\n        }\n        function registerThumbnailRenderedListener(imgOrCanvas, promise) {\n            var registered = isImg(imgOrCanvas) || isCanvas(imgOrCanvas);\n            if (isImg(imgOrCanvas)) {\n                registerImgLoadListeners(imgOrCanvas, promise);\n            } else if (isCanvas(imgOrCanvas)) {\n                registerCanvasDrawImageListener(imgOrCanvas, promise);\n            } else {\n                promise.failure(imgOrCanvas);\n                log(qq.format(\"Element container of type {} is not supported!\", imgOrCanvas.tagName), \"error\");\n            }\n            return registered;\n        }\n        function draw(fileOrBlob, container, options) {\n            var drawPreview = new qq.Promise(), identifier = new qq.Identify(fileOrBlob, log), maxSize = options.maxSize, orient = options.orient == null ? true : options.orient, megapixErrorHandler = function() {\n                container.onerror = null;\n                container.onload = null;\n                log(\"Could not render preview, file may be too large!\", \"error\");\n                drawPreview.failure(container, \"Browser cannot render image!\");\n            };\n            identifier.isPreviewable().then(function(mime) {\n                var dummyExif = {\n                    parse: function() {\n                        return new qq.Promise().success();\n                    }\n                }, exif = orient ? new qq.Exif(fileOrBlob, log) : dummyExif, mpImg = new qq.MegaPixImage(fileOrBlob, megapixErrorHandler);\n                if (registerThumbnailRenderedListener(container, drawPreview)) {\n                    exif.parse().then(function(exif) {\n                        var orientation = exif && exif.Orientation;\n                        mpImg.render(container, {\n                            maxWidth: maxSize,\n                            maxHeight: maxSize,\n                            orientation: orientation,\n                            mime: mime,\n                            resize: options.customResizeFunction\n                        });\n                    }, function(failureMsg) {\n                        log(qq.format(\"EXIF data could not be parsed ({}).  Assuming orientation = 1.\", failureMsg));\n                        mpImg.render(container, {\n                            maxWidth: maxSize,\n                            maxHeight: maxSize,\n                            mime: mime,\n                            resize: options.customResizeFunction\n                        });\n                    });\n                }\n            }, function() {\n                log(\"Not previewable\");\n                drawPreview.failure(container, \"Not previewable\");\n            });\n            return drawPreview;\n        }\n        function drawOnCanvasOrImgFromUrl(url, canvasOrImg, draw, maxSize, customResizeFunction) {\n            var tempImg = new Image(), tempImgRender = new qq.Promise();\n            registerThumbnailRenderedListener(tempImg, tempImgRender);\n            if (isCrossOrigin(url)) {\n                tempImg.crossOrigin = \"anonymous\";\n            }\n            tempImg.src = url;\n            tempImgRender.then(function rendered() {\n                registerThumbnailRenderedListener(canvasOrImg, draw);\n                var mpImg = new qq.MegaPixImage(tempImg);\n                mpImg.render(canvasOrImg, {\n                    maxWidth: maxSize,\n                    maxHeight: maxSize,\n                    mime: determineMimeOfFileName(url),\n                    resize: customResizeFunction\n                });\n            }, draw.failure);\n        }\n        function drawOnImgFromUrlWithCssScaling(url, img, draw, maxSize) {\n            registerThumbnailRenderedListener(img, draw);\n            qq(img).css({\n                maxWidth: maxSize + \"px\",\n                maxHeight: maxSize + \"px\"\n            });\n            img.src = url;\n        }\n        function drawFromUrl(url, container, options) {\n            var draw = new qq.Promise(), scale = options.scale, maxSize = scale ? options.maxSize : null;\n            if (scale && isImg(container)) {\n                if (isCanvasSupported()) {\n                    if (isCrossOrigin(url) && !isImgCorsSupported()) {\n                        drawOnImgFromUrlWithCssScaling(url, container, draw, maxSize);\n                    } else {\n                        drawOnCanvasOrImgFromUrl(url, container, draw, maxSize);\n                    }\n                } else {\n                    drawOnImgFromUrlWithCssScaling(url, container, draw, maxSize);\n                }\n            } else if (isCanvas(container)) {\n                drawOnCanvasOrImgFromUrl(url, container, draw, maxSize);\n            } else if (registerThumbnailRenderedListener(container, draw)) {\n                container.src = url;\n            }\n            return draw;\n        }\n        qq.extend(this, {\n            generate: function(fileBlobOrUrl, container, options) {\n                if (qq.isString(fileBlobOrUrl)) {\n                    log(\"Attempting to update thumbnail based on server response.\");\n                    return drawFromUrl(fileBlobOrUrl, container, options || {});\n                } else {\n                    log(\"Attempting to draw client-side image preview.\");\n                    return draw(fileBlobOrUrl, container, options || {});\n                }\n            }\n        });\n        this._testing = {};\n        this._testing.isImg = isImg;\n        this._testing.isCanvas = isCanvas;\n        this._testing.isCrossOrigin = isCrossOrigin;\n        this._testing.determineMimeOfFileName = determineMimeOfFileName;\n    };\n    qq.Exif = function(fileOrBlob, log) {\n        \"use strict\";\n        var TAG_IDS = [ 274 ], TAG_INFO = {\n            274: {\n                name: \"Orientation\",\n                bytes: 2\n            }\n        };\n        function parseLittleEndian(hex) {\n            var result = 0, pow = 0;\n            while (hex.length > 0) {\n                result += parseInt(hex.substring(0, 2), 16) * Math.pow(2, pow);\n                hex = hex.substring(2, hex.length);\n                pow += 8;\n            }\n            return result;\n        }\n        function seekToApp1(offset, promise) {\n            var theOffset = offset, thePromise = promise;\n            if (theOffset === undefined) {\n                theOffset = 2;\n                thePromise = new qq.Promise();\n            }\n            qq.readBlobToHex(fileOrBlob, theOffset, 4).then(function(hex) {\n                var match = /^ffe([0-9])/.exec(hex), segmentLength;\n                if (match) {\n                    if (match[1] !== \"1\") {\n                        segmentLength = parseInt(hex.slice(4, 8), 16);\n                        seekToApp1(theOffset + segmentLength + 2, thePromise);\n                    } else {\n                        thePromise.success(theOffset);\n                    }\n                } else {\n                    thePromise.failure(\"No EXIF header to be found!\");\n                }\n            });\n            return thePromise;\n        }\n        function getApp1Offset() {\n            var promise = new qq.Promise();\n            qq.readBlobToHex(fileOrBlob, 0, 6).then(function(hex) {\n                if (hex.indexOf(\"ffd8\") !== 0) {\n                    promise.failure(\"Not a valid JPEG!\");\n                } else {\n                    seekToApp1().then(function(offset) {\n                        promise.success(offset);\n                    }, function(error) {\n                        promise.failure(error);\n                    });\n                }\n            });\n            return promise;\n        }\n        function isLittleEndian(app1Start) {\n            var promise = new qq.Promise();\n            qq.readBlobToHex(fileOrBlob, app1Start + 10, 2).then(function(hex) {\n                promise.success(hex === \"4949\");\n            });\n            return promise;\n        }\n        function getDirEntryCount(app1Start, littleEndian) {\n            var promise = new qq.Promise();\n            qq.readBlobToHex(fileOrBlob, app1Start + 18, 2).then(function(hex) {\n                if (littleEndian) {\n                    return promise.success(parseLittleEndian(hex));\n                } else {\n                    promise.success(parseInt(hex, 16));\n                }\n            });\n            return promise;\n        }\n        function getIfd(app1Start, dirEntries) {\n            var offset = app1Start + 20, bytes = dirEntries * 12;\n            return qq.readBlobToHex(fileOrBlob, offset, bytes);\n        }\n        function getDirEntries(ifdHex) {\n            var entries = [], offset = 0;\n            while (offset + 24 <= ifdHex.length) {\n                entries.push(ifdHex.slice(offset, offset + 24));\n                offset += 24;\n            }\n            return entries;\n        }\n        function getTagValues(littleEndian, dirEntries) {\n            var TAG_VAL_OFFSET = 16, tagsToFind = qq.extend([], TAG_IDS), vals = {};\n            qq.each(dirEntries, function(idx, entry) {\n                var idHex = entry.slice(0, 4), id = littleEndian ? parseLittleEndian(idHex) : parseInt(idHex, 16), tagsToFindIdx = tagsToFind.indexOf(id), tagValHex, tagName, tagValLength;\n                if (tagsToFindIdx >= 0) {\n                    tagName = TAG_INFO[id].name;\n                    tagValLength = TAG_INFO[id].bytes;\n                    tagValHex = entry.slice(TAG_VAL_OFFSET, TAG_VAL_OFFSET + tagValLength * 2);\n                    vals[tagName] = littleEndian ? parseLittleEndian(tagValHex) : parseInt(tagValHex, 16);\n                    tagsToFind.splice(tagsToFindIdx, 1);\n                }\n                if (tagsToFind.length === 0) {\n                    return false;\n                }\n            });\n            return vals;\n        }\n        qq.extend(this, {\n            parse: function() {\n                var parser = new qq.Promise(), onParseFailure = function(message) {\n                    log(qq.format(\"EXIF header parse failed: '{}' \", message));\n                    parser.failure(message);\n                };\n                getApp1Offset().then(function(app1Offset) {\n                    log(qq.format(\"Moving forward with EXIF header parsing for '{}'\", fileOrBlob.name === undefined ? \"blob\" : fileOrBlob.name));\n                    isLittleEndian(app1Offset).then(function(littleEndian) {\n                        log(qq.format(\"EXIF Byte order is {} endian\", littleEndian ? \"little\" : \"big\"));\n                        getDirEntryCount(app1Offset, littleEndian).then(function(dirEntryCount) {\n                            log(qq.format(\"Found {} APP1 directory entries\", dirEntryCount));\n                            getIfd(app1Offset, dirEntryCount).then(function(ifdHex) {\n                                var dirEntries = getDirEntries(ifdHex), tagValues = getTagValues(littleEndian, dirEntries);\n                                log(\"Successfully parsed some EXIF tags\");\n                                parser.success(tagValues);\n                            }, onParseFailure);\n                        }, onParseFailure);\n                    }, onParseFailure);\n                }, onParseFailure);\n                return parser;\n            }\n        });\n        this._testing = {};\n        this._testing.parseLittleEndian = parseLittleEndian;\n    };\n    qq.Identify = function(fileOrBlob, log) {\n        \"use strict\";\n        function isIdentifiable(magicBytes, questionableBytes) {\n            var identifiable = false, magicBytesEntries = [].concat(magicBytes);\n            qq.each(magicBytesEntries, function(idx, magicBytesArrayEntry) {\n                if (questionableBytes.indexOf(magicBytesArrayEntry) === 0) {\n                    identifiable = true;\n                    return false;\n                }\n            });\n            return identifiable;\n        }\n        qq.extend(this, {\n            isPreviewable: function() {\n                var self = this, identifier = new qq.Promise(), previewable = false, name = fileOrBlob.name === undefined ? \"blob\" : fileOrBlob.name;\n                log(qq.format(\"Attempting to determine if {} can be rendered in this browser\", name));\n                log(\"First pass: check type attribute of blob object.\");\n                if (this.isPreviewableSync()) {\n                    log(\"Second pass: check for magic bytes in file header.\");\n                    qq.readBlobToHex(fileOrBlob, 0, 4).then(function(hex) {\n                        qq.each(self.PREVIEWABLE_MIME_TYPES, function(mime, bytes) {\n                            if (isIdentifiable(bytes, hex)) {\n                                if (mime !== \"image/tiff\" || qq.supportedFeatures.tiffPreviews) {\n                                    previewable = true;\n                                    identifier.success(mime);\n                                }\n                                return false;\n                            }\n                        });\n                        log(qq.format(\"'{}' is {} able to be rendered in this browser\", name, previewable ? \"\" : \"NOT\"));\n                        if (!previewable) {\n                            identifier.failure();\n                        }\n                    }, function() {\n                        log(\"Error reading file w/ name '\" + name + \"'.  Not able to be rendered in this browser.\");\n                        identifier.failure();\n                    });\n                } else {\n                    identifier.failure();\n                }\n                return identifier;\n            },\n            isPreviewableSync: function() {\n                var fileMime = fileOrBlob.type, isRecognizedImage = qq.indexOf(Object.keys(this.PREVIEWABLE_MIME_TYPES), fileMime) >= 0, previewable = false, name = fileOrBlob.name === undefined ? \"blob\" : fileOrBlob.name;\n                if (isRecognizedImage) {\n                    if (fileMime === \"image/tiff\") {\n                        previewable = qq.supportedFeatures.tiffPreviews;\n                    } else {\n                        previewable = true;\n                    }\n                }\n                !previewable && log(name + \" is not previewable in this browser per the blob's type attr\");\n                return previewable;\n            }\n        });\n    };\n    qq.Identify.prototype.PREVIEWABLE_MIME_TYPES = {\n        \"image/jpeg\": \"ffd8ff\",\n        \"image/gif\": \"474946\",\n        \"image/png\": \"89504e\",\n        \"image/bmp\": \"424d\",\n        \"image/tiff\": [ \"49492a00\", \"4d4d002a\" ]\n    };\n    qq.ImageValidation = function(blob, log) {\n        \"use strict\";\n        function hasNonZeroLimits(limits) {\n            var atLeastOne = false;\n            qq.each(limits, function(limit, value) {\n                if (value > 0) {\n                    atLeastOne = true;\n                    return false;\n                }\n            });\n            return atLeastOne;\n        }\n        function getWidthHeight() {\n            var sizeDetermination = new qq.Promise();\n            new qq.Identify(blob, log).isPreviewable().then(function() {\n                var image = new Image(), url = window.URL && window.URL.createObjectURL ? window.URL : window.webkitURL && window.webkitURL.createObjectURL ? window.webkitURL : null;\n                if (url) {\n                    image.onerror = function() {\n                        log(\"Cannot determine dimensions for image.  May be too large.\", \"error\");\n                        sizeDetermination.failure();\n                    };\n                    image.onload = function() {\n                        sizeDetermination.success({\n                            width: this.width,\n                            height: this.height\n                        });\n                    };\n                    image.src = url.createObjectURL(blob);\n                } else {\n                    log(\"No createObjectURL function available to generate image URL!\", \"error\");\n                    sizeDetermination.failure();\n                }\n            }, sizeDetermination.failure);\n            return sizeDetermination;\n        }\n        function getFailingLimit(limits, dimensions) {\n            var failingLimit;\n            qq.each(limits, function(limitName, limitValue) {\n                if (limitValue > 0) {\n                    var limitMatcher = /(max|min)(Width|Height)/.exec(limitName), dimensionPropName = limitMatcher[2].charAt(0).toLowerCase() + limitMatcher[2].slice(1), actualValue = dimensions[dimensionPropName];\n                    switch (limitMatcher[1]) {\n                      case \"min\":\n                        if (actualValue < limitValue) {\n                            failingLimit = limitName;\n                            return false;\n                        }\n                        break;\n\n                      case \"max\":\n                        if (actualValue > limitValue) {\n                            failingLimit = limitName;\n                            return false;\n                        }\n                        break;\n                    }\n                }\n            });\n            return failingLimit;\n        }\n        this.validate = function(limits) {\n            var validationEffort = new qq.Promise();\n            log(\"Attempting to validate image.\");\n            if (hasNonZeroLimits(limits)) {\n                getWidthHeight().then(function(dimensions) {\n                    var failingLimit = getFailingLimit(limits, dimensions);\n                    if (failingLimit) {\n                        validationEffort.failure(failingLimit);\n                    } else {\n                        validationEffort.success();\n                    }\n                }, validationEffort.success);\n            } else {\n                validationEffort.success();\n            }\n            return validationEffort;\n        };\n    };\n    qq.Session = function(spec) {\n        \"use strict\";\n        var options = {\n            endpoint: null,\n            params: {},\n            customHeaders: {},\n            cors: {},\n            addFileRecord: function(sessionData) {},\n            log: function(message, level) {}\n        };\n        qq.extend(options, spec, true);\n        function isJsonResponseValid(response) {\n            if (qq.isArray(response)) {\n                return true;\n            }\n            options.log(\"Session response is not an array.\", \"error\");\n        }\n        function handleFileItems(fileItems, success, xhrOrXdr, promise) {\n            var someItemsIgnored = false;\n            success = success && isJsonResponseValid(fileItems);\n            if (success) {\n                qq.each(fileItems, function(idx, fileItem) {\n                    if (fileItem.uuid == null) {\n                        someItemsIgnored = true;\n                        options.log(qq.format(\"Session response item {} did not include a valid UUID - ignoring.\", idx), \"error\");\n                    } else if (fileItem.name == null) {\n                        someItemsIgnored = true;\n                        options.log(qq.format(\"Session response item {} did not include a valid name - ignoring.\", idx), \"error\");\n                    } else {\n                        try {\n                            options.addFileRecord(fileItem);\n                            return true;\n                        } catch (err) {\n                            someItemsIgnored = true;\n                            options.log(err.message, \"error\");\n                        }\n                    }\n                    return false;\n                });\n            }\n            promise[success && !someItemsIgnored ? \"success\" : \"failure\"](fileItems, xhrOrXdr);\n        }\n        this.refresh = function() {\n            var refreshEffort = new qq.Promise(), refreshCompleteCallback = function(response, success, xhrOrXdr) {\n                handleFileItems(response, success, xhrOrXdr, refreshEffort);\n            }, requesterOptions = qq.extend({}, options), requester = new qq.SessionAjaxRequester(qq.extend(requesterOptions, {\n                onComplete: refreshCompleteCallback\n            }));\n            requester.queryServer();\n            return refreshEffort;\n        };\n    };\n    qq.SessionAjaxRequester = function(spec) {\n        \"use strict\";\n        var requester, options = {\n            endpoint: null,\n            customHeaders: {},\n            params: {},\n            cors: {\n                expected: false,\n                sendCredentials: false\n            },\n            onComplete: function(response, success, xhrOrXdr) {},\n            log: function(str, level) {}\n        };\n        qq.extend(options, spec);\n        function onComplete(id, xhrOrXdr, isError) {\n            var response = null;\n            if (xhrOrXdr.responseText != null) {\n                try {\n                    response = qq.parseJson(xhrOrXdr.responseText);\n                } catch (err) {\n                    options.log(\"Problem parsing session response: \" + err.message, \"error\");\n                    isError = true;\n                }\n            }\n            options.onComplete(response, !isError, xhrOrXdr);\n        }\n        requester = qq.extend(this, new qq.AjaxRequester({\n            acceptHeader: \"application/json\",\n            validMethods: [ \"GET\" ],\n            method: \"GET\",\n            endpointStore: {\n                get: function() {\n                    return options.endpoint;\n                }\n            },\n            customHeaders: options.customHeaders,\n            log: options.log,\n            onComplete: onComplete,\n            cors: options.cors\n        }));\n        qq.extend(this, {\n            queryServer: function() {\n                var params = qq.extend({}, options.params);\n                options.log(\"Session query request.\");\n                requester.initTransport(\"sessionRefresh\").withParams(params).withCacheBuster().send();\n            }\n        });\n    };\n    qq.Scaler = function(spec, log) {\n        \"use strict\";\n        var self = this, customResizeFunction = spec.customResizer, includeOriginal = spec.sendOriginal, orient = spec.orient, defaultType = spec.defaultType, defaultQuality = spec.defaultQuality / 100, failedToScaleText = spec.failureText, includeExif = spec.includeExif, sizes = this._getSortedSizes(spec.sizes);\n        qq.extend(this, {\n            enabled: qq.supportedFeatures.scaling && sizes.length > 0,\n            getFileRecords: function(originalFileUuid, originalFileName, originalBlobOrBlobData) {\n                var self = this, records = [], originalBlob = originalBlobOrBlobData.blob ? originalBlobOrBlobData.blob : originalBlobOrBlobData, identifier = new qq.Identify(originalBlob, log);\n                if (identifier.isPreviewableSync()) {\n                    qq.each(sizes, function(idx, sizeRecord) {\n                        var outputType = self._determineOutputType({\n                            defaultType: defaultType,\n                            requestedType: sizeRecord.type,\n                            refType: originalBlob.type\n                        });\n                        records.push({\n                            uuid: qq.getUniqueId(),\n                            name: self._getName(originalFileName, {\n                                name: sizeRecord.name,\n                                type: outputType,\n                                refType: originalBlob.type\n                            }),\n                            blob: new qq.BlobProxy(originalBlob, qq.bind(self._generateScaledImage, self, {\n                                customResizeFunction: customResizeFunction,\n                                maxSize: sizeRecord.maxSize,\n                                orient: orient,\n                                type: outputType,\n                                quality: defaultQuality,\n                                failedText: failedToScaleText,\n                                includeExif: includeExif,\n                                log: log\n                            }))\n                        });\n                    });\n                    records.push({\n                        uuid: originalFileUuid,\n                        name: originalFileName,\n                        size: originalBlob.size,\n                        blob: includeOriginal ? originalBlob : null\n                    });\n                } else {\n                    records.push({\n                        uuid: originalFileUuid,\n                        name: originalFileName,\n                        size: originalBlob.size,\n                        blob: originalBlob\n                    });\n                }\n                return records;\n            },\n            handleNewFile: function(file, name, uuid, size, fileList, batchId, uuidParamName, api) {\n                var self = this, buttonId = file.qqButtonId || file.blob && file.blob.qqButtonId, scaledIds = [], originalId = null, addFileToHandler = api.addFileToHandler, uploadData = api.uploadData, paramsStore = api.paramsStore, proxyGroupId = qq.getUniqueId();\n                qq.each(self.getFileRecords(uuid, name, file), function(idx, record) {\n                    var blobSize = record.size, id;\n                    if (record.blob instanceof qq.BlobProxy) {\n                        blobSize = -1;\n                    }\n                    id = uploadData.addFile({\n                        uuid: record.uuid,\n                        name: record.name,\n                        size: blobSize,\n                        batchId: batchId,\n                        proxyGroupId: proxyGroupId\n                    });\n                    if (record.blob instanceof qq.BlobProxy) {\n                        scaledIds.push(id);\n                    } else {\n                        originalId = id;\n                    }\n                    if (record.blob) {\n                        addFileToHandler(id, record.blob);\n                        fileList.push({\n                            id: id,\n                            file: record.blob\n                        });\n                    } else {\n                        uploadData.setStatus(id, qq.status.REJECTED);\n                    }\n                });\n                if (originalId !== null) {\n                    qq.each(scaledIds, function(idx, scaledId) {\n                        var params = {\n                            qqparentuuid: uploadData.retrieve({\n                                id: originalId\n                            }).uuid,\n                            qqparentsize: uploadData.retrieve({\n                                id: originalId\n                            }).size\n                        };\n                        params[uuidParamName] = uploadData.retrieve({\n                            id: scaledId\n                        }).uuid;\n                        uploadData.setParentId(scaledId, originalId);\n                        paramsStore.addReadOnly(scaledId, params);\n                    });\n                    if (scaledIds.length) {\n                        (function() {\n                            var param = {};\n                            param[uuidParamName] = uploadData.retrieve({\n                                id: originalId\n                            }).uuid;\n                            paramsStore.addReadOnly(originalId, param);\n                        })();\n                    }\n                }\n            }\n        });\n    };\n    qq.extend(qq.Scaler.prototype, {\n        scaleImage: function(id, specs, api) {\n            \"use strict\";\n            if (!qq.supportedFeatures.scaling) {\n                throw new qq.Error(\"Scaling is not supported in this browser!\");\n            }\n            var scalingEffort = new qq.Promise(), log = api.log, file = api.getFile(id), uploadData = api.uploadData.retrieve({\n                id: id\n            }), name = uploadData && uploadData.name, uuid = uploadData && uploadData.uuid, scalingOptions = {\n                customResizer: specs.customResizer,\n                sendOriginal: false,\n                orient: specs.orient,\n                defaultType: specs.type || null,\n                defaultQuality: specs.quality,\n                failedToScaleText: \"Unable to scale\",\n                sizes: [ {\n                    name: \"\",\n                    maxSize: specs.maxSize\n                } ]\n            }, scaler = new qq.Scaler(scalingOptions, log);\n            if (!qq.Scaler || !qq.supportedFeatures.imagePreviews || !file) {\n                scalingEffort.failure();\n                log(\"Could not generate requested scaled image for \" + id + \".  \" + \"Scaling is either not possible in this browser, or the file could not be located.\", \"error\");\n            } else {\n                qq.bind(function() {\n                    var record = scaler.getFileRecords(uuid, name, file)[0];\n                    if (record && record.blob instanceof qq.BlobProxy) {\n                        record.blob.create().then(scalingEffort.success, scalingEffort.failure);\n                    } else {\n                        log(id + \" is not a scalable image!\", \"error\");\n                        scalingEffort.failure();\n                    }\n                }, this)();\n            }\n            return scalingEffort;\n        },\n        _determineOutputType: function(spec) {\n            \"use strict\";\n            var requestedType = spec.requestedType, defaultType = spec.defaultType, referenceType = spec.refType;\n            if (!defaultType && !requestedType) {\n                if (referenceType !== \"image/jpeg\") {\n                    return \"image/png\";\n                }\n                return referenceType;\n            }\n            if (!requestedType) {\n                return defaultType;\n            }\n            if (qq.indexOf(Object.keys(qq.Identify.prototype.PREVIEWABLE_MIME_TYPES), requestedType) >= 0) {\n                if (requestedType === \"image/tiff\") {\n                    return qq.supportedFeatures.tiffPreviews ? requestedType : defaultType;\n                }\n                return requestedType;\n            }\n            return defaultType;\n        },\n        _getName: function(originalName, scaledVersionProperties) {\n            \"use strict\";\n            var startOfExt = originalName.lastIndexOf(\".\"), versionType = scaledVersionProperties.type || \"image/png\", referenceType = scaledVersionProperties.refType, scaledName = \"\", scaledExt = qq.getExtension(originalName), nameAppendage = \"\";\n            if (scaledVersionProperties.name && scaledVersionProperties.name.trim().length) {\n                nameAppendage = \" (\" + scaledVersionProperties.name + \")\";\n            }\n            if (startOfExt >= 0) {\n                scaledName = originalName.substr(0, startOfExt);\n                if (referenceType !== versionType) {\n                    scaledExt = versionType.split(\"/\")[1];\n                }\n                scaledName += nameAppendage + \".\" + scaledExt;\n            } else {\n                scaledName = originalName + nameAppendage;\n            }\n            return scaledName;\n        },\n        _getSortedSizes: function(sizes) {\n            \"use strict\";\n            sizes = qq.extend([], sizes);\n            return sizes.sort(function(a, b) {\n                if (a.maxSize > b.maxSize) {\n                    return 1;\n                }\n                if (a.maxSize < b.maxSize) {\n                    return -1;\n                }\n                return 0;\n            });\n        },\n        _generateScaledImage: function(spec, sourceFile) {\n            \"use strict\";\n            var self = this, customResizeFunction = spec.customResizeFunction, log = spec.log, maxSize = spec.maxSize, orient = spec.orient, type = spec.type, quality = spec.quality, failedText = spec.failedText, includeExif = spec.includeExif && sourceFile.type === \"image/jpeg\" && type === \"image/jpeg\", scalingEffort = new qq.Promise(), imageGenerator = new qq.ImageGenerator(log), canvas = document.createElement(\"canvas\");\n            log(\"Attempting to generate scaled version for \" + sourceFile.name);\n            imageGenerator.generate(sourceFile, canvas, {\n                maxSize: maxSize,\n                orient: orient,\n                customResizeFunction: customResizeFunction\n            }).then(function() {\n                var scaledImageDataUri = canvas.toDataURL(type, quality), signalSuccess = function() {\n                    log(\"Success generating scaled version for \" + sourceFile.name);\n                    var blob = qq.dataUriToBlob(scaledImageDataUri);\n                    scalingEffort.success(blob);\n                };\n                if (includeExif) {\n                    self._insertExifHeader(sourceFile, scaledImageDataUri, log).then(function(scaledImageDataUriWithExif) {\n                        scaledImageDataUri = scaledImageDataUriWithExif;\n                        signalSuccess();\n                    }, function() {\n                        log(\"Problem inserting EXIF header into scaled image.  Using scaled image w/out EXIF data.\", \"error\");\n                        signalSuccess();\n                    });\n                } else {\n                    signalSuccess();\n                }\n            }, function() {\n                log(\"Failed attempt to generate scaled version for \" + sourceFile.name, \"error\");\n                scalingEffort.failure(failedText);\n            });\n            return scalingEffort;\n        },\n        _insertExifHeader: function(originalImage, scaledImageDataUri, log) {\n            \"use strict\";\n            var reader = new FileReader(), insertionEffort = new qq.Promise(), originalImageDataUri = \"\";\n            reader.onload = function() {\n                originalImageDataUri = reader.result;\n                insertionEffort.success(qq.ExifRestorer.restore(originalImageDataUri, scaledImageDataUri));\n            };\n            reader.onerror = function() {\n                log(\"Problem reading \" + originalImage.name + \" during attempt to transfer EXIF data to scaled version.\", \"error\");\n                insertionEffort.failure();\n            };\n            reader.readAsDataURL(originalImage);\n            return insertionEffort;\n        },\n        _dataUriToBlob: function(dataUri) {\n            \"use strict\";\n            var byteString, mimeString, arrayBuffer, intArray;\n            if (dataUri.split(\",\")[0].indexOf(\"base64\") >= 0) {\n                byteString = atob(dataUri.split(\",\")[1]);\n            } else {\n                byteString = decodeURI(dataUri.split(\",\")[1]);\n            }\n            mimeString = dataUri.split(\",\")[0].split(\":\")[1].split(\";\")[0];\n            arrayBuffer = new ArrayBuffer(byteString.length);\n            intArray = new Uint8Array(arrayBuffer);\n            qq.each(byteString, function(idx, character) {\n                intArray[idx] = character.charCodeAt(0);\n            });\n            return this._createBlob(arrayBuffer, mimeString);\n        },\n        _createBlob: function(data, mime) {\n            \"use strict\";\n            var BlobBuilder = window.BlobBuilder || window.WebKitBlobBuilder || window.MozBlobBuilder || window.MSBlobBuilder, blobBuilder = BlobBuilder && new BlobBuilder();\n            if (blobBuilder) {\n                blobBuilder.append(data);\n                return blobBuilder.getBlob(mime);\n            } else {\n                return new Blob([ data ], {\n                    type: mime\n                });\n            }\n        }\n    });\n    qq.ExifRestorer = function() {\n        var ExifRestorer = {};\n        ExifRestorer.KEY_STR = \"ABCDEFGHIJKLMNOP\" + \"QRSTUVWXYZabcdef\" + \"ghijklmnopqrstuv\" + \"wxyz0123456789+/\" + \"=\";\n        ExifRestorer.encode64 = function(input) {\n            var output = \"\", chr1, chr2, chr3 = \"\", enc1, enc2, enc3, enc4 = \"\", i = 0;\n            do {\n                chr1 = input[i++];\n                chr2 = input[i++];\n                chr3 = input[i++];\n                enc1 = chr1 >> 2;\n                enc2 = (chr1 & 3) << 4 | chr2 >> 4;\n                enc3 = (chr2 & 15) << 2 | chr3 >> 6;\n                enc4 = chr3 & 63;\n                if (isNaN(chr2)) {\n                    enc3 = enc4 = 64;\n                } else if (isNaN(chr3)) {\n                    enc4 = 64;\n                }\n                output = output + this.KEY_STR.charAt(enc1) + this.KEY_STR.charAt(enc2) + this.KEY_STR.charAt(enc3) + this.KEY_STR.charAt(enc4);\n                chr1 = chr2 = chr3 = \"\";\n                enc1 = enc2 = enc3 = enc4 = \"\";\n            } while (i < input.length);\n            return output;\n        };\n        ExifRestorer.restore = function(origFileBase64, resizedFileBase64) {\n            var expectedBase64Header = \"data:image/jpeg;base64,\";\n            if (!origFileBase64.match(expectedBase64Header)) {\n                return resizedFileBase64;\n            }\n            var rawImage = this.decode64(origFileBase64.replace(expectedBase64Header, \"\"));\n            var segments = this.slice2Segments(rawImage);\n            var image = this.exifManipulation(resizedFileBase64, segments);\n            return expectedBase64Header + this.encode64(image);\n        };\n        ExifRestorer.exifManipulation = function(resizedFileBase64, segments) {\n            var exifArray = this.getExifArray(segments), newImageArray = this.insertExif(resizedFileBase64, exifArray), aBuffer = new Uint8Array(newImageArray);\n            return aBuffer;\n        };\n        ExifRestorer.getExifArray = function(segments) {\n            var seg;\n            for (var x = 0; x < segments.length; x++) {\n                seg = segments[x];\n                if (seg[0] == 255 & seg[1] == 225) {\n                    return seg;\n                }\n            }\n            return [];\n        };\n        ExifRestorer.insertExif = function(resizedFileBase64, exifArray) {\n            var imageData = resizedFileBase64.replace(\"data:image/jpeg;base64,\", \"\"), buf = this.decode64(imageData), separatePoint = buf.indexOf(255, 3), mae = buf.slice(0, separatePoint), ato = buf.slice(separatePoint), array = mae;\n            array = array.concat(exifArray);\n            array = array.concat(ato);\n            return array;\n        };\n        ExifRestorer.slice2Segments = function(rawImageArray) {\n            var head = 0, segments = [];\n            while (1) {\n                if (rawImageArray[head] == 255 & rawImageArray[head + 1] == 218) {\n                    break;\n                }\n                if (rawImageArray[head] == 255 & rawImageArray[head + 1] == 216) {\n                    head += 2;\n                } else {\n                    var length = rawImageArray[head + 2] * 256 + rawImageArray[head + 3], endPoint = head + length + 2, seg = rawImageArray.slice(head, endPoint);\n                    segments.push(seg);\n                    head = endPoint;\n                }\n                if (head > rawImageArray.length) {\n                    break;\n                }\n            }\n            return segments;\n        };\n        ExifRestorer.decode64 = function(input) {\n            var output = \"\", chr1, chr2, chr3 = \"\", enc1, enc2, enc3, enc4 = \"\", i = 0, buf = [];\n            var base64test = /[^A-Za-z0-9\\+\\/\\=]/g;\n            if (base64test.exec(input)) {\n                throw new Error(\"There were invalid base64 characters in the input text.  \" + \"Valid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='\");\n            }\n            input = input.replace(/[^A-Za-z0-9\\+\\/\\=]/g, \"\");\n            do {\n                enc1 = this.KEY_STR.indexOf(input.charAt(i++));\n                enc2 = this.KEY_STR.indexOf(input.charAt(i++));\n                enc3 = this.KEY_STR.indexOf(input.charAt(i++));\n                enc4 = this.KEY_STR.indexOf(input.charAt(i++));\n                chr1 = enc1 << 2 | enc2 >> 4;\n                chr2 = (enc2 & 15) << 4 | enc3 >> 2;\n                chr3 = (enc3 & 3) << 6 | enc4;\n                buf.push(chr1);\n                if (enc3 != 64) {\n                    buf.push(chr2);\n                }\n                if (enc4 != 64) {\n                    buf.push(chr3);\n                }\n                chr1 = chr2 = chr3 = \"\";\n                enc1 = enc2 = enc3 = enc4 = \"\";\n            } while (i < input.length);\n            return buf;\n        };\n        return ExifRestorer;\n    }();\n    qq.TotalProgress = function(callback, getSize) {\n        \"use strict\";\n        var perFileProgress = {}, totalLoaded = 0, totalSize = 0, lastLoadedSent = -1, lastTotalSent = -1, callbackProxy = function(loaded, total) {\n            if (loaded !== lastLoadedSent || total !== lastTotalSent) {\n                callback(loaded, total);\n            }\n            lastLoadedSent = loaded;\n            lastTotalSent = total;\n        }, noRetryableFiles = function(failed, retryable) {\n            var none = true;\n            qq.each(failed, function(idx, failedId) {\n                if (qq.indexOf(retryable, failedId) >= 0) {\n                    none = false;\n                    return false;\n                }\n            });\n            return none;\n        }, onCancel = function(id) {\n            updateTotalProgress(id, -1, -1);\n            delete perFileProgress[id];\n        }, onAllComplete = function(successful, failed, retryable) {\n            if (failed.length === 0 || noRetryableFiles(failed, retryable)) {\n                callbackProxy(totalSize, totalSize);\n                this.reset();\n            }\n        }, onNew = function(id) {\n            var size = getSize(id);\n            if (size > 0) {\n                updateTotalProgress(id, 0, size);\n                perFileProgress[id] = {\n                    loaded: 0,\n                    total: size\n                };\n            }\n        }, updateTotalProgress = function(id, newLoaded, newTotal) {\n            var oldLoaded = perFileProgress[id] ? perFileProgress[id].loaded : 0, oldTotal = perFileProgress[id] ? perFileProgress[id].total : 0;\n            if (newLoaded === -1 && newTotal === -1) {\n                totalLoaded -= oldLoaded;\n                totalSize -= oldTotal;\n            } else {\n                if (newLoaded) {\n                    totalLoaded += newLoaded - oldLoaded;\n                }\n                if (newTotal) {\n                    totalSize += newTotal - oldTotal;\n                }\n            }\n            callbackProxy(totalLoaded, totalSize);\n        };\n        qq.extend(this, {\n            onAllComplete: onAllComplete,\n            onStatusChange: function(id, oldStatus, newStatus) {\n                if (newStatus === qq.status.CANCELED || newStatus === qq.status.REJECTED) {\n                    onCancel(id);\n                } else if (newStatus === qq.status.SUBMITTING) {\n                    onNew(id);\n                }\n            },\n            onIndividualProgress: function(id, loaded, total) {\n                updateTotalProgress(id, loaded, total);\n                perFileProgress[id] = {\n                    loaded: loaded,\n                    total: total\n                };\n            },\n            onNewSize: function(id) {\n                onNew(id);\n            },\n            reset: function() {\n                perFileProgress = {};\n                totalLoaded = 0;\n                totalSize = 0;\n            }\n        });\n    };\n    qq.PasteSupport = function(o) {\n        \"use strict\";\n        var options, detachPasteHandler;\n        options = {\n            targetElement: null,\n            callbacks: {\n                log: function(message, level) {},\n                pasteReceived: function(blob) {}\n            }\n        };\n        function isImage(item) {\n            return item.type && item.type.indexOf(\"image/\") === 0;\n        }\n        function registerPasteHandler() {\n            detachPasteHandler = qq(options.targetElement).attach(\"paste\", function(event) {\n                var clipboardData = event.clipboardData;\n                if (clipboardData) {\n                    qq.each(clipboardData.items, function(idx, item) {\n                        if (isImage(item)) {\n                            var blob = item.getAsFile();\n                            options.callbacks.pasteReceived(blob);\n                        }\n                    });\n                }\n            });\n        }\n        function unregisterPasteHandler() {\n            if (detachPasteHandler) {\n                detachPasteHandler();\n            }\n        }\n        qq.extend(options, o);\n        registerPasteHandler();\n        qq.extend(this, {\n            reset: function() {\n                unregisterPasteHandler();\n            }\n        });\n    };\n    qq.FormSupport = function(options, startUpload, log) {\n        \"use strict\";\n        var self = this, interceptSubmit = options.interceptSubmit, formEl = options.element, autoUpload = options.autoUpload;\n        qq.extend(this, {\n            newEndpoint: null,\n            newAutoUpload: autoUpload,\n            attachedToForm: false,\n            getFormInputsAsObject: function() {\n                if (formEl == null) {\n                    return null;\n                }\n                return self._form2Obj(formEl);\n            }\n        });\n        function determineNewEndpoint(formEl) {\n            if (formEl.getAttribute(\"action\")) {\n                self.newEndpoint = formEl.getAttribute(\"action\");\n            }\n        }\n        function validateForm(formEl, nativeSubmit) {\n            if (formEl.checkValidity && !formEl.checkValidity()) {\n                log(\"Form did not pass validation checks - will not upload.\", \"error\");\n                nativeSubmit();\n            } else {\n                return true;\n            }\n        }\n        function maybeUploadOnSubmit(formEl) {\n            var nativeSubmit = formEl.submit;\n            qq(formEl).attach(\"submit\", function(event) {\n                event = event || window.event;\n                if (event.preventDefault) {\n                    event.preventDefault();\n                } else {\n                    event.returnValue = false;\n                }\n                validateForm(formEl, nativeSubmit) && startUpload();\n            });\n            formEl.submit = function() {\n                validateForm(formEl, nativeSubmit) && startUpload();\n            };\n        }\n        function determineFormEl(formEl) {\n            if (formEl) {\n                if (qq.isString(formEl)) {\n                    formEl = document.getElementById(formEl);\n                }\n                if (formEl) {\n                    log(\"Attaching to form element.\");\n                    determineNewEndpoint(formEl);\n                    interceptSubmit && maybeUploadOnSubmit(formEl);\n                }\n            }\n            return formEl;\n        }\n        formEl = determineFormEl(formEl);\n        this.attachedToForm = !!formEl;\n    };\n    qq.extend(qq.FormSupport.prototype, {\n        _form2Obj: function(form) {\n            \"use strict\";\n            var obj = {}, notIrrelevantType = function(type) {\n                var irrelevantTypes = [ \"button\", \"image\", \"reset\", \"submit\" ];\n                return qq.indexOf(irrelevantTypes, type.toLowerCase()) < 0;\n            }, radioOrCheckbox = function(type) {\n                return qq.indexOf([ \"checkbox\", \"radio\" ], type.toLowerCase()) >= 0;\n            }, ignoreValue = function(el) {\n                if (radioOrCheckbox(el.type) && !el.checked) {\n                    return true;\n                }\n                return el.disabled && el.type.toLowerCase() !== \"hidden\";\n            }, selectValue = function(select) {\n                var value = null;\n                qq.each(qq(select).children(), function(idx, child) {\n                    if (child.tagName.toLowerCase() === \"option\" && child.selected) {\n                        value = child.value;\n                        return false;\n                    }\n                });\n                return value;\n            };\n            qq.each(form.elements, function(idx, el) {\n                if ((qq.isInput(el, true) || el.tagName.toLowerCase() === \"textarea\") && notIrrelevantType(el.type) && !ignoreValue(el)) {\n                    obj[el.name] = el.value;\n                } else if (el.tagName.toLowerCase() === \"select\" && !ignoreValue(el)) {\n                    var value = selectValue(el);\n                    if (value !== null) {\n                        obj[el.name] = value;\n                    }\n                }\n            });\n            return obj;\n        }\n    });\n    qq.azure = qq.azure || {};\n    qq.azure.util = qq.azure.util || function() {\n        \"use strict\";\n        return {\n            AZURE_PARAM_PREFIX: \"x-ms-meta-\",\n            _paramNameMatchesAzureParameter: function(name) {\n                switch (name) {\n                  case \"Cache-Control\":\n                  case \"Content-Disposition\":\n                  case \"Content-Encoding\":\n                  case \"Content-MD5\":\n                  case \"x-ms-blob-content-encoding\":\n                  case \"x-ms-blob-content-disposition\":\n                  case \"x-ms-blob-content-md5\":\n                  case \"x-ms-blob-cache-control\":\n                    return true;\n\n                  default:\n                    return false;\n                }\n            },\n            _getPrefixedParamName: function(name) {\n                if (qq.azure.util._paramNameMatchesAzureParameter(name)) {\n                    return name;\n                } else {\n                    return qq.azure.util.AZURE_PARAM_PREFIX + name;\n                }\n            },\n            getParamsAsHeaders: function(params) {\n                var headers = {};\n                qq.each(params, function(name, val) {\n                    var headerName = qq.azure.util._getPrefixedParamName(name), value = null;\n                    if (qq.isFunction(val)) {\n                        value = String(val());\n                    } else if (qq.isObject(val)) {\n                        qq.extend(headers, qq.azure.util.getParamsAsHeaders(val));\n                    } else {\n                        value = String(val);\n                    }\n                    if (value !== null) {\n                        if (qq.azure.util._paramNameMatchesAzureParameter(name)) {\n                            headers[headerName] = value;\n                        } else {\n                            headers[headerName] = encodeURIComponent(value);\n                        }\n                    }\n                });\n                return headers;\n            },\n            parseAzureError: function(responseText, log) {\n                var domParser = new DOMParser(), responseDoc = domParser.parseFromString(responseText, \"application/xml\"), errorTag = responseDoc.getElementsByTagName(\"Error\")[0], errorDetails = {}, codeTag, messageTag;\n                log(\"Received error response: \" + responseText, \"error\");\n                if (errorTag) {\n                    messageTag = errorTag.getElementsByTagName(\"Message\")[0];\n                    if (messageTag) {\n                        errorDetails.message = messageTag.textContent;\n                    }\n                    codeTag = errorTag.getElementsByTagName(\"Code\")[0];\n                    if (codeTag) {\n                        errorDetails.code = codeTag.textContent;\n                    }\n                    log(\"Parsed Azure error: \" + JSON.stringify(errorDetails), \"error\");\n                    return errorDetails;\n                }\n            }\n        };\n    }();\n    (function() {\n        \"use strict\";\n        qq.nonTraditionalBasePublicApi = {\n            setUploadSuccessParams: function(params, id) {\n                this._uploadSuccessParamsStore.set(params, id);\n            },\n            setUploadSuccessEndpoint: function(endpoint, id) {\n                this._uploadSuccessEndpointStore.set(endpoint, id);\n            }\n        };\n        qq.nonTraditionalBasePrivateApi = {\n            _onComplete: function(id, name, result, xhr) {\n                var success = result.success ? true : false, self = this, onCompleteArgs = arguments, successEndpoint = this._uploadSuccessEndpointStore.get(id), successCustomHeaders = this._options.uploadSuccess.customHeaders, successMethod = this._options.uploadSuccess.method, cors = this._options.cors, promise = new qq.Promise(), uploadSuccessParams = this._uploadSuccessParamsStore.get(id), fileParams = this._paramsStore.get(id), onSuccessFromServer = function(successRequestResult) {\n                    delete self._failedSuccessRequestCallbacks[id];\n                    qq.extend(result, successRequestResult);\n                    qq.FineUploaderBasic.prototype._onComplete.apply(self, onCompleteArgs);\n                    promise.success(successRequestResult);\n                }, onFailureFromServer = function(successRequestResult) {\n                    var callback = submitSuccessRequest;\n                    qq.extend(result, successRequestResult);\n                    if (result && result.reset) {\n                        callback = null;\n                    }\n                    if (!callback) {\n                        delete self._failedSuccessRequestCallbacks[id];\n                    } else {\n                        self._failedSuccessRequestCallbacks[id] = callback;\n                    }\n                    if (!self._onAutoRetry(id, name, result, xhr, callback)) {\n                        qq.FineUploaderBasic.prototype._onComplete.apply(self, onCompleteArgs);\n                        promise.failure(successRequestResult);\n                    }\n                }, submitSuccessRequest, successAjaxRequester;\n                if (success && successEndpoint) {\n                    successAjaxRequester = new qq.UploadSuccessAjaxRequester({\n                        endpoint: successEndpoint,\n                        method: successMethod,\n                        customHeaders: successCustomHeaders,\n                        cors: cors,\n                        log: qq.bind(this.log, this)\n                    });\n                    qq.extend(uploadSuccessParams, self._getEndpointSpecificParams(id, result, xhr), true);\n                    fileParams && qq.extend(uploadSuccessParams, fileParams, true);\n                    submitSuccessRequest = qq.bind(function() {\n                        successAjaxRequester.sendSuccessRequest(id, uploadSuccessParams).then(onSuccessFromServer, onFailureFromServer);\n                    }, self);\n                    submitSuccessRequest();\n                    return promise;\n                }\n                return qq.FineUploaderBasic.prototype._onComplete.apply(this, arguments);\n            },\n            _manualRetry: function(id) {\n                var successRequestCallback = this._failedSuccessRequestCallbacks[id];\n                return qq.FineUploaderBasic.prototype._manualRetry.call(this, id, successRequestCallback);\n            }\n        };\n    })();\n    (function() {\n        \"use strict\";\n        qq.azure.FineUploaderBasic = function(o) {\n            if (!qq.supportedFeatures.ajaxUploading) {\n                throw new qq.Error(\"Uploading directly to Azure is not possible in this browser.\");\n            }\n            var options = {\n                signature: {\n                    endpoint: null,\n                    customHeaders: {}\n                },\n                blobProperties: {\n                    name: \"uuid\"\n                },\n                uploadSuccess: {\n                    endpoint: null,\n                    method: \"POST\",\n                    params: {},\n                    customHeaders: {}\n                },\n                chunking: {\n                    partSize: 4e6,\n                    minFileSize: 4000001\n                }\n            };\n            qq.extend(options, o, true);\n            qq.FineUploaderBasic.call(this, options);\n            this._uploadSuccessParamsStore = this._createStore(this._options.uploadSuccess.params);\n            this._uploadSuccessEndpointStore = this._createStore(this._options.uploadSuccess.endpoint);\n            this._failedSuccessRequestCallbacks = {};\n            this._cannedBlobNames = {};\n        };\n        qq.extend(qq.azure.FineUploaderBasic.prototype, qq.basePublicApi);\n        qq.extend(qq.azure.FineUploaderBasic.prototype, qq.basePrivateApi);\n        qq.extend(qq.azure.FineUploaderBasic.prototype, qq.nonTraditionalBasePublicApi);\n        qq.extend(qq.azure.FineUploaderBasic.prototype, qq.nonTraditionalBasePrivateApi);\n        qq.extend(qq.azure.FineUploaderBasic.prototype, {\n            getBlobName: function(id) {\n                if (this._cannedBlobNames[id] == null) {\n                    return this._handler.getThirdPartyFileId(id);\n                }\n                return this._cannedBlobNames[id];\n            },\n            _getEndpointSpecificParams: function(id) {\n                return {\n                    blob: this.getBlobName(id),\n                    uuid: this.getUuid(id),\n                    name: this.getName(id),\n                    container: this._endpointStore.get(id)\n                };\n            },\n            _createUploadHandler: function() {\n                return qq.FineUploaderBasic.prototype._createUploadHandler.call(this, {\n                    signature: this._options.signature,\n                    onGetBlobName: qq.bind(this._determineBlobName, this),\n                    deleteBlob: qq.bind(this._deleteBlob, this, true)\n                }, \"azure\");\n            },\n            _determineBlobName: function(id) {\n                var self = this, blobNameOptionValue = this._options.blobProperties.name, uuid = this.getUuid(id), filename = this.getName(id), fileExtension = qq.getExtension(filename), blobNameToUse = uuid;\n                if (qq.isString(blobNameOptionValue)) {\n                    switch (blobNameOptionValue) {\n                      case \"uuid\":\n                        if (fileExtension !== undefined) {\n                            blobNameToUse += \".\" + fileExtension;\n                        }\n                        return new qq.Promise().success(blobNameToUse);\n\n                      case \"filename\":\n                        return new qq.Promise().success(filename);\n\n                      default:\n                        return new qq.Promise.failure(\"Invalid blobName option value - \" + blobNameOptionValue);\n                    }\n                } else {\n                    return blobNameOptionValue.call(this, id);\n                }\n            },\n            _addCannedFile: function(sessionData) {\n                var id;\n                if (sessionData.blobName == null) {\n                    throw new qq.Error(\"Did not find blob name property in server session response.  This is required!\");\n                } else {\n                    id = qq.FineUploaderBasic.prototype._addCannedFile.apply(this, arguments);\n                    this._cannedBlobNames[id] = sessionData.blobName;\n                }\n                return id;\n            },\n            _deleteBlob: function(relatedToCancel, id) {\n                var self = this, deleteBlobSasUri = {}, blobUriStore = {\n                    get: function(id) {\n                        return self._endpointStore.get(id) + \"/\" + self.getBlobName(id);\n                    }\n                }, deleteFileEndpointStore = {\n                    get: function(id) {\n                        return deleteBlobSasUri[id];\n                    }\n                }, getSasSuccess = function(id, sasUri) {\n                    deleteBlobSasUri[id] = sasUri;\n                    deleteBlob.send(id);\n                }, getSasFailure = function(id, reason, xhr) {\n                    if (relatedToCancel) {\n                        self.log(\"Will cancel upload, but cannot remove uncommitted parts from Azure due to issue retrieving SAS\", \"error\");\n                        qq.FineUploaderBasic.prototype._onCancel.call(self, id, self.getName(id));\n                    } else {\n                        self._onDeleteComplete(id, xhr, true);\n                        self._options.callbacks.onDeleteComplete(id, xhr, true);\n                    }\n                }, deleteBlob = new qq.azure.DeleteBlob({\n                    endpointStore: deleteFileEndpointStore,\n                    log: qq.bind(self.log, self),\n                    onDelete: function(id) {\n                        self._onDelete(id);\n                        self._options.callbacks.onDelete(id);\n                    },\n                    onDeleteComplete: function(id, xhrOrXdr, isError) {\n                        delete deleteBlobSasUri[id];\n                        if (isError) {\n                            if (relatedToCancel) {\n                                self.log(\"Will cancel upload, but failed to remove uncommitted parts from Azure.\", \"error\");\n                            } else {\n                                qq.azure.util.parseAzureError(xhrOrXdr.responseText, qq.bind(self.log, self));\n                            }\n                        }\n                        if (relatedToCancel) {\n                            qq.FineUploaderBasic.prototype._onCancel.call(self, id, self.getName(id));\n                            self.log(\"Deleted uncommitted blob chunks for \" + id);\n                        } else {\n                            self._onDeleteComplete(id, xhrOrXdr, isError);\n                            self._options.callbacks.onDeleteComplete(id, xhrOrXdr, isError);\n                        }\n                    }\n                }), getSas = new qq.azure.GetSas({\n                    cors: this._options.cors,\n                    customHeaders: this._options.signature.customHeaders,\n                    endpointStore: {\n                        get: function() {\n                            return self._options.signature.endpoint;\n                        }\n                    },\n                    restRequestVerb: deleteBlob.method,\n                    log: qq.bind(self.log, self)\n                });\n                getSas.request(id, blobUriStore.get(id)).then(qq.bind(getSasSuccess, self, id), qq.bind(getSasFailure, self, id));\n            },\n            _createDeleteHandler: function() {\n                var self = this;\n                return {\n                    sendDelete: function(id, uuid) {\n                        self._deleteBlob(false, id);\n                    }\n                };\n            }\n        });\n    })();\n    qq.azure.XhrUploadHandler = function(spec, proxy) {\n        \"use strict\";\n        var handler = this, log = proxy.log, cors = spec.cors, endpointStore = spec.endpointStore, paramsStore = spec.paramsStore, signature = spec.signature, filenameParam = spec.filenameParam, minFileSizeForChunking = spec.chunking.minFileSize, deleteBlob = spec.deleteBlob, onGetBlobName = spec.onGetBlobName, getName = proxy.getName, getSize = proxy.getSize, getBlobMetadata = function(id) {\n            var params = paramsStore.get(id);\n            params[filenameParam] = getName(id);\n            return params;\n        }, api = {\n            putBlob: new qq.azure.PutBlob({\n                getBlobMetadata: getBlobMetadata,\n                log: log\n            }),\n            putBlock: new qq.azure.PutBlock({\n                log: log\n            }),\n            putBlockList: new qq.azure.PutBlockList({\n                getBlobMetadata: getBlobMetadata,\n                log: log\n            }),\n            getSasForPutBlobOrBlock: new qq.azure.GetSas({\n                cors: cors,\n                customHeaders: signature.customHeaders,\n                endpointStore: {\n                    get: function() {\n                        return signature.endpoint;\n                    }\n                },\n                log: log,\n                restRequestVerb: \"PUT\"\n            })\n        };\n        function combineChunks(id) {\n            var promise = new qq.Promise();\n            getSignedUrl(id).then(function(sasUri) {\n                var mimeType = handler._getMimeType(id), blockIdEntries = handler._getPersistableData(id).blockIdEntries;\n                api.putBlockList.send(id, sasUri, blockIdEntries, mimeType, function(xhr) {\n                    handler._registerXhr(id, null, xhr, api.putBlockList);\n                }).then(function(xhr) {\n                    log(\"Success combining chunks for id \" + id);\n                    promise.success({}, xhr);\n                }, function(xhr) {\n                    log(\"Attempt to combine chunks failed for id \" + id, \"error\");\n                    handleFailure(xhr, promise);\n                });\n            }, promise.failure);\n            return promise;\n        }\n        function determineBlobUrl(id) {\n            var containerUrl = endpointStore.get(id), promise = new qq.Promise(), getBlobNameSuccess = function(blobName) {\n                handler._setThirdPartyFileId(id, blobName);\n                promise.success(containerUrl + \"/\" + blobName);\n            }, getBlobNameFailure = function(reason) {\n                promise.failure(reason);\n            };\n            onGetBlobName(id).then(getBlobNameSuccess, getBlobNameFailure);\n            return promise;\n        }\n        function getSignedUrl(id, optChunkIdx) {\n            var getSasId = optChunkIdx == null ? id : id + \".\" + optChunkIdx, promise = new qq.Promise(), getSasSuccess = function(sasUri) {\n                log(\"GET SAS request succeeded.\");\n                promise.success(sasUri);\n            }, getSasFailure = function(reason, getSasXhr) {\n                log(\"GET SAS request failed: \" + reason, \"error\");\n                promise.failure({\n                    error: \"Problem communicating with local server\"\n                }, getSasXhr);\n            }, determineBlobUrlSuccess = function(blobUrl) {\n                api.getSasForPutBlobOrBlock.request(getSasId, blobUrl).then(getSasSuccess, getSasFailure);\n            }, determineBlobUrlFailure = function(reason) {\n                log(qq.format(\"Failed to determine blob name for ID {} - {}\", id, reason), \"error\");\n                promise.failure({\n                    error: reason\n                });\n            };\n            determineBlobUrl(id).then(determineBlobUrlSuccess, determineBlobUrlFailure);\n            return promise;\n        }\n        function handleFailure(xhr, promise) {\n            var azureError = qq.azure.util.parseAzureError(xhr.responseText, log), errorMsg = \"Problem sending file to Azure\";\n            promise.failure({\n                error: errorMsg,\n                azureError: azureError && azureError.message,\n                reset: xhr.status === 403\n            });\n        }\n        qq.extend(this, {\n            uploadChunk: function(params) {\n                var chunkIdx = params.chunkIdx;\n                var id = params.id;\n                var promise = new qq.Promise();\n                getSignedUrl(id, chunkIdx).then(function(sasUri) {\n                    var xhr = handler._createXhr(id, chunkIdx), chunkData = handler._getChunkData(id, chunkIdx);\n                    handler._registerProgressHandler(id, chunkIdx, chunkData.size);\n                    handler._registerXhr(id, chunkIdx, xhr, api.putBlock);\n                    api.putBlock.upload(id + \".\" + chunkIdx, xhr, sasUri, chunkIdx, chunkData.blob).then(function(blockIdEntry) {\n                        if (!handler._getPersistableData(id).blockIdEntries) {\n                            handler._getPersistableData(id).blockIdEntries = [];\n                        }\n                        handler._getPersistableData(id).blockIdEntries.push(blockIdEntry);\n                        log(\"Put Block call succeeded for \" + id);\n                        promise.success({}, xhr);\n                    }, function() {\n                        log(qq.format(\"Put Block call failed for ID {} on part {}\", id, chunkIdx), \"error\");\n                        handleFailure(xhr, promise);\n                    });\n                }, promise.failure);\n                return promise;\n            },\n            uploadFile: function(id) {\n                var promise = new qq.Promise(), fileOrBlob = handler.getFile(id);\n                getSignedUrl(id).then(function(sasUri) {\n                    var xhr = handler._createXhr(id);\n                    handler._registerProgressHandler(id);\n                    api.putBlob.upload(id, xhr, sasUri, fileOrBlob).then(function() {\n                        log(\"Put Blob call succeeded for \" + id);\n                        promise.success({}, xhr);\n                    }, function() {\n                        log(\"Put Blob call failed for \" + id, \"error\");\n                        handleFailure(xhr, promise);\n                    });\n                }, promise.failure);\n                return promise;\n            }\n        });\n        qq.extend(this, new qq.XhrUploadHandler({\n            options: qq.extend({\n                namespace: \"azure\"\n            }, spec),\n            proxy: qq.extend({\n                getEndpoint: spec.endpointStore.get\n            }, proxy)\n        }));\n        qq.override(this, function(super_) {\n            return {\n                expunge: function(id) {\n                    var relatedToCancel = handler._wasCanceled(id), chunkingData = handler._getPersistableData(id), blockIdEntries = chunkingData && chunkingData.blockIdEntries || [];\n                    if (relatedToCancel && blockIdEntries.length > 0) {\n                        deleteBlob(id);\n                    }\n                    super_.expunge(id);\n                },\n                finalizeChunks: function(id) {\n                    return combineChunks(id);\n                },\n                _shouldChunkThisFile: function(id) {\n                    var maybePossible = super_._shouldChunkThisFile(id);\n                    return maybePossible && getSize(id) >= minFileSizeForChunking;\n                }\n            };\n        });\n    };\n    qq.azure.GetSas = function(o) {\n        \"use strict\";\n        var requester, options = {\n            cors: {\n                expected: false,\n                sendCredentials: false\n            },\n            customHeaders: {},\n            restRequestVerb: \"PUT\",\n            endpointStore: null,\n            log: function(str, level) {}\n        }, requestPromises = {};\n        qq.extend(options, o);\n        function sasResponseReceived(id, xhr, isError) {\n            var promise = requestPromises[id];\n            if (isError) {\n                promise.failure(\"Received response code \" + xhr.status, xhr);\n            } else {\n                if (xhr.responseText.length) {\n                    promise.success(xhr.responseText);\n                } else {\n                    promise.failure(\"Empty response.\", xhr);\n                }\n            }\n            delete requestPromises[id];\n        }\n        requester = qq.extend(this, new qq.AjaxRequester({\n            acceptHeader: \"application/json\",\n            validMethods: [ \"GET\" ],\n            method: \"GET\",\n            successfulResponseCodes: {\n                GET: [ 200 ]\n            },\n            contentType: null,\n            customHeaders: options.customHeaders,\n            endpointStore: options.endpointStore,\n            cors: options.cors,\n            log: options.log,\n            onComplete: sasResponseReceived\n        }));\n        qq.extend(this, {\n            request: function(id, blobUri) {\n                var requestPromise = new qq.Promise(), restVerb = options.restRequestVerb;\n                options.log(qq.format(\"Submitting GET SAS request for a {} REST request related to file ID {}.\", restVerb, id));\n                requestPromises[id] = requestPromise;\n                requester.initTransport(id).withParams({\n                    bloburi: blobUri,\n                    _method: restVerb\n                }).withCacheBuster().send();\n                return requestPromise;\n            }\n        });\n    };\n    qq.UploadSuccessAjaxRequester = function(o) {\n        \"use strict\";\n        var requester, pendingRequests = [], options = {\n            method: \"POST\",\n            endpoint: null,\n            maxConnections: 3,\n            customHeaders: {},\n            paramsStore: {},\n            cors: {\n                expected: false,\n                sendCredentials: false\n            },\n            log: function(str, level) {}\n        };\n        qq.extend(options, o);\n        function handleSuccessResponse(id, xhrOrXdr, isError) {\n            var promise = pendingRequests[id], responseJson = xhrOrXdr.responseText, successIndicator = {\n                success: true\n            }, failureIndicator = {\n                success: false\n            }, parsedResponse;\n            delete pendingRequests[id];\n            options.log(qq.format(\"Received the following response body to an upload success request for id {}: {}\", id, responseJson));\n            try {\n                parsedResponse = qq.parseJson(responseJson);\n                if (isError || parsedResponse && (parsedResponse.error || parsedResponse.success === false)) {\n                    options.log(\"Upload success request was rejected by the server.\", \"error\");\n                    promise.failure(qq.extend(parsedResponse, failureIndicator));\n                } else {\n                    options.log(\"Upload success was acknowledged by the server.\");\n                    promise.success(qq.extend(parsedResponse, successIndicator));\n                }\n            } catch (error) {\n                if (isError) {\n                    options.log(qq.format(\"Your server indicated failure in its upload success request response for id {}!\", id), \"error\");\n                    promise.failure(failureIndicator);\n                } else {\n                    options.log(\"Upload success was acknowledged by the server.\");\n                    promise.success(successIndicator);\n                }\n            }\n        }\n        requester = qq.extend(this, new qq.AjaxRequester({\n            acceptHeader: \"application/json\",\n            method: options.method,\n            endpointStore: {\n                get: function() {\n                    return options.endpoint;\n                }\n            },\n            paramsStore: options.paramsStore,\n            maxConnections: options.maxConnections,\n            customHeaders: options.customHeaders,\n            log: options.log,\n            onComplete: handleSuccessResponse,\n            cors: options.cors\n        }));\n        qq.extend(this, {\n            sendSuccessRequest: function(id, spec) {\n                var promise = new qq.Promise();\n                options.log(\"Submitting upload success request/notification for \" + id);\n                requester.initTransport(id).withParams(spec).send();\n                pendingRequests[id] = promise;\n                return promise;\n            }\n        });\n    };\n    qq.azure.DeleteBlob = function(o) {\n        \"use strict\";\n        var requester, method = \"DELETE\", options = {\n            endpointStore: {},\n            onDelete: function(id) {},\n            onDeleteComplete: function(id, xhr, isError) {},\n            log: function(str, level) {}\n        };\n        qq.extend(options, o);\n        requester = qq.extend(this, new qq.AjaxRequester({\n            validMethods: [ method ],\n            method: method,\n            successfulResponseCodes: function() {\n                var codes = {};\n                codes[method] = [ 202 ];\n                return codes;\n            }(),\n            contentType: null,\n            endpointStore: options.endpointStore,\n            allowXRequestedWithAndCacheControl: false,\n            cors: {\n                expected: true\n            },\n            log: options.log,\n            onSend: options.onDelete,\n            onComplete: options.onDeleteComplete\n        }));\n        qq.extend(this, {\n            method: method,\n            send: function(id) {\n                options.log(\"Submitting Delete Blob request for \" + id);\n                return requester.initTransport(id).send();\n            }\n        });\n    };\n    qq.azure.PutBlob = function(o) {\n        \"use strict\";\n        var requester, method = \"PUT\", options = {\n            getBlobMetadata: function(id) {},\n            log: function(str, level) {}\n        }, endpoints = {}, promises = {}, endpointHandler = {\n            get: function(id) {\n                return endpoints[id];\n            }\n        };\n        qq.extend(options, o);\n        requester = qq.extend(this, new qq.AjaxRequester({\n            validMethods: [ method ],\n            method: method,\n            successfulResponseCodes: function() {\n                var codes = {};\n                codes[method] = [ 201 ];\n                return codes;\n            }(),\n            contentType: null,\n            customHeaders: function(id) {\n                var params = options.getBlobMetadata(id), headers = qq.azure.util.getParamsAsHeaders(params);\n                headers[\"x-ms-blob-type\"] = \"BlockBlob\";\n                return headers;\n            },\n            endpointStore: endpointHandler,\n            allowXRequestedWithAndCacheControl: false,\n            cors: {\n                expected: true\n            },\n            log: options.log,\n            onComplete: function(id, xhr, isError) {\n                var promise = promises[id];\n                delete endpoints[id];\n                delete promises[id];\n                if (isError) {\n                    promise.failure();\n                } else {\n                    promise.success();\n                }\n            }\n        }));\n        qq.extend(this, {\n            method: method,\n            upload: function(id, xhr, url, file) {\n                var promise = new qq.Promise();\n                options.log(\"Submitting Put Blob request for \" + id);\n                promises[id] = promise;\n                endpoints[id] = url;\n                requester.initTransport(id).withPayload(file).withHeaders({\n                    \"Content-Type\": file.type\n                }).send(xhr);\n                return promise;\n            }\n        });\n    };\n    qq.azure.PutBlock = function(o) {\n        \"use strict\";\n        var requester, method = \"PUT\", blockIdEntries = {}, promises = {}, options = {\n            log: function(str, level) {}\n        }, endpoints = {}, endpointHandler = {\n            get: function(id) {\n                return endpoints[id];\n            }\n        };\n        qq.extend(options, o);\n        requester = qq.extend(this, new qq.AjaxRequester({\n            validMethods: [ method ],\n            method: method,\n            successfulResponseCodes: function() {\n                var codes = {};\n                codes[method] = [ 201 ];\n                return codes;\n            }(),\n            contentType: null,\n            endpointStore: endpointHandler,\n            allowXRequestedWithAndCacheControl: false,\n            cors: {\n                expected: true\n            },\n            log: options.log,\n            onComplete: function(id, xhr, isError) {\n                var promise = promises[id], blockIdEntry = blockIdEntries[id];\n                delete endpoints[id];\n                delete promises[id];\n                delete blockIdEntries[id];\n                if (isError) {\n                    promise.failure();\n                } else {\n                    promise.success(blockIdEntry);\n                }\n            }\n        }));\n        function createBlockId(partNum) {\n            var digits = 5, zeros = new Array(digits + 1).join(\"0\"), paddedPartNum = (zeros + partNum).slice(-digits);\n            return btoa(paddedPartNum);\n        }\n        qq.extend(this, {\n            method: method,\n            upload: function(id, xhr, sasUri, partNum, blob) {\n                var promise = new qq.Promise(), blockId = createBlockId(partNum);\n                promises[id] = promise;\n                options.log(qq.format(\"Submitting Put Block request for {} = part {}\", id, partNum));\n                endpoints[id] = qq.format(\"{}&comp=block&blockid={}\", sasUri, encodeURIComponent(blockId));\n                blockIdEntries[id] = {\n                    part: partNum,\n                    id: blockId\n                };\n                requester.initTransport(id).withPayload(blob).send(xhr);\n                return promise;\n            }\n        });\n    };\n    qq.azure.PutBlockList = function(o) {\n        \"use strict\";\n        var requester, method = \"PUT\", promises = {}, options = {\n            getBlobMetadata: function(id) {},\n            log: function(str, level) {}\n        }, endpoints = {}, endpointHandler = {\n            get: function(id) {\n                return endpoints[id];\n            }\n        };\n        qq.extend(options, o);\n        requester = qq.extend(this, new qq.AjaxRequester({\n            validMethods: [ method ],\n            method: method,\n            successfulResponseCodes: function() {\n                var codes = {};\n                codes[method] = [ 201 ];\n                return codes;\n            }(),\n            customHeaders: function(id) {\n                var params = options.getBlobMetadata(id);\n                return qq.azure.util.getParamsAsHeaders(params);\n            },\n            contentType: \"text/plain\",\n            endpointStore: endpointHandler,\n            allowXRequestedWithAndCacheControl: false,\n            cors: {\n                expected: true\n            },\n            log: options.log,\n            onSend: function() {},\n            onComplete: function(id, xhr, isError) {\n                var promise = promises[id];\n                delete endpoints[id];\n                delete promises[id];\n                if (isError) {\n                    promise.failure(xhr);\n                } else {\n                    promise.success(xhr);\n                }\n            }\n        }));\n        function createRequestBody(blockIdEntries) {\n            var doc = document.implementation.createDocument(null, \"BlockList\", null);\n            blockIdEntries.sort(function(a, b) {\n                return a.part - b.part;\n            });\n            qq.each(blockIdEntries, function(idx, blockIdEntry) {\n                var latestEl = doc.createElement(\"Latest\"), latestTextEl = doc.createTextNode(blockIdEntry.id);\n                latestEl.appendChild(latestTextEl);\n                qq(doc).children()[0].appendChild(latestEl);\n            });\n            return new XMLSerializer().serializeToString(doc);\n        }\n        qq.extend(this, {\n            method: method,\n            send: function(id, sasUri, blockIdEntries, fileMimeType, registerXhrCallback) {\n                var promise = new qq.Promise(), blockIdsXml = createRequestBody(blockIdEntries), xhr;\n                promises[id] = promise;\n                options.log(qq.format(\"Submitting Put Block List request for {}\", id));\n                endpoints[id] = qq.format(\"{}&comp=blocklist\", sasUri);\n                xhr = requester.initTransport(id).withPayload(blockIdsXml).withHeaders({\n                    \"x-ms-blob-content-type\": fileMimeType\n                }).send();\n                registerXhrCallback(xhr);\n                return promise;\n            }\n        });\n    };\n})(window);\n//# sourceMappingURL=azure.fine-uploader.core.js.map","\"use strict\";\n\nmodule.exports = require(\"../../azure.fine-uploader/azure.fine-uploader.core\");\n","// Fine Uploader 5.16.2 - MIT licensed. http://fineuploader.com\n(function(global) {\n    var qq = function(element) {\n        \"use strict\";\n        return {\n            hide: function() {\n                element.style.display = \"none\";\n                return this;\n            },\n            attach: function(type, fn) {\n                if (element.addEventListener) {\n                    element.addEventListener(type, fn, false);\n                } else if (element.attachEvent) {\n                    element.attachEvent(\"on\" + type, fn);\n                }\n                return function() {\n                    qq(element).detach(type, fn);\n                };\n            },\n            detach: function(type, fn) {\n                if (element.removeEventListener) {\n                    element.removeEventListener(type, fn, false);\n                } else if (element.attachEvent) {\n                    element.detachEvent(\"on\" + type, fn);\n                }\n                return this;\n            },\n            contains: function(descendant) {\n                if (!descendant) {\n                    return false;\n                }\n                if (element === descendant) {\n                    return true;\n                }\n                if (element.contains) {\n                    return element.contains(descendant);\n                } else {\n                    return !!(descendant.compareDocumentPosition(element) & 8);\n                }\n            },\n            insertBefore: function(elementB) {\n                elementB.parentNode.insertBefore(element, elementB);\n                return this;\n            },\n            remove: function() {\n                element.parentNode.removeChild(element);\n                return this;\n            },\n            css: function(styles) {\n                if (element.style == null) {\n                    throw new qq.Error(\"Can't apply style to node as it is not on the HTMLElement prototype chain!\");\n                }\n                if (styles.opacity != null) {\n                    if (typeof element.style.opacity !== \"string\" && typeof element.filters !== \"undefined\") {\n                        styles.filter = \"alpha(opacity=\" + Math.round(100 * styles.opacity) + \")\";\n                    }\n                }\n                qq.extend(element.style, styles);\n                return this;\n            },\n            hasClass: function(name, considerParent) {\n                var re = new RegExp(\"(^| )\" + name + \"( |$)\");\n                return re.test(element.className) || !!(considerParent && re.test(element.parentNode.className));\n            },\n            addClass: function(name) {\n                if (!qq(element).hasClass(name)) {\n                    element.className += \" \" + name;\n                }\n                return this;\n            },\n            removeClass: function(name) {\n                var re = new RegExp(\"(^| )\" + name + \"( |$)\");\n                element.className = element.className.replace(re, \" \").replace(/^\\s+|\\s+$/g, \"\");\n                return this;\n            },\n            getByClass: function(className, first) {\n                var candidates, result = [];\n                if (first && element.querySelector) {\n                    return element.querySelector(\".\" + className);\n                } else if (element.querySelectorAll) {\n                    return element.querySelectorAll(\".\" + className);\n                }\n                candidates = element.getElementsByTagName(\"*\");\n                qq.each(candidates, function(idx, val) {\n                    if (qq(val).hasClass(className)) {\n                        result.push(val);\n                    }\n                });\n                return first ? result[0] : result;\n            },\n            getFirstByClass: function(className) {\n                return qq(element).getByClass(className, true);\n            },\n            children: function() {\n                var children = [], child = element.firstChild;\n                while (child) {\n                    if (child.nodeType === 1) {\n                        children.push(child);\n                    }\n                    child = child.nextSibling;\n                }\n                return children;\n            },\n            setText: function(text) {\n                element.innerText = text;\n                element.textContent = text;\n                return this;\n            },\n            clearText: function() {\n                return qq(element).setText(\"\");\n            },\n            hasAttribute: function(attrName) {\n                var attrVal;\n                if (element.hasAttribute) {\n                    if (!element.hasAttribute(attrName)) {\n                        return false;\n                    }\n                    return /^false$/i.exec(element.getAttribute(attrName)) == null;\n                } else {\n                    attrVal = element[attrName];\n                    if (attrVal === undefined) {\n                        return false;\n                    }\n                    return /^false$/i.exec(attrVal) == null;\n                }\n            }\n        };\n    };\n    (function() {\n        \"use strict\";\n        qq.canvasToBlob = function(canvas, mime, quality) {\n            return qq.dataUriToBlob(canvas.toDataURL(mime, quality));\n        };\n        qq.dataUriToBlob = function(dataUri) {\n            var arrayBuffer, byteString, createBlob = function(data, mime) {\n                var BlobBuilder = window.BlobBuilder || window.WebKitBlobBuilder || window.MozBlobBuilder || window.MSBlobBuilder, blobBuilder = BlobBuilder && new BlobBuilder();\n                if (blobBuilder) {\n                    blobBuilder.append(data);\n                    return blobBuilder.getBlob(mime);\n                } else {\n                    return new Blob([ data ], {\n                        type: mime\n                    });\n                }\n            }, intArray, mimeString;\n            if (dataUri.split(\",\")[0].indexOf(\"base64\") >= 0) {\n                byteString = atob(dataUri.split(\",\")[1]);\n            } else {\n                byteString = decodeURI(dataUri.split(\",\")[1]);\n            }\n            mimeString = dataUri.split(\",\")[0].split(\":\")[1].split(\";\")[0];\n            arrayBuffer = new ArrayBuffer(byteString.length);\n            intArray = new Uint8Array(arrayBuffer);\n            qq.each(byteString, function(idx, character) {\n                intArray[idx] = character.charCodeAt(0);\n            });\n            return createBlob(arrayBuffer, mimeString);\n        };\n        qq.log = function(message, level) {\n            if (window.console) {\n                if (!level || level === \"info\") {\n                    window.console.log(message);\n                } else {\n                    if (window.console[level]) {\n                        window.console[level](message);\n                    } else {\n                        window.console.log(\"<\" + level + \"> \" + message);\n                    }\n                }\n            }\n        };\n        qq.isObject = function(variable) {\n            return variable && !variable.nodeType && Object.prototype.toString.call(variable) === \"[object Object]\";\n        };\n        qq.isFunction = function(variable) {\n            return typeof variable === \"function\";\n        };\n        qq.isArray = function(value) {\n            return Object.prototype.toString.call(value) === \"[object Array]\" || value && window.ArrayBuffer && value.buffer && value.buffer.constructor === ArrayBuffer;\n        };\n        qq.isItemList = function(maybeItemList) {\n            return Object.prototype.toString.call(maybeItemList) === \"[object DataTransferItemList]\";\n        };\n        qq.isNodeList = function(maybeNodeList) {\n            return Object.prototype.toString.call(maybeNodeList) === \"[object NodeList]\" || maybeNodeList.item && maybeNodeList.namedItem;\n        };\n        qq.isString = function(maybeString) {\n            return Object.prototype.toString.call(maybeString) === \"[object String]\";\n        };\n        qq.trimStr = function(string) {\n            if (String.prototype.trim) {\n                return string.trim();\n            }\n            return string.replace(/^\\s+|\\s+$/g, \"\");\n        };\n        qq.format = function(str) {\n            var args = Array.prototype.slice.call(arguments, 1), newStr = str, nextIdxToReplace = newStr.indexOf(\"{}\");\n            qq.each(args, function(idx, val) {\n                var strBefore = newStr.substring(0, nextIdxToReplace), strAfter = newStr.substring(nextIdxToReplace + 2);\n                newStr = strBefore + val + strAfter;\n                nextIdxToReplace = newStr.indexOf(\"{}\", nextIdxToReplace + val.length);\n                if (nextIdxToReplace < 0) {\n                    return false;\n                }\n            });\n            return newStr;\n        };\n        qq.isFile = function(maybeFile) {\n            return window.File && Object.prototype.toString.call(maybeFile) === \"[object File]\";\n        };\n        qq.isFileList = function(maybeFileList) {\n            return window.FileList && Object.prototype.toString.call(maybeFileList) === \"[object FileList]\";\n        };\n        qq.isFileOrInput = function(maybeFileOrInput) {\n            return qq.isFile(maybeFileOrInput) || qq.isInput(maybeFileOrInput);\n        };\n        qq.isInput = function(maybeInput, notFile) {\n            var evaluateType = function(type) {\n                var normalizedType = type.toLowerCase();\n                if (notFile) {\n                    return normalizedType !== \"file\";\n                }\n                return normalizedType === \"file\";\n            };\n            if (window.HTMLInputElement) {\n                if (Object.prototype.toString.call(maybeInput) === \"[object HTMLInputElement]\") {\n                    if (maybeInput.type && evaluateType(maybeInput.type)) {\n                        return true;\n                    }\n                }\n            }\n            if (maybeInput.tagName) {\n                if (maybeInput.tagName.toLowerCase() === \"input\") {\n                    if (maybeInput.type && evaluateType(maybeInput.type)) {\n                        return true;\n                    }\n                }\n            }\n            return false;\n        };\n        qq.isBlob = function(maybeBlob) {\n            if (window.Blob && Object.prototype.toString.call(maybeBlob) === \"[object Blob]\") {\n                return true;\n            }\n        };\n        qq.isXhrUploadSupported = function() {\n            var input = document.createElement(\"input\");\n            input.type = \"file\";\n            return input.multiple !== undefined && typeof File !== \"undefined\" && typeof FormData !== \"undefined\" && typeof qq.createXhrInstance().upload !== \"undefined\";\n        };\n        qq.createXhrInstance = function() {\n            if (window.XMLHttpRequest) {\n                return new XMLHttpRequest();\n            }\n            try {\n                return new ActiveXObject(\"MSXML2.XMLHTTP.3.0\");\n            } catch (error) {\n                qq.log(\"Neither XHR or ActiveX are supported!\", \"error\");\n                return null;\n            }\n        };\n        qq.isFolderDropSupported = function(dataTransfer) {\n            return dataTransfer.items && dataTransfer.items.length > 0 && dataTransfer.items[0].webkitGetAsEntry;\n        };\n        qq.isFileChunkingSupported = function() {\n            return !qq.androidStock() && qq.isXhrUploadSupported() && (File.prototype.slice !== undefined || File.prototype.webkitSlice !== undefined || File.prototype.mozSlice !== undefined);\n        };\n        qq.sliceBlob = function(fileOrBlob, start, end) {\n            var slicer = fileOrBlob.slice || fileOrBlob.mozSlice || fileOrBlob.webkitSlice;\n            return slicer.call(fileOrBlob, start, end);\n        };\n        qq.arrayBufferToHex = function(buffer) {\n            var bytesAsHex = \"\", bytes = new Uint8Array(buffer);\n            qq.each(bytes, function(idx, byt) {\n                var byteAsHexStr = byt.toString(16);\n                if (byteAsHexStr.length < 2) {\n                    byteAsHexStr = \"0\" + byteAsHexStr;\n                }\n                bytesAsHex += byteAsHexStr;\n            });\n            return bytesAsHex;\n        };\n        qq.readBlobToHex = function(blob, startOffset, length) {\n            var initialBlob = qq.sliceBlob(blob, startOffset, startOffset + length), fileReader = new FileReader(), promise = new qq.Promise();\n            fileReader.onload = function() {\n                promise.success(qq.arrayBufferToHex(fileReader.result));\n            };\n            fileReader.onerror = promise.failure;\n            fileReader.readAsArrayBuffer(initialBlob);\n            return promise;\n        };\n        qq.extend = function(first, second, extendNested) {\n            qq.each(second, function(prop, val) {\n                if (extendNested && qq.isObject(val)) {\n                    if (first[prop] === undefined) {\n                        first[prop] = {};\n                    }\n                    qq.extend(first[prop], val, true);\n                } else {\n                    first[prop] = val;\n                }\n            });\n            return first;\n        };\n        qq.override = function(target, sourceFn) {\n            var super_ = {}, source = sourceFn(super_);\n            qq.each(source, function(srcPropName, srcPropVal) {\n                if (target[srcPropName] !== undefined) {\n                    super_[srcPropName] = target[srcPropName];\n                }\n                target[srcPropName] = srcPropVal;\n            });\n            return target;\n        };\n        qq.indexOf = function(arr, elt, from) {\n            if (arr.indexOf) {\n                return arr.indexOf(elt, from);\n            }\n            from = from || 0;\n            var len = arr.length;\n            if (from < 0) {\n                from += len;\n            }\n            for (;from < len; from += 1) {\n                if (arr.hasOwnProperty(from) && arr[from] === elt) {\n                    return from;\n                }\n            }\n            return -1;\n        };\n        qq.getUniqueId = function() {\n            return \"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(/[xy]/g, function(c) {\n                var r = Math.random() * 16 | 0, v = c == \"x\" ? r : r & 3 | 8;\n                return v.toString(16);\n            });\n        };\n        qq.ie = function() {\n            return navigator.userAgent.indexOf(\"MSIE\") !== -1 || navigator.userAgent.indexOf(\"Trident\") !== -1;\n        };\n        qq.ie7 = function() {\n            return navigator.userAgent.indexOf(\"MSIE 7\") !== -1;\n        };\n        qq.ie8 = function() {\n            return navigator.userAgent.indexOf(\"MSIE 8\") !== -1;\n        };\n        qq.ie10 = function() {\n            return navigator.userAgent.indexOf(\"MSIE 10\") !== -1;\n        };\n        qq.ie11 = function() {\n            return qq.ie() && navigator.userAgent.indexOf(\"rv:11\") !== -1;\n        };\n        qq.edge = function() {\n            return navigator.userAgent.indexOf(\"Edge\") >= 0;\n        };\n        qq.safari = function() {\n            return navigator.vendor !== undefined && navigator.vendor.indexOf(\"Apple\") !== -1;\n        };\n        qq.chrome = function() {\n            return navigator.vendor !== undefined && navigator.vendor.indexOf(\"Google\") !== -1;\n        };\n        qq.opera = function() {\n            return navigator.vendor !== undefined && navigator.vendor.indexOf(\"Opera\") !== -1;\n        };\n        qq.firefox = function() {\n            return !qq.edge() && !qq.ie11() && navigator.userAgent.indexOf(\"Mozilla\") !== -1 && navigator.vendor !== undefined && navigator.vendor === \"\";\n        };\n        qq.windows = function() {\n            return navigator.platform === \"Win32\";\n        };\n        qq.android = function() {\n            return navigator.userAgent.toLowerCase().indexOf(\"android\") !== -1;\n        };\n        qq.androidStock = function() {\n            return qq.android() && navigator.userAgent.toLowerCase().indexOf(\"chrome\") < 0;\n        };\n        qq.ios6 = function() {\n            return qq.ios() && navigator.userAgent.indexOf(\" OS 6_\") !== -1;\n        };\n        qq.ios7 = function() {\n            return qq.ios() && navigator.userAgent.indexOf(\" OS 7_\") !== -1;\n        };\n        qq.ios8 = function() {\n            return qq.ios() && navigator.userAgent.indexOf(\" OS 8_\") !== -1;\n        };\n        qq.ios800 = function() {\n            return qq.ios() && navigator.userAgent.indexOf(\" OS 8_0 \") !== -1;\n        };\n        qq.ios = function() {\n            return navigator.userAgent.indexOf(\"iPad\") !== -1 || navigator.userAgent.indexOf(\"iPod\") !== -1 || navigator.userAgent.indexOf(\"iPhone\") !== -1;\n        };\n        qq.iosChrome = function() {\n            return qq.ios() && navigator.userAgent.indexOf(\"CriOS\") !== -1;\n        };\n        qq.iosSafari = function() {\n            return qq.ios() && !qq.iosChrome() && navigator.userAgent.indexOf(\"Safari\") !== -1;\n        };\n        qq.iosSafariWebView = function() {\n            return qq.ios() && !qq.iosChrome() && !qq.iosSafari();\n        };\n        qq.preventDefault = function(e) {\n            if (e.preventDefault) {\n                e.preventDefault();\n            } else {\n                e.returnValue = false;\n            }\n        };\n        qq.toElement = function() {\n            var div = document.createElement(\"div\");\n            return function(html) {\n                div.innerHTML = html;\n                var element = div.firstChild;\n                div.removeChild(element);\n                return element;\n            };\n        }();\n        qq.each = function(iterableItem, callback) {\n            var keyOrIndex, retVal;\n            if (iterableItem) {\n                if (window.Storage && iterableItem.constructor === window.Storage) {\n                    for (keyOrIndex = 0; keyOrIndex < iterableItem.length; keyOrIndex++) {\n                        retVal = callback(iterableItem.key(keyOrIndex), iterableItem.getItem(iterableItem.key(keyOrIndex)));\n                        if (retVal === false) {\n                            break;\n                        }\n                    }\n                } else if (qq.isArray(iterableItem) || qq.isItemList(iterableItem) || qq.isNodeList(iterableItem)) {\n                    for (keyOrIndex = 0; keyOrIndex < iterableItem.length; keyOrIndex++) {\n                        retVal = callback(keyOrIndex, iterableItem[keyOrIndex]);\n                        if (retVal === false) {\n                            break;\n                        }\n                    }\n                } else if (qq.isString(iterableItem)) {\n                    for (keyOrIndex = 0; keyOrIndex < iterableItem.length; keyOrIndex++) {\n                        retVal = callback(keyOrIndex, iterableItem.charAt(keyOrIndex));\n                        if (retVal === false) {\n                            break;\n                        }\n                    }\n                } else {\n                    for (keyOrIndex in iterableItem) {\n                        if (Object.prototype.hasOwnProperty.call(iterableItem, keyOrIndex)) {\n                            retVal = callback(keyOrIndex, iterableItem[keyOrIndex]);\n                            if (retVal === false) {\n                                break;\n                            }\n                        }\n                    }\n                }\n            }\n        };\n        qq.bind = function(oldFunc, context) {\n            if (qq.isFunction(oldFunc)) {\n                var args = Array.prototype.slice.call(arguments, 2);\n                return function() {\n                    var newArgs = qq.extend([], args);\n                    if (arguments.length) {\n                        newArgs = newArgs.concat(Array.prototype.slice.call(arguments));\n                    }\n                    return oldFunc.apply(context, newArgs);\n                };\n            }\n            throw new Error(\"first parameter must be a function!\");\n        };\n        qq.obj2url = function(obj, temp, prefixDone) {\n            var uristrings = [], prefix = \"&\", add = function(nextObj, i) {\n                var nextTemp = temp ? /\\[\\]$/.test(temp) ? temp : temp + \"[\" + i + \"]\" : i;\n                if (nextTemp !== \"undefined\" && i !== \"undefined\") {\n                    uristrings.push(typeof nextObj === \"object\" ? qq.obj2url(nextObj, nextTemp, true) : Object.prototype.toString.call(nextObj) === \"[object Function]\" ? encodeURIComponent(nextTemp) + \"=\" + encodeURIComponent(nextObj()) : encodeURIComponent(nextTemp) + \"=\" + encodeURIComponent(nextObj));\n                }\n            };\n            if (!prefixDone && temp) {\n                prefix = /\\?/.test(temp) ? /\\?$/.test(temp) ? \"\" : \"&\" : \"?\";\n                uristrings.push(temp);\n                uristrings.push(qq.obj2url(obj));\n            } else if (Object.prototype.toString.call(obj) === \"[object Array]\" && typeof obj !== \"undefined\") {\n                qq.each(obj, function(idx, val) {\n                    add(val, idx);\n                });\n            } else if (typeof obj !== \"undefined\" && obj !== null && typeof obj === \"object\") {\n                qq.each(obj, function(prop, val) {\n                    add(val, prop);\n                });\n            } else {\n                uristrings.push(encodeURIComponent(temp) + \"=\" + encodeURIComponent(obj));\n            }\n            if (temp) {\n                return uristrings.join(prefix);\n            } else {\n                return uristrings.join(prefix).replace(/^&/, \"\").replace(/%20/g, \"+\");\n            }\n        };\n        qq.obj2FormData = function(obj, formData, arrayKeyName) {\n            if (!formData) {\n                formData = new FormData();\n            }\n            qq.each(obj, function(key, val) {\n                key = arrayKeyName ? arrayKeyName + \"[\" + key + \"]\" : key;\n                if (qq.isObject(val)) {\n                    qq.obj2FormData(val, formData, key);\n                } else if (qq.isFunction(val)) {\n                    formData.append(key, val());\n                } else {\n                    formData.append(key, val);\n                }\n            });\n            return formData;\n        };\n        qq.obj2Inputs = function(obj, form) {\n            var input;\n            if (!form) {\n                form = document.createElement(\"form\");\n            }\n            qq.obj2FormData(obj, {\n                append: function(key, val) {\n                    input = document.createElement(\"input\");\n                    input.setAttribute(\"name\", key);\n                    input.setAttribute(\"value\", val);\n                    form.appendChild(input);\n                }\n            });\n            return form;\n        };\n        qq.parseJson = function(json) {\n            if (window.JSON && qq.isFunction(JSON.parse)) {\n                return JSON.parse(json);\n            } else {\n                return eval(\"(\" + json + \")\");\n            }\n        };\n        qq.getExtension = function(filename) {\n            var extIdx = filename.lastIndexOf(\".\") + 1;\n            if (extIdx > 0) {\n                return filename.substr(extIdx, filename.length - extIdx);\n            }\n        };\n        qq.getFilename = function(blobOrFileInput) {\n            if (qq.isInput(blobOrFileInput)) {\n                return blobOrFileInput.value.replace(/.*(\\/|\\\\)/, \"\");\n            } else if (qq.isFile(blobOrFileInput)) {\n                if (blobOrFileInput.fileName !== null && blobOrFileInput.fileName !== undefined) {\n                    return blobOrFileInput.fileName;\n                }\n            }\n            return blobOrFileInput.name;\n        };\n        qq.DisposeSupport = function() {\n            var disposers = [];\n            return {\n                dispose: function() {\n                    var disposer;\n                    do {\n                        disposer = disposers.shift();\n                        if (disposer) {\n                            disposer();\n                        }\n                    } while (disposer);\n                },\n                attach: function() {\n                    var args = arguments;\n                    this.addDisposer(qq(args[0]).attach.apply(this, Array.prototype.slice.call(arguments, 1)));\n                },\n                addDisposer: function(disposeFunction) {\n                    disposers.push(disposeFunction);\n                }\n            };\n        };\n    })();\n    (function() {\n        \"use strict\";\n        if (typeof define === \"function\" && define.amd) {\n            define(function() {\n                return qq;\n            });\n        } else if (typeof module !== \"undefined\" && module.exports) {\n            module.exports = qq;\n        } else {\n            global.qq = qq;\n        }\n    })();\n    (function() {\n        \"use strict\";\n        qq.Error = function(message) {\n            this.message = \"[Fine Uploader \" + qq.version + \"] \" + message;\n        };\n        qq.Error.prototype = new Error();\n    })();\n    qq.version = \"5.16.2\";\n    qq.supportedFeatures = function() {\n        \"use strict\";\n        var supportsUploading, supportsUploadingBlobs, supportsFileDrop, supportsAjaxFileUploading, supportsFolderDrop, supportsChunking, supportsResume, supportsUploadViaPaste, supportsUploadCors, supportsDeleteFileXdr, supportsDeleteFileCorsXhr, supportsDeleteFileCors, supportsFolderSelection, supportsImagePreviews, supportsUploadProgress;\n        function testSupportsFileInputElement() {\n            var supported = true, tempInput;\n            try {\n                tempInput = document.createElement(\"input\");\n                tempInput.type = \"file\";\n                qq(tempInput).hide();\n                if (tempInput.disabled) {\n                    supported = false;\n                }\n            } catch (ex) {\n                supported = false;\n            }\n            return supported;\n        }\n        function isChrome14OrHigher() {\n            return (qq.chrome() || qq.opera()) && navigator.userAgent.match(/Chrome\\/[1][4-9]|Chrome\\/[2-9][0-9]/) !== undefined;\n        }\n        function isCrossOriginXhrSupported() {\n            if (window.XMLHttpRequest) {\n                var xhr = qq.createXhrInstance();\n                return xhr.withCredentials !== undefined;\n            }\n            return false;\n        }\n        function isXdrSupported() {\n            return window.XDomainRequest !== undefined;\n        }\n        function isCrossOriginAjaxSupported() {\n            if (isCrossOriginXhrSupported()) {\n                return true;\n            }\n            return isXdrSupported();\n        }\n        function isFolderSelectionSupported() {\n            return document.createElement(\"input\").webkitdirectory !== undefined;\n        }\n        function isLocalStorageSupported() {\n            try {\n                return !!window.localStorage && qq.isFunction(window.localStorage.setItem);\n            } catch (error) {\n                return false;\n            }\n        }\n        function isDragAndDropSupported() {\n            var span = document.createElement(\"span\");\n            return (\"draggable\" in span || \"ondragstart\" in span && \"ondrop\" in span) && !qq.android() && !qq.ios();\n        }\n        supportsUploading = testSupportsFileInputElement();\n        supportsAjaxFileUploading = supportsUploading && qq.isXhrUploadSupported();\n        supportsUploadingBlobs = supportsAjaxFileUploading && !qq.androidStock();\n        supportsFileDrop = supportsAjaxFileUploading && isDragAndDropSupported();\n        supportsFolderDrop = supportsFileDrop && function() {\n            var input = document.createElement(\"input\");\n            input.type = \"file\";\n            return !!(\"webkitdirectory\" in (input || document.querySelectorAll(\"input[type=file]\")[0]));\n        }();\n        supportsChunking = supportsAjaxFileUploading && qq.isFileChunkingSupported();\n        supportsResume = supportsAjaxFileUploading && supportsChunking && isLocalStorageSupported();\n        supportsUploadViaPaste = supportsAjaxFileUploading && isChrome14OrHigher();\n        supportsUploadCors = supportsUploading && (window.postMessage !== undefined || supportsAjaxFileUploading);\n        supportsDeleteFileCorsXhr = isCrossOriginXhrSupported();\n        supportsDeleteFileXdr = isXdrSupported();\n        supportsDeleteFileCors = isCrossOriginAjaxSupported();\n        supportsFolderSelection = isFolderSelectionSupported();\n        supportsImagePreviews = supportsAjaxFileUploading && window.FileReader !== undefined;\n        supportsUploadProgress = function() {\n            if (supportsAjaxFileUploading) {\n                return !qq.androidStock() && !qq.iosChrome();\n            }\n            return false;\n        }();\n        return {\n            ajaxUploading: supportsAjaxFileUploading,\n            blobUploading: supportsUploadingBlobs,\n            canDetermineSize: supportsAjaxFileUploading,\n            chunking: supportsChunking,\n            deleteFileCors: supportsDeleteFileCors,\n            deleteFileCorsXdr: supportsDeleteFileXdr,\n            deleteFileCorsXhr: supportsDeleteFileCorsXhr,\n            dialogElement: !!window.HTMLDialogElement,\n            fileDrop: supportsFileDrop,\n            folderDrop: supportsFolderDrop,\n            folderSelection: supportsFolderSelection,\n            imagePreviews: supportsImagePreviews,\n            imageValidation: supportsImagePreviews,\n            itemSizeValidation: supportsAjaxFileUploading,\n            pause: supportsChunking,\n            progressBar: supportsUploadProgress,\n            resume: supportsResume,\n            scaling: supportsImagePreviews && supportsUploadingBlobs,\n            tiffPreviews: qq.safari(),\n            unlimitedScaledImageSize: !qq.ios(),\n            uploading: supportsUploading,\n            uploadCors: supportsUploadCors,\n            uploadCustomHeaders: supportsAjaxFileUploading,\n            uploadNonMultipart: supportsAjaxFileUploading,\n            uploadViaPaste: supportsUploadViaPaste\n        };\n    }();\n    qq.isGenericPromise = function(maybePromise) {\n        \"use strict\";\n        return !!(maybePromise && maybePromise.then && qq.isFunction(maybePromise.then));\n    };\n    qq.Promise = function() {\n        \"use strict\";\n        var successArgs, failureArgs, successCallbacks = [], failureCallbacks = [], doneCallbacks = [], state = 0;\n        qq.extend(this, {\n            then: function(onSuccess, onFailure) {\n                if (state === 0) {\n                    if (onSuccess) {\n                        successCallbacks.push(onSuccess);\n                    }\n                    if (onFailure) {\n                        failureCallbacks.push(onFailure);\n                    }\n                } else if (state === -1) {\n                    onFailure && onFailure.apply(null, failureArgs);\n                } else if (onSuccess) {\n                    onSuccess.apply(null, successArgs);\n                }\n                return this;\n            },\n            done: function(callback) {\n                if (state === 0) {\n                    doneCallbacks.push(callback);\n                } else {\n                    callback.apply(null, failureArgs === undefined ? successArgs : failureArgs);\n                }\n                return this;\n            },\n            success: function() {\n                state = 1;\n                successArgs = arguments;\n                if (successCallbacks.length) {\n                    qq.each(successCallbacks, function(idx, callback) {\n                        callback.apply(null, successArgs);\n                    });\n                }\n                if (doneCallbacks.length) {\n                    qq.each(doneCallbacks, function(idx, callback) {\n                        callback.apply(null, successArgs);\n                    });\n                }\n                return this;\n            },\n            failure: function() {\n                state = -1;\n                failureArgs = arguments;\n                if (failureCallbacks.length) {\n                    qq.each(failureCallbacks, function(idx, callback) {\n                        callback.apply(null, failureArgs);\n                    });\n                }\n                if (doneCallbacks.length) {\n                    qq.each(doneCallbacks, function(idx, callback) {\n                        callback.apply(null, failureArgs);\n                    });\n                }\n                return this;\n            }\n        });\n    };\n    qq.BlobProxy = function(referenceBlob, onCreate) {\n        \"use strict\";\n        qq.extend(this, {\n            referenceBlob: referenceBlob,\n            create: function() {\n                return onCreate(referenceBlob);\n            }\n        });\n    };\n    qq.UploadButton = function(o) {\n        \"use strict\";\n        var self = this, disposeSupport = new qq.DisposeSupport(), options = {\n            acceptFiles: null,\n            element: null,\n            focusClass: \"qq-upload-button-focus\",\n            folders: false,\n            hoverClass: \"qq-upload-button-hover\",\n            ios8BrowserCrashWorkaround: false,\n            multiple: false,\n            name: \"qqfile\",\n            onChange: function(input) {},\n            title: null\n        }, input, buttonId;\n        qq.extend(options, o);\n        buttonId = qq.getUniqueId();\n        function createInput() {\n            var input = document.createElement(\"input\");\n            input.setAttribute(qq.UploadButton.BUTTON_ID_ATTR_NAME, buttonId);\n            input.setAttribute(\"title\", options.title);\n            self.setMultiple(options.multiple, input);\n            if (options.folders && qq.supportedFeatures.folderSelection) {\n                input.setAttribute(\"webkitdirectory\", \"\");\n            }\n            if (options.acceptFiles) {\n                input.setAttribute(\"accept\", options.acceptFiles);\n            }\n            input.setAttribute(\"type\", \"file\");\n            input.setAttribute(\"name\", options.name);\n            qq(input).css({\n                position: \"absolute\",\n                right: 0,\n                top: 0,\n                fontFamily: \"Arial\",\n                fontSize: qq.ie() && !qq.ie8() ? \"3500px\" : \"118px\",\n                margin: 0,\n                padding: 0,\n                cursor: \"pointer\",\n                opacity: 0\n            });\n            !qq.ie7() && qq(input).css({\n                height: \"100%\"\n            });\n            options.element.appendChild(input);\n            disposeSupport.attach(input, \"change\", function() {\n                options.onChange(input);\n            });\n            disposeSupport.attach(input, \"mouseover\", function() {\n                qq(options.element).addClass(options.hoverClass);\n            });\n            disposeSupport.attach(input, \"mouseout\", function() {\n                qq(options.element).removeClass(options.hoverClass);\n            });\n            disposeSupport.attach(input, \"focus\", function() {\n                qq(options.element).addClass(options.focusClass);\n            });\n            disposeSupport.attach(input, \"blur\", function() {\n                qq(options.element).removeClass(options.focusClass);\n            });\n            return input;\n        }\n        qq(options.element).css({\n            position: \"relative\",\n            overflow: \"hidden\",\n            direction: \"ltr\"\n        });\n        qq.extend(this, {\n            getInput: function() {\n                return input;\n            },\n            getButtonId: function() {\n                return buttonId;\n            },\n            setMultiple: function(isMultiple, optInput) {\n                var input = optInput || this.getInput();\n                if (options.ios8BrowserCrashWorkaround && qq.ios8() && (qq.iosChrome() || qq.iosSafariWebView())) {\n                    input.setAttribute(\"multiple\", \"\");\n                } else {\n                    if (isMultiple) {\n                        input.setAttribute(\"multiple\", \"\");\n                    } else {\n                        input.removeAttribute(\"multiple\");\n                    }\n                }\n            },\n            setAcceptFiles: function(acceptFiles) {\n                if (acceptFiles !== options.acceptFiles) {\n                    input.setAttribute(\"accept\", acceptFiles);\n                }\n            },\n            reset: function() {\n                if (input.parentNode) {\n                    qq(input).remove();\n                }\n                qq(options.element).removeClass(options.focusClass);\n                input = null;\n                input = createInput();\n            }\n        });\n        input = createInput();\n    };\n    qq.UploadButton.BUTTON_ID_ATTR_NAME = \"qq-button-id\";\n    qq.UploadData = function(uploaderProxy) {\n        \"use strict\";\n        var data = [], byUuid = {}, byStatus = {}, byProxyGroupId = {}, byBatchId = {};\n        function getDataByIds(idOrIds) {\n            if (qq.isArray(idOrIds)) {\n                var entries = [];\n                qq.each(idOrIds, function(idx, id) {\n                    entries.push(data[id]);\n                });\n                return entries;\n            }\n            return data[idOrIds];\n        }\n        function getDataByUuids(uuids) {\n            if (qq.isArray(uuids)) {\n                var entries = [];\n                qq.each(uuids, function(idx, uuid) {\n                    entries.push(data[byUuid[uuid]]);\n                });\n                return entries;\n            }\n            return data[byUuid[uuids]];\n        }\n        function getDataByStatus(status) {\n            var statusResults = [], statuses = [].concat(status);\n            qq.each(statuses, function(index, statusEnum) {\n                var statusResultIndexes = byStatus[statusEnum];\n                if (statusResultIndexes !== undefined) {\n                    qq.each(statusResultIndexes, function(i, dataIndex) {\n                        statusResults.push(data[dataIndex]);\n                    });\n                }\n            });\n            return statusResults;\n        }\n        qq.extend(this, {\n            addFile: function(spec) {\n                var status = spec.status || qq.status.SUBMITTING, id = data.push({\n                    name: spec.name,\n                    originalName: spec.name,\n                    uuid: spec.uuid,\n                    size: spec.size == null ? -1 : spec.size,\n                    status: status,\n                    file: spec.file\n                }) - 1;\n                if (spec.batchId) {\n                    data[id].batchId = spec.batchId;\n                    if (byBatchId[spec.batchId] === undefined) {\n                        byBatchId[spec.batchId] = [];\n                    }\n                    byBatchId[spec.batchId].push(id);\n                }\n                if (spec.proxyGroupId) {\n                    data[id].proxyGroupId = spec.proxyGroupId;\n                    if (byProxyGroupId[spec.proxyGroupId] === undefined) {\n                        byProxyGroupId[spec.proxyGroupId] = [];\n                    }\n                    byProxyGroupId[spec.proxyGroupId].push(id);\n                }\n                data[id].id = id;\n                byUuid[spec.uuid] = id;\n                if (byStatus[status] === undefined) {\n                    byStatus[status] = [];\n                }\n                byStatus[status].push(id);\n                spec.onBeforeStatusChange && spec.onBeforeStatusChange(id);\n                uploaderProxy.onStatusChange(id, null, status);\n                return id;\n            },\n            retrieve: function(optionalFilter) {\n                if (qq.isObject(optionalFilter) && data.length) {\n                    if (optionalFilter.id !== undefined) {\n                        return getDataByIds(optionalFilter.id);\n                    } else if (optionalFilter.uuid !== undefined) {\n                        return getDataByUuids(optionalFilter.uuid);\n                    } else if (optionalFilter.status) {\n                        return getDataByStatus(optionalFilter.status);\n                    }\n                } else {\n                    return qq.extend([], data, true);\n                }\n            },\n            removeFileRef: function(id) {\n                var record = getDataByIds(id);\n                if (record) {\n                    delete record.file;\n                }\n            },\n            reset: function() {\n                data = [];\n                byUuid = {};\n                byStatus = {};\n                byBatchId = {};\n            },\n            setStatus: function(id, newStatus) {\n                var oldStatus = data[id].status, byStatusOldStatusIndex = qq.indexOf(byStatus[oldStatus], id);\n                byStatus[oldStatus].splice(byStatusOldStatusIndex, 1);\n                data[id].status = newStatus;\n                if (byStatus[newStatus] === undefined) {\n                    byStatus[newStatus] = [];\n                }\n                byStatus[newStatus].push(id);\n                uploaderProxy.onStatusChange(id, oldStatus, newStatus);\n            },\n            uuidChanged: function(id, newUuid) {\n                var oldUuid = data[id].uuid;\n                data[id].uuid = newUuid;\n                byUuid[newUuid] = id;\n                delete byUuid[oldUuid];\n            },\n            updateName: function(id, newName) {\n                data[id].name = newName;\n            },\n            updateSize: function(id, newSize) {\n                data[id].size = newSize;\n            },\n            setParentId: function(targetId, parentId) {\n                data[targetId].parentId = parentId;\n            },\n            getIdsInProxyGroup: function(id) {\n                var proxyGroupId = data[id].proxyGroupId;\n                if (proxyGroupId) {\n                    return byProxyGroupId[proxyGroupId];\n                }\n                return [];\n            },\n            getIdsInBatch: function(id) {\n                var batchId = data[id].batchId;\n                return byBatchId[batchId];\n            }\n        });\n    };\n    qq.status = {\n        SUBMITTING: \"submitting\",\n        SUBMITTED: \"submitted\",\n        REJECTED: \"rejected\",\n        QUEUED: \"queued\",\n        CANCELED: \"canceled\",\n        PAUSED: \"paused\",\n        UPLOADING: \"uploading\",\n        UPLOAD_FINALIZING: \"upload finalizing\",\n        UPLOAD_RETRYING: \"retrying upload\",\n        UPLOAD_SUCCESSFUL: \"upload successful\",\n        UPLOAD_FAILED: \"upload failed\",\n        DELETE_FAILED: \"delete failed\",\n        DELETING: \"deleting\",\n        DELETED: \"deleted\"\n    };\n    (function() {\n        \"use strict\";\n        qq.basePublicApi = {\n            addBlobs: function(blobDataOrArray, params, endpoint) {\n                this.addFiles(blobDataOrArray, params, endpoint);\n            },\n            addInitialFiles: function(cannedFileList) {\n                var self = this;\n                qq.each(cannedFileList, function(index, cannedFile) {\n                    self._addCannedFile(cannedFile);\n                });\n            },\n            addFiles: function(data, params, endpoint) {\n                this._maybeHandleIos8SafariWorkaround();\n                var batchId = this._storedIds.length === 0 ? qq.getUniqueId() : this._currentBatchId, processBlob = qq.bind(function(blob) {\n                    this._handleNewFile({\n                        blob: blob,\n                        name: this._options.blobs.defaultName\n                    }, batchId, verifiedFiles);\n                }, this), processBlobData = qq.bind(function(blobData) {\n                    this._handleNewFile(blobData, batchId, verifiedFiles);\n                }, this), processCanvas = qq.bind(function(canvas) {\n                    var blob = qq.canvasToBlob(canvas);\n                    this._handleNewFile({\n                        blob: blob,\n                        name: this._options.blobs.defaultName + \".png\"\n                    }, batchId, verifiedFiles);\n                }, this), processCanvasData = qq.bind(function(canvasData) {\n                    var normalizedQuality = canvasData.quality && canvasData.quality / 100, blob = qq.canvasToBlob(canvasData.canvas, canvasData.type, normalizedQuality);\n                    this._handleNewFile({\n                        blob: blob,\n                        name: canvasData.name\n                    }, batchId, verifiedFiles);\n                }, this), processFileOrInput = qq.bind(function(fileOrInput) {\n                    if (qq.isInput(fileOrInput) && qq.supportedFeatures.ajaxUploading) {\n                        var files = Array.prototype.slice.call(fileOrInput.files), self = this;\n                        qq.each(files, function(idx, file) {\n                            self._handleNewFile(file, batchId, verifiedFiles);\n                        });\n                    } else {\n                        this._handleNewFile(fileOrInput, batchId, verifiedFiles);\n                    }\n                }, this), normalizeData = function() {\n                    if (qq.isFileList(data)) {\n                        data = Array.prototype.slice.call(data);\n                    }\n                    data = [].concat(data);\n                }, self = this, verifiedFiles = [];\n                this._currentBatchId = batchId;\n                if (data) {\n                    normalizeData();\n                    qq.each(data, function(idx, fileContainer) {\n                        if (qq.isFileOrInput(fileContainer)) {\n                            processFileOrInput(fileContainer);\n                        } else if (qq.isBlob(fileContainer)) {\n                            processBlob(fileContainer);\n                        } else if (qq.isObject(fileContainer)) {\n                            if (fileContainer.blob && fileContainer.name) {\n                                processBlobData(fileContainer);\n                            } else if (fileContainer.canvas && fileContainer.name) {\n                                processCanvasData(fileContainer);\n                            }\n                        } else if (fileContainer.tagName && fileContainer.tagName.toLowerCase() === \"canvas\") {\n                            processCanvas(fileContainer);\n                        } else {\n                            self.log(fileContainer + \" is not a valid file container!  Ignoring!\", \"warn\");\n                        }\n                    });\n                    this.log(\"Received \" + verifiedFiles.length + \" files.\");\n                    this._prepareItemsForUpload(verifiedFiles, params, endpoint);\n                }\n            },\n            cancel: function(id) {\n                var uploadData = this._uploadData.retrieve({\n                    id: id\n                });\n                if (uploadData && uploadData.status === qq.status.UPLOAD_FINALIZING) {\n                    this.log(qq.format(\"Ignoring cancel for file ID {} ({}).  Finalizing upload.\", id, this.getName(id)), \"error\");\n                } else {\n                    this._handler.cancel(id);\n                }\n            },\n            cancelAll: function() {\n                var storedIdsCopy = [], self = this;\n                qq.extend(storedIdsCopy, this._storedIds);\n                qq.each(storedIdsCopy, function(idx, storedFileId) {\n                    self.cancel(storedFileId);\n                });\n                this._handler.cancelAll();\n            },\n            clearStoredFiles: function() {\n                this._storedIds = [];\n            },\n            continueUpload: function(id) {\n                var uploadData = this._uploadData.retrieve({\n                    id: id\n                });\n                if (!qq.supportedFeatures.pause || !this._options.chunking.enabled) {\n                    return false;\n                }\n                if (uploadData.status === qq.status.PAUSED) {\n                    this.log(qq.format(\"Paused file ID {} ({}) will be continued.  Not paused.\", id, this.getName(id)));\n                    this._uploadFile(id);\n                    return true;\n                } else {\n                    this.log(qq.format(\"Ignoring continue for file ID {} ({}).  Not paused.\", id, this.getName(id)), \"error\");\n                }\n                return false;\n            },\n            deleteFile: function(id) {\n                return this._onSubmitDelete(id);\n            },\n            doesExist: function(fileOrBlobId) {\n                return this._handler.isValid(fileOrBlobId);\n            },\n            drawThumbnail: function(fileId, imgOrCanvas, maxSize, fromServer, customResizeFunction) {\n                var promiseToReturn = new qq.Promise(), fileOrUrl, options;\n                if (this._imageGenerator) {\n                    fileOrUrl = this._thumbnailUrls[fileId];\n                    options = {\n                        customResizeFunction: customResizeFunction,\n                        maxSize: maxSize > 0 ? maxSize : null,\n                        scale: maxSize > 0\n                    };\n                    if (!fromServer && qq.supportedFeatures.imagePreviews) {\n                        fileOrUrl = this.getFile(fileId);\n                    }\n                    if (fileOrUrl == null) {\n                        promiseToReturn.failure({\n                            container: imgOrCanvas,\n                            error: \"File or URL not found.\"\n                        });\n                    } else {\n                        this._imageGenerator.generate(fileOrUrl, imgOrCanvas, options).then(function success(modifiedContainer) {\n                            promiseToReturn.success(modifiedContainer);\n                        }, function failure(container, reason) {\n                            promiseToReturn.failure({\n                                container: container,\n                                error: reason || \"Problem generating thumbnail\"\n                            });\n                        });\n                    }\n                } else {\n                    promiseToReturn.failure({\n                        container: imgOrCanvas,\n                        error: \"Missing image generator module\"\n                    });\n                }\n                return promiseToReturn;\n            },\n            getButton: function(fileId) {\n                return this._getButton(this._buttonIdsForFileIds[fileId]);\n            },\n            getEndpoint: function(fileId) {\n                return this._endpointStore.get(fileId);\n            },\n            getFile: function(fileOrBlobId) {\n                var file = this._handler.getFile(fileOrBlobId);\n                var uploadDataRecord;\n                if (!file) {\n                    uploadDataRecord = this._uploadData.retrieve({\n                        id: fileOrBlobId\n                    });\n                    if (uploadDataRecord) {\n                        file = uploadDataRecord.file;\n                    }\n                }\n                return file || null;\n            },\n            getInProgress: function() {\n                return this._uploadData.retrieve({\n                    status: [ qq.status.UPLOADING, qq.status.UPLOAD_RETRYING, qq.status.QUEUED ]\n                }).length;\n            },\n            getName: function(id) {\n                return this._uploadData.retrieve({\n                    id: id\n                }).name;\n            },\n            getParentId: function(id) {\n                var uploadDataEntry = this.getUploads({\n                    id: id\n                }), parentId = null;\n                if (uploadDataEntry) {\n                    if (uploadDataEntry.parentId !== undefined) {\n                        parentId = uploadDataEntry.parentId;\n                    }\n                }\n                return parentId;\n            },\n            getResumableFilesData: function() {\n                return this._handler.getResumableFilesData();\n            },\n            getSize: function(id) {\n                return this._uploadData.retrieve({\n                    id: id\n                }).size;\n            },\n            getNetUploads: function() {\n                return this._netUploaded;\n            },\n            getRemainingAllowedItems: function() {\n                var allowedItems = this._currentItemLimit;\n                if (allowedItems > 0) {\n                    return allowedItems - this._netUploadedOrQueued;\n                }\n                return null;\n            },\n            getUploads: function(optionalFilter) {\n                return this._uploadData.retrieve(optionalFilter);\n            },\n            getUuid: function(id) {\n                return this._uploadData.retrieve({\n                    id: id\n                }).uuid;\n            },\n            isResumable: function(id) {\n                return this._handler.hasResumeRecord(id);\n            },\n            log: function(str, level) {\n                if (this._options.debug && (!level || level === \"info\")) {\n                    qq.log(\"[Fine Uploader \" + qq.version + \"] \" + str);\n                } else if (level && level !== \"info\") {\n                    qq.log(\"[Fine Uploader \" + qq.version + \"] \" + str, level);\n                }\n            },\n            pauseUpload: function(id) {\n                var uploadData = this._uploadData.retrieve({\n                    id: id\n                });\n                if (!qq.supportedFeatures.pause || !this._options.chunking.enabled) {\n                    return false;\n                }\n                if (qq.indexOf([ qq.status.UPLOADING, qq.status.UPLOAD_RETRYING ], uploadData.status) >= 0) {\n                    if (this._handler.pause(id)) {\n                        this._uploadData.setStatus(id, qq.status.PAUSED);\n                        return true;\n                    } else {\n                        this.log(qq.format(\"Unable to pause file ID {} ({}).\", id, this.getName(id)), \"error\");\n                    }\n                } else {\n                    this.log(qq.format(\"Ignoring pause for file ID {} ({}).  Not in progress.\", id, this.getName(id)), \"error\");\n                }\n                return false;\n            },\n            removeFileRef: function(id) {\n                this._handler.expunge(id);\n                this._uploadData.removeFileRef(id);\n            },\n            reset: function() {\n                this.log(\"Resetting uploader...\");\n                this._handler.reset();\n                this._storedIds = [];\n                this._autoRetries = [];\n                this._retryTimeouts = [];\n                this._preventRetries = [];\n                this._thumbnailUrls = [];\n                qq.each(this._buttons, function(idx, button) {\n                    button.reset();\n                });\n                this._paramsStore.reset();\n                this._endpointStore.reset();\n                this._netUploadedOrQueued = 0;\n                this._netUploaded = 0;\n                this._uploadData.reset();\n                this._buttonIdsForFileIds = [];\n                this._pasteHandler && this._pasteHandler.reset();\n                this._options.session.refreshOnReset && this._refreshSessionData();\n                this._succeededSinceLastAllComplete = [];\n                this._failedSinceLastAllComplete = [];\n                this._totalProgress && this._totalProgress.reset();\n                this._customResumeDataStore.reset();\n            },\n            retry: function(id) {\n                return this._manualRetry(id);\n            },\n            scaleImage: function(id, specs) {\n                var self = this;\n                return qq.Scaler.prototype.scaleImage(id, specs, {\n                    log: qq.bind(self.log, self),\n                    getFile: qq.bind(self.getFile, self),\n                    uploadData: self._uploadData\n                });\n            },\n            setCustomHeaders: function(headers, id) {\n                this._customHeadersStore.set(headers, id);\n            },\n            setCustomResumeData: function(id, data) {\n                this._customResumeDataStore.set(data, id);\n            },\n            setDeleteFileCustomHeaders: function(headers, id) {\n                this._deleteFileCustomHeadersStore.set(headers, id);\n            },\n            setDeleteFileEndpoint: function(endpoint, id) {\n                this._deleteFileEndpointStore.set(endpoint, id);\n            },\n            setDeleteFileParams: function(params, id) {\n                this._deleteFileParamsStore.set(params, id);\n            },\n            setEndpoint: function(endpoint, id) {\n                this._endpointStore.set(endpoint, id);\n            },\n            setForm: function(elementOrId) {\n                this._updateFormSupportAndParams(elementOrId);\n            },\n            setItemLimit: function(newItemLimit) {\n                this._currentItemLimit = newItemLimit;\n            },\n            setName: function(id, newName) {\n                this._uploadData.updateName(id, newName);\n            },\n            setParams: function(params, id) {\n                this._paramsStore.set(params, id);\n            },\n            setUuid: function(id, newUuid) {\n                return this._uploadData.uuidChanged(id, newUuid);\n            },\n            setStatus: function(id, newStatus) {\n                var fileRecord = this.getUploads({\n                    id: id\n                });\n                if (!fileRecord) {\n                    throw new qq.Error(id + \" is not a valid file ID.\");\n                }\n                switch (newStatus) {\n                  case qq.status.DELETED:\n                    this._onDeleteComplete(id, null, false);\n                    break;\n\n                  case qq.status.DELETE_FAILED:\n                    this._onDeleteComplete(id, null, true);\n                    break;\n\n                  default:\n                    var errorMessage = \"Method setStatus called on '\" + name + \"' not implemented yet for \" + newStatus;\n                    this.log(errorMessage);\n                    throw new qq.Error(errorMessage);\n                }\n            },\n            uploadStoredFiles: function() {\n                if (this._storedIds.length === 0) {\n                    this._itemError(\"noFilesError\");\n                } else {\n                    this._uploadStoredFiles();\n                }\n            }\n        };\n        qq.basePrivateApi = {\n            _addCannedFile: function(sessionData) {\n                var self = this;\n                return this._uploadData.addFile({\n                    uuid: sessionData.uuid,\n                    name: sessionData.name,\n                    size: sessionData.size,\n                    status: qq.status.UPLOAD_SUCCESSFUL,\n                    onBeforeStatusChange: function(id) {\n                        sessionData.deleteFileEndpoint && self.setDeleteFileEndpoint(sessionData.deleteFileEndpoint, id);\n                        sessionData.deleteFileParams && self.setDeleteFileParams(sessionData.deleteFileParams, id);\n                        if (sessionData.thumbnailUrl) {\n                            self._thumbnailUrls[id] = sessionData.thumbnailUrl;\n                        }\n                        self._netUploaded++;\n                        self._netUploadedOrQueued++;\n                    }\n                });\n            },\n            _annotateWithButtonId: function(file, associatedInput) {\n                if (qq.isFile(file)) {\n                    file.qqButtonId = this._getButtonId(associatedInput);\n                }\n            },\n            _batchError: function(message) {\n                this._options.callbacks.onError(null, null, message, undefined);\n            },\n            _createDeleteHandler: function() {\n                var self = this;\n                return new qq.DeleteFileAjaxRequester({\n                    method: this._options.deleteFile.method.toUpperCase(),\n                    maxConnections: this._options.maxConnections,\n                    uuidParamName: this._options.request.uuidName,\n                    customHeaders: this._deleteFileCustomHeadersStore,\n                    paramsStore: this._deleteFileParamsStore,\n                    endpointStore: this._deleteFileEndpointStore,\n                    cors: this._options.cors,\n                    log: qq.bind(self.log, self),\n                    onDelete: function(id) {\n                        self._onDelete(id);\n                        self._options.callbacks.onDelete(id);\n                    },\n                    onDeleteComplete: function(id, xhrOrXdr, isError) {\n                        self._onDeleteComplete(id, xhrOrXdr, isError);\n                        self._options.callbacks.onDeleteComplete(id, xhrOrXdr, isError);\n                    }\n                });\n            },\n            _createPasteHandler: function() {\n                var self = this;\n                return new qq.PasteSupport({\n                    targetElement: this._options.paste.targetElement,\n                    callbacks: {\n                        log: qq.bind(self.log, self),\n                        pasteReceived: function(blob) {\n                            self._handleCheckedCallback({\n                                name: \"onPasteReceived\",\n                                callback: qq.bind(self._options.callbacks.onPasteReceived, self, blob),\n                                onSuccess: qq.bind(self._handlePasteSuccess, self, blob),\n                                identifier: \"pasted image\"\n                            });\n                        }\n                    }\n                });\n            },\n            _createStore: function(initialValue, _readOnlyValues_) {\n                var store = {}, catchall = initialValue, perIdReadOnlyValues = {}, readOnlyValues = _readOnlyValues_, copy = function(orig) {\n                    if (qq.isObject(orig)) {\n                        return qq.extend({}, orig);\n                    }\n                    return orig;\n                }, getReadOnlyValues = function() {\n                    if (qq.isFunction(readOnlyValues)) {\n                        return readOnlyValues();\n                    }\n                    return readOnlyValues;\n                }, includeReadOnlyValues = function(id, existing) {\n                    if (readOnlyValues && qq.isObject(existing)) {\n                        qq.extend(existing, getReadOnlyValues());\n                    }\n                    if (perIdReadOnlyValues[id]) {\n                        qq.extend(existing, perIdReadOnlyValues[id]);\n                    }\n                };\n                return {\n                    set: function(val, id) {\n                        if (id == null) {\n                            store = {};\n                            catchall = copy(val);\n                        } else {\n                            store[id] = copy(val);\n                        }\n                    },\n                    get: function(id) {\n                        var values;\n                        if (id != null && store[id]) {\n                            values = store[id];\n                        } else {\n                            values = copy(catchall);\n                        }\n                        includeReadOnlyValues(id, values);\n                        return copy(values);\n                    },\n                    addReadOnly: function(id, values) {\n                        if (qq.isObject(store)) {\n                            if (id === null) {\n                                if (qq.isFunction(values)) {\n                                    readOnlyValues = values;\n                                } else {\n                                    readOnlyValues = readOnlyValues || {};\n                                    qq.extend(readOnlyValues, values);\n                                }\n                            } else {\n                                perIdReadOnlyValues[id] = perIdReadOnlyValues[id] || {};\n                                qq.extend(perIdReadOnlyValues[id], values);\n                            }\n                        }\n                    },\n                    remove: function(fileId) {\n                        return delete store[fileId];\n                    },\n                    reset: function() {\n                        store = {};\n                        perIdReadOnlyValues = {};\n                        catchall = initialValue;\n                    }\n                };\n            },\n            _createUploadDataTracker: function() {\n                var self = this;\n                return new qq.UploadData({\n                    getName: function(id) {\n                        return self.getName(id);\n                    },\n                    getUuid: function(id) {\n                        return self.getUuid(id);\n                    },\n                    getSize: function(id) {\n                        return self.getSize(id);\n                    },\n                    onStatusChange: function(id, oldStatus, newStatus) {\n                        self._onUploadStatusChange(id, oldStatus, newStatus);\n                        self._options.callbacks.onStatusChange(id, oldStatus, newStatus);\n                        self._maybeAllComplete(id, newStatus);\n                        if (self._totalProgress) {\n                            setTimeout(function() {\n                                self._totalProgress.onStatusChange(id, oldStatus, newStatus);\n                            }, 0);\n                        }\n                    }\n                });\n            },\n            _createUploadButton: function(spec) {\n                var self = this, acceptFiles = spec.accept || this._options.validation.acceptFiles, allowedExtensions = spec.allowedExtensions || this._options.validation.allowedExtensions, button;\n                function allowMultiple() {\n                    if (qq.supportedFeatures.ajaxUploading) {\n                        if (self._options.workarounds.iosEmptyVideos && qq.ios() && !qq.ios6() && self._isAllowedExtension(allowedExtensions, \".mov\")) {\n                            return false;\n                        }\n                        if (spec.multiple === undefined) {\n                            return self._options.multiple;\n                        }\n                        return spec.multiple;\n                    }\n                    return false;\n                }\n                button = new qq.UploadButton({\n                    acceptFiles: acceptFiles,\n                    element: spec.element,\n                    focusClass: this._options.classes.buttonFocus,\n                    folders: spec.folders,\n                    hoverClass: this._options.classes.buttonHover,\n                    ios8BrowserCrashWorkaround: this._options.workarounds.ios8BrowserCrash,\n                    multiple: allowMultiple(),\n                    name: this._options.request.inputName,\n                    onChange: function(input) {\n                        self._onInputChange(input);\n                    },\n                    title: spec.title == null ? this._options.text.fileInputTitle : spec.title\n                });\n                this._disposeSupport.addDisposer(function() {\n                    button.dispose();\n                });\n                self._buttons.push(button);\n                return button;\n            },\n            _createUploadHandler: function(additionalOptions, namespace) {\n                var self = this, lastOnProgress = {}, options = {\n                    debug: this._options.debug,\n                    maxConnections: this._options.maxConnections,\n                    cors: this._options.cors,\n                    paramsStore: this._paramsStore,\n                    endpointStore: this._endpointStore,\n                    chunking: this._options.chunking,\n                    resume: this._options.resume,\n                    blobs: this._options.blobs,\n                    log: qq.bind(self.log, self),\n                    preventRetryParam: this._options.retry.preventRetryResponseProperty,\n                    onProgress: function(id, name, loaded, total) {\n                        if (loaded < 0 || total < 0) {\n                            return;\n                        }\n                        if (lastOnProgress[id]) {\n                            if (lastOnProgress[id].loaded !== loaded || lastOnProgress[id].total !== total) {\n                                self._onProgress(id, name, loaded, total);\n                                self._options.callbacks.onProgress(id, name, loaded, total);\n                            }\n                        } else {\n                            self._onProgress(id, name, loaded, total);\n                            self._options.callbacks.onProgress(id, name, loaded, total);\n                        }\n                        lastOnProgress[id] = {\n                            loaded: loaded,\n                            total: total\n                        };\n                    },\n                    onComplete: function(id, name, result, xhr) {\n                        delete lastOnProgress[id];\n                        var status = self.getUploads({\n                            id: id\n                        }).status, retVal;\n                        if (status === qq.status.UPLOAD_SUCCESSFUL || status === qq.status.UPLOAD_FAILED) {\n                            return;\n                        }\n                        retVal = self._onComplete(id, name, result, xhr);\n                        if (retVal instanceof qq.Promise) {\n                            retVal.done(function() {\n                                self._options.callbacks.onComplete(id, name, result, xhr);\n                            });\n                        } else {\n                            self._options.callbacks.onComplete(id, name, result, xhr);\n                        }\n                    },\n                    onCancel: function(id, name, cancelFinalizationEffort) {\n                        var promise = new qq.Promise();\n                        self._handleCheckedCallback({\n                            name: \"onCancel\",\n                            callback: qq.bind(self._options.callbacks.onCancel, self, id, name),\n                            onFailure: promise.failure,\n                            onSuccess: function() {\n                                cancelFinalizationEffort.then(function() {\n                                    self._onCancel(id, name);\n                                });\n                                promise.success();\n                            },\n                            identifier: id\n                        });\n                        return promise;\n                    },\n                    onUploadPrep: qq.bind(this._onUploadPrep, this),\n                    onUpload: function(id, name) {\n                        self._onUpload(id, name);\n                        var onUploadResult = self._options.callbacks.onUpload(id, name);\n                        if (qq.isGenericPromise(onUploadResult)) {\n                            self.log(qq.format(\"onUpload for {} returned a Promise - waiting for resolution.\", id));\n                            return onUploadResult;\n                        }\n                        return new qq.Promise().success();\n                    },\n                    onUploadChunk: function(id, name, chunkData) {\n                        self._onUploadChunk(id, chunkData);\n                        var onUploadChunkResult = self._options.callbacks.onUploadChunk(id, name, chunkData);\n                        if (qq.isGenericPromise(onUploadChunkResult)) {\n                            self.log(qq.format(\"onUploadChunk for {}.{} returned a Promise - waiting for resolution.\", id, chunkData.partIndex));\n                            return onUploadChunkResult;\n                        }\n                        return new qq.Promise().success();\n                    },\n                    onUploadChunkSuccess: function(id, chunkData, result, xhr) {\n                        self._onUploadChunkSuccess(id, chunkData);\n                        self._options.callbacks.onUploadChunkSuccess.apply(self, arguments);\n                    },\n                    onResume: function(id, name, chunkData, customResumeData) {\n                        return self._options.callbacks.onResume(id, name, chunkData, customResumeData);\n                    },\n                    onAutoRetry: function(id, name, responseJSON, xhr) {\n                        return self._onAutoRetry.apply(self, arguments);\n                    },\n                    onUuidChanged: function(id, newUuid) {\n                        self.log(\"Server requested UUID change from '\" + self.getUuid(id) + \"' to '\" + newUuid + \"'\");\n                        self.setUuid(id, newUuid);\n                    },\n                    getName: qq.bind(self.getName, self),\n                    getUuid: qq.bind(self.getUuid, self),\n                    getSize: qq.bind(self.getSize, self),\n                    setSize: qq.bind(self._setSize, self),\n                    getDataByUuid: function(uuid) {\n                        return self.getUploads({\n                            uuid: uuid\n                        });\n                    },\n                    isQueued: function(id) {\n                        var status = self.getUploads({\n                            id: id\n                        }).status;\n                        return status === qq.status.QUEUED || status === qq.status.SUBMITTED || status === qq.status.UPLOAD_RETRYING || status === qq.status.PAUSED;\n                    },\n                    getIdsInProxyGroup: self._uploadData.getIdsInProxyGroup,\n                    getIdsInBatch: self._uploadData.getIdsInBatch,\n                    isInProgress: function(id) {\n                        return self.getUploads({\n                            id: id\n                        }).status === qq.status.UPLOADING;\n                    },\n                    getCustomResumeData: qq.bind(self._getCustomResumeData, self),\n                    setStatus: function(id, status) {\n                        self._uploadData.setStatus(id, status);\n                    }\n                };\n                qq.each(this._options.request, function(prop, val) {\n                    options[prop] = val;\n                });\n                options.customHeaders = this._customHeadersStore;\n                if (additionalOptions) {\n                    qq.each(additionalOptions, function(key, val) {\n                        options[key] = val;\n                    });\n                }\n                return new qq.UploadHandlerController(options, namespace);\n            },\n            _fileOrBlobRejected: function(id) {\n                this._netUploadedOrQueued--;\n                this._uploadData.setStatus(id, qq.status.REJECTED);\n            },\n            _formatSize: function(bytes) {\n                if (bytes === 0) {\n                    return bytes + this._options.text.sizeSymbols[0];\n                }\n                var i = -1;\n                do {\n                    bytes = bytes / 1e3;\n                    i++;\n                } while (bytes > 999);\n                return Math.max(bytes, .1).toFixed(1) + this._options.text.sizeSymbols[i];\n            },\n            _generateExtraButtonSpecs: function() {\n                var self = this;\n                this._extraButtonSpecs = {};\n                qq.each(this._options.extraButtons, function(idx, extraButtonOptionEntry) {\n                    var multiple = extraButtonOptionEntry.multiple, validation = qq.extend({}, self._options.validation, true), extraButtonSpec = qq.extend({}, extraButtonOptionEntry);\n                    if (multiple === undefined) {\n                        multiple = self._options.multiple;\n                    }\n                    if (extraButtonSpec.validation) {\n                        qq.extend(validation, extraButtonOptionEntry.validation, true);\n                    }\n                    qq.extend(extraButtonSpec, {\n                        multiple: multiple,\n                        validation: validation\n                    }, true);\n                    self._initExtraButton(extraButtonSpec);\n                });\n            },\n            _getButton: function(buttonId) {\n                var extraButtonsSpec = this._extraButtonSpecs[buttonId];\n                if (extraButtonsSpec) {\n                    return extraButtonsSpec.element;\n                } else if (buttonId === this._defaultButtonId) {\n                    return this._options.button;\n                }\n            },\n            _getButtonId: function(buttonOrFileInputOrFile) {\n                var inputs, fileInput, fileBlobOrInput = buttonOrFileInputOrFile;\n                if (fileBlobOrInput instanceof qq.BlobProxy) {\n                    fileBlobOrInput = fileBlobOrInput.referenceBlob;\n                }\n                if (fileBlobOrInput && !qq.isBlob(fileBlobOrInput)) {\n                    if (qq.isFile(fileBlobOrInput)) {\n                        return fileBlobOrInput.qqButtonId;\n                    } else if (fileBlobOrInput.tagName.toLowerCase() === \"input\" && fileBlobOrInput.type.toLowerCase() === \"file\") {\n                        return fileBlobOrInput.getAttribute(qq.UploadButton.BUTTON_ID_ATTR_NAME);\n                    }\n                    inputs = fileBlobOrInput.getElementsByTagName(\"input\");\n                    qq.each(inputs, function(idx, input) {\n                        if (input.getAttribute(\"type\") === \"file\") {\n                            fileInput = input;\n                            return false;\n                        }\n                    });\n                    if (fileInput) {\n                        return fileInput.getAttribute(qq.UploadButton.BUTTON_ID_ATTR_NAME);\n                    }\n                }\n            },\n            _getCustomResumeData: function(fileId) {\n                return this._customResumeDataStore.get(fileId);\n            },\n            _getNotFinished: function() {\n                return this._uploadData.retrieve({\n                    status: [ qq.status.UPLOADING, qq.status.UPLOAD_RETRYING, qq.status.QUEUED, qq.status.SUBMITTING, qq.status.SUBMITTED, qq.status.PAUSED ]\n                }).length;\n            },\n            _getValidationBase: function(buttonId) {\n                var extraButtonSpec = this._extraButtonSpecs[buttonId];\n                return extraButtonSpec ? extraButtonSpec.validation : this._options.validation;\n            },\n            _getValidationDescriptor: function(fileWrapper) {\n                if (fileWrapper.file instanceof qq.BlobProxy) {\n                    return {\n                        name: qq.getFilename(fileWrapper.file.referenceBlob),\n                        size: fileWrapper.file.referenceBlob.size\n                    };\n                }\n                return {\n                    name: this.getUploads({\n                        id: fileWrapper.id\n                    }).name,\n                    size: this.getUploads({\n                        id: fileWrapper.id\n                    }).size\n                };\n            },\n            _getValidationDescriptors: function(fileWrappers) {\n                var self = this, fileDescriptors = [];\n                qq.each(fileWrappers, function(idx, fileWrapper) {\n                    fileDescriptors.push(self._getValidationDescriptor(fileWrapper));\n                });\n                return fileDescriptors;\n            },\n            _handleCameraAccess: function() {\n                if (this._options.camera.ios && qq.ios()) {\n                    var acceptIosCamera = \"image/*;capture=camera\", button = this._options.camera.button, buttonId = button ? this._getButtonId(button) : this._defaultButtonId, optionRoot = this._options;\n                    if (buttonId && buttonId !== this._defaultButtonId) {\n                        optionRoot = this._extraButtonSpecs[buttonId];\n                    }\n                    optionRoot.multiple = false;\n                    if (optionRoot.validation.acceptFiles === null) {\n                        optionRoot.validation.acceptFiles = acceptIosCamera;\n                    } else {\n                        optionRoot.validation.acceptFiles += \",\" + acceptIosCamera;\n                    }\n                    qq.each(this._buttons, function(idx, button) {\n                        if (button.getButtonId() === buttonId) {\n                            button.setMultiple(optionRoot.multiple);\n                            button.setAcceptFiles(optionRoot.acceptFiles);\n                            return false;\n                        }\n                    });\n                }\n            },\n            _handleCheckedCallback: function(details) {\n                var self = this, callbackRetVal = details.callback();\n                if (qq.isGenericPromise(callbackRetVal)) {\n                    this.log(details.name + \" - waiting for \" + details.name + \" promise to be fulfilled for \" + details.identifier);\n                    return callbackRetVal.then(function(successParam) {\n                        self.log(details.name + \" promise success for \" + details.identifier);\n                        details.onSuccess(successParam);\n                    }, function() {\n                        if (details.onFailure) {\n                            self.log(details.name + \" promise failure for \" + details.identifier);\n                            details.onFailure();\n                        } else {\n                            self.log(details.name + \" promise failure for \" + details.identifier);\n                        }\n                    });\n                }\n                if (callbackRetVal !== false) {\n                    details.onSuccess(callbackRetVal);\n                } else {\n                    if (details.onFailure) {\n                        this.log(details.name + \" - return value was 'false' for \" + details.identifier + \".  Invoking failure callback.\");\n                        details.onFailure();\n                    } else {\n                        this.log(details.name + \" - return value was 'false' for \" + details.identifier + \".  Will not proceed.\");\n                    }\n                }\n                return callbackRetVal;\n            },\n            _handleNewFile: function(file, batchId, newFileWrapperList) {\n                var self = this, uuid = qq.getUniqueId(), size = -1, name = qq.getFilename(file), actualFile = file.blob || file, handler = this._customNewFileHandler ? this._customNewFileHandler : qq.bind(self._handleNewFileGeneric, self);\n                if (!qq.isInput(actualFile) && actualFile.size >= 0) {\n                    size = actualFile.size;\n                }\n                handler(actualFile, name, uuid, size, newFileWrapperList, batchId, this._options.request.uuidName, {\n                    uploadData: self._uploadData,\n                    paramsStore: self._paramsStore,\n                    addFileToHandler: function(id, file) {\n                        self._handler.add(id, file);\n                        self._netUploadedOrQueued++;\n                        self._trackButton(id);\n                    }\n                });\n            },\n            _handleNewFileGeneric: function(file, name, uuid, size, fileList, batchId) {\n                var id = this._uploadData.addFile({\n                    uuid: uuid,\n                    name: name,\n                    size: size,\n                    batchId: batchId,\n                    file: file\n                });\n                this._handler.add(id, file);\n                this._trackButton(id);\n                this._netUploadedOrQueued++;\n                fileList.push({\n                    id: id,\n                    file: file\n                });\n            },\n            _handlePasteSuccess: function(blob, extSuppliedName) {\n                var extension = blob.type.split(\"/\")[1], name = extSuppliedName;\n                if (name == null) {\n                    name = this._options.paste.defaultName;\n                }\n                name += \".\" + extension;\n                this.addFiles({\n                    name: name,\n                    blob: blob\n                });\n            },\n            _handleDeleteSuccess: function(id) {\n                if (this.getUploads({\n                    id: id\n                }).status !== qq.status.DELETED) {\n                    var name = this.getName(id);\n                    this._netUploadedOrQueued--;\n                    this._netUploaded--;\n                    this._handler.expunge(id);\n                    this._uploadData.setStatus(id, qq.status.DELETED);\n                    this.log(\"Delete request for '\" + name + \"' has succeeded.\");\n                }\n            },\n            _handleDeleteFailed: function(id, xhrOrXdr) {\n                var name = this.getName(id);\n                this._uploadData.setStatus(id, qq.status.DELETE_FAILED);\n                this.log(\"Delete request for '\" + name + \"' has failed.\", \"error\");\n                if (!xhrOrXdr || xhrOrXdr.withCredentials === undefined) {\n                    this._options.callbacks.onError(id, name, \"Delete request failed\", xhrOrXdr);\n                } else {\n                    this._options.callbacks.onError(id, name, \"Delete request failed with response code \" + xhrOrXdr.status, xhrOrXdr);\n                }\n            },\n            _initExtraButton: function(spec) {\n                var button = this._createUploadButton({\n                    accept: spec.validation.acceptFiles,\n                    allowedExtensions: spec.validation.allowedExtensions,\n                    element: spec.element,\n                    folders: spec.folders,\n                    multiple: spec.multiple,\n                    title: spec.fileInputTitle\n                });\n                this._extraButtonSpecs[button.getButtonId()] = spec;\n            },\n            _initFormSupportAndParams: function() {\n                this._formSupport = qq.FormSupport && new qq.FormSupport(this._options.form, qq.bind(this.uploadStoredFiles, this), qq.bind(this.log, this));\n                if (this._formSupport && this._formSupport.attachedToForm) {\n                    this._paramsStore = this._createStore(this._options.request.params, this._formSupport.getFormInputsAsObject);\n                    this._options.autoUpload = this._formSupport.newAutoUpload;\n                    if (this._formSupport.newEndpoint) {\n                        this._options.request.endpoint = this._formSupport.newEndpoint;\n                    }\n                } else {\n                    this._paramsStore = this._createStore(this._options.request.params);\n                }\n            },\n            _isDeletePossible: function() {\n                if (!qq.DeleteFileAjaxRequester || !this._options.deleteFile.enabled) {\n                    return false;\n                }\n                if (this._options.cors.expected) {\n                    if (qq.supportedFeatures.deleteFileCorsXhr) {\n                        return true;\n                    }\n                    if (qq.supportedFeatures.deleteFileCorsXdr && this._options.cors.allowXdr) {\n                        return true;\n                    }\n                    return false;\n                }\n                return true;\n            },\n            _isAllowedExtension: function(allowed, fileName) {\n                var valid = false;\n                if (!allowed.length) {\n                    return true;\n                }\n                qq.each(allowed, function(idx, allowedExt) {\n                    if (qq.isString(allowedExt)) {\n                        var extRegex = new RegExp(\"\\\\.\" + allowedExt + \"$\", \"i\");\n                        if (fileName.match(extRegex) != null) {\n                            valid = true;\n                            return false;\n                        }\n                    }\n                });\n                return valid;\n            },\n            _itemError: function(code, maybeNameOrNames, item) {\n                var message = this._options.messages[code], allowedExtensions = [], names = [].concat(maybeNameOrNames), name = names[0], buttonId = this._getButtonId(item), validationBase = this._getValidationBase(buttonId), extensionsForMessage, placeholderMatch;\n                function r(name, replacement) {\n                    message = message.replace(name, replacement);\n                }\n                qq.each(validationBase.allowedExtensions, function(idx, allowedExtension) {\n                    if (qq.isString(allowedExtension)) {\n                        allowedExtensions.push(allowedExtension);\n                    }\n                });\n                extensionsForMessage = allowedExtensions.join(\", \").toLowerCase();\n                r(\"{file}\", this._options.formatFileName(name));\n                r(\"{extensions}\", extensionsForMessage);\n                r(\"{sizeLimit}\", this._formatSize(validationBase.sizeLimit));\n                r(\"{minSizeLimit}\", this._formatSize(validationBase.minSizeLimit));\n                placeholderMatch = message.match(/(\\{\\w+\\})/g);\n                if (placeholderMatch !== null) {\n                    qq.each(placeholderMatch, function(idx, placeholder) {\n                        r(placeholder, names[idx]);\n                    });\n                }\n                this._options.callbacks.onError(null, name, message, undefined);\n                return message;\n            },\n            _manualRetry: function(id, callback) {\n                if (this._onBeforeManualRetry(id)) {\n                    this._netUploadedOrQueued++;\n                    this._uploadData.setStatus(id, qq.status.UPLOAD_RETRYING);\n                    if (callback) {\n                        callback(id);\n                    } else {\n                        this._handler.retry(id);\n                    }\n                    return true;\n                }\n            },\n            _maybeAllComplete: function(id, status) {\n                var self = this, notFinished = this._getNotFinished();\n                if (status === qq.status.UPLOAD_SUCCESSFUL) {\n                    this._succeededSinceLastAllComplete.push(id);\n                } else if (status === qq.status.UPLOAD_FAILED) {\n                    this._failedSinceLastAllComplete.push(id);\n                }\n                if (notFinished === 0 && (this._succeededSinceLastAllComplete.length || this._failedSinceLastAllComplete.length)) {\n                    setTimeout(function() {\n                        self._onAllComplete(self._succeededSinceLastAllComplete, self._failedSinceLastAllComplete);\n                    }, 0);\n                }\n            },\n            _maybeHandleIos8SafariWorkaround: function() {\n                var self = this;\n                if (this._options.workarounds.ios8SafariUploads && qq.ios800() && qq.iosSafari()) {\n                    setTimeout(function() {\n                        window.alert(self._options.messages.unsupportedBrowserIos8Safari);\n                    }, 0);\n                    throw new qq.Error(this._options.messages.unsupportedBrowserIos8Safari);\n                }\n            },\n            _maybeParseAndSendUploadError: function(id, name, response, xhr) {\n                if (!response.success) {\n                    if (xhr && xhr.status !== 200 && !response.error) {\n                        this._options.callbacks.onError(id, name, \"XHR returned response code \" + xhr.status, xhr);\n                    } else {\n                        var errorReason = response.error ? response.error : this._options.text.defaultResponseError;\n                        this._options.callbacks.onError(id, name, errorReason, xhr);\n                    }\n                }\n            },\n            _maybeProcessNextItemAfterOnValidateCallback: function(validItem, items, index, params, endpoint) {\n                var self = this;\n                if (items.length > index) {\n                    if (validItem || !this._options.validation.stopOnFirstInvalidFile) {\n                        setTimeout(function() {\n                            var validationDescriptor = self._getValidationDescriptor(items[index]), buttonId = self._getButtonId(items[index].file), button = self._getButton(buttonId);\n                            self._handleCheckedCallback({\n                                name: \"onValidate\",\n                                callback: qq.bind(self._options.callbacks.onValidate, self, validationDescriptor, button),\n                                onSuccess: qq.bind(self._onValidateCallbackSuccess, self, items, index, params, endpoint),\n                                onFailure: qq.bind(self._onValidateCallbackFailure, self, items, index, params, endpoint),\n                                identifier: \"Item '\" + validationDescriptor.name + \"', size: \" + validationDescriptor.size\n                            });\n                        }, 0);\n                    } else if (!validItem) {\n                        for (;index < items.length; index++) {\n                            self._fileOrBlobRejected(items[index].id);\n                        }\n                    }\n                }\n            },\n            _onAllComplete: function(successful, failed) {\n                this._totalProgress && this._totalProgress.onAllComplete(successful, failed, this._preventRetries);\n                this._options.callbacks.onAllComplete(qq.extend([], successful), qq.extend([], failed));\n                this._succeededSinceLastAllComplete = [];\n                this._failedSinceLastAllComplete = [];\n            },\n            _onAutoRetry: function(id, name, responseJSON, xhr, callback) {\n                var self = this;\n                self._preventRetries[id] = responseJSON[self._options.retry.preventRetryResponseProperty];\n                if (self._shouldAutoRetry(id)) {\n                    var retryWaitPeriod = self._options.retry.autoAttemptDelay * 1e3;\n                    self._maybeParseAndSendUploadError.apply(self, arguments);\n                    self._options.callbacks.onAutoRetry(id, name, self._autoRetries[id]);\n                    self._onBeforeAutoRetry(id, name);\n                    self._uploadData.setStatus(id, qq.status.UPLOAD_RETRYING);\n                    self._retryTimeouts[id] = setTimeout(function() {\n                        self.log(\"Starting retry for \" + name + \"...\");\n                        if (callback) {\n                            callback(id);\n                        } else {\n                            self._handler.retry(id);\n                        }\n                    }, retryWaitPeriod);\n                    return true;\n                }\n            },\n            _onBeforeAutoRetry: function(id, name) {\n                this.log(\"Waiting \" + this._options.retry.autoAttemptDelay + \" seconds before retrying \" + name + \"...\");\n            },\n            _onBeforeManualRetry: function(id) {\n                var itemLimit = this._currentItemLimit, fileName;\n                if (this._preventRetries[id]) {\n                    this.log(\"Retries are forbidden for id \" + id, \"warn\");\n                    return false;\n                } else if (this._handler.isValid(id)) {\n                    fileName = this.getName(id);\n                    if (this._options.callbacks.onManualRetry(id, fileName) === false) {\n                        return false;\n                    }\n                    if (itemLimit > 0 && this._netUploadedOrQueued + 1 > itemLimit) {\n                        this._itemError(\"retryFailTooManyItems\");\n                        return false;\n                    }\n                    this.log(\"Retrying upload for '\" + fileName + \"' (id: \" + id + \")...\");\n                    return true;\n                } else {\n                    this.log(\"'\" + id + \"' is not a valid file ID\", \"error\");\n                    return false;\n                }\n            },\n            _onCancel: function(id, name) {\n                this._netUploadedOrQueued--;\n                clearTimeout(this._retryTimeouts[id]);\n                var storedItemIndex = qq.indexOf(this._storedIds, id);\n                if (!this._options.autoUpload && storedItemIndex >= 0) {\n                    this._storedIds.splice(storedItemIndex, 1);\n                }\n                this._uploadData.setStatus(id, qq.status.CANCELED);\n            },\n            _onComplete: function(id, name, result, xhr) {\n                if (!result.success) {\n                    this._netUploadedOrQueued--;\n                    this._uploadData.setStatus(id, qq.status.UPLOAD_FAILED);\n                    if (result[this._options.retry.preventRetryResponseProperty] === true) {\n                        this._preventRetries[id] = true;\n                    }\n                } else {\n                    if (result.thumbnailUrl) {\n                        this._thumbnailUrls[id] = result.thumbnailUrl;\n                    }\n                    this._netUploaded++;\n                    this._uploadData.setStatus(id, qq.status.UPLOAD_SUCCESSFUL);\n                }\n                this._maybeParseAndSendUploadError(id, name, result, xhr);\n                return result.success ? true : false;\n            },\n            _onDelete: function(id) {\n                this._uploadData.setStatus(id, qq.status.DELETING);\n            },\n            _onDeleteComplete: function(id, xhrOrXdr, isError) {\n                var name = this.getName(id);\n                if (isError) {\n                    this._handleDeleteFailed(id, xhrOrXdr);\n                } else {\n                    this._handleDeleteSuccess(id);\n                }\n            },\n            _onInputChange: function(input) {\n                var fileIndex;\n                if (qq.supportedFeatures.ajaxUploading) {\n                    for (fileIndex = 0; fileIndex < input.files.length; fileIndex++) {\n                        this._annotateWithButtonId(input.files[fileIndex], input);\n                    }\n                    this.addFiles(input.files);\n                } else if (input.value.length > 0) {\n                    this.addFiles(input);\n                }\n                qq.each(this._buttons, function(idx, button) {\n                    button.reset();\n                });\n            },\n            _onProgress: function(id, name, loaded, total) {\n                this._totalProgress && this._totalProgress.onIndividualProgress(id, loaded, total);\n            },\n            _onSubmit: function(id, name) {},\n            _onSubmitCallbackSuccess: function(id, name) {\n                this._onSubmit.apply(this, arguments);\n                this._uploadData.setStatus(id, qq.status.SUBMITTED);\n                this._onSubmitted.apply(this, arguments);\n                if (this._options.autoUpload) {\n                    this._options.callbacks.onSubmitted.apply(this, arguments);\n                    this._uploadFile(id);\n                } else {\n                    this._storeForLater(id);\n                    this._options.callbacks.onSubmitted.apply(this, arguments);\n                }\n            },\n            _onSubmitDelete: function(id, onSuccessCallback, additionalMandatedParams) {\n                var uuid = this.getUuid(id), adjustedOnSuccessCallback;\n                if (onSuccessCallback) {\n                    adjustedOnSuccessCallback = qq.bind(onSuccessCallback, this, id, uuid, additionalMandatedParams);\n                }\n                if (this._isDeletePossible()) {\n                    this._handleCheckedCallback({\n                        name: \"onSubmitDelete\",\n                        callback: qq.bind(this._options.callbacks.onSubmitDelete, this, id),\n                        onSuccess: adjustedOnSuccessCallback || qq.bind(this._deleteHandler.sendDelete, this, id, uuid, additionalMandatedParams),\n                        identifier: id\n                    });\n                    return true;\n                } else {\n                    this.log(\"Delete request ignored for ID \" + id + \", delete feature is disabled or request not possible \" + \"due to CORS on a user agent that does not support pre-flighting.\", \"warn\");\n                    return false;\n                }\n            },\n            _onSubmitted: function(id) {},\n            _onTotalProgress: function(loaded, total) {\n                this._options.callbacks.onTotalProgress(loaded, total);\n            },\n            _onUploadPrep: function(id) {},\n            _onUpload: function(id, name) {\n                this._uploadData.setStatus(id, qq.status.UPLOADING);\n            },\n            _onUploadChunk: function(id, chunkData) {},\n            _onUploadChunkSuccess: function(id, chunkData) {\n                if (!this._preventRetries[id] && this._options.retry.enableAuto) {\n                    this._autoRetries[id] = 0;\n                }\n            },\n            _onUploadStatusChange: function(id, oldStatus, newStatus) {\n                if (newStatus === qq.status.PAUSED) {\n                    clearTimeout(this._retryTimeouts[id]);\n                }\n            },\n            _onValidateBatchCallbackFailure: function(fileWrappers) {\n                var self = this;\n                qq.each(fileWrappers, function(idx, fileWrapper) {\n                    self._fileOrBlobRejected(fileWrapper.id);\n                });\n            },\n            _onValidateBatchCallbackSuccess: function(validationDescriptors, items, params, endpoint, button) {\n                var errorMessage, itemLimit = this._currentItemLimit, proposedNetFilesUploadedOrQueued = this._netUploadedOrQueued;\n                if (itemLimit === 0 || proposedNetFilesUploadedOrQueued <= itemLimit) {\n                    if (items.length > 0) {\n                        this._handleCheckedCallback({\n                            name: \"onValidate\",\n                            callback: qq.bind(this._options.callbacks.onValidate, this, validationDescriptors[0], button),\n                            onSuccess: qq.bind(this._onValidateCallbackSuccess, this, items, 0, params, endpoint),\n                            onFailure: qq.bind(this._onValidateCallbackFailure, this, items, 0, params, endpoint),\n                            identifier: \"Item '\" + items[0].file.name + \"', size: \" + items[0].file.size\n                        });\n                    } else {\n                        this._itemError(\"noFilesError\");\n                    }\n                } else {\n                    this._onValidateBatchCallbackFailure(items);\n                    errorMessage = this._options.messages.tooManyItemsError.replace(/\\{netItems\\}/g, proposedNetFilesUploadedOrQueued).replace(/\\{itemLimit\\}/g, itemLimit);\n                    this._batchError(errorMessage);\n                }\n            },\n            _onValidateCallbackFailure: function(items, index, params, endpoint) {\n                var nextIndex = index + 1;\n                this._fileOrBlobRejected(items[index].id, items[index].file.name);\n                this._maybeProcessNextItemAfterOnValidateCallback(false, items, nextIndex, params, endpoint);\n            },\n            _onValidateCallbackSuccess: function(items, index, params, endpoint) {\n                var self = this, nextIndex = index + 1, validationDescriptor = this._getValidationDescriptor(items[index]);\n                this._validateFileOrBlobData(items[index], validationDescriptor).then(function() {\n                    self._upload(items[index].id, params, endpoint);\n                    self._maybeProcessNextItemAfterOnValidateCallback(true, items, nextIndex, params, endpoint);\n                }, function() {\n                    self._maybeProcessNextItemAfterOnValidateCallback(false, items, nextIndex, params, endpoint);\n                });\n            },\n            _prepareItemsForUpload: function(items, params, endpoint) {\n                if (items.length === 0) {\n                    this._itemError(\"noFilesError\");\n                    return;\n                }\n                var validationDescriptors = this._getValidationDescriptors(items), buttonId = this._getButtonId(items[0].file), button = this._getButton(buttonId);\n                this._handleCheckedCallback({\n                    name: \"onValidateBatch\",\n                    callback: qq.bind(this._options.callbacks.onValidateBatch, this, validationDescriptors, button),\n                    onSuccess: qq.bind(this._onValidateBatchCallbackSuccess, this, validationDescriptors, items, params, endpoint, button),\n                    onFailure: qq.bind(this._onValidateBatchCallbackFailure, this, items),\n                    identifier: \"batch validation\"\n                });\n            },\n            _preventLeaveInProgress: function() {\n                var self = this;\n                this._disposeSupport.attach(window, \"beforeunload\", function(e) {\n                    if (self.getInProgress()) {\n                        e = e || window.event;\n                        e.returnValue = self._options.messages.onLeave;\n                        return self._options.messages.onLeave;\n                    }\n                });\n            },\n            _refreshSessionData: function() {\n                var self = this, options = this._options.session;\n                if (qq.Session && this._options.session.endpoint != null) {\n                    if (!this._session) {\n                        qq.extend(options, {\n                            cors: this._options.cors\n                        });\n                        options.log = qq.bind(this.log, this);\n                        options.addFileRecord = qq.bind(this._addCannedFile, this);\n                        this._session = new qq.Session(options);\n                    }\n                    setTimeout(function() {\n                        self._session.refresh().then(function(response, xhrOrXdr) {\n                            self._sessionRequestComplete();\n                            self._options.callbacks.onSessionRequestComplete(response, true, xhrOrXdr);\n                        }, function(response, xhrOrXdr) {\n                            self._options.callbacks.onSessionRequestComplete(response, false, xhrOrXdr);\n                        });\n                    }, 0);\n                }\n            },\n            _sessionRequestComplete: function() {},\n            _setSize: function(id, newSize) {\n                this._uploadData.updateSize(id, newSize);\n                this._totalProgress && this._totalProgress.onNewSize(id);\n            },\n            _shouldAutoRetry: function(id) {\n                var uploadData = this._uploadData.retrieve({\n                    id: id\n                });\n                if (!this._preventRetries[id] && this._options.retry.enableAuto && uploadData.status !== qq.status.PAUSED) {\n                    if (this._autoRetries[id] === undefined) {\n                        this._autoRetries[id] = 0;\n                    }\n                    if (this._autoRetries[id] < this._options.retry.maxAutoAttempts) {\n                        this._autoRetries[id] += 1;\n                        return true;\n                    }\n                }\n                return false;\n            },\n            _storeForLater: function(id) {\n                this._storedIds.push(id);\n            },\n            _trackButton: function(id) {\n                var buttonId;\n                if (qq.supportedFeatures.ajaxUploading) {\n                    buttonId = this._handler.getFile(id).qqButtonId;\n                } else {\n                    buttonId = this._getButtonId(this._handler.getInput(id));\n                }\n                if (buttonId) {\n                    this._buttonIdsForFileIds[id] = buttonId;\n                }\n            },\n            _updateFormSupportAndParams: function(formElementOrId) {\n                this._options.form.element = formElementOrId;\n                this._formSupport = qq.FormSupport && new qq.FormSupport(this._options.form, qq.bind(this.uploadStoredFiles, this), qq.bind(this.log, this));\n                if (this._formSupport && this._formSupport.attachedToForm) {\n                    this._paramsStore.addReadOnly(null, this._formSupport.getFormInputsAsObject);\n                    this._options.autoUpload = this._formSupport.newAutoUpload;\n                    if (this._formSupport.newEndpoint) {\n                        this.setEndpoint(this._formSupport.newEndpoint);\n                    }\n                }\n            },\n            _upload: function(id, params, endpoint) {\n                var name = this.getName(id);\n                if (params) {\n                    this.setParams(params, id);\n                }\n                if (endpoint) {\n                    this.setEndpoint(endpoint, id);\n                }\n                this._handleCheckedCallback({\n                    name: \"onSubmit\",\n                    callback: qq.bind(this._options.callbacks.onSubmit, this, id, name),\n                    onSuccess: qq.bind(this._onSubmitCallbackSuccess, this, id, name),\n                    onFailure: qq.bind(this._fileOrBlobRejected, this, id, name),\n                    identifier: id\n                });\n            },\n            _uploadFile: function(id) {\n                if (!this._handler.upload(id)) {\n                    this._uploadData.setStatus(id, qq.status.QUEUED);\n                }\n            },\n            _uploadStoredFiles: function() {\n                var idToUpload, stillSubmitting, self = this;\n                while (this._storedIds.length) {\n                    idToUpload = this._storedIds.shift();\n                    this._uploadFile(idToUpload);\n                }\n                stillSubmitting = this.getUploads({\n                    status: qq.status.SUBMITTING\n                }).length;\n                if (stillSubmitting) {\n                    qq.log(\"Still waiting for \" + stillSubmitting + \" files to clear submit queue. Will re-parse stored IDs array shortly.\");\n                    setTimeout(function() {\n                        self._uploadStoredFiles();\n                    }, 1e3);\n                }\n            },\n            _validateFileOrBlobData: function(fileWrapper, validationDescriptor) {\n                var self = this, file = function() {\n                    if (fileWrapper.file instanceof qq.BlobProxy) {\n                        return fileWrapper.file.referenceBlob;\n                    }\n                    return fileWrapper.file;\n                }(), name = validationDescriptor.name, size = validationDescriptor.size, buttonId = this._getButtonId(fileWrapper.file), validationBase = this._getValidationBase(buttonId), validityChecker = new qq.Promise();\n                validityChecker.then(function() {}, function() {\n                    self._fileOrBlobRejected(fileWrapper.id, name);\n                });\n                if (qq.isFileOrInput(file) && !this._isAllowedExtension(validationBase.allowedExtensions, name)) {\n                    this._itemError(\"typeError\", name, file);\n                    return validityChecker.failure();\n                }\n                if (!this._options.validation.allowEmpty && size === 0) {\n                    this._itemError(\"emptyError\", name, file);\n                    return validityChecker.failure();\n                }\n                if (size > 0 && validationBase.sizeLimit && size > validationBase.sizeLimit) {\n                    this._itemError(\"sizeError\", name, file);\n                    return validityChecker.failure();\n                }\n                if (size > 0 && size < validationBase.minSizeLimit) {\n                    this._itemError(\"minSizeError\", name, file);\n                    return validityChecker.failure();\n                }\n                if (qq.ImageValidation && qq.supportedFeatures.imagePreviews && qq.isFile(file)) {\n                    new qq.ImageValidation(file, qq.bind(self.log, self)).validate(validationBase.image).then(validityChecker.success, function(errorCode) {\n                        self._itemError(errorCode + \"ImageError\", name, file);\n                        validityChecker.failure();\n                    });\n                } else {\n                    validityChecker.success();\n                }\n                return validityChecker;\n            },\n            _wrapCallbacks: function() {\n                var self, safeCallback, prop;\n                self = this;\n                safeCallback = function(name, callback, args) {\n                    var errorMsg;\n                    try {\n                        return callback.apply(self, args);\n                    } catch (exception) {\n                        errorMsg = exception.message || exception.toString();\n                        self.log(\"Caught exception in '\" + name + \"' callback - \" + errorMsg, \"error\");\n                    }\n                };\n                for (prop in this._options.callbacks) {\n                    (function() {\n                        var callbackName, callbackFunc;\n                        callbackName = prop;\n                        callbackFunc = self._options.callbacks[callbackName];\n                        self._options.callbacks[callbackName] = function() {\n                            return safeCallback(callbackName, callbackFunc, arguments);\n                        };\n                    })();\n                }\n            }\n        };\n    })();\n    (function() {\n        \"use strict\";\n        qq.FineUploaderBasic = function(o) {\n            var self = this;\n            this._options = {\n                debug: false,\n                button: null,\n                multiple: true,\n                maxConnections: 3,\n                disableCancelForFormUploads: false,\n                autoUpload: true,\n                warnBeforeUnload: true,\n                request: {\n                    customHeaders: {},\n                    endpoint: \"/server/upload\",\n                    filenameParam: \"qqfilename\",\n                    forceMultipart: true,\n                    inputName: \"qqfile\",\n                    method: \"POST\",\n                    omitDefaultParams: false,\n                    params: {},\n                    paramsInBody: true,\n                    requireSuccessJson: true,\n                    totalFileSizeName: \"qqtotalfilesize\",\n                    uuidName: \"qquuid\"\n                },\n                validation: {\n                    allowedExtensions: [],\n                    sizeLimit: 0,\n                    minSizeLimit: 0,\n                    itemLimit: 0,\n                    stopOnFirstInvalidFile: true,\n                    acceptFiles: null,\n                    image: {\n                        maxHeight: 0,\n                        maxWidth: 0,\n                        minHeight: 0,\n                        minWidth: 0\n                    },\n                    allowEmpty: false\n                },\n                callbacks: {\n                    onSubmit: function(id, name) {},\n                    onSubmitted: function(id, name) {},\n                    onComplete: function(id, name, responseJSON, maybeXhr) {},\n                    onAllComplete: function(successful, failed) {},\n                    onCancel: function(id, name) {},\n                    onUpload: function(id, name) {},\n                    onUploadChunk: function(id, name, chunkData) {},\n                    onUploadChunkSuccess: function(id, chunkData, responseJSON, xhr) {},\n                    onResume: function(id, fileName, chunkData, customResumeData) {},\n                    onProgress: function(id, name, loaded, total) {},\n                    onTotalProgress: function(loaded, total) {},\n                    onError: function(id, name, reason, maybeXhrOrXdr) {},\n                    onAutoRetry: function(id, name, attemptNumber) {},\n                    onManualRetry: function(id, name) {},\n                    onValidateBatch: function(fileOrBlobData) {},\n                    onValidate: function(fileOrBlobData) {},\n                    onSubmitDelete: function(id) {},\n                    onDelete: function(id) {},\n                    onDeleteComplete: function(id, xhrOrXdr, isError) {},\n                    onPasteReceived: function(blob) {},\n                    onStatusChange: function(id, oldStatus, newStatus) {},\n                    onSessionRequestComplete: function(response, success, xhrOrXdr) {}\n                },\n                messages: {\n                    typeError: \"{file} has an invalid extension. Valid extension(s): {extensions}.\",\n                    sizeError: \"{file} is too large, maximum file size is {sizeLimit}.\",\n                    minSizeError: \"{file} is too small, minimum file size is {minSizeLimit}.\",\n                    emptyError: \"{file} is empty, please select files again without it.\",\n                    noFilesError: \"No files to upload.\",\n                    tooManyItemsError: \"Too many items ({netItems}) would be uploaded.  Item limit is {itemLimit}.\",\n                    maxHeightImageError: \"Image is too tall.\",\n                    maxWidthImageError: \"Image is too wide.\",\n                    minHeightImageError: \"Image is not tall enough.\",\n                    minWidthImageError: \"Image is not wide enough.\",\n                    retryFailTooManyItems: \"Retry failed - you have reached your file limit.\",\n                    onLeave: \"The files are being uploaded, if you leave now the upload will be canceled.\",\n                    unsupportedBrowserIos8Safari: \"Unrecoverable error - this browser does not permit file uploading of any kind due to serious bugs in iOS8 Safari.  Please use iOS8 Chrome until Apple fixes these issues.\"\n                },\n                retry: {\n                    enableAuto: false,\n                    maxAutoAttempts: 3,\n                    autoAttemptDelay: 5,\n                    preventRetryResponseProperty: \"preventRetry\"\n                },\n                classes: {\n                    buttonHover: \"qq-upload-button-hover\",\n                    buttonFocus: \"qq-upload-button-focus\"\n                },\n                chunking: {\n                    enabled: false,\n                    concurrent: {\n                        enabled: false\n                    },\n                    mandatory: false,\n                    paramNames: {\n                        partIndex: \"qqpartindex\",\n                        partByteOffset: \"qqpartbyteoffset\",\n                        chunkSize: \"qqchunksize\",\n                        totalFileSize: \"qqtotalfilesize\",\n                        totalParts: \"qqtotalparts\"\n                    },\n                    partSize: function(id) {\n                        return 2e6;\n                    },\n                    success: {\n                        endpoint: null,\n                        headers: function(id) {\n                            return null;\n                        },\n                        jsonPayload: false,\n                        method: \"POST\",\n                        params: function(id) {\n                            return null;\n                        },\n                        resetOnStatus: []\n                    }\n                },\n                resume: {\n                    enabled: false,\n                    recordsExpireIn: 7,\n                    paramNames: {\n                        resuming: \"qqresume\"\n                    },\n                    customKeys: function(fileId) {\n                        return [];\n                    }\n                },\n                formatFileName: function(fileOrBlobName) {\n                    return fileOrBlobName;\n                },\n                text: {\n                    defaultResponseError: \"Upload failure reason unknown\",\n                    fileInputTitle: \"file input\",\n                    sizeSymbols: [ \"kB\", \"MB\", \"GB\", \"TB\", \"PB\", \"EB\" ]\n                },\n                deleteFile: {\n                    enabled: false,\n                    method: \"DELETE\",\n                    endpoint: \"/server/upload\",\n                    customHeaders: {},\n                    params: {}\n                },\n                cors: {\n                    expected: false,\n                    sendCredentials: false,\n                    allowXdr: false\n                },\n                blobs: {\n                    defaultName: \"misc_data\"\n                },\n                paste: {\n                    targetElement: null,\n                    defaultName: \"pasted_image\"\n                },\n                camera: {\n                    ios: false,\n                    button: null\n                },\n                extraButtons: [],\n                session: {\n                    endpoint: null,\n                    params: {},\n                    customHeaders: {},\n                    refreshOnReset: true\n                },\n                form: {\n                    element: \"qq-form\",\n                    autoUpload: false,\n                    interceptSubmit: true\n                },\n                scaling: {\n                    customResizer: null,\n                    sendOriginal: true,\n                    orient: true,\n                    defaultType: null,\n                    defaultQuality: 80,\n                    failureText: \"Failed to scale\",\n                    includeExif: false,\n                    sizes: []\n                },\n                workarounds: {\n                    iosEmptyVideos: true,\n                    ios8SafariUploads: true,\n                    ios8BrowserCrash: false\n                }\n            };\n            qq.extend(this._options, o, true);\n            this._buttons = [];\n            this._extraButtonSpecs = {};\n            this._buttonIdsForFileIds = [];\n            this._wrapCallbacks();\n            this._disposeSupport = new qq.DisposeSupport();\n            this._storedIds = [];\n            this._autoRetries = [];\n            this._retryTimeouts = [];\n            this._preventRetries = [];\n            this._thumbnailUrls = [];\n            this._netUploadedOrQueued = 0;\n            this._netUploaded = 0;\n            this._uploadData = this._createUploadDataTracker();\n            this._initFormSupportAndParams();\n            this._customHeadersStore = this._createStore(this._options.request.customHeaders);\n            this._deleteFileCustomHeadersStore = this._createStore(this._options.deleteFile.customHeaders);\n            this._deleteFileParamsStore = this._createStore(this._options.deleteFile.params);\n            this._endpointStore = this._createStore(this._options.request.endpoint);\n            this._deleteFileEndpointStore = this._createStore(this._options.deleteFile.endpoint);\n            this._handler = this._createUploadHandler();\n            this._deleteHandler = qq.DeleteFileAjaxRequester && this._createDeleteHandler();\n            if (this._options.button) {\n                this._defaultButtonId = this._createUploadButton({\n                    element: this._options.button,\n                    title: this._options.text.fileInputTitle\n                }).getButtonId();\n            }\n            this._generateExtraButtonSpecs();\n            this._handleCameraAccess();\n            if (this._options.paste.targetElement) {\n                if (qq.PasteSupport) {\n                    this._pasteHandler = this._createPasteHandler();\n                } else {\n                    this.log(\"Paste support module not found\", \"error\");\n                }\n            }\n            this._options.warnBeforeUnload && this._preventLeaveInProgress();\n            this._imageGenerator = qq.ImageGenerator && new qq.ImageGenerator(qq.bind(this.log, this));\n            this._refreshSessionData();\n            this._succeededSinceLastAllComplete = [];\n            this._failedSinceLastAllComplete = [];\n            this._scaler = qq.Scaler && new qq.Scaler(this._options.scaling, qq.bind(this.log, this)) || {};\n            if (this._scaler.enabled) {\n                this._customNewFileHandler = qq.bind(this._scaler.handleNewFile, this._scaler);\n            }\n            if (qq.TotalProgress && qq.supportedFeatures.progressBar) {\n                this._totalProgress = new qq.TotalProgress(qq.bind(this._onTotalProgress, this), function(id) {\n                    var entry = self._uploadData.retrieve({\n                        id: id\n                    });\n                    return entry && entry.size || 0;\n                });\n            }\n            this._currentItemLimit = this._options.validation.itemLimit;\n            this._customResumeDataStore = this._createStore();\n        };\n        qq.FineUploaderBasic.prototype = qq.basePublicApi;\n        qq.extend(qq.FineUploaderBasic.prototype, qq.basePrivateApi);\n    })();\n    qq.AjaxRequester = function(o) {\n        \"use strict\";\n        var log, shouldParamsBeInQueryString, queue = [], requestData = {}, options = {\n            acceptHeader: null,\n            validMethods: [ \"PATCH\", \"POST\", \"PUT\" ],\n            method: \"POST\",\n            contentType: \"application/x-www-form-urlencoded\",\n            maxConnections: 3,\n            customHeaders: {},\n            endpointStore: {},\n            paramsStore: {},\n            mandatedParams: {},\n            allowXRequestedWithAndCacheControl: true,\n            successfulResponseCodes: {\n                DELETE: [ 200, 202, 204 ],\n                PATCH: [ 200, 201, 202, 203, 204 ],\n                POST: [ 200, 201, 202, 203, 204 ],\n                PUT: [ 200, 201, 202, 203, 204 ],\n                GET: [ 200 ]\n            },\n            cors: {\n                expected: false,\n                sendCredentials: false\n            },\n            log: function(str, level) {},\n            onSend: function(id) {},\n            onComplete: function(id, xhrOrXdr, isError) {},\n            onProgress: null\n        };\n        qq.extend(options, o);\n        log = options.log;\n        if (qq.indexOf(options.validMethods, options.method) < 0) {\n            throw new Error(\"'\" + options.method + \"' is not a supported method for this type of request!\");\n        }\n        function isSimpleMethod() {\n            return qq.indexOf([ \"GET\", \"POST\", \"HEAD\" ], options.method) >= 0;\n        }\n        function containsNonSimpleHeaders(headers) {\n            var containsNonSimple = false;\n            qq.each(containsNonSimple, function(idx, header) {\n                if (qq.indexOf([ \"Accept\", \"Accept-Language\", \"Content-Language\", \"Content-Type\" ], header) < 0) {\n                    containsNonSimple = true;\n                    return false;\n                }\n            });\n            return containsNonSimple;\n        }\n        function isXdr(xhr) {\n            return options.cors.expected && xhr.withCredentials === undefined;\n        }\n        function getCorsAjaxTransport() {\n            var xhrOrXdr;\n            if (window.XMLHttpRequest || window.ActiveXObject) {\n                xhrOrXdr = qq.createXhrInstance();\n                if (xhrOrXdr.withCredentials === undefined) {\n                    xhrOrXdr = new XDomainRequest();\n                    xhrOrXdr.onload = function() {};\n                    xhrOrXdr.onerror = function() {};\n                    xhrOrXdr.ontimeout = function() {};\n                    xhrOrXdr.onprogress = function() {};\n                }\n            }\n            return xhrOrXdr;\n        }\n        function getXhrOrXdr(id, suppliedXhr) {\n            var xhrOrXdr = requestData[id] && requestData[id].xhr;\n            if (!xhrOrXdr) {\n                if (suppliedXhr) {\n                    xhrOrXdr = suppliedXhr;\n                } else {\n                    if (options.cors.expected) {\n                        xhrOrXdr = getCorsAjaxTransport();\n                    } else {\n                        xhrOrXdr = qq.createXhrInstance();\n                    }\n                }\n                requestData[id].xhr = xhrOrXdr;\n            }\n            return xhrOrXdr;\n        }\n        function dequeue(id) {\n            var i = qq.indexOf(queue, id), max = options.maxConnections, nextId;\n            delete requestData[id];\n            queue.splice(i, 1);\n            if (queue.length >= max && i < max) {\n                nextId = queue[max - 1];\n                sendRequest(nextId);\n            }\n        }\n        function onComplete(id, xdrError) {\n            var xhr = getXhrOrXdr(id), method = options.method, isError = xdrError === true;\n            dequeue(id);\n            if (isError) {\n                log(method + \" request for \" + id + \" has failed\", \"error\");\n            } else if (!isXdr(xhr) && !isResponseSuccessful(xhr.status)) {\n                isError = true;\n                log(method + \" request for \" + id + \" has failed - response code \" + xhr.status, \"error\");\n            }\n            options.onComplete(id, xhr, isError);\n        }\n        function getParams(id) {\n            var onDemandParams = requestData[id].additionalParams, mandatedParams = options.mandatedParams, params;\n            if (options.paramsStore.get) {\n                params = options.paramsStore.get(id);\n            }\n            if (onDemandParams) {\n                qq.each(onDemandParams, function(name, val) {\n                    params = params || {};\n                    params[name] = val;\n                });\n            }\n            if (mandatedParams) {\n                qq.each(mandatedParams, function(name, val) {\n                    params = params || {};\n                    params[name] = val;\n                });\n            }\n            return params;\n        }\n        function sendRequest(id, optXhr) {\n            var xhr = getXhrOrXdr(id, optXhr), method = options.method, params = getParams(id), payload = requestData[id].payload, url;\n            options.onSend(id);\n            url = createUrl(id, params, requestData[id].additionalQueryParams);\n            if (isXdr(xhr)) {\n                xhr.onload = getXdrLoadHandler(id);\n                xhr.onerror = getXdrErrorHandler(id);\n            } else {\n                xhr.onreadystatechange = getXhrReadyStateChangeHandler(id);\n            }\n            registerForUploadProgress(id);\n            xhr.open(method, url, true);\n            if (options.cors.expected && options.cors.sendCredentials && !isXdr(xhr)) {\n                xhr.withCredentials = true;\n            }\n            setHeaders(id);\n            log(\"Sending \" + method + \" request for \" + id);\n            if (payload) {\n                xhr.send(payload);\n            } else if (shouldParamsBeInQueryString || !params) {\n                xhr.send();\n            } else if (params && options.contentType && options.contentType.toLowerCase().indexOf(\"application/x-www-form-urlencoded\") >= 0) {\n                xhr.send(qq.obj2url(params, \"\"));\n            } else if (params && options.contentType && options.contentType.toLowerCase().indexOf(\"application/json\") >= 0) {\n                xhr.send(JSON.stringify(params));\n            } else {\n                xhr.send(params);\n            }\n            return xhr;\n        }\n        function createUrl(id, params, additionalQueryParams) {\n            var endpoint = options.endpointStore.get(id), addToPath = requestData[id].addToPath;\n            if (addToPath != undefined) {\n                endpoint += \"/\" + addToPath;\n            }\n            if (shouldParamsBeInQueryString && params) {\n                endpoint = qq.obj2url(params, endpoint);\n            }\n            if (additionalQueryParams) {\n                endpoint = qq.obj2url(additionalQueryParams, endpoint);\n            }\n            return endpoint;\n        }\n        function getXhrReadyStateChangeHandler(id) {\n            return function() {\n                if (getXhrOrXdr(id).readyState === 4) {\n                    onComplete(id);\n                }\n            };\n        }\n        function registerForUploadProgress(id) {\n            var onProgress = options.onProgress;\n            if (onProgress) {\n                getXhrOrXdr(id).upload.onprogress = function(e) {\n                    if (e.lengthComputable) {\n                        onProgress(id, e.loaded, e.total);\n                    }\n                };\n            }\n        }\n        function getXdrLoadHandler(id) {\n            return function() {\n                onComplete(id);\n            };\n        }\n        function getXdrErrorHandler(id) {\n            return function() {\n                onComplete(id, true);\n            };\n        }\n        function setHeaders(id) {\n            var xhr = getXhrOrXdr(id), customHeaders = options.customHeaders, onDemandHeaders = requestData[id].additionalHeaders || {}, method = options.method, allHeaders = {};\n            if (!isXdr(xhr)) {\n                options.acceptHeader && xhr.setRequestHeader(\"Accept\", options.acceptHeader);\n                if (options.allowXRequestedWithAndCacheControl) {\n                    if (!options.cors.expected || (!isSimpleMethod() || containsNonSimpleHeaders(customHeaders))) {\n                        xhr.setRequestHeader(\"X-Requested-With\", \"XMLHttpRequest\");\n                        xhr.setRequestHeader(\"Cache-Control\", \"no-cache\");\n                    }\n                }\n                if (options.contentType && (method === \"POST\" || method === \"PUT\")) {\n                    xhr.setRequestHeader(\"Content-Type\", options.contentType);\n                }\n                qq.extend(allHeaders, qq.isFunction(customHeaders) ? customHeaders(id) : customHeaders);\n                qq.extend(allHeaders, onDemandHeaders);\n                qq.each(allHeaders, function(name, val) {\n                    xhr.setRequestHeader(name, val);\n                });\n            }\n        }\n        function isResponseSuccessful(responseCode) {\n            return qq.indexOf(options.successfulResponseCodes[options.method], responseCode) >= 0;\n        }\n        function prepareToSend(id, optXhr, addToPath, additionalParams, additionalQueryParams, additionalHeaders, payload) {\n            requestData[id] = {\n                addToPath: addToPath,\n                additionalParams: additionalParams,\n                additionalQueryParams: additionalQueryParams,\n                additionalHeaders: additionalHeaders,\n                payload: payload\n            };\n            var len = queue.push(id);\n            if (len <= options.maxConnections) {\n                return sendRequest(id, optXhr);\n            }\n        }\n        shouldParamsBeInQueryString = options.method === \"GET\" || options.method === \"DELETE\";\n        qq.extend(this, {\n            initTransport: function(id) {\n                var path, params, headers, payload, cacheBuster, additionalQueryParams;\n                return {\n                    withPath: function(appendToPath) {\n                        path = appendToPath;\n                        return this;\n                    },\n                    withParams: function(additionalParams) {\n                        params = additionalParams;\n                        return this;\n                    },\n                    withQueryParams: function(_additionalQueryParams_) {\n                        additionalQueryParams = _additionalQueryParams_;\n                        return this;\n                    },\n                    withHeaders: function(additionalHeaders) {\n                        headers = additionalHeaders;\n                        return this;\n                    },\n                    withPayload: function(thePayload) {\n                        payload = thePayload;\n                        return this;\n                    },\n                    withCacheBuster: function() {\n                        cacheBuster = true;\n                        return this;\n                    },\n                    send: function(optXhr) {\n                        if (cacheBuster && qq.indexOf([ \"GET\", \"DELETE\" ], options.method) >= 0) {\n                            params.qqtimestamp = new Date().getTime();\n                        }\n                        return prepareToSend(id, optXhr, path, params, additionalQueryParams, headers, payload);\n                    }\n                };\n            },\n            canceled: function(id) {\n                dequeue(id);\n            }\n        });\n    };\n    qq.UploadHandler = function(spec) {\n        \"use strict\";\n        var proxy = spec.proxy, fileState = {}, onCancel = proxy.onCancel, getName = proxy.getName;\n        qq.extend(this, {\n            add: function(id, fileItem) {\n                fileState[id] = fileItem;\n                fileState[id].temp = {};\n            },\n            cancel: function(id) {\n                var self = this, cancelFinalizationEffort = new qq.Promise(), onCancelRetVal = onCancel(id, getName(id), cancelFinalizationEffort);\n                onCancelRetVal.then(function() {\n                    if (self.isValid(id)) {\n                        fileState[id].canceled = true;\n                        self.expunge(id);\n                    }\n                    cancelFinalizationEffort.success();\n                });\n            },\n            expunge: function(id) {\n                delete fileState[id];\n            },\n            getThirdPartyFileId: function(id) {\n                return fileState[id].key;\n            },\n            isValid: function(id) {\n                return fileState[id] !== undefined;\n            },\n            reset: function() {\n                fileState = {};\n            },\n            _getFileState: function(id) {\n                return fileState[id];\n            },\n            _setThirdPartyFileId: function(id, thirdPartyFileId) {\n                fileState[id].key = thirdPartyFileId;\n            },\n            _wasCanceled: function(id) {\n                return !!fileState[id].canceled;\n            }\n        });\n    };\n    qq.UploadHandlerController = function(o, namespace) {\n        \"use strict\";\n        var controller = this, chunkingPossible = false, concurrentChunkingPossible = false, chunking, preventRetryResponse, log, handler, options = {\n            paramsStore: {},\n            maxConnections: 3,\n            chunking: {\n                enabled: false,\n                multiple: {\n                    enabled: false\n                }\n            },\n            log: function(str, level) {},\n            onProgress: function(id, fileName, loaded, total) {},\n            onComplete: function(id, fileName, response, xhr) {},\n            onCancel: function(id, fileName) {},\n            onUploadPrep: function(id) {},\n            onUpload: function(id, fileName) {},\n            onUploadChunk: function(id, fileName, chunkData) {},\n            onUploadChunkSuccess: function(id, chunkData, response, xhr) {},\n            onAutoRetry: function(id, fileName, response, xhr) {},\n            onResume: function(id, fileName, chunkData, customResumeData) {},\n            onUuidChanged: function(id, newUuid) {},\n            getName: function(id) {},\n            setSize: function(id, newSize) {},\n            isQueued: function(id) {},\n            getIdsInProxyGroup: function(id) {},\n            getIdsInBatch: function(id) {},\n            isInProgress: function(id) {}\n        }, chunked = {\n            done: function(id, chunkIdx, response, xhr) {\n                var chunkData = handler._getChunkData(id, chunkIdx);\n                handler._getFileState(id).attemptingResume = false;\n                delete handler._getFileState(id).temp.chunkProgress[chunkIdx];\n                handler._getFileState(id).loaded += chunkData.size;\n                options.onUploadChunkSuccess(id, handler._getChunkDataForCallback(chunkData), response, xhr);\n            },\n            finalize: function(id) {\n                var size = options.getSize(id), name = options.getName(id);\n                log(\"All chunks have been uploaded for \" + id + \" - finalizing....\");\n                handler.finalizeChunks(id).then(function(response, xhr) {\n                    log(\"Finalize successful for \" + id);\n                    var normaizedResponse = upload.normalizeResponse(response, true);\n                    options.onProgress(id, name, size, size);\n                    handler._maybeDeletePersistedChunkData(id);\n                    upload.cleanup(id, normaizedResponse, xhr);\n                }, function(response, xhr) {\n                    var normalizedResponse = upload.normalizeResponse(response, false);\n                    log(\"Problem finalizing chunks for file ID \" + id + \" - \" + normalizedResponse.error, \"error\");\n                    if (normalizedResponse.reset || xhr && options.chunking.success.resetOnStatus.indexOf(xhr.status) >= 0) {\n                        chunked.reset(id);\n                    }\n                    if (!options.onAutoRetry(id, name, normalizedResponse, xhr)) {\n                        upload.cleanup(id, normalizedResponse, xhr);\n                    }\n                });\n            },\n            handleFailure: function(chunkIdx, id, response, xhr) {\n                var name = options.getName(id);\n                log(\"Chunked upload request failed for \" + id + \", chunk \" + chunkIdx);\n                handler.clearCachedChunk(id, chunkIdx);\n                var responseToReport = upload.normalizeResponse(response, false), inProgressIdx;\n                if (responseToReport.reset) {\n                    chunked.reset(id);\n                } else {\n                    var inProgressChunksArray = handler._getFileState(id).chunking.inProgress;\n                    inProgressIdx = inProgressChunksArray ? qq.indexOf(inProgressChunksArray, chunkIdx) : -1;\n                    if (inProgressIdx >= 0) {\n                        handler._getFileState(id).chunking.inProgress.splice(inProgressIdx, 1);\n                        handler._getFileState(id).chunking.remaining.unshift(chunkIdx);\n                    }\n                }\n                if (!handler._getFileState(id).temp.ignoreFailure) {\n                    if (concurrentChunkingPossible) {\n                        handler._getFileState(id).temp.ignoreFailure = true;\n                        log(qq.format(\"Going to attempt to abort these chunks: {}. These are currently in-progress: {}.\", JSON.stringify(Object.keys(handler._getXhrs(id))), JSON.stringify(handler._getFileState(id).chunking.inProgress)));\n                        qq.each(handler._getXhrs(id), function(ckid, ckXhr) {\n                            log(qq.format(\"Attempting to abort file {}.{}. XHR readyState {}. \", id, ckid, ckXhr.readyState));\n                            ckXhr.abort();\n                            ckXhr._cancelled = true;\n                        });\n                        handler.moveInProgressToRemaining(id);\n                        connectionManager.free(id, true);\n                    }\n                    if (!options.onAutoRetry(id, name, responseToReport, xhr)) {\n                        upload.cleanup(id, responseToReport, xhr);\n                    }\n                }\n            },\n            hasMoreParts: function(id) {\n                return !!handler._getFileState(id).chunking.remaining.length;\n            },\n            nextPart: function(id) {\n                var nextIdx = handler._getFileState(id).chunking.remaining.shift();\n                if (nextIdx >= handler._getTotalChunks(id)) {\n                    nextIdx = null;\n                }\n                return nextIdx;\n            },\n            reset: function(id) {\n                log(\"Server or callback has ordered chunking effort to be restarted on next attempt for item ID \" + id, \"error\");\n                handler._maybeDeletePersistedChunkData(id);\n                handler.reevaluateChunking(id);\n                handler._getFileState(id).loaded = 0;\n                handler._getFileState(id).attemptingResume = false;\n            },\n            sendNext: function(id) {\n                var size = options.getSize(id), name = options.getName(id), chunkIdx = chunked.nextPart(id), chunkData = handler._getChunkData(id, chunkIdx), fileState = handler._getFileState(id), resuming = fileState.attemptingResume, inProgressChunks = fileState.chunking.inProgress || [];\n                if (fileState.loaded == null) {\n                    fileState.loaded = 0;\n                }\n                if (resuming && options.onResume(id, name, chunkData, fileState.customResumeData) === false) {\n                    chunked.reset(id);\n                    chunkIdx = chunked.nextPart(id);\n                    chunkData = handler._getChunkData(id, chunkIdx);\n                    resuming = false;\n                }\n                if (chunkIdx == null && inProgressChunks.length === 0) {\n                    chunked.finalize(id);\n                } else {\n                    inProgressChunks.push(chunkIdx);\n                    handler._getFileState(id).chunking.inProgress = inProgressChunks;\n                    if (concurrentChunkingPossible) {\n                        connectionManager.open(id, chunkIdx);\n                    }\n                    if (concurrentChunkingPossible && connectionManager.available() && handler._getFileState(id).chunking.remaining.length) {\n                        chunked.sendNext(id);\n                    }\n                    if (chunkData.blob.size === 0) {\n                        log(qq.format(\"Chunk {} for file {} will not be uploaded, zero sized chunk.\", chunkIdx, id), \"error\");\n                        chunked.handleFailure(chunkIdx, id, \"File is no longer available\", null);\n                    }\n                    var onUploadChunkPromise = options.onUploadChunk(id, name, handler._getChunkDataForCallback(chunkData));\n                    onUploadChunkPromise.then(function(requestOverrides) {\n                        if (!options.isInProgress(id)) {\n                            log(qq.format(\"Not sending chunked upload request for item {}.{} - no longer in progress.\", id, chunkIdx));\n                        } else {\n                            log(qq.format(\"Sending chunked upload request for item {}.{}, bytes {}-{} of {}.\", id, chunkIdx, chunkData.start + 1, chunkData.end, size));\n                            var uploadChunkData = {\n                                chunkIdx: chunkIdx,\n                                id: id,\n                                overrides: requestOverrides,\n                                resuming: resuming\n                            };\n                            handler.uploadChunk(uploadChunkData).then(function success(response, xhr) {\n                                log(\"Chunked upload request succeeded for \" + id + \", chunk \" + chunkIdx);\n                                handler.clearCachedChunk(id, chunkIdx);\n                                var inProgressChunks = handler._getFileState(id).chunking.inProgress || [], responseToReport = upload.normalizeResponse(response, true), inProgressChunkIdx = qq.indexOf(inProgressChunks, chunkIdx);\n                                log(qq.format(\"Chunk {} for file {} uploaded successfully.\", chunkIdx, id));\n                                chunked.done(id, chunkIdx, responseToReport, xhr);\n                                if (inProgressChunkIdx >= 0) {\n                                    inProgressChunks.splice(inProgressChunkIdx, 1);\n                                }\n                                handler._maybePersistChunkedState(id);\n                                if (!chunked.hasMoreParts(id) && inProgressChunks.length === 0) {\n                                    chunked.finalize(id);\n                                } else if (chunked.hasMoreParts(id)) {\n                                    chunked.sendNext(id);\n                                } else {\n                                    log(qq.format(\"File ID {} has no more chunks to send and these chunk indexes are still marked as in-progress: {}\", id, JSON.stringify(inProgressChunks)));\n                                }\n                            }, function failure(response, xhr) {\n                                chunked.handleFailure(chunkIdx, id, response, xhr);\n                            }).done(function() {\n                                handler.clearXhr(id, chunkIdx);\n                            });\n                        }\n                    }, function(error) {\n                        chunked.handleFailure(chunkIdx, id, error, null);\n                    });\n                }\n            }\n        }, connectionManager = {\n            _open: [],\n            _openChunks: {},\n            _waiting: [],\n            available: function() {\n                var max = options.maxConnections, openChunkEntriesCount = 0, openChunksCount = 0;\n                qq.each(connectionManager._openChunks, function(fileId, openChunkIndexes) {\n                    openChunkEntriesCount++;\n                    openChunksCount += openChunkIndexes.length;\n                });\n                return max - (connectionManager._open.length - openChunkEntriesCount + openChunksCount);\n            },\n            free: function(id, dontAllowNext) {\n                var allowNext = !dontAllowNext, waitingIndex = qq.indexOf(connectionManager._waiting, id), connectionsIndex = qq.indexOf(connectionManager._open, id), nextId;\n                delete connectionManager._openChunks[id];\n                if (upload.getProxyOrBlob(id) instanceof qq.BlobProxy) {\n                    log(\"Generated blob upload has ended for \" + id + \", disposing generated blob.\");\n                    delete handler._getFileState(id).file;\n                }\n                if (waitingIndex >= 0) {\n                    connectionManager._waiting.splice(waitingIndex, 1);\n                } else if (allowNext && connectionsIndex >= 0) {\n                    connectionManager._open.splice(connectionsIndex, 1);\n                    nextId = connectionManager._waiting.shift();\n                    if (nextId >= 0) {\n                        connectionManager._open.push(nextId);\n                        upload.start(nextId);\n                    }\n                }\n            },\n            getWaitingOrConnected: function() {\n                var waitingOrConnected = [];\n                qq.each(connectionManager._openChunks, function(fileId, chunks) {\n                    if (chunks && chunks.length) {\n                        waitingOrConnected.push(parseInt(fileId));\n                    }\n                });\n                qq.each(connectionManager._open, function(idx, fileId) {\n                    if (!connectionManager._openChunks[fileId]) {\n                        waitingOrConnected.push(parseInt(fileId));\n                    }\n                });\n                waitingOrConnected = waitingOrConnected.concat(connectionManager._waiting);\n                return waitingOrConnected;\n            },\n            isUsingConnection: function(id) {\n                return qq.indexOf(connectionManager._open, id) >= 0;\n            },\n            open: function(id, chunkIdx) {\n                if (chunkIdx == null) {\n                    connectionManager._waiting.push(id);\n                }\n                if (connectionManager.available()) {\n                    if (chunkIdx == null) {\n                        connectionManager._waiting.pop();\n                        connectionManager._open.push(id);\n                    } else {\n                        (function() {\n                            var openChunksEntry = connectionManager._openChunks[id] || [];\n                            openChunksEntry.push(chunkIdx);\n                            connectionManager._openChunks[id] = openChunksEntry;\n                        })();\n                    }\n                    return true;\n                }\n                return false;\n            },\n            reset: function() {\n                connectionManager._waiting = [];\n                connectionManager._open = [];\n            }\n        }, simple = {\n            send: function(id, name) {\n                var fileState = handler._getFileState(id);\n                if (!fileState) {\n                    log(\"Ignoring send request as this upload may have been cancelled, File ID \" + id, \"warn\");\n                    return;\n                }\n                fileState.loaded = 0;\n                log(\"Sending simple upload request for \" + id);\n                handler.uploadFile(id).then(function(response, optXhr) {\n                    log(\"Simple upload request succeeded for \" + id);\n                    var responseToReport = upload.normalizeResponse(response, true), size = options.getSize(id);\n                    options.onProgress(id, name, size, size);\n                    upload.maybeNewUuid(id, responseToReport);\n                    upload.cleanup(id, responseToReport, optXhr);\n                }, function(response, optXhr) {\n                    log(\"Simple upload request failed for \" + id);\n                    var responseToReport = upload.normalizeResponse(response, false);\n                    if (!options.onAutoRetry(id, name, responseToReport, optXhr)) {\n                        upload.cleanup(id, responseToReport, optXhr);\n                    }\n                });\n            }\n        }, upload = {\n            cancel: function(id) {\n                log(\"Cancelling \" + id);\n                options.paramsStore.remove(id);\n                connectionManager.free(id);\n            },\n            cleanup: function(id, response, optXhr) {\n                var name = options.getName(id);\n                options.onComplete(id, name, response, optXhr);\n                if (handler._getFileState(id)) {\n                    handler._clearXhrs && handler._clearXhrs(id);\n                }\n                connectionManager.free(id);\n            },\n            getProxyOrBlob: function(id) {\n                return handler.getProxy && handler.getProxy(id) || handler.getFile && handler.getFile(id);\n            },\n            initHandler: function() {\n                var handlerType = namespace ? qq[namespace] : qq.traditional, handlerModuleSubtype = qq.supportedFeatures.ajaxUploading ? \"Xhr\" : \"Form\";\n                handler = new handlerType[handlerModuleSubtype + \"UploadHandler\"](options, {\n                    getCustomResumeData: options.getCustomResumeData,\n                    getDataByUuid: options.getDataByUuid,\n                    getName: options.getName,\n                    getSize: options.getSize,\n                    getUuid: options.getUuid,\n                    log: log,\n                    onCancel: options.onCancel,\n                    onProgress: options.onProgress,\n                    onUuidChanged: options.onUuidChanged,\n                    onFinalizing: function(id) {\n                        options.setStatus(id, qq.status.UPLOAD_FINALIZING);\n                    }\n                });\n                if (handler._removeExpiredChunkingRecords) {\n                    handler._removeExpiredChunkingRecords();\n                }\n            },\n            isDeferredEligibleForUpload: function(id) {\n                return options.isQueued(id);\n            },\n            maybeDefer: function(id, blob) {\n                if (blob && !handler.getFile(id) && blob instanceof qq.BlobProxy) {\n                    options.onUploadPrep(id);\n                    log(\"Attempting to generate a blob on-demand for \" + id);\n                    blob.create().then(function(generatedBlob) {\n                        log(\"Generated an on-demand blob for \" + id);\n                        handler.updateBlob(id, generatedBlob);\n                        options.setSize(id, generatedBlob.size);\n                        handler.reevaluateChunking(id);\n                        upload.maybeSendDeferredFiles(id);\n                    }, function(errorMessage) {\n                        var errorResponse = {};\n                        if (errorMessage) {\n                            errorResponse.error = errorMessage;\n                        }\n                        log(qq.format(\"Failed to generate blob for ID {}.  Error message: {}.\", id, errorMessage), \"error\");\n                        options.onComplete(id, options.getName(id), qq.extend(errorResponse, preventRetryResponse), null);\n                        upload.maybeSendDeferredFiles(id);\n                        connectionManager.free(id);\n                    });\n                } else {\n                    return upload.maybeSendDeferredFiles(id);\n                }\n                return false;\n            },\n            maybeSendDeferredFiles: function(id) {\n                var idsInGroup = options.getIdsInProxyGroup(id), uploadedThisId = false;\n                if (idsInGroup && idsInGroup.length) {\n                    log(\"Maybe ready to upload proxy group file \" + id);\n                    qq.each(idsInGroup, function(idx, idInGroup) {\n                        if (upload.isDeferredEligibleForUpload(idInGroup) && !!handler.getFile(idInGroup)) {\n                            uploadedThisId = idInGroup === id;\n                            upload.now(idInGroup);\n                        } else if (upload.isDeferredEligibleForUpload(idInGroup)) {\n                            return false;\n                        }\n                    });\n                } else {\n                    uploadedThisId = true;\n                    upload.now(id);\n                }\n                return uploadedThisId;\n            },\n            maybeNewUuid: function(id, response) {\n                if (response.newUuid !== undefined) {\n                    options.onUuidChanged(id, response.newUuid);\n                }\n            },\n            normalizeResponse: function(originalResponse, successful) {\n                var response = originalResponse;\n                if (!qq.isObject(originalResponse)) {\n                    response = {};\n                    if (qq.isString(originalResponse) && !successful) {\n                        response.error = originalResponse;\n                    }\n                }\n                response.success = successful;\n                return response;\n            },\n            now: function(id) {\n                var name = options.getName(id);\n                if (!controller.isValid(id)) {\n                    throw new qq.Error(id + \" is not a valid file ID to upload!\");\n                }\n                options.onUpload(id, name).then(function(response) {\n                    if (response && response.pause) {\n                        options.setStatus(id, qq.status.PAUSED);\n                        handler.pause(id);\n                        connectionManager.free(id);\n                    } else {\n                        if (chunkingPossible && handler._shouldChunkThisFile(id)) {\n                            chunked.sendNext(id);\n                        } else {\n                            simple.send(id, name);\n                        }\n                    }\n                }, function(error) {\n                    error = error || {};\n                    log(id + \" upload start aborted due to rejected onUpload Promise - details: \" + error, \"error\");\n                    if (!options.onAutoRetry(id, name, error.responseJSON || {})) {\n                        var response = upload.normalizeResponse(error.responseJSON, false);\n                        upload.cleanup(id, response);\n                    }\n                });\n            },\n            start: function(id) {\n                var blobToUpload = upload.getProxyOrBlob(id);\n                if (blobToUpload) {\n                    return upload.maybeDefer(id, blobToUpload);\n                } else {\n                    upload.now(id);\n                    return true;\n                }\n            }\n        };\n        qq.extend(this, {\n            add: function(id, file) {\n                handler.add.apply(this, arguments);\n            },\n            upload: function(id) {\n                if (connectionManager.open(id)) {\n                    return upload.start(id);\n                }\n                return false;\n            },\n            retry: function(id) {\n                if (concurrentChunkingPossible) {\n                    handler._getFileState(id).temp.ignoreFailure = false;\n                }\n                if (connectionManager.isUsingConnection(id)) {\n                    return upload.start(id);\n                } else {\n                    return controller.upload(id);\n                }\n            },\n            cancel: function(id) {\n                var cancelRetVal = handler.cancel(id);\n                if (qq.isGenericPromise(cancelRetVal)) {\n                    cancelRetVal.then(function() {\n                        upload.cancel(id);\n                    });\n                } else if (cancelRetVal !== false) {\n                    upload.cancel(id);\n                }\n            },\n            cancelAll: function() {\n                var waitingOrConnected = connectionManager.getWaitingOrConnected(), i;\n                if (waitingOrConnected.length) {\n                    for (i = waitingOrConnected.length - 1; i >= 0; i--) {\n                        controller.cancel(waitingOrConnected[i]);\n                    }\n                }\n                connectionManager.reset();\n            },\n            getFile: function(id) {\n                if (handler.getProxy && handler.getProxy(id)) {\n                    return handler.getProxy(id).referenceBlob;\n                }\n                return handler.getFile && handler.getFile(id);\n            },\n            isProxied: function(id) {\n                return !!(handler.getProxy && handler.getProxy(id));\n            },\n            getInput: function(id) {\n                if (handler.getInput) {\n                    return handler.getInput(id);\n                }\n            },\n            reset: function() {\n                log(\"Resetting upload handler\");\n                controller.cancelAll();\n                connectionManager.reset();\n                handler.reset();\n            },\n            expunge: function(id) {\n                if (controller.isValid(id)) {\n                    return handler.expunge(id);\n                }\n            },\n            isValid: function(id) {\n                return handler.isValid(id);\n            },\n            hasResumeRecord: function(id) {\n                var key = handler.isValid(id) && handler._getLocalStorageId && handler._getLocalStorageId(id);\n                if (key) {\n                    return !!localStorage.getItem(key);\n                }\n                return false;\n            },\n            getResumableFilesData: function() {\n                if (handler.getResumableFilesData) {\n                    return handler.getResumableFilesData();\n                }\n                return [];\n            },\n            getThirdPartyFileId: function(id) {\n                if (controller.isValid(id)) {\n                    return handler.getThirdPartyFileId(id);\n                }\n            },\n            pause: function(id) {\n                if (controller.isResumable(id) && handler.pause && controller.isValid(id) && handler.pause(id)) {\n                    connectionManager.free(id);\n                    handler.moveInProgressToRemaining(id);\n                    return true;\n                }\n                return false;\n            },\n            isAttemptingResume: function(id) {\n                return !!handler.isAttemptingResume && handler.isAttemptingResume(id);\n            },\n            isResumable: function(id) {\n                return !!handler.isResumable && handler.isResumable(id);\n            }\n        });\n        qq.extend(options, o);\n        log = options.log;\n        chunkingPossible = options.chunking.enabled && qq.supportedFeatures.chunking;\n        concurrentChunkingPossible = chunkingPossible && options.chunking.concurrent.enabled;\n        preventRetryResponse = function() {\n            var response = {};\n            response[options.preventRetryParam] = true;\n            return response;\n        }();\n        upload.initHandler();\n    };\n    qq.WindowReceiveMessage = function(o) {\n        \"use strict\";\n        var options = {\n            log: function(message, level) {}\n        }, callbackWrapperDetachers = {};\n        qq.extend(options, o);\n        qq.extend(this, {\n            receiveMessage: function(id, callback) {\n                var onMessageCallbackWrapper = function(event) {\n                    callback(event.data);\n                };\n                if (window.postMessage) {\n                    callbackWrapperDetachers[id] = qq(window).attach(\"message\", onMessageCallbackWrapper);\n                } else {\n                    log(\"iframe message passing not supported in this browser!\", \"error\");\n                }\n            },\n            stopReceivingMessages: function(id) {\n                if (window.postMessage) {\n                    var detacher = callbackWrapperDetachers[id];\n                    if (detacher) {\n                        detacher();\n                    }\n                }\n            }\n        });\n    };\n    qq.FormUploadHandler = function(spec) {\n        \"use strict\";\n        var options = spec.options, handler = this, proxy = spec.proxy, formHandlerInstanceId = qq.getUniqueId(), onloadCallbacks = {}, detachLoadEvents = {}, postMessageCallbackTimers = {}, isCors = options.isCors, inputName = options.inputName, getUuid = proxy.getUuid, log = proxy.log, corsMessageReceiver = new qq.WindowReceiveMessage({\n            log: log\n        });\n        function expungeFile(id) {\n            delete detachLoadEvents[id];\n            if (isCors) {\n                clearTimeout(postMessageCallbackTimers[id]);\n                delete postMessageCallbackTimers[id];\n                corsMessageReceiver.stopReceivingMessages(id);\n            }\n            var iframe = document.getElementById(handler._getIframeName(id));\n            if (iframe) {\n                iframe.setAttribute(\"src\", \"javascript:false;\");\n                qq(iframe).remove();\n            }\n        }\n        function getFileIdForIframeName(iframeName) {\n            return iframeName.split(\"_\")[0];\n        }\n        function initIframeForUpload(name) {\n            var iframe = qq.toElement(\"<iframe src='javascript:false;' name='\" + name + \"' />\");\n            iframe.setAttribute(\"id\", name);\n            iframe.style.display = \"none\";\n            document.body.appendChild(iframe);\n            return iframe;\n        }\n        function registerPostMessageCallback(iframe, callback) {\n            var iframeName = iframe.id, fileId = getFileIdForIframeName(iframeName), uuid = getUuid(fileId);\n            onloadCallbacks[uuid] = callback;\n            detachLoadEvents[fileId] = qq(iframe).attach(\"load\", function() {\n                if (handler.getInput(fileId)) {\n                    log(\"Received iframe load event for CORS upload request (iframe name \" + iframeName + \")\");\n                    postMessageCallbackTimers[iframeName] = setTimeout(function() {\n                        var errorMessage = \"No valid message received from loaded iframe for iframe name \" + iframeName;\n                        log(errorMessage, \"error\");\n                        callback({\n                            error: errorMessage\n                        });\n                    }, 1e3);\n                }\n            });\n            corsMessageReceiver.receiveMessage(iframeName, function(message) {\n                log(\"Received the following window message: '\" + message + \"'\");\n                var fileId = getFileIdForIframeName(iframeName), response = handler._parseJsonResponse(message), uuid = response.uuid, onloadCallback;\n                if (uuid && onloadCallbacks[uuid]) {\n                    log(\"Handling response for iframe name \" + iframeName);\n                    clearTimeout(postMessageCallbackTimers[iframeName]);\n                    delete postMessageCallbackTimers[iframeName];\n                    handler._detachLoadEvent(iframeName);\n                    onloadCallback = onloadCallbacks[uuid];\n                    delete onloadCallbacks[uuid];\n                    corsMessageReceiver.stopReceivingMessages(iframeName);\n                    onloadCallback(response);\n                } else if (!uuid) {\n                    log(\"'\" + message + \"' does not contain a UUID - ignoring.\");\n                }\n            });\n        }\n        qq.extend(this, new qq.UploadHandler(spec));\n        qq.override(this, function(super_) {\n            return {\n                add: function(id, fileInput) {\n                    super_.add(id, {\n                        input: fileInput\n                    });\n                    fileInput.setAttribute(\"name\", inputName);\n                    if (fileInput.parentNode) {\n                        qq(fileInput).remove();\n                    }\n                },\n                expunge: function(id) {\n                    expungeFile(id);\n                    super_.expunge(id);\n                },\n                isValid: function(id) {\n                    return super_.isValid(id) && handler._getFileState(id).input !== undefined;\n                }\n            };\n        });\n        qq.extend(this, {\n            getInput: function(id) {\n                return handler._getFileState(id).input;\n            },\n            _attachLoadEvent: function(iframe, callback) {\n                var responseDescriptor;\n                if (isCors) {\n                    registerPostMessageCallback(iframe, callback);\n                } else {\n                    detachLoadEvents[iframe.id] = qq(iframe).attach(\"load\", function() {\n                        log(\"Received response for \" + iframe.id);\n                        if (!iframe.parentNode) {\n                            return;\n                        }\n                        try {\n                            if (iframe.contentDocument && iframe.contentDocument.body && iframe.contentDocument.body.innerHTML == \"false\") {\n                                return;\n                            }\n                        } catch (error) {\n                            log(\"Error when attempting to access iframe during handling of upload response (\" + error.message + \")\", \"error\");\n                            responseDescriptor = {\n                                success: false\n                            };\n                        }\n                        callback(responseDescriptor);\n                    });\n                }\n            },\n            _createIframe: function(id) {\n                var iframeName = handler._getIframeName(id);\n                return initIframeForUpload(iframeName);\n            },\n            _detachLoadEvent: function(id) {\n                if (detachLoadEvents[id] !== undefined) {\n                    detachLoadEvents[id]();\n                    delete detachLoadEvents[id];\n                }\n            },\n            _getIframeName: function(fileId) {\n                return fileId + \"_\" + formHandlerInstanceId;\n            },\n            _initFormForUpload: function(spec) {\n                var method = spec.method, endpoint = spec.endpoint, params = spec.params, paramsInBody = spec.paramsInBody, targetName = spec.targetName, form = qq.toElement(\"<form method='\" + method + \"' enctype='multipart/form-data'></form>\"), url = endpoint;\n                if (paramsInBody) {\n                    qq.obj2Inputs(params, form);\n                } else {\n                    url = qq.obj2url(params, endpoint);\n                }\n                form.setAttribute(\"action\", url);\n                form.setAttribute(\"target\", targetName);\n                form.style.display = \"none\";\n                document.body.appendChild(form);\n                return form;\n            },\n            _parseJsonResponse: function(innerHtmlOrMessage) {\n                var response = {};\n                try {\n                    response = qq.parseJson(innerHtmlOrMessage);\n                } catch (error) {\n                    log(\"Error when attempting to parse iframe upload response (\" + error.message + \")\", \"error\");\n                }\n                return response;\n            }\n        });\n    };\n    qq.XhrUploadHandler = function(spec) {\n        \"use strict\";\n        var handler = this, namespace = spec.options.namespace, proxy = spec.proxy, chunking = spec.options.chunking, getChunkSize = function(id) {\n            var fileState = handler._getFileState(id);\n            if (fileState.chunkSize) {\n                return fileState.chunkSize;\n            } else {\n                var chunkSize = chunking.partSize;\n                if (qq.isFunction(chunkSize)) {\n                    chunkSize = chunkSize(id, getSize(id));\n                }\n                fileState.chunkSize = chunkSize;\n                return chunkSize;\n            }\n        }, resume = spec.options.resume, chunkFiles = chunking && spec.options.chunking.enabled && qq.supportedFeatures.chunking, resumeEnabled = resume && spec.options.resume.enabled && chunkFiles && qq.supportedFeatures.resume, getName = proxy.getName, getSize = proxy.getSize, getUuid = proxy.getUuid, getEndpoint = proxy.getEndpoint, getDataByUuid = proxy.getDataByUuid, onUuidChanged = proxy.onUuidChanged, onProgress = proxy.onProgress, log = proxy.log, getCustomResumeData = proxy.getCustomResumeData;\n        function abort(id) {\n            qq.each(handler._getXhrs(id), function(xhrId, xhr) {\n                var ajaxRequester = handler._getAjaxRequester(id, xhrId);\n                xhr.onreadystatechange = null;\n                xhr.upload.onprogress = null;\n                xhr.abort();\n                ajaxRequester && ajaxRequester.canceled && ajaxRequester.canceled(id);\n            });\n        }\n        qq.extend(this, new qq.UploadHandler(spec));\n        qq.override(this, function(super_) {\n            return {\n                add: function(id, blobOrProxy) {\n                    if (qq.isFile(blobOrProxy) || qq.isBlob(blobOrProxy)) {\n                        super_.add(id, {\n                            file: blobOrProxy\n                        });\n                    } else if (blobOrProxy instanceof qq.BlobProxy) {\n                        super_.add(id, {\n                            proxy: blobOrProxy\n                        });\n                    } else {\n                        throw new Error(\"Passed obj is not a File, Blob, or proxy\");\n                    }\n                    handler._initTempState(id);\n                    resumeEnabled && handler._maybePrepareForResume(id);\n                },\n                expunge: function(id) {\n                    abort(id);\n                    handler._maybeDeletePersistedChunkData(id);\n                    handler._clearXhrs(id);\n                    super_.expunge(id);\n                }\n            };\n        });\n        qq.extend(this, {\n            clearCachedChunk: function(id, chunkIdx) {\n                var fileState = handler._getFileState(id);\n                if (fileState) {\n                    delete fileState.temp.cachedChunks[chunkIdx];\n                }\n            },\n            clearXhr: function(id, chunkIdx) {\n                var tempState = handler._getFileState(id).temp;\n                if (tempState.xhrs) {\n                    delete tempState.xhrs[chunkIdx];\n                }\n                if (tempState.ajaxRequesters) {\n                    delete tempState.ajaxRequesters[chunkIdx];\n                }\n            },\n            finalizeChunks: function(id, responseParser) {\n                var lastChunkIdx = handler._getTotalChunks(id) - 1, xhr = handler._getXhr(id, lastChunkIdx);\n                if (responseParser) {\n                    return new qq.Promise().success(responseParser(xhr), xhr);\n                }\n                return new qq.Promise().success({}, xhr);\n            },\n            getFile: function(id) {\n                return handler.isValid(id) && handler._getFileState(id).file;\n            },\n            getProxy: function(id) {\n                return handler.isValid(id) && handler._getFileState(id).proxy;\n            },\n            getResumableFilesData: function() {\n                var resumableFilesData = [];\n                handler._iterateResumeRecords(function(key, uploadData) {\n                    handler.moveInProgressToRemaining(null, uploadData.chunking.inProgress, uploadData.chunking.remaining);\n                    var data = {\n                        name: uploadData.name,\n                        remaining: uploadData.chunking.remaining,\n                        size: uploadData.size,\n                        uuid: uploadData.uuid\n                    };\n                    if (uploadData.key) {\n                        data.key = uploadData.key;\n                    }\n                    if (uploadData.customResumeData) {\n                        data.customResumeData = uploadData.customResumeData;\n                    }\n                    resumableFilesData.push(data);\n                });\n                return resumableFilesData;\n            },\n            isAttemptingResume: function(id) {\n                return handler._getFileState(id).attemptingResume;\n            },\n            isResumable: function(id) {\n                return !!chunking && handler.isValid(id) && !handler._getFileState(id).notResumable;\n            },\n            moveInProgressToRemaining: function(id, optInProgress, optRemaining) {\n                var fileState = handler._getFileState(id) || {}, chunkingState = fileState.chunking || {}, inProgress = optInProgress || chunkingState.inProgress, remaining = optRemaining || chunkingState.remaining;\n                if (inProgress) {\n                    log(qq.format(\"Moving these chunks from in-progress {}, to remaining.\", JSON.stringify(inProgress)));\n                    inProgress.reverse();\n                    qq.each(inProgress, function(idx, chunkIdx) {\n                        remaining.unshift(chunkIdx);\n                    });\n                    inProgress.length = 0;\n                }\n            },\n            pause: function(id) {\n                if (handler.isValid(id)) {\n                    log(qq.format(\"Aborting XHR upload for {} '{}' due to pause instruction.\", id, getName(id)));\n                    handler._getFileState(id).paused = true;\n                    abort(id);\n                    return true;\n                }\n            },\n            reevaluateChunking: function(id) {\n                if (chunking && handler.isValid(id)) {\n                    var state = handler._getFileState(id), totalChunks, i;\n                    delete state.chunking;\n                    state.chunking = {};\n                    totalChunks = handler._getTotalChunks(id);\n                    if (totalChunks > 1 || chunking.mandatory) {\n                        state.chunking.enabled = true;\n                        state.chunking.parts = totalChunks;\n                        state.chunking.remaining = [];\n                        for (i = 0; i < totalChunks; i++) {\n                            state.chunking.remaining.push(i);\n                        }\n                        handler._initTempState(id);\n                    } else {\n                        state.chunking.enabled = false;\n                    }\n                }\n            },\n            updateBlob: function(id, newBlob) {\n                if (handler.isValid(id)) {\n                    handler._getFileState(id).file = newBlob;\n                }\n            },\n            _clearXhrs: function(id) {\n                var tempState = handler._getFileState(id).temp;\n                qq.each(tempState.ajaxRequesters, function(chunkId) {\n                    delete tempState.ajaxRequesters[chunkId];\n                });\n                qq.each(tempState.xhrs, function(chunkId) {\n                    delete tempState.xhrs[chunkId];\n                });\n            },\n            _createXhr: function(id, optChunkIdx) {\n                return handler._registerXhr(id, optChunkIdx, qq.createXhrInstance());\n            },\n            _getAjaxRequester: function(id, optChunkIdx) {\n                var chunkIdx = optChunkIdx == null ? -1 : optChunkIdx;\n                return handler._getFileState(id).temp.ajaxRequesters[chunkIdx];\n            },\n            _getChunkData: function(id, chunkIndex) {\n                var chunkSize = getChunkSize(id), fileSize = getSize(id), fileOrBlob = handler.getFile(id), startBytes = chunkSize * chunkIndex, endBytes = startBytes + chunkSize >= fileSize ? fileSize : startBytes + chunkSize, totalChunks = handler._getTotalChunks(id), cachedChunks = this._getFileState(id).temp.cachedChunks, blob = cachedChunks[chunkIndex] || qq.sliceBlob(fileOrBlob, startBytes, endBytes);\n                cachedChunks[chunkIndex] = blob;\n                return {\n                    part: chunkIndex,\n                    start: startBytes,\n                    end: endBytes,\n                    count: totalChunks,\n                    blob: blob,\n                    size: endBytes - startBytes\n                };\n            },\n            _getChunkDataForCallback: function(chunkData) {\n                return {\n                    partIndex: chunkData.part,\n                    startByte: chunkData.start + 1,\n                    endByte: chunkData.end,\n                    totalParts: chunkData.count\n                };\n            },\n            _getLocalStorageId: function(id) {\n                var formatVersion = \"5.0\", name = getName(id), size = getSize(id), chunkSize = getChunkSize(id), endpoint = getEndpoint(id), customKeys = resume.customKeys(id), localStorageId = qq.format(\"qq{}resume{}-{}-{}-{}-{}\", namespace, formatVersion, name, size, chunkSize, endpoint);\n                customKeys.forEach(function(key) {\n                    localStorageId += \"-\" + key;\n                });\n                return localStorageId;\n            },\n            _getMimeType: function(id) {\n                return handler.getFile(id).type;\n            },\n            _getPersistableData: function(id) {\n                return handler._getFileState(id).chunking;\n            },\n            _getTotalChunks: function(id) {\n                if (chunking) {\n                    var fileSize = getSize(id), chunkSize = getChunkSize(id);\n                    return Math.ceil(fileSize / chunkSize);\n                }\n            },\n            _getXhr: function(id, optChunkIdx) {\n                var chunkIdx = optChunkIdx == null ? -1 : optChunkIdx;\n                return handler._getFileState(id).temp.xhrs[chunkIdx];\n            },\n            _getXhrs: function(id) {\n                return handler._getFileState(id).temp.xhrs;\n            },\n            _iterateResumeRecords: function(callback) {\n                if (resumeEnabled) {\n                    qq.each(localStorage, function(key, item) {\n                        if (key.indexOf(qq.format(\"qq{}resume\", namespace)) === 0) {\n                            var uploadData = JSON.parse(item);\n                            callback(key, uploadData);\n                        }\n                    });\n                }\n            },\n            _initTempState: function(id) {\n                handler._getFileState(id).temp = {\n                    ajaxRequesters: {},\n                    chunkProgress: {},\n                    xhrs: {},\n                    cachedChunks: {}\n                };\n            },\n            _markNotResumable: function(id) {\n                handler._getFileState(id).notResumable = true;\n            },\n            _maybeDeletePersistedChunkData: function(id) {\n                var localStorageId;\n                if (resumeEnabled && handler.isResumable(id)) {\n                    localStorageId = handler._getLocalStorageId(id);\n                    if (localStorageId && localStorage.getItem(localStorageId)) {\n                        localStorage.removeItem(localStorageId);\n                        return true;\n                    }\n                }\n                return false;\n            },\n            _maybePrepareForResume: function(id) {\n                var state = handler._getFileState(id), localStorageId, persistedData;\n                if (resumeEnabled && state.key === undefined) {\n                    localStorageId = handler._getLocalStorageId(id);\n                    persistedData = localStorage.getItem(localStorageId);\n                    if (persistedData) {\n                        persistedData = JSON.parse(persistedData);\n                        if (getDataByUuid(persistedData.uuid)) {\n                            handler._markNotResumable(id);\n                        } else {\n                            log(qq.format(\"Identified file with ID {} and name of {} as resumable.\", id, getName(id)));\n                            onUuidChanged(id, persistedData.uuid);\n                            state.key = persistedData.key;\n                            state.chunking = persistedData.chunking;\n                            state.loaded = persistedData.loaded;\n                            state.customResumeData = persistedData.customResumeData;\n                            state.attemptingResume = true;\n                            handler.moveInProgressToRemaining(id);\n                        }\n                    }\n                }\n            },\n            _maybePersistChunkedState: function(id) {\n                var state = handler._getFileState(id), localStorageId, persistedData;\n                if (resumeEnabled && handler.isResumable(id)) {\n                    var customResumeData = getCustomResumeData(id);\n                    localStorageId = handler._getLocalStorageId(id);\n                    persistedData = {\n                        name: getName(id),\n                        size: getSize(id),\n                        uuid: getUuid(id),\n                        key: state.key,\n                        chunking: state.chunking,\n                        loaded: state.loaded,\n                        lastUpdated: Date.now()\n                    };\n                    if (customResumeData) {\n                        persistedData.customResumeData = customResumeData;\n                    }\n                    try {\n                        localStorage.setItem(localStorageId, JSON.stringify(persistedData));\n                    } catch (error) {\n                        log(qq.format(\"Unable to save resume data for '{}' due to error: '{}'.\", id, error.toString()), \"warn\");\n                    }\n                }\n            },\n            _registerProgressHandler: function(id, chunkIdx, chunkSize) {\n                var xhr = handler._getXhr(id, chunkIdx), name = getName(id), progressCalculator = {\n                    simple: function(loaded, total) {\n                        var fileSize = getSize(id);\n                        if (loaded === total) {\n                            onProgress(id, name, fileSize, fileSize);\n                        } else {\n                            onProgress(id, name, loaded >= fileSize ? fileSize - 1 : loaded, fileSize);\n                        }\n                    },\n                    chunked: function(loaded, total) {\n                        var chunkProgress = handler._getFileState(id).temp.chunkProgress, totalSuccessfullyLoadedForFile = handler._getFileState(id).loaded, loadedForRequest = loaded, totalForRequest = total, totalFileSize = getSize(id), estActualChunkLoaded = loadedForRequest - (totalForRequest - chunkSize), totalLoadedForFile = totalSuccessfullyLoadedForFile;\n                        chunkProgress[chunkIdx] = estActualChunkLoaded;\n                        qq.each(chunkProgress, function(chunkIdx, chunkLoaded) {\n                            totalLoadedForFile += chunkLoaded;\n                        });\n                        onProgress(id, name, totalLoadedForFile, totalFileSize);\n                    }\n                };\n                xhr.upload.onprogress = function(e) {\n                    if (e.lengthComputable) {\n                        var type = chunkSize == null ? \"simple\" : \"chunked\";\n                        progressCalculator[type](e.loaded, e.total);\n                    }\n                };\n            },\n            _registerXhr: function(id, optChunkIdx, xhr, optAjaxRequester) {\n                var xhrsId = optChunkIdx == null ? -1 : optChunkIdx, tempState = handler._getFileState(id).temp;\n                tempState.xhrs = tempState.xhrs || {};\n                tempState.ajaxRequesters = tempState.ajaxRequesters || {};\n                tempState.xhrs[xhrsId] = xhr;\n                if (optAjaxRequester) {\n                    tempState.ajaxRequesters[xhrsId] = optAjaxRequester;\n                }\n                return xhr;\n            },\n            _removeExpiredChunkingRecords: function() {\n                var expirationDays = resume.recordsExpireIn;\n                handler._iterateResumeRecords(function(key, uploadData) {\n                    var expirationDate = new Date(uploadData.lastUpdated);\n                    expirationDate.setDate(expirationDate.getDate() + expirationDays);\n                    if (expirationDate.getTime() <= Date.now()) {\n                        log(\"Removing expired resume record with key \" + key);\n                        localStorage.removeItem(key);\n                    }\n                });\n            },\n            _shouldChunkThisFile: function(id) {\n                var state = handler._getFileState(id);\n                if (state) {\n                    if (!state.chunking) {\n                        handler.reevaluateChunking(id);\n                    }\n                    return state.chunking.enabled;\n                }\n            }\n        });\n    };\n    qq.DeleteFileAjaxRequester = function(o) {\n        \"use strict\";\n        var requester, options = {\n            method: \"DELETE\",\n            uuidParamName: \"qquuid\",\n            endpointStore: {},\n            maxConnections: 3,\n            customHeaders: function(id) {\n                return {};\n            },\n            paramsStore: {},\n            cors: {\n                expected: false,\n                sendCredentials: false\n            },\n            log: function(str, level) {},\n            onDelete: function(id) {},\n            onDeleteComplete: function(id, xhrOrXdr, isError) {}\n        };\n        qq.extend(options, o);\n        function getMandatedParams() {\n            if (options.method.toUpperCase() === \"POST\") {\n                return {\n                    _method: \"DELETE\"\n                };\n            }\n            return {};\n        }\n        requester = qq.extend(this, new qq.AjaxRequester({\n            acceptHeader: \"application/json\",\n            validMethods: [ \"POST\", \"DELETE\" ],\n            method: options.method,\n            endpointStore: options.endpointStore,\n            paramsStore: options.paramsStore,\n            mandatedParams: getMandatedParams(),\n            maxConnections: options.maxConnections,\n            customHeaders: function(id) {\n                return options.customHeaders.get(id);\n            },\n            log: options.log,\n            onSend: options.onDelete,\n            onComplete: options.onDeleteComplete,\n            cors: options.cors\n        }));\n        qq.extend(this, {\n            sendDelete: function(id, uuid, additionalMandatedParams) {\n                var additionalOptions = additionalMandatedParams || {};\n                options.log(\"Submitting delete file request for \" + id);\n                if (options.method === \"DELETE\") {\n                    requester.initTransport(id).withPath(uuid).withParams(additionalOptions).send();\n                } else {\n                    additionalOptions[options.uuidParamName] = uuid;\n                    requester.initTransport(id).withParams(additionalOptions).send();\n                }\n            }\n        });\n    };\n    (function() {\n        function detectSubsampling(img) {\n            var iw = img.naturalWidth, ih = img.naturalHeight, canvas = document.createElement(\"canvas\"), ctx;\n            if (iw * ih > 1024 * 1024) {\n                canvas.width = canvas.height = 1;\n                ctx = canvas.getContext(\"2d\");\n                ctx.drawImage(img, -iw + 1, 0);\n                return ctx.getImageData(0, 0, 1, 1).data[3] === 0;\n            } else {\n                return false;\n            }\n        }\n        function detectVerticalSquash(img, iw, ih) {\n            var canvas = document.createElement(\"canvas\"), sy = 0, ey = ih, py = ih, ctx, data, alpha, ratio;\n            canvas.width = 1;\n            canvas.height = ih;\n            ctx = canvas.getContext(\"2d\");\n            ctx.drawImage(img, 0, 0);\n            data = ctx.getImageData(0, 0, 1, ih).data;\n            while (py > sy) {\n                alpha = data[(py - 1) * 4 + 3];\n                if (alpha === 0) {\n                    ey = py;\n                } else {\n                    sy = py;\n                }\n                py = ey + sy >> 1;\n            }\n            ratio = py / ih;\n            return ratio === 0 ? 1 : ratio;\n        }\n        function renderImageToDataURL(img, blob, options, doSquash) {\n            var canvas = document.createElement(\"canvas\"), mime = options.mime || \"image/jpeg\", promise = new qq.Promise();\n            renderImageToCanvas(img, blob, canvas, options, doSquash).then(function() {\n                promise.success(canvas.toDataURL(mime, options.quality || .8));\n            });\n            return promise;\n        }\n        function maybeCalculateDownsampledDimensions(spec) {\n            var maxPixels = 5241e3;\n            if (!qq.ios()) {\n                throw new qq.Error(\"Downsampled dimensions can only be reliably calculated for iOS!\");\n            }\n            if (spec.origHeight * spec.origWidth > maxPixels) {\n                return {\n                    newHeight: Math.round(Math.sqrt(maxPixels * (spec.origHeight / spec.origWidth))),\n                    newWidth: Math.round(Math.sqrt(maxPixels * (spec.origWidth / spec.origHeight)))\n                };\n            }\n        }\n        function renderImageToCanvas(img, blob, canvas, options, doSquash) {\n            var iw = img.naturalWidth, ih = img.naturalHeight, width = options.width, height = options.height, ctx = canvas.getContext(\"2d\"), promise = new qq.Promise(), modifiedDimensions;\n            ctx.save();\n            if (options.resize) {\n                return renderImageToCanvasWithCustomResizer({\n                    blob: blob,\n                    canvas: canvas,\n                    image: img,\n                    imageHeight: ih,\n                    imageWidth: iw,\n                    orientation: options.orientation,\n                    resize: options.resize,\n                    targetHeight: height,\n                    targetWidth: width\n                });\n            }\n            if (!qq.supportedFeatures.unlimitedScaledImageSize) {\n                modifiedDimensions = maybeCalculateDownsampledDimensions({\n                    origWidth: width,\n                    origHeight: height\n                });\n                if (modifiedDimensions) {\n                    qq.log(qq.format(\"Had to reduce dimensions due to device limitations from {}w / {}h to {}w / {}h\", width, height, modifiedDimensions.newWidth, modifiedDimensions.newHeight), \"warn\");\n                    width = modifiedDimensions.newWidth;\n                    height = modifiedDimensions.newHeight;\n                }\n            }\n            transformCoordinate(canvas, width, height, options.orientation);\n            if (qq.ios()) {\n                (function() {\n                    if (detectSubsampling(img)) {\n                        iw /= 2;\n                        ih /= 2;\n                    }\n                    var d = 1024, tmpCanvas = document.createElement(\"canvas\"), vertSquashRatio = doSquash ? detectVerticalSquash(img, iw, ih) : 1, dw = Math.ceil(d * width / iw), dh = Math.ceil(d * height / ih / vertSquashRatio), sy = 0, dy = 0, tmpCtx, sx, dx;\n                    tmpCanvas.width = tmpCanvas.height = d;\n                    tmpCtx = tmpCanvas.getContext(\"2d\");\n                    while (sy < ih) {\n                        sx = 0;\n                        dx = 0;\n                        while (sx < iw) {\n                            tmpCtx.clearRect(0, 0, d, d);\n                            tmpCtx.drawImage(img, -sx, -sy);\n                            ctx.drawImage(tmpCanvas, 0, 0, d, d, dx, dy, dw, dh);\n                            sx += d;\n                            dx += dw;\n                        }\n                        sy += d;\n                        dy += dh;\n                    }\n                    ctx.restore();\n                    tmpCanvas = tmpCtx = null;\n                })();\n            } else {\n                ctx.drawImage(img, 0, 0, width, height);\n            }\n            canvas.qqImageRendered && canvas.qqImageRendered();\n            promise.success();\n            return promise;\n        }\n        function renderImageToCanvasWithCustomResizer(resizeInfo) {\n            var blob = resizeInfo.blob, image = resizeInfo.image, imageHeight = resizeInfo.imageHeight, imageWidth = resizeInfo.imageWidth, orientation = resizeInfo.orientation, promise = new qq.Promise(), resize = resizeInfo.resize, sourceCanvas = document.createElement(\"canvas\"), sourceCanvasContext = sourceCanvas.getContext(\"2d\"), targetCanvas = resizeInfo.canvas, targetHeight = resizeInfo.targetHeight, targetWidth = resizeInfo.targetWidth;\n            transformCoordinate(sourceCanvas, imageWidth, imageHeight, orientation);\n            targetCanvas.height = targetHeight;\n            targetCanvas.width = targetWidth;\n            sourceCanvasContext.drawImage(image, 0, 0);\n            resize({\n                blob: blob,\n                height: targetHeight,\n                image: image,\n                sourceCanvas: sourceCanvas,\n                targetCanvas: targetCanvas,\n                width: targetWidth\n            }).then(function success() {\n                targetCanvas.qqImageRendered && targetCanvas.qqImageRendered();\n                promise.success();\n            }, promise.failure);\n            return promise;\n        }\n        function transformCoordinate(canvas, width, height, orientation) {\n            switch (orientation) {\n              case 5:\n              case 6:\n              case 7:\n              case 8:\n                canvas.width = height;\n                canvas.height = width;\n                break;\n\n              default:\n                canvas.width = width;\n                canvas.height = height;\n            }\n            var ctx = canvas.getContext(\"2d\");\n            switch (orientation) {\n              case 2:\n                ctx.translate(width, 0);\n                ctx.scale(-1, 1);\n                break;\n\n              case 3:\n                ctx.translate(width, height);\n                ctx.rotate(Math.PI);\n                break;\n\n              case 4:\n                ctx.translate(0, height);\n                ctx.scale(1, -1);\n                break;\n\n              case 5:\n                ctx.rotate(.5 * Math.PI);\n                ctx.scale(1, -1);\n                break;\n\n              case 6:\n                ctx.rotate(.5 * Math.PI);\n                ctx.translate(0, -height);\n                break;\n\n              case 7:\n                ctx.rotate(.5 * Math.PI);\n                ctx.translate(width, -height);\n                ctx.scale(-1, 1);\n                break;\n\n              case 8:\n                ctx.rotate(-.5 * Math.PI);\n                ctx.translate(-width, 0);\n                break;\n\n              default:\n                break;\n            }\n        }\n        function MegaPixImage(srcImage, errorCallback) {\n            var self = this;\n            if (window.Blob && srcImage instanceof Blob) {\n                (function() {\n                    var img = new Image(), URL = window.URL && window.URL.createObjectURL ? window.URL : window.webkitURL && window.webkitURL.createObjectURL ? window.webkitURL : null;\n                    if (!URL) {\n                        throw Error(\"No createObjectURL function found to create blob url\");\n                    }\n                    img.src = URL.createObjectURL(srcImage);\n                    self.blob = srcImage;\n                    srcImage = img;\n                })();\n            }\n            if (!srcImage.naturalWidth && !srcImage.naturalHeight) {\n                srcImage.onload = function() {\n                    var listeners = self.imageLoadListeners;\n                    if (listeners) {\n                        self.imageLoadListeners = null;\n                        setTimeout(function() {\n                            for (var i = 0, len = listeners.length; i < len; i++) {\n                                listeners[i]();\n                            }\n                        }, 0);\n                    }\n                };\n                srcImage.onerror = errorCallback;\n                this.imageLoadListeners = [];\n            }\n            this.srcImage = srcImage;\n        }\n        MegaPixImage.prototype.render = function(target, options) {\n            options = options || {};\n            var self = this, imgWidth = this.srcImage.naturalWidth, imgHeight = this.srcImage.naturalHeight, width = options.width, height = options.height, maxWidth = options.maxWidth, maxHeight = options.maxHeight, doSquash = !this.blob || this.blob.type === \"image/jpeg\", tagName = target.tagName.toLowerCase(), opt;\n            if (this.imageLoadListeners) {\n                this.imageLoadListeners.push(function() {\n                    self.render(target, options);\n                });\n                return;\n            }\n            if (width && !height) {\n                height = imgHeight * width / imgWidth << 0;\n            } else if (height && !width) {\n                width = imgWidth * height / imgHeight << 0;\n            } else {\n                width = imgWidth;\n                height = imgHeight;\n            }\n            if (maxWidth && width > maxWidth) {\n                width = maxWidth;\n                height = imgHeight * width / imgWidth << 0;\n            }\n            if (maxHeight && height > maxHeight) {\n                height = maxHeight;\n                width = imgWidth * height / imgHeight << 0;\n            }\n            opt = {\n                width: width,\n                height: height\n            }, qq.each(options, function(optionsKey, optionsValue) {\n                opt[optionsKey] = optionsValue;\n            });\n            if (tagName === \"img\") {\n                (function() {\n                    var oldTargetSrc = target.src;\n                    renderImageToDataURL(self.srcImage, self.blob, opt, doSquash).then(function(dataUri) {\n                        target.src = dataUri;\n                        oldTargetSrc === target.src && target.onload();\n                    });\n                })();\n            } else if (tagName === \"canvas\") {\n                renderImageToCanvas(this.srcImage, this.blob, target, opt, doSquash);\n            }\n            if (typeof this.onrender === \"function\") {\n                this.onrender(target);\n            }\n        };\n        qq.MegaPixImage = MegaPixImage;\n    })();\n    qq.ImageGenerator = function(log) {\n        \"use strict\";\n        function isImg(el) {\n            return el.tagName.toLowerCase() === \"img\";\n        }\n        function isCanvas(el) {\n            return el.tagName.toLowerCase() === \"canvas\";\n        }\n        function isImgCorsSupported() {\n            return new Image().crossOrigin !== undefined;\n        }\n        function isCanvasSupported() {\n            var canvas = document.createElement(\"canvas\");\n            return canvas.getContext && canvas.getContext(\"2d\");\n        }\n        function determineMimeOfFileName(nameWithPath) {\n            var pathSegments = nameWithPath.split(\"/\"), name = pathSegments[pathSegments.length - 1].split(\"?\")[0], extension = qq.getExtension(name);\n            extension = extension && extension.toLowerCase();\n            switch (extension) {\n              case \"jpeg\":\n              case \"jpg\":\n                return \"image/jpeg\";\n\n              case \"png\":\n                return \"image/png\";\n\n              case \"bmp\":\n                return \"image/bmp\";\n\n              case \"gif\":\n                return \"image/gif\";\n\n              case \"tiff\":\n              case \"tif\":\n                return \"image/tiff\";\n            }\n        }\n        function isCrossOrigin(url) {\n            var targetAnchor = document.createElement(\"a\"), targetProtocol, targetHostname, targetPort;\n            targetAnchor.href = url;\n            targetProtocol = targetAnchor.protocol;\n            targetPort = targetAnchor.port;\n            targetHostname = targetAnchor.hostname;\n            if (targetProtocol.toLowerCase() !== window.location.protocol.toLowerCase()) {\n                return true;\n            }\n            if (targetHostname.toLowerCase() !== window.location.hostname.toLowerCase()) {\n                return true;\n            }\n            if (targetPort !== window.location.port && !qq.ie()) {\n                return true;\n            }\n            return false;\n        }\n        function registerImgLoadListeners(img, promise) {\n            img.onload = function() {\n                img.onload = null;\n                img.onerror = null;\n                promise.success(img);\n            };\n            img.onerror = function() {\n                img.onload = null;\n                img.onerror = null;\n                log(\"Problem drawing thumbnail!\", \"error\");\n                promise.failure(img, \"Problem drawing thumbnail!\");\n            };\n        }\n        function registerCanvasDrawImageListener(canvas, promise) {\n            canvas.qqImageRendered = function() {\n                promise.success(canvas);\n            };\n        }\n        function registerThumbnailRenderedListener(imgOrCanvas, promise) {\n            var registered = isImg(imgOrCanvas) || isCanvas(imgOrCanvas);\n            if (isImg(imgOrCanvas)) {\n                registerImgLoadListeners(imgOrCanvas, promise);\n            } else if (isCanvas(imgOrCanvas)) {\n                registerCanvasDrawImageListener(imgOrCanvas, promise);\n            } else {\n                promise.failure(imgOrCanvas);\n                log(qq.format(\"Element container of type {} is not supported!\", imgOrCanvas.tagName), \"error\");\n            }\n            return registered;\n        }\n        function draw(fileOrBlob, container, options) {\n            var drawPreview = new qq.Promise(), identifier = new qq.Identify(fileOrBlob, log), maxSize = options.maxSize, orient = options.orient == null ? true : options.orient, megapixErrorHandler = function() {\n                container.onerror = null;\n                container.onload = null;\n                log(\"Could not render preview, file may be too large!\", \"error\");\n                drawPreview.failure(container, \"Browser cannot render image!\");\n            };\n            identifier.isPreviewable().then(function(mime) {\n                var dummyExif = {\n                    parse: function() {\n                        return new qq.Promise().success();\n                    }\n                }, exif = orient ? new qq.Exif(fileOrBlob, log) : dummyExif, mpImg = new qq.MegaPixImage(fileOrBlob, megapixErrorHandler);\n                if (registerThumbnailRenderedListener(container, drawPreview)) {\n                    exif.parse().then(function(exif) {\n                        var orientation = exif && exif.Orientation;\n                        mpImg.render(container, {\n                            maxWidth: maxSize,\n                            maxHeight: maxSize,\n                            orientation: orientation,\n                            mime: mime,\n                            resize: options.customResizeFunction\n                        });\n                    }, function(failureMsg) {\n                        log(qq.format(\"EXIF data could not be parsed ({}).  Assuming orientation = 1.\", failureMsg));\n                        mpImg.render(container, {\n                            maxWidth: maxSize,\n                            maxHeight: maxSize,\n                            mime: mime,\n                            resize: options.customResizeFunction\n                        });\n                    });\n                }\n            }, function() {\n                log(\"Not previewable\");\n                drawPreview.failure(container, \"Not previewable\");\n            });\n            return drawPreview;\n        }\n        function drawOnCanvasOrImgFromUrl(url, canvasOrImg, draw, maxSize, customResizeFunction) {\n            var tempImg = new Image(), tempImgRender = new qq.Promise();\n            registerThumbnailRenderedListener(tempImg, tempImgRender);\n            if (isCrossOrigin(url)) {\n                tempImg.crossOrigin = \"anonymous\";\n            }\n            tempImg.src = url;\n            tempImgRender.then(function rendered() {\n                registerThumbnailRenderedListener(canvasOrImg, draw);\n                var mpImg = new qq.MegaPixImage(tempImg);\n                mpImg.render(canvasOrImg, {\n                    maxWidth: maxSize,\n                    maxHeight: maxSize,\n                    mime: determineMimeOfFileName(url),\n                    resize: customResizeFunction\n                });\n            }, draw.failure);\n        }\n        function drawOnImgFromUrlWithCssScaling(url, img, draw, maxSize) {\n            registerThumbnailRenderedListener(img, draw);\n            qq(img).css({\n                maxWidth: maxSize + \"px\",\n                maxHeight: maxSize + \"px\"\n            });\n            img.src = url;\n        }\n        function drawFromUrl(url, container, options) {\n            var draw = new qq.Promise(), scale = options.scale, maxSize = scale ? options.maxSize : null;\n            if (scale && isImg(container)) {\n                if (isCanvasSupported()) {\n                    if (isCrossOrigin(url) && !isImgCorsSupported()) {\n                        drawOnImgFromUrlWithCssScaling(url, container, draw, maxSize);\n                    } else {\n                        drawOnCanvasOrImgFromUrl(url, container, draw, maxSize);\n                    }\n                } else {\n                    drawOnImgFromUrlWithCssScaling(url, container, draw, maxSize);\n                }\n            } else if (isCanvas(container)) {\n                drawOnCanvasOrImgFromUrl(url, container, draw, maxSize);\n            } else if (registerThumbnailRenderedListener(container, draw)) {\n                container.src = url;\n            }\n            return draw;\n        }\n        qq.extend(this, {\n            generate: function(fileBlobOrUrl, container, options) {\n                if (qq.isString(fileBlobOrUrl)) {\n                    log(\"Attempting to update thumbnail based on server response.\");\n                    return drawFromUrl(fileBlobOrUrl, container, options || {});\n                } else {\n                    log(\"Attempting to draw client-side image preview.\");\n                    return draw(fileBlobOrUrl, container, options || {});\n                }\n            }\n        });\n        this._testing = {};\n        this._testing.isImg = isImg;\n        this._testing.isCanvas = isCanvas;\n        this._testing.isCrossOrigin = isCrossOrigin;\n        this._testing.determineMimeOfFileName = determineMimeOfFileName;\n    };\n    qq.Exif = function(fileOrBlob, log) {\n        \"use strict\";\n        var TAG_IDS = [ 274 ], TAG_INFO = {\n            274: {\n                name: \"Orientation\",\n                bytes: 2\n            }\n        };\n        function parseLittleEndian(hex) {\n            var result = 0, pow = 0;\n            while (hex.length > 0) {\n                result += parseInt(hex.substring(0, 2), 16) * Math.pow(2, pow);\n                hex = hex.substring(2, hex.length);\n                pow += 8;\n            }\n            return result;\n        }\n        function seekToApp1(offset, promise) {\n            var theOffset = offset, thePromise = promise;\n            if (theOffset === undefined) {\n                theOffset = 2;\n                thePromise = new qq.Promise();\n            }\n            qq.readBlobToHex(fileOrBlob, theOffset, 4).then(function(hex) {\n                var match = /^ffe([0-9])/.exec(hex), segmentLength;\n                if (match) {\n                    if (match[1] !== \"1\") {\n                        segmentLength = parseInt(hex.slice(4, 8), 16);\n                        seekToApp1(theOffset + segmentLength + 2, thePromise);\n                    } else {\n                        thePromise.success(theOffset);\n                    }\n                } else {\n                    thePromise.failure(\"No EXIF header to be found!\");\n                }\n            });\n            return thePromise;\n        }\n        function getApp1Offset() {\n            var promise = new qq.Promise();\n            qq.readBlobToHex(fileOrBlob, 0, 6).then(function(hex) {\n                if (hex.indexOf(\"ffd8\") !== 0) {\n                    promise.failure(\"Not a valid JPEG!\");\n                } else {\n                    seekToApp1().then(function(offset) {\n                        promise.success(offset);\n                    }, function(error) {\n                        promise.failure(error);\n                    });\n                }\n            });\n            return promise;\n        }\n        function isLittleEndian(app1Start) {\n            var promise = new qq.Promise();\n            qq.readBlobToHex(fileOrBlob, app1Start + 10, 2).then(function(hex) {\n                promise.success(hex === \"4949\");\n            });\n            return promise;\n        }\n        function getDirEntryCount(app1Start, littleEndian) {\n            var promise = new qq.Promise();\n            qq.readBlobToHex(fileOrBlob, app1Start + 18, 2).then(function(hex) {\n                if (littleEndian) {\n                    return promise.success(parseLittleEndian(hex));\n                } else {\n                    promise.success(parseInt(hex, 16));\n                }\n            });\n            return promise;\n        }\n        function getIfd(app1Start, dirEntries) {\n            var offset = app1Start + 20, bytes = dirEntries * 12;\n            return qq.readBlobToHex(fileOrBlob, offset, bytes);\n        }\n        function getDirEntries(ifdHex) {\n            var entries = [], offset = 0;\n            while (offset + 24 <= ifdHex.length) {\n                entries.push(ifdHex.slice(offset, offset + 24));\n                offset += 24;\n            }\n            return entries;\n        }\n        function getTagValues(littleEndian, dirEntries) {\n            var TAG_VAL_OFFSET = 16, tagsToFind = qq.extend([], TAG_IDS), vals = {};\n            qq.each(dirEntries, function(idx, entry) {\n                var idHex = entry.slice(0, 4), id = littleEndian ? parseLittleEndian(idHex) : parseInt(idHex, 16), tagsToFindIdx = tagsToFind.indexOf(id), tagValHex, tagName, tagValLength;\n                if (tagsToFindIdx >= 0) {\n                    tagName = TAG_INFO[id].name;\n                    tagValLength = TAG_INFO[id].bytes;\n                    tagValHex = entry.slice(TAG_VAL_OFFSET, TAG_VAL_OFFSET + tagValLength * 2);\n                    vals[tagName] = littleEndian ? parseLittleEndian(tagValHex) : parseInt(tagValHex, 16);\n                    tagsToFind.splice(tagsToFindIdx, 1);\n                }\n                if (tagsToFind.length === 0) {\n                    return false;\n                }\n            });\n            return vals;\n        }\n        qq.extend(this, {\n            parse: function() {\n                var parser = new qq.Promise(), onParseFailure = function(message) {\n                    log(qq.format(\"EXIF header parse failed: '{}' \", message));\n                    parser.failure(message);\n                };\n                getApp1Offset().then(function(app1Offset) {\n                    log(qq.format(\"Moving forward with EXIF header parsing for '{}'\", fileOrBlob.name === undefined ? \"blob\" : fileOrBlob.name));\n                    isLittleEndian(app1Offset).then(function(littleEndian) {\n                        log(qq.format(\"EXIF Byte order is {} endian\", littleEndian ? \"little\" : \"big\"));\n                        getDirEntryCount(app1Offset, littleEndian).then(function(dirEntryCount) {\n                            log(qq.format(\"Found {} APP1 directory entries\", dirEntryCount));\n                            getIfd(app1Offset, dirEntryCount).then(function(ifdHex) {\n                                var dirEntries = getDirEntries(ifdHex), tagValues = getTagValues(littleEndian, dirEntries);\n                                log(\"Successfully parsed some EXIF tags\");\n                                parser.success(tagValues);\n                            }, onParseFailure);\n                        }, onParseFailure);\n                    }, onParseFailure);\n                }, onParseFailure);\n                return parser;\n            }\n        });\n        this._testing = {};\n        this._testing.parseLittleEndian = parseLittleEndian;\n    };\n    qq.Identify = function(fileOrBlob, log) {\n        \"use strict\";\n        function isIdentifiable(magicBytes, questionableBytes) {\n            var identifiable = false, magicBytesEntries = [].concat(magicBytes);\n            qq.each(magicBytesEntries, function(idx, magicBytesArrayEntry) {\n                if (questionableBytes.indexOf(magicBytesArrayEntry) === 0) {\n                    identifiable = true;\n                    return false;\n                }\n            });\n            return identifiable;\n        }\n        qq.extend(this, {\n            isPreviewable: function() {\n                var self = this, identifier = new qq.Promise(), previewable = false, name = fileOrBlob.name === undefined ? \"blob\" : fileOrBlob.name;\n                log(qq.format(\"Attempting to determine if {} can be rendered in this browser\", name));\n                log(\"First pass: check type attribute of blob object.\");\n                if (this.isPreviewableSync()) {\n                    log(\"Second pass: check for magic bytes in file header.\");\n                    qq.readBlobToHex(fileOrBlob, 0, 4).then(function(hex) {\n                        qq.each(self.PREVIEWABLE_MIME_TYPES, function(mime, bytes) {\n                            if (isIdentifiable(bytes, hex)) {\n                                if (mime !== \"image/tiff\" || qq.supportedFeatures.tiffPreviews) {\n                                    previewable = true;\n                                    identifier.success(mime);\n                                }\n                                return false;\n                            }\n                        });\n                        log(qq.format(\"'{}' is {} able to be rendered in this browser\", name, previewable ? \"\" : \"NOT\"));\n                        if (!previewable) {\n                            identifier.failure();\n                        }\n                    }, function() {\n                        log(\"Error reading file w/ name '\" + name + \"'.  Not able to be rendered in this browser.\");\n                        identifier.failure();\n                    });\n                } else {\n                    identifier.failure();\n                }\n                return identifier;\n            },\n            isPreviewableSync: function() {\n                var fileMime = fileOrBlob.type, isRecognizedImage = qq.indexOf(Object.keys(this.PREVIEWABLE_MIME_TYPES), fileMime) >= 0, previewable = false, name = fileOrBlob.name === undefined ? \"blob\" : fileOrBlob.name;\n                if (isRecognizedImage) {\n                    if (fileMime === \"image/tiff\") {\n                        previewable = qq.supportedFeatures.tiffPreviews;\n                    } else {\n                        previewable = true;\n                    }\n                }\n                !previewable && log(name + \" is not previewable in this browser per the blob's type attr\");\n                return previewable;\n            }\n        });\n    };\n    qq.Identify.prototype.PREVIEWABLE_MIME_TYPES = {\n        \"image/jpeg\": \"ffd8ff\",\n        \"image/gif\": \"474946\",\n        \"image/png\": \"89504e\",\n        \"image/bmp\": \"424d\",\n        \"image/tiff\": [ \"49492a00\", \"4d4d002a\" ]\n    };\n    qq.ImageValidation = function(blob, log) {\n        \"use strict\";\n        function hasNonZeroLimits(limits) {\n            var atLeastOne = false;\n            qq.each(limits, function(limit, value) {\n                if (value > 0) {\n                    atLeastOne = true;\n                    return false;\n                }\n            });\n            return atLeastOne;\n        }\n        function getWidthHeight() {\n            var sizeDetermination = new qq.Promise();\n            new qq.Identify(blob, log).isPreviewable().then(function() {\n                var image = new Image(), url = window.URL && window.URL.createObjectURL ? window.URL : window.webkitURL && window.webkitURL.createObjectURL ? window.webkitURL : null;\n                if (url) {\n                    image.onerror = function() {\n                        log(\"Cannot determine dimensions for image.  May be too large.\", \"error\");\n                        sizeDetermination.failure();\n                    };\n                    image.onload = function() {\n                        sizeDetermination.success({\n                            width: this.width,\n                            height: this.height\n                        });\n                    };\n                    image.src = url.createObjectURL(blob);\n                } else {\n                    log(\"No createObjectURL function available to generate image URL!\", \"error\");\n                    sizeDetermination.failure();\n                }\n            }, sizeDetermination.failure);\n            return sizeDetermination;\n        }\n        function getFailingLimit(limits, dimensions) {\n            var failingLimit;\n            qq.each(limits, function(limitName, limitValue) {\n                if (limitValue > 0) {\n                    var limitMatcher = /(max|min)(Width|Height)/.exec(limitName), dimensionPropName = limitMatcher[2].charAt(0).toLowerCase() + limitMatcher[2].slice(1), actualValue = dimensions[dimensionPropName];\n                    switch (limitMatcher[1]) {\n                      case \"min\":\n                        if (actualValue < limitValue) {\n                            failingLimit = limitName;\n                            return false;\n                        }\n                        break;\n\n                      case \"max\":\n                        if (actualValue > limitValue) {\n                            failingLimit = limitName;\n                            return false;\n                        }\n                        break;\n                    }\n                }\n            });\n            return failingLimit;\n        }\n        this.validate = function(limits) {\n            var validationEffort = new qq.Promise();\n            log(\"Attempting to validate image.\");\n            if (hasNonZeroLimits(limits)) {\n                getWidthHeight().then(function(dimensions) {\n                    var failingLimit = getFailingLimit(limits, dimensions);\n                    if (failingLimit) {\n                        validationEffort.failure(failingLimit);\n                    } else {\n                        validationEffort.success();\n                    }\n                }, validationEffort.success);\n            } else {\n                validationEffort.success();\n            }\n            return validationEffort;\n        };\n    };\n    qq.Session = function(spec) {\n        \"use strict\";\n        var options = {\n            endpoint: null,\n            params: {},\n            customHeaders: {},\n            cors: {},\n            addFileRecord: function(sessionData) {},\n            log: function(message, level) {}\n        };\n        qq.extend(options, spec, true);\n        function isJsonResponseValid(response) {\n            if (qq.isArray(response)) {\n                return true;\n            }\n            options.log(\"Session response is not an array.\", \"error\");\n        }\n        function handleFileItems(fileItems, success, xhrOrXdr, promise) {\n            var someItemsIgnored = false;\n            success = success && isJsonResponseValid(fileItems);\n            if (success) {\n                qq.each(fileItems, function(idx, fileItem) {\n                    if (fileItem.uuid == null) {\n                        someItemsIgnored = true;\n                        options.log(qq.format(\"Session response item {} did not include a valid UUID - ignoring.\", idx), \"error\");\n                    } else if (fileItem.name == null) {\n                        someItemsIgnored = true;\n                        options.log(qq.format(\"Session response item {} did not include a valid name - ignoring.\", idx), \"error\");\n                    } else {\n                        try {\n                            options.addFileRecord(fileItem);\n                            return true;\n                        } catch (err) {\n                            someItemsIgnored = true;\n                            options.log(err.message, \"error\");\n                        }\n                    }\n                    return false;\n                });\n            }\n            promise[success && !someItemsIgnored ? \"success\" : \"failure\"](fileItems, xhrOrXdr);\n        }\n        this.refresh = function() {\n            var refreshEffort = new qq.Promise(), refreshCompleteCallback = function(response, success, xhrOrXdr) {\n                handleFileItems(response, success, xhrOrXdr, refreshEffort);\n            }, requesterOptions = qq.extend({}, options), requester = new qq.SessionAjaxRequester(qq.extend(requesterOptions, {\n                onComplete: refreshCompleteCallback\n            }));\n            requester.queryServer();\n            return refreshEffort;\n        };\n    };\n    qq.SessionAjaxRequester = function(spec) {\n        \"use strict\";\n        var requester, options = {\n            endpoint: null,\n            customHeaders: {},\n            params: {},\n            cors: {\n                expected: false,\n                sendCredentials: false\n            },\n            onComplete: function(response, success, xhrOrXdr) {},\n            log: function(str, level) {}\n        };\n        qq.extend(options, spec);\n        function onComplete(id, xhrOrXdr, isError) {\n            var response = null;\n            if (xhrOrXdr.responseText != null) {\n                try {\n                    response = qq.parseJson(xhrOrXdr.responseText);\n                } catch (err) {\n                    options.log(\"Problem parsing session response: \" + err.message, \"error\");\n                    isError = true;\n                }\n            }\n            options.onComplete(response, !isError, xhrOrXdr);\n        }\n        requester = qq.extend(this, new qq.AjaxRequester({\n            acceptHeader: \"application/json\",\n            validMethods: [ \"GET\" ],\n            method: \"GET\",\n            endpointStore: {\n                get: function() {\n                    return options.endpoint;\n                }\n            },\n            customHeaders: options.customHeaders,\n            log: options.log,\n            onComplete: onComplete,\n            cors: options.cors\n        }));\n        qq.extend(this, {\n            queryServer: function() {\n                var params = qq.extend({}, options.params);\n                options.log(\"Session query request.\");\n                requester.initTransport(\"sessionRefresh\").withParams(params).withCacheBuster().send();\n            }\n        });\n    };\n    qq.Scaler = function(spec, log) {\n        \"use strict\";\n        var self = this, customResizeFunction = spec.customResizer, includeOriginal = spec.sendOriginal, orient = spec.orient, defaultType = spec.defaultType, defaultQuality = spec.defaultQuality / 100, failedToScaleText = spec.failureText, includeExif = spec.includeExif, sizes = this._getSortedSizes(spec.sizes);\n        qq.extend(this, {\n            enabled: qq.supportedFeatures.scaling && sizes.length > 0,\n            getFileRecords: function(originalFileUuid, originalFileName, originalBlobOrBlobData) {\n                var self = this, records = [], originalBlob = originalBlobOrBlobData.blob ? originalBlobOrBlobData.blob : originalBlobOrBlobData, identifier = new qq.Identify(originalBlob, log);\n                if (identifier.isPreviewableSync()) {\n                    qq.each(sizes, function(idx, sizeRecord) {\n                        var outputType = self._determineOutputType({\n                            defaultType: defaultType,\n                            requestedType: sizeRecord.type,\n                            refType: originalBlob.type\n                        });\n                        records.push({\n                            uuid: qq.getUniqueId(),\n                            name: self._getName(originalFileName, {\n                                name: sizeRecord.name,\n                                type: outputType,\n                                refType: originalBlob.type\n                            }),\n                            blob: new qq.BlobProxy(originalBlob, qq.bind(self._generateScaledImage, self, {\n                                customResizeFunction: customResizeFunction,\n                                maxSize: sizeRecord.maxSize,\n                                orient: orient,\n                                type: outputType,\n                                quality: defaultQuality,\n                                failedText: failedToScaleText,\n                                includeExif: includeExif,\n                                log: log\n                            }))\n                        });\n                    });\n                    records.push({\n                        uuid: originalFileUuid,\n                        name: originalFileName,\n                        size: originalBlob.size,\n                        blob: includeOriginal ? originalBlob : null\n                    });\n                } else {\n                    records.push({\n                        uuid: originalFileUuid,\n                        name: originalFileName,\n                        size: originalBlob.size,\n                        blob: originalBlob\n                    });\n                }\n                return records;\n            },\n            handleNewFile: function(file, name, uuid, size, fileList, batchId, uuidParamName, api) {\n                var self = this, buttonId = file.qqButtonId || file.blob && file.blob.qqButtonId, scaledIds = [], originalId = null, addFileToHandler = api.addFileToHandler, uploadData = api.uploadData, paramsStore = api.paramsStore, proxyGroupId = qq.getUniqueId();\n                qq.each(self.getFileRecords(uuid, name, file), function(idx, record) {\n                    var blobSize = record.size, id;\n                    if (record.blob instanceof qq.BlobProxy) {\n                        blobSize = -1;\n                    }\n                    id = uploadData.addFile({\n                        uuid: record.uuid,\n                        name: record.name,\n                        size: blobSize,\n                        batchId: batchId,\n                        proxyGroupId: proxyGroupId\n                    });\n                    if (record.blob instanceof qq.BlobProxy) {\n                        scaledIds.push(id);\n                    } else {\n                        originalId = id;\n                    }\n                    if (record.blob) {\n                        addFileToHandler(id, record.blob);\n                        fileList.push({\n                            id: id,\n                            file: record.blob\n                        });\n                    } else {\n                        uploadData.setStatus(id, qq.status.REJECTED);\n                    }\n                });\n                if (originalId !== null) {\n                    qq.each(scaledIds, function(idx, scaledId) {\n                        var params = {\n                            qqparentuuid: uploadData.retrieve({\n                                id: originalId\n                            }).uuid,\n                            qqparentsize: uploadData.retrieve({\n                                id: originalId\n                            }).size\n                        };\n                        params[uuidParamName] = uploadData.retrieve({\n                            id: scaledId\n                        }).uuid;\n                        uploadData.setParentId(scaledId, originalId);\n                        paramsStore.addReadOnly(scaledId, params);\n                    });\n                    if (scaledIds.length) {\n                        (function() {\n                            var param = {};\n                            param[uuidParamName] = uploadData.retrieve({\n                                id: originalId\n                            }).uuid;\n                            paramsStore.addReadOnly(originalId, param);\n                        })();\n                    }\n                }\n            }\n        });\n    };\n    qq.extend(qq.Scaler.prototype, {\n        scaleImage: function(id, specs, api) {\n            \"use strict\";\n            if (!qq.supportedFeatures.scaling) {\n                throw new qq.Error(\"Scaling is not supported in this browser!\");\n            }\n            var scalingEffort = new qq.Promise(), log = api.log, file = api.getFile(id), uploadData = api.uploadData.retrieve({\n                id: id\n            }), name = uploadData && uploadData.name, uuid = uploadData && uploadData.uuid, scalingOptions = {\n                customResizer: specs.customResizer,\n                sendOriginal: false,\n                orient: specs.orient,\n                defaultType: specs.type || null,\n                defaultQuality: specs.quality,\n                failedToScaleText: \"Unable to scale\",\n                sizes: [ {\n                    name: \"\",\n                    maxSize: specs.maxSize\n                } ]\n            }, scaler = new qq.Scaler(scalingOptions, log);\n            if (!qq.Scaler || !qq.supportedFeatures.imagePreviews || !file) {\n                scalingEffort.failure();\n                log(\"Could not generate requested scaled image for \" + id + \".  \" + \"Scaling is either not possible in this browser, or the file could not be located.\", \"error\");\n            } else {\n                qq.bind(function() {\n                    var record = scaler.getFileRecords(uuid, name, file)[0];\n                    if (record && record.blob instanceof qq.BlobProxy) {\n                        record.blob.create().then(scalingEffort.success, scalingEffort.failure);\n                    } else {\n                        log(id + \" is not a scalable image!\", \"error\");\n                        scalingEffort.failure();\n                    }\n                }, this)();\n            }\n            return scalingEffort;\n        },\n        _determineOutputType: function(spec) {\n            \"use strict\";\n            var requestedType = spec.requestedType, defaultType = spec.defaultType, referenceType = spec.refType;\n            if (!defaultType && !requestedType) {\n                if (referenceType !== \"image/jpeg\") {\n                    return \"image/png\";\n                }\n                return referenceType;\n            }\n            if (!requestedType) {\n                return defaultType;\n            }\n            if (qq.indexOf(Object.keys(qq.Identify.prototype.PREVIEWABLE_MIME_TYPES), requestedType) >= 0) {\n                if (requestedType === \"image/tiff\") {\n                    return qq.supportedFeatures.tiffPreviews ? requestedType : defaultType;\n                }\n                return requestedType;\n            }\n            return defaultType;\n        },\n        _getName: function(originalName, scaledVersionProperties) {\n            \"use strict\";\n            var startOfExt = originalName.lastIndexOf(\".\"), versionType = scaledVersionProperties.type || \"image/png\", referenceType = scaledVersionProperties.refType, scaledName = \"\", scaledExt = qq.getExtension(originalName), nameAppendage = \"\";\n            if (scaledVersionProperties.name && scaledVersionProperties.name.trim().length) {\n                nameAppendage = \" (\" + scaledVersionProperties.name + \")\";\n            }\n            if (startOfExt >= 0) {\n                scaledName = originalName.substr(0, startOfExt);\n                if (referenceType !== versionType) {\n                    scaledExt = versionType.split(\"/\")[1];\n                }\n                scaledName += nameAppendage + \".\" + scaledExt;\n            } else {\n                scaledName = originalName + nameAppendage;\n            }\n            return scaledName;\n        },\n        _getSortedSizes: function(sizes) {\n            \"use strict\";\n            sizes = qq.extend([], sizes);\n            return sizes.sort(function(a, b) {\n                if (a.maxSize > b.maxSize) {\n                    return 1;\n                }\n                if (a.maxSize < b.maxSize) {\n                    return -1;\n                }\n                return 0;\n            });\n        },\n        _generateScaledImage: function(spec, sourceFile) {\n            \"use strict\";\n            var self = this, customResizeFunction = spec.customResizeFunction, log = spec.log, maxSize = spec.maxSize, orient = spec.orient, type = spec.type, quality = spec.quality, failedText = spec.failedText, includeExif = spec.includeExif && sourceFile.type === \"image/jpeg\" && type === \"image/jpeg\", scalingEffort = new qq.Promise(), imageGenerator = new qq.ImageGenerator(log), canvas = document.createElement(\"canvas\");\n            log(\"Attempting to generate scaled version for \" + sourceFile.name);\n            imageGenerator.generate(sourceFile, canvas, {\n                maxSize: maxSize,\n                orient: orient,\n                customResizeFunction: customResizeFunction\n            }).then(function() {\n                var scaledImageDataUri = canvas.toDataURL(type, quality), signalSuccess = function() {\n                    log(\"Success generating scaled version for \" + sourceFile.name);\n                    var blob = qq.dataUriToBlob(scaledImageDataUri);\n                    scalingEffort.success(blob);\n                };\n                if (includeExif) {\n                    self._insertExifHeader(sourceFile, scaledImageDataUri, log).then(function(scaledImageDataUriWithExif) {\n                        scaledImageDataUri = scaledImageDataUriWithExif;\n                        signalSuccess();\n                    }, function() {\n                        log(\"Problem inserting EXIF header into scaled image.  Using scaled image w/out EXIF data.\", \"error\");\n                        signalSuccess();\n                    });\n                } else {\n                    signalSuccess();\n                }\n            }, function() {\n                log(\"Failed attempt to generate scaled version for \" + sourceFile.name, \"error\");\n                scalingEffort.failure(failedText);\n            });\n            return scalingEffort;\n        },\n        _insertExifHeader: function(originalImage, scaledImageDataUri, log) {\n            \"use strict\";\n            var reader = new FileReader(), insertionEffort = new qq.Promise(), originalImageDataUri = \"\";\n            reader.onload = function() {\n                originalImageDataUri = reader.result;\n                insertionEffort.success(qq.ExifRestorer.restore(originalImageDataUri, scaledImageDataUri));\n            };\n            reader.onerror = function() {\n                log(\"Problem reading \" + originalImage.name + \" during attempt to transfer EXIF data to scaled version.\", \"error\");\n                insertionEffort.failure();\n            };\n            reader.readAsDataURL(originalImage);\n            return insertionEffort;\n        },\n        _dataUriToBlob: function(dataUri) {\n            \"use strict\";\n            var byteString, mimeString, arrayBuffer, intArray;\n            if (dataUri.split(\",\")[0].indexOf(\"base64\") >= 0) {\n                byteString = atob(dataUri.split(\",\")[1]);\n            } else {\n                byteString = decodeURI(dataUri.split(\",\")[1]);\n            }\n            mimeString = dataUri.split(\",\")[0].split(\":\")[1].split(\";\")[0];\n            arrayBuffer = new ArrayBuffer(byteString.length);\n            intArray = new Uint8Array(arrayBuffer);\n            qq.each(byteString, function(idx, character) {\n                intArray[idx] = character.charCodeAt(0);\n            });\n            return this._createBlob(arrayBuffer, mimeString);\n        },\n        _createBlob: function(data, mime) {\n            \"use strict\";\n            var BlobBuilder = window.BlobBuilder || window.WebKitBlobBuilder || window.MozBlobBuilder || window.MSBlobBuilder, blobBuilder = BlobBuilder && new BlobBuilder();\n            if (blobBuilder) {\n                blobBuilder.append(data);\n                return blobBuilder.getBlob(mime);\n            } else {\n                return new Blob([ data ], {\n                    type: mime\n                });\n            }\n        }\n    });\n    qq.ExifRestorer = function() {\n        var ExifRestorer = {};\n        ExifRestorer.KEY_STR = \"ABCDEFGHIJKLMNOP\" + \"QRSTUVWXYZabcdef\" + \"ghijklmnopqrstuv\" + \"wxyz0123456789+/\" + \"=\";\n        ExifRestorer.encode64 = function(input) {\n            var output = \"\", chr1, chr2, chr3 = \"\", enc1, enc2, enc3, enc4 = \"\", i = 0;\n            do {\n                chr1 = input[i++];\n                chr2 = input[i++];\n                chr3 = input[i++];\n                enc1 = chr1 >> 2;\n                enc2 = (chr1 & 3) << 4 | chr2 >> 4;\n                enc3 = (chr2 & 15) << 2 | chr3 >> 6;\n                enc4 = chr3 & 63;\n                if (isNaN(chr2)) {\n                    enc3 = enc4 = 64;\n                } else if (isNaN(chr3)) {\n                    enc4 = 64;\n                }\n                output = output + this.KEY_STR.charAt(enc1) + this.KEY_STR.charAt(enc2) + this.KEY_STR.charAt(enc3) + this.KEY_STR.charAt(enc4);\n                chr1 = chr2 = chr3 = \"\";\n                enc1 = enc2 = enc3 = enc4 = \"\";\n            } while (i < input.length);\n            return output;\n        };\n        ExifRestorer.restore = function(origFileBase64, resizedFileBase64) {\n            var expectedBase64Header = \"data:image/jpeg;base64,\";\n            if (!origFileBase64.match(expectedBase64Header)) {\n                return resizedFileBase64;\n            }\n            var rawImage = this.decode64(origFileBase64.replace(expectedBase64Header, \"\"));\n            var segments = this.slice2Segments(rawImage);\n            var image = this.exifManipulation(resizedFileBase64, segments);\n            return expectedBase64Header + this.encode64(image);\n        };\n        ExifRestorer.exifManipulation = function(resizedFileBase64, segments) {\n            var exifArray = this.getExifArray(segments), newImageArray = this.insertExif(resizedFileBase64, exifArray), aBuffer = new Uint8Array(newImageArray);\n            return aBuffer;\n        };\n        ExifRestorer.getExifArray = function(segments) {\n            var seg;\n            for (var x = 0; x < segments.length; x++) {\n                seg = segments[x];\n                if (seg[0] == 255 & seg[1] == 225) {\n                    return seg;\n                }\n            }\n            return [];\n        };\n        ExifRestorer.insertExif = function(resizedFileBase64, exifArray) {\n            var imageData = resizedFileBase64.replace(\"data:image/jpeg;base64,\", \"\"), buf = this.decode64(imageData), separatePoint = buf.indexOf(255, 3), mae = buf.slice(0, separatePoint), ato = buf.slice(separatePoint), array = mae;\n            array = array.concat(exifArray);\n            array = array.concat(ato);\n            return array;\n        };\n        ExifRestorer.slice2Segments = function(rawImageArray) {\n            var head = 0, segments = [];\n            while (1) {\n                if (rawImageArray[head] == 255 & rawImageArray[head + 1] == 218) {\n                    break;\n                }\n                if (rawImageArray[head] == 255 & rawImageArray[head + 1] == 216) {\n                    head += 2;\n                } else {\n                    var length = rawImageArray[head + 2] * 256 + rawImageArray[head + 3], endPoint = head + length + 2, seg = rawImageArray.slice(head, endPoint);\n                    segments.push(seg);\n                    head = endPoint;\n                }\n                if (head > rawImageArray.length) {\n                    break;\n                }\n            }\n            return segments;\n        };\n        ExifRestorer.decode64 = function(input) {\n            var output = \"\", chr1, chr2, chr3 = \"\", enc1, enc2, enc3, enc4 = \"\", i = 0, buf = [];\n            var base64test = /[^A-Za-z0-9\\+\\/\\=]/g;\n            if (base64test.exec(input)) {\n                throw new Error(\"There were invalid base64 characters in the input text.  \" + \"Valid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='\");\n            }\n            input = input.replace(/[^A-Za-z0-9\\+\\/\\=]/g, \"\");\n            do {\n                enc1 = this.KEY_STR.indexOf(input.charAt(i++));\n                enc2 = this.KEY_STR.indexOf(input.charAt(i++));\n                enc3 = this.KEY_STR.indexOf(input.charAt(i++));\n                enc4 = this.KEY_STR.indexOf(input.charAt(i++));\n                chr1 = enc1 << 2 | enc2 >> 4;\n                chr2 = (enc2 & 15) << 4 | enc3 >> 2;\n                chr3 = (enc3 & 3) << 6 | enc4;\n                buf.push(chr1);\n                if (enc3 != 64) {\n                    buf.push(chr2);\n                }\n                if (enc4 != 64) {\n                    buf.push(chr3);\n                }\n                chr1 = chr2 = chr3 = \"\";\n                enc1 = enc2 = enc3 = enc4 = \"\";\n            } while (i < input.length);\n            return buf;\n        };\n        return ExifRestorer;\n    }();\n    qq.TotalProgress = function(callback, getSize) {\n        \"use strict\";\n        var perFileProgress = {}, totalLoaded = 0, totalSize = 0, lastLoadedSent = -1, lastTotalSent = -1, callbackProxy = function(loaded, total) {\n            if (loaded !== lastLoadedSent || total !== lastTotalSent) {\n                callback(loaded, total);\n            }\n            lastLoadedSent = loaded;\n            lastTotalSent = total;\n        }, noRetryableFiles = function(failed, retryable) {\n            var none = true;\n            qq.each(failed, function(idx, failedId) {\n                if (qq.indexOf(retryable, failedId) >= 0) {\n                    none = false;\n                    return false;\n                }\n            });\n            return none;\n        }, onCancel = function(id) {\n            updateTotalProgress(id, -1, -1);\n            delete perFileProgress[id];\n        }, onAllComplete = function(successful, failed, retryable) {\n            if (failed.length === 0 || noRetryableFiles(failed, retryable)) {\n                callbackProxy(totalSize, totalSize);\n                this.reset();\n            }\n        }, onNew = function(id) {\n            var size = getSize(id);\n            if (size > 0) {\n                updateTotalProgress(id, 0, size);\n                perFileProgress[id] = {\n                    loaded: 0,\n                    total: size\n                };\n            }\n        }, updateTotalProgress = function(id, newLoaded, newTotal) {\n            var oldLoaded = perFileProgress[id] ? perFileProgress[id].loaded : 0, oldTotal = perFileProgress[id] ? perFileProgress[id].total : 0;\n            if (newLoaded === -1 && newTotal === -1) {\n                totalLoaded -= oldLoaded;\n                totalSize -= oldTotal;\n            } else {\n                if (newLoaded) {\n                    totalLoaded += newLoaded - oldLoaded;\n                }\n                if (newTotal) {\n                    totalSize += newTotal - oldTotal;\n                }\n            }\n            callbackProxy(totalLoaded, totalSize);\n        };\n        qq.extend(this, {\n            onAllComplete: onAllComplete,\n            onStatusChange: function(id, oldStatus, newStatus) {\n                if (newStatus === qq.status.CANCELED || newStatus === qq.status.REJECTED) {\n                    onCancel(id);\n                } else if (newStatus === qq.status.SUBMITTING) {\n                    onNew(id);\n                }\n            },\n            onIndividualProgress: function(id, loaded, total) {\n                updateTotalProgress(id, loaded, total);\n                perFileProgress[id] = {\n                    loaded: loaded,\n                    total: total\n                };\n            },\n            onNewSize: function(id) {\n                onNew(id);\n            },\n            reset: function() {\n                perFileProgress = {};\n                totalLoaded = 0;\n                totalSize = 0;\n            }\n        });\n    };\n    qq.PasteSupport = function(o) {\n        \"use strict\";\n        var options, detachPasteHandler;\n        options = {\n            targetElement: null,\n            callbacks: {\n                log: function(message, level) {},\n                pasteReceived: function(blob) {}\n            }\n        };\n        function isImage(item) {\n            return item.type && item.type.indexOf(\"image/\") === 0;\n        }\n        function registerPasteHandler() {\n            detachPasteHandler = qq(options.targetElement).attach(\"paste\", function(event) {\n                var clipboardData = event.clipboardData;\n                if (clipboardData) {\n                    qq.each(clipboardData.items, function(idx, item) {\n                        if (isImage(item)) {\n                            var blob = item.getAsFile();\n                            options.callbacks.pasteReceived(blob);\n                        }\n                    });\n                }\n            });\n        }\n        function unregisterPasteHandler() {\n            if (detachPasteHandler) {\n                detachPasteHandler();\n            }\n        }\n        qq.extend(options, o);\n        registerPasteHandler();\n        qq.extend(this, {\n            reset: function() {\n                unregisterPasteHandler();\n            }\n        });\n    };\n    qq.FormSupport = function(options, startUpload, log) {\n        \"use strict\";\n        var self = this, interceptSubmit = options.interceptSubmit, formEl = options.element, autoUpload = options.autoUpload;\n        qq.extend(this, {\n            newEndpoint: null,\n            newAutoUpload: autoUpload,\n            attachedToForm: false,\n            getFormInputsAsObject: function() {\n                if (formEl == null) {\n                    return null;\n                }\n                return self._form2Obj(formEl);\n            }\n        });\n        function determineNewEndpoint(formEl) {\n            if (formEl.getAttribute(\"action\")) {\n                self.newEndpoint = formEl.getAttribute(\"action\");\n            }\n        }\n        function validateForm(formEl, nativeSubmit) {\n            if (formEl.checkValidity && !formEl.checkValidity()) {\n                log(\"Form did not pass validation checks - will not upload.\", \"error\");\n                nativeSubmit();\n            } else {\n                return true;\n            }\n        }\n        function maybeUploadOnSubmit(formEl) {\n            var nativeSubmit = formEl.submit;\n            qq(formEl).attach(\"submit\", function(event) {\n                event = event || window.event;\n                if (event.preventDefault) {\n                    event.preventDefault();\n                } else {\n                    event.returnValue = false;\n                }\n                validateForm(formEl, nativeSubmit) && startUpload();\n            });\n            formEl.submit = function() {\n                validateForm(formEl, nativeSubmit) && startUpload();\n            };\n        }\n        function determineFormEl(formEl) {\n            if (formEl) {\n                if (qq.isString(formEl)) {\n                    formEl = document.getElementById(formEl);\n                }\n                if (formEl) {\n                    log(\"Attaching to form element.\");\n                    determineNewEndpoint(formEl);\n                    interceptSubmit && maybeUploadOnSubmit(formEl);\n                }\n            }\n            return formEl;\n        }\n        formEl = determineFormEl(formEl);\n        this.attachedToForm = !!formEl;\n    };\n    qq.extend(qq.FormSupport.prototype, {\n        _form2Obj: function(form) {\n            \"use strict\";\n            var obj = {}, notIrrelevantType = function(type) {\n                var irrelevantTypes = [ \"button\", \"image\", \"reset\", \"submit\" ];\n                return qq.indexOf(irrelevantTypes, type.toLowerCase()) < 0;\n            }, radioOrCheckbox = function(type) {\n                return qq.indexOf([ \"checkbox\", \"radio\" ], type.toLowerCase()) >= 0;\n            }, ignoreValue = function(el) {\n                if (radioOrCheckbox(el.type) && !el.checked) {\n                    return true;\n                }\n                return el.disabled && el.type.toLowerCase() !== \"hidden\";\n            }, selectValue = function(select) {\n                var value = null;\n                qq.each(qq(select).children(), function(idx, child) {\n                    if (child.tagName.toLowerCase() === \"option\" && child.selected) {\n                        value = child.value;\n                        return false;\n                    }\n                });\n                return value;\n            };\n            qq.each(form.elements, function(idx, el) {\n                if ((qq.isInput(el, true) || el.tagName.toLowerCase() === \"textarea\") && notIrrelevantType(el.type) && !ignoreValue(el)) {\n                    obj[el.name] = el.value;\n                } else if (el.tagName.toLowerCase() === \"select\" && !ignoreValue(el)) {\n                    var value = selectValue(el);\n                    if (value !== null) {\n                        obj[el.name] = value;\n                    }\n                }\n            });\n            return obj;\n        }\n    });\n    qq.traditional = qq.traditional || {};\n    qq.traditional.FormUploadHandler = function(options, proxy) {\n        \"use strict\";\n        var handler = this, getName = proxy.getName, getUuid = proxy.getUuid, log = proxy.log;\n        function getIframeContentJson(id, iframe) {\n            var response, doc, innerHtml;\n            try {\n                doc = iframe.contentDocument || iframe.contentWindow.document;\n                innerHtml = doc.body.innerHTML;\n                log(\"converting iframe's innerHTML to JSON\");\n                log(\"innerHTML = \" + innerHtml);\n                if (innerHtml && innerHtml.match(/^<pre/i)) {\n                    innerHtml = doc.body.firstChild.firstChild.nodeValue;\n                }\n                response = handler._parseJsonResponse(innerHtml);\n            } catch (error) {\n                log(\"Error when attempting to parse form upload response (\" + error.message + \")\", \"error\");\n                response = {\n                    success: false\n                };\n            }\n            return response;\n        }\n        function createForm(id, iframe) {\n            var params = options.paramsStore.get(id), method = options.method.toLowerCase() === \"get\" ? \"GET\" : \"POST\", endpoint = options.endpointStore.get(id), name = getName(id);\n            params[options.uuidName] = getUuid(id);\n            params[options.filenameParam] = name;\n            return handler._initFormForUpload({\n                method: method,\n                endpoint: endpoint,\n                params: params,\n                paramsInBody: options.paramsInBody,\n                targetName: iframe.name\n            });\n        }\n        this.uploadFile = function(id) {\n            var input = handler.getInput(id), iframe = handler._createIframe(id), promise = new qq.Promise(), form;\n            form = createForm(id, iframe);\n            form.appendChild(input);\n            handler._attachLoadEvent(iframe, function(responseFromMessage) {\n                log(\"iframe loaded\");\n                var response = responseFromMessage ? responseFromMessage : getIframeContentJson(id, iframe);\n                handler._detachLoadEvent(id);\n                if (!options.cors.expected) {\n                    qq(iframe).remove();\n                }\n                if (response.success) {\n                    promise.success(response);\n                } else {\n                    promise.failure(response);\n                }\n            });\n            log(\"Sending upload request for \" + id);\n            form.submit();\n            qq(form).remove();\n            return promise;\n        };\n        qq.extend(this, new qq.FormUploadHandler({\n            options: {\n                isCors: options.cors.expected,\n                inputName: options.inputName\n            },\n            proxy: {\n                onCancel: options.onCancel,\n                getName: getName,\n                getUuid: getUuid,\n                log: log\n            }\n        }));\n    };\n    qq.traditional = qq.traditional || {};\n    qq.traditional.XhrUploadHandler = function(spec, proxy) {\n        \"use strict\";\n        var handler = this, getName = proxy.getName, getSize = proxy.getSize, getUuid = proxy.getUuid, log = proxy.log, multipart = spec.forceMultipart || spec.paramsInBody, addChunkingSpecificParams = function(id, params, chunkData) {\n            var size = getSize(id), name = getName(id);\n            if (!spec.omitDefaultParams) {\n                params[spec.chunking.paramNames.partIndex] = chunkData.part;\n                params[spec.chunking.paramNames.partByteOffset] = chunkData.start;\n                params[spec.chunking.paramNames.chunkSize] = chunkData.size;\n                params[spec.chunking.paramNames.totalParts] = chunkData.count;\n                params[spec.totalFileSizeName] = size;\n            }\n            if (multipart && !spec.omitDefaultParams) {\n                params[spec.filenameParam] = name;\n            }\n        }, allChunksDoneRequester = new qq.traditional.AllChunksDoneAjaxRequester({\n            cors: spec.cors,\n            endpoint: spec.chunking.success.endpoint,\n            headers: spec.chunking.success.headers,\n            jsonPayload: spec.chunking.success.jsonPayload,\n            log: log,\n            method: spec.chunking.success.method,\n            params: spec.chunking.success.params\n        }), createReadyStateChangedHandler = function(id, xhr) {\n            var promise = new qq.Promise();\n            xhr.onreadystatechange = function() {\n                if (xhr.readyState === 4) {\n                    var result = onUploadOrChunkComplete(id, xhr);\n                    if (result.success) {\n                        promise.success(result.response, xhr);\n                    } else {\n                        promise.failure(result.response, xhr);\n                    }\n                }\n            };\n            return promise;\n        }, getChunksCompleteParams = function(id) {\n            var params = spec.paramsStore.get(id), name = getName(id), size = getSize(id);\n            params[spec.uuidName] = getUuid(id);\n            params[spec.filenameParam] = name;\n            params[spec.totalFileSizeName] = size;\n            params[spec.chunking.paramNames.totalParts] = handler._getTotalChunks(id);\n            return params;\n        }, isErrorUploadResponse = function(xhr, response) {\n            return qq.indexOf([ 200, 201, 202, 203, 204 ], xhr.status) < 0 || spec.requireSuccessJson && !response.success || response.reset;\n        }, onUploadOrChunkComplete = function(id, xhr) {\n            var response;\n            log(\"xhr - server response received for \" + id);\n            log(\"responseText = \" + xhr.responseText);\n            response = parseResponse(true, xhr);\n            return {\n                success: !isErrorUploadResponse(xhr, response),\n                response: response\n            };\n        }, parseResponse = function(upload, xhr) {\n            var response = {};\n            try {\n                log(qq.format(\"Received response status {} with body: {}\", xhr.status, xhr.responseText));\n                response = qq.parseJson(xhr.responseText);\n            } catch (error) {\n                upload && spec.requireSuccessJson && log(\"Error when attempting to parse xhr response text (\" + error.message + \")\", \"error\");\n            }\n            return response;\n        }, sendChunksCompleteRequest = function(id) {\n            var promise = new qq.Promise();\n            allChunksDoneRequester.complete(id, handler._createXhr(id), getChunksCompleteParams(id), spec.customHeaders.get(id)).then(function(xhr) {\n                promise.success(parseResponse(false, xhr), xhr);\n            }, function(xhr) {\n                promise.failure(parseResponse(false, xhr), xhr);\n            });\n            return promise;\n        }, setParamsAndGetEntityToSend = function(entityToSendParams) {\n            var fileOrBlob = entityToSendParams.fileOrBlob;\n            var id = entityToSendParams.id;\n            var xhr = entityToSendParams.xhr;\n            var xhrOverrides = entityToSendParams.xhrOverrides || {};\n            var customParams = entityToSendParams.customParams || {};\n            var defaultParams = entityToSendParams.params || {};\n            var xhrOverrideParams = xhrOverrides.params || {};\n            var params;\n            var formData = multipart ? new FormData() : null, method = xhrOverrides.method || spec.method, endpoint = xhrOverrides.endpoint || spec.endpointStore.get(id), name = getName(id), size = getSize(id);\n            if (spec.omitDefaultParams) {\n                params = qq.extend({}, customParams);\n                qq.extend(params, xhrOverrideParams);\n            } else {\n                params = qq.extend({}, customParams);\n                qq.extend(params, xhrOverrideParams);\n                qq.extend(params, defaultParams);\n                params[spec.uuidName] = getUuid(id);\n                params[spec.filenameParam] = name;\n                if (multipart) {\n                    params[spec.totalFileSizeName] = size;\n                } else if (!spec.paramsInBody) {\n                    params[spec.inputName] = name;\n                }\n            }\n            if (!spec.paramsInBody) {\n                endpoint = qq.obj2url(params, endpoint);\n            }\n            xhr.open(method, endpoint, true);\n            if (spec.cors.expected && spec.cors.sendCredentials) {\n                xhr.withCredentials = true;\n            }\n            if (multipart) {\n                if (spec.paramsInBody) {\n                    qq.obj2FormData(params, formData);\n                }\n                formData.append(spec.inputName, fileOrBlob);\n                return formData;\n            }\n            return fileOrBlob;\n        }, setUploadHeaders = function(headersOptions) {\n            var headerOverrides = headersOptions.headerOverrides;\n            var id = headersOptions.id;\n            var xhr = headersOptions.xhr;\n            if (headerOverrides) {\n                qq.each(headerOverrides, function(headerName, headerValue) {\n                    xhr.setRequestHeader(headerName, headerValue);\n                });\n            } else {\n                var extraHeaders = spec.customHeaders.get(id), fileOrBlob = handler.getFile(id);\n                xhr.setRequestHeader(\"Accept\", \"application/json\");\n                xhr.setRequestHeader(\"X-Requested-With\", \"XMLHttpRequest\");\n                xhr.setRequestHeader(\"Cache-Control\", \"no-cache\");\n                if (!multipart) {\n                    xhr.setRequestHeader(\"Content-Type\", \"application/octet-stream\");\n                    xhr.setRequestHeader(\"X-Mime-Type\", fileOrBlob.type);\n                }\n                qq.each(extraHeaders, function(name, val) {\n                    xhr.setRequestHeader(name, val);\n                });\n            }\n        };\n        qq.extend(this, {\n            uploadChunk: function(uploadChunkParams) {\n                var id = uploadChunkParams.id;\n                var chunkIdx = uploadChunkParams.chunkIdx;\n                var overrides = uploadChunkParams.overrides || {};\n                var resuming = uploadChunkParams.resuming;\n                var chunkData = handler._getChunkData(id, chunkIdx), xhr = handler._createXhr(id, chunkIdx), promise, toSend, customParams, params = {};\n                promise = createReadyStateChangedHandler(id, xhr);\n                handler._registerProgressHandler(id, chunkIdx, chunkData.size);\n                customParams = spec.paramsStore.get(id);\n                addChunkingSpecificParams(id, params, chunkData);\n                if (resuming) {\n                    params[spec.resume.paramNames.resuming] = true;\n                }\n                toSend = setParamsAndGetEntityToSend({\n                    fileOrBlob: chunkData.blob,\n                    id: id,\n                    customParams: customParams,\n                    params: params,\n                    xhr: xhr,\n                    xhrOverrides: overrides\n                });\n                setUploadHeaders({\n                    headerOverrides: overrides.headers,\n                    id: id,\n                    xhr: xhr\n                });\n                xhr.send(toSend);\n                return promise;\n            },\n            uploadFile: function(id) {\n                var fileOrBlob = handler.getFile(id), promise, xhr, customParams, toSend;\n                xhr = handler._createXhr(id);\n                handler._registerProgressHandler(id);\n                promise = createReadyStateChangedHandler(id, xhr);\n                customParams = spec.paramsStore.get(id);\n                toSend = setParamsAndGetEntityToSend({\n                    fileOrBlob: fileOrBlob,\n                    id: id,\n                    customParams: customParams,\n                    xhr: xhr\n                });\n                setUploadHeaders({\n                    id: id,\n                    xhr: xhr\n                });\n                xhr.send(toSend);\n                return promise;\n            }\n        });\n        qq.extend(this, new qq.XhrUploadHandler({\n            options: qq.extend({\n                namespace: \"traditional\"\n            }, spec),\n            proxy: qq.extend({\n                getEndpoint: spec.endpointStore.get\n            }, proxy)\n        }));\n        qq.override(this, function(super_) {\n            return {\n                finalizeChunks: function(id) {\n                    proxy.onFinalizing(id);\n                    if (spec.chunking.success.endpoint) {\n                        return sendChunksCompleteRequest(id);\n                    } else {\n                        return super_.finalizeChunks(id, qq.bind(parseResponse, this, true));\n                    }\n                }\n            };\n        });\n    };\n    qq.traditional.AllChunksDoneAjaxRequester = function(o) {\n        \"use strict\";\n        var requester, options = {\n            cors: {\n                allowXdr: false,\n                expected: false,\n                sendCredentials: false\n            },\n            endpoint: null,\n            log: function(str, level) {},\n            method: \"POST\"\n        }, promises = {}, endpointHandler = {\n            get: function(id) {\n                if (qq.isFunction(options.endpoint)) {\n                    return options.endpoint(id);\n                }\n                return options.endpoint;\n            }\n        };\n        qq.extend(options, o);\n        requester = qq.extend(this, new qq.AjaxRequester({\n            acceptHeader: \"application/json\",\n            contentType: options.jsonPayload ? \"application/json\" : \"application/x-www-form-urlencoded\",\n            validMethods: [ options.method ],\n            method: options.method,\n            endpointStore: endpointHandler,\n            allowXRequestedWithAndCacheControl: false,\n            cors: options.cors,\n            log: options.log,\n            onComplete: function(id, xhr, isError) {\n                var promise = promises[id];\n                delete promises[id];\n                if (isError) {\n                    promise.failure(xhr);\n                } else {\n                    promise.success(xhr);\n                }\n            }\n        }));\n        qq.extend(this, {\n            complete: function(id, xhr, params, headers) {\n                var promise = new qq.Promise();\n                options.log(\"Submitting All Chunks Done request for \" + id);\n                promises[id] = promise;\n                requester.initTransport(id).withParams(options.params(id) || params).withHeaders(options.headers(id) || headers).send(xhr);\n                return promise;\n            }\n        });\n    };\n})(window);\n//# sourceMappingURL=fine-uploader.core.js.map","\"use strict\";\n\nmodule.exports = require(\"../../fine-uploader/fine-uploader.core\");\n"],"names":["element","type","fn","descendant","elementB","styles","name","considerParent","re","className","first","candidates","result","idx","val","children","child","text","attrName","attrVal","canvas","mime","quality","dataUri","arrayBuffer","byteString","createBlob","data","BlobBuilder","blobBuilder","intArray","mimeString","character","message","level","variable","value","maybeItemList","maybeNodeList","maybeString","string","str","args","newStr","nextIdxToReplace","strBefore","strAfter","maybeFile","maybeFileList","maybeFileOrInput","maybeInput","notFile","evaluateType","normalizedType","maybeBlob","input","dataTransfer","fileOrBlob","start","end","slicer","buffer","bytesAsHex","bytes","byt","byteAsHexStr","blob","startOffset","length","initialBlob","fileReader","promise","second","extendNested","prop","target","sourceFn","super_","source","srcPropName","srcPropVal","arr","elt","from","len","c","r","v","div","html","iterableItem","callback","keyOrIndex","retVal","oldFunc","context","newArgs","obj","temp","prefixDone","uristrings","prefix","add","nextObj","i","nextTemp","formData","arrayKeyName","key","form","filename","extIdx","blobOrFileInput","disposers","disposer","disposeFunction","supportsUploading","supportsUploadingBlobs","supportsFileDrop","supportsAjaxFileUploading","supportsFolderDrop","supportsChunking","supportsResume","supportsUploadViaPaste","supportsUploadCors","supportsDeleteFileXdr","supportsDeleteFileCorsXhr","supportsDeleteFileCors","supportsFolderSelection","supportsImagePreviews","supportsUploadProgress","testSupportsFileInputElement","supported","tempInput","isChrome14OrHigher","isCrossOriginXhrSupported","xhr","isXdrSupported","isCrossOriginAjaxSupported","isFolderSelectionSupported","isLocalStorageSupported","isDragAndDropSupported","span","maybePromise","successArgs","failureArgs","successCallbacks","failureCallbacks","doneCallbacks","state","onSuccess","onFailure","o","options","HIDE_ZONES_EVENT_NAME","HIDE_BEFORE_ENTER_ATTR","uploadDropZones","droppedFiles","disposeSupport","uploadDroppedFiles","files","uploadDropZone","filesAsArray","traverseFileTree","entry","parseEntryPromise","file","extractDirectoryPath","fileError","getFilesInDirectory","entries","entriesLeft","fullPath","indexOfNameInFullPath","reader","accumEntries","existingPromise","dirReader","newEntries","handleDataTransfer","pendingFolderPromises","handleDataTransferPromise","item","setupDropzone","dropArea","dropZone","e","isFileDrag","dragEvent","fileDrag","leavingDocumentOut","setupDragDrop","dropZones","maybeHideDropZones","dzs","targetEl","code","errorSpecifics","preventDrop","dropOutsideDisabled","dragoverShouldBeCanceled","disableDropOutside","isValidFileDrag","effectTest","dt","isSafari","isOrSetDropDisabled","isDisabled","triggerHidezonesEvent","hideZonesEvent","triggerUsingOldApi","attachEvents","effect","relatedTarget","require$$0","referenceBlob","onCreate","self","buttonId","createInput","isMultiple","optInput","acceptFiles","uploaderProxy","byUuid","byStatus","byProxyGroupId","byBatchId","getDataByIds","idOrIds","id","getDataByUuids","uuids","uuid","getDataByStatus","status","statusResults","statuses","index","statusEnum","statusResultIndexes","dataIndex","spec","optionalFilter","record","newStatus","oldStatus","byStatusOldStatusIndex","newUuid","oldUuid","newName","newSize","targetId","parentId","proxyGroupId","batchId","blobDataOrArray","params","endpoint","cannedFileList","cannedFile","processBlob","verifiedFiles","processBlobData","blobData","processCanvas","processCanvasData","canvasData","normalizedQuality","processFileOrInput","fileOrInput","normalizeData","fileContainer","uploadData","storedIdsCopy","storedFileId","fileOrBlobId","fileId","imgOrCanvas","maxSize","fromServer","customResizeFunction","promiseToReturn","fileOrUrl","modifiedContainer","container","reason","uploadDataRecord","uploadDataEntry","allowedItems","button","specs","headers","elementOrId","newItemLimit","fileRecord","errorMessage","sessionData","associatedInput","xhrOrXdr","isError","initialValue","_readOnlyValues_","store","catchall","perIdReadOnlyValues","readOnlyValues","copy","orig","getReadOnlyValues","includeReadOnlyValues","existing","values","allowedExtensions","allowMultiple","additionalOptions","namespace","lastOnProgress","loaded","total","cancelFinalizationEffort","onUploadResult","chunkData","onUploadChunkResult","customResumeData","responseJSON","extraButtonOptionEntry","multiple","validation","extraButtonSpec","extraButtonsSpec","buttonOrFileInputOrFile","inputs","fileInput","fileBlobOrInput","fileWrapper","fileWrappers","fileDescriptors","acceptIosCamera","optionRoot","details","callbackRetVal","successParam","newFileWrapperList","size","actualFile","handler","fileList","extSuppliedName","extension","allowed","fileName","valid","allowedExt","extRegex","maybeNameOrNames","names","validationBase","extensionsForMessage","placeholderMatch","replacement","allowedExtension","placeholder","notFinished","response","errorReason","validItem","items","validationDescriptor","successful","failed","retryWaitPeriod","itemLimit","storedItemIndex","fileIndex","onSuccessCallback","additionalMandatedParams","adjustedOnSuccessCallback","validationDescriptors","proposedNetFilesUploadedOrQueued","nextIndex","formElementOrId","idToUpload","stillSubmitting","validityChecker","errorCode","safeCallback","errorMsg","exception","callbackName","callbackFunc","maybeXhr","maybeXhrOrXdr","attemptNumber","fileOrBlobData","success","fileOrBlobName","log","shouldParamsBeInQueryString","queue","requestData","isSimpleMethod","containsNonSimpleHeaders","containsNonSimple","header","isXdr","getCorsAjaxTransport","getXhrOrXdr","suppliedXhr","dequeue","max","nextId","sendRequest","onComplete","xdrError","method","isResponseSuccessful","getParams","onDemandParams","mandatedParams","optXhr","payload","url","createUrl","getXdrLoadHandler","getXdrErrorHandler","getXhrReadyStateChangeHandler","registerForUploadProgress","setHeaders","additionalQueryParams","addToPath","onProgress","customHeaders","onDemandHeaders","allHeaders","responseCode","prepareToSend","additionalParams","additionalHeaders","path","cacheBuster","appendToPath","_additionalQueryParams_","thePayload","proxy","fileState","onCancel","getName","fileItem","onCancelRetVal","thirdPartyFileId","controller","chunkingPossible","concurrentChunkingPossible","preventRetryResponse","chunked","chunkIdx","normaizedResponse","upload","normalizedResponse","responseToReport","inProgressIdx","inProgressChunksArray","ckid","ckXhr","connectionManager","nextIdx","resuming","inProgressChunks","onUploadChunkPromise","requestOverrides","uploadChunkData","inProgressChunkIdx","error","openChunkEntriesCount","openChunksCount","openChunkIndexes","dontAllowNext","allowNext","waitingIndex","connectionsIndex","waitingOrConnected","chunks","openChunksEntry","simple","handlerType","handlerModuleSubtype","generatedBlob","errorResponse","idsInGroup","uploadedThisId","idInGroup","originalResponse","blobToUpload","cancelRetVal","callbackWrapperDetachers","onMessageCallbackWrapper","event","detacher","formHandlerInstanceId","onloadCallbacks","detachLoadEvents","postMessageCallbackTimers","isCors","inputName","getUuid","corsMessageReceiver","expungeFile","iframe","getFileIdForIframeName","iframeName","initIframeForUpload","registerPostMessageCallback","onloadCallback","responseDescriptor","paramsInBody","targetName","innerHtmlOrMessage","chunking","getChunkSize","chunkSize","getSize","resume","chunkFiles","resumeEnabled","getEndpoint","getDataByUuid","onUuidChanged","getCustomResumeData","abort","xhrId","ajaxRequester","blobOrProxy","tempState","responseParser","lastChunkIdx","resumableFilesData","optInProgress","optRemaining","chunkingState","inProgress","remaining","totalChunks","newBlob","chunkId","optChunkIdx","chunkIndex","fileSize","startBytes","endBytes","cachedChunks","formatVersion","customKeys","localStorageId","persistedData","progressCalculator","chunkProgress","totalSuccessfullyLoadedForFile","loadedForRequest","totalForRequest","totalFileSize","estActualChunkLoaded","totalLoadedForFile","chunkLoaded","optAjaxRequester","xhrsId","expirationDays","expirationDate","requester","getMandatedParams","detectSubsampling","img","iw","ih","ctx","detectVerticalSquash","sy","ey","py","alpha","ratio","renderImageToDataURL","doSquash","renderImageToCanvas","maybeCalculateDownsampledDimensions","maxPixels","width","height","modifiedDimensions","renderImageToCanvasWithCustomResizer","transformCoordinate","d","tmpCanvas","vertSquashRatio","dw","dh","dy","tmpCtx","sx","dx","resizeInfo","image","imageHeight","imageWidth","orientation","resize","sourceCanvas","sourceCanvasContext","targetCanvas","targetHeight","targetWidth","MegaPixImage","srcImage","errorCallback","URL","listeners","imgWidth","imgHeight","maxWidth","maxHeight","tagName","opt","optionsKey","optionsValue","oldTargetSrc","isImg","el","isCanvas","isImgCorsSupported","isCanvasSupported","determineMimeOfFileName","nameWithPath","pathSegments","isCrossOrigin","targetAnchor","targetProtocol","targetHostname","targetPort","registerImgLoadListeners","registerCanvasDrawImageListener","registerThumbnailRenderedListener","registered","draw","drawPreview","identifier","orient","megapixErrorHandler","dummyExif","exif","mpImg","failureMsg","drawOnCanvasOrImgFromUrl","canvasOrImg","tempImg","tempImgRender","drawOnImgFromUrlWithCssScaling","drawFromUrl","scale","fileBlobOrUrl","TAG_IDS","TAG_INFO","parseLittleEndian","hex","pow","seekToApp1","offset","theOffset","thePromise","match","segmentLength","getApp1Offset","isLittleEndian","app1Start","getDirEntryCount","littleEndian","getIfd","dirEntries","getDirEntries","ifdHex","getTagValues","TAG_VAL_OFFSET","tagsToFind","vals","idHex","tagsToFindIdx","tagValHex","tagValLength","parser","onParseFailure","app1Offset","dirEntryCount","tagValues","isIdentifiable","magicBytes","questionableBytes","identifiable","magicBytesEntries","magicBytesArrayEntry","previewable","fileMime","isRecognizedImage","hasNonZeroLimits","limits","atLeastOne","limit","getWidthHeight","sizeDetermination","getFailingLimit","dimensions","failingLimit","limitName","limitValue","limitMatcher","dimensionPropName","actualValue","validationEffort","isJsonResponseValid","handleFileItems","fileItems","someItemsIgnored","err","refreshEffort","refreshCompleteCallback","requesterOptions","includeOriginal","defaultType","defaultQuality","failedToScaleText","includeExif","sizes","originalFileUuid","originalFileName","originalBlobOrBlobData","records","originalBlob","sizeRecord","outputType","uuidParamName","api","scaledIds","originalId","addFileToHandler","paramsStore","blobSize","scaledId","param","scalingEffort","scalingOptions","scaler","requestedType","referenceType","originalName","scaledVersionProperties","startOfExt","versionType","scaledName","scaledExt","nameAppendage","a","b","sourceFile","failedText","imageGenerator","scaledImageDataUri","signalSuccess","scaledImageDataUriWithExif","originalImage","insertionEffort","originalImageDataUri","ExifRestorer","output","chr1","chr2","chr3","enc1","enc2","enc3","enc4","origFileBase64","resizedFileBase64","expectedBase64Header","rawImage","segments","exifArray","newImageArray","aBuffer","seg","x","imageData","buf","separatePoint","mae","ato","array","rawImageArray","head","endPoint","base64test","perFileProgress","totalLoaded","totalSize","lastLoadedSent","lastTotalSent","callbackProxy","noRetryableFiles","retryable","none","failedId","updateTotalProgress","onAllComplete","onNew","newLoaded","newTotal","oldLoaded","oldTotal","detachPasteHandler","isImage","registerPasteHandler","clipboardData","unregisterPasteHandler","startUpload","interceptSubmit","formEl","autoUpload","determineNewEndpoint","validateForm","nativeSubmit","maybeUploadOnSubmit","determineFormEl","notIrrelevantType","irrelevantTypes","radioOrCheckbox","ignoreValue","selectValue","select","Math","undefined","C","C_lib","Base","F","overrides","subtype","instance","properties","propertyName","WordArray","words","sigBytes","encoder","Hex","wordArray","thisWords","thatWords","thisSigBytes","thatSigBytes","thatByte","clone","nBytes","C_enc","hexChars","bite","hexStr","hexStrLength","Latin1","latin1Chars","latin1Str","latin1StrLength","Utf8","utf8Str","BufferedBlockAlgorithm","doFlush","dataWords","dataSigBytes","blockSize","blockSizeBytes","nBlocksReady","nWordsReady","nBytesReady","processedWords","cfg","messageUpdate","hash","hasher","C_algo","map","base64Chars","byte1","byte2","byte3","triplet","j","paddingChar","base64Str","base64StrLength","paddingIndex","bits1","bits2","hasherBlockSize","hasherBlockSizeBytes","oKey","iKey","oKeyWords","iKeyWords","innerHash","hmac","Hasher","W","SHA1","M","H","n","t","nBitsTotal","nBitsLeft","K","isPrime","sqrtN","factor","getFractionalBits","nPrime","SHA256","f","g","h","gamma0x","gamma0","gamma1x","gamma1","ch","maj","sigma0","sigma1","t1","t2","superInit","subInit","typedArray","typedArrayByteLength","patterns","bucket","pattern","policy","conditions","date","drift","accessKey","acl","expectedStatus","sessionToken","successRedirectUrl","minFileSize","maxFileSize","reducedRedundancy","region","serverSideEncryption","signatureVersion","awsParamName","newSessionToken","sessionTokenFound","oldCondIdx","oldCondObj","oldCondName","oldCondVal","signPolicyCallback","awsParams","customParams","now","policyJson","policyAndSignature","updatedAccessKey","updatedSessionToken","minSize","adjustedMinSize","adjustedMaxSize","adjustedDate","_minutesToAdd_","minutesToAdd","pad","number","doc","queryString","targetAnchorContainer","percentEncoded","parts","onCompleteArgs","successEndpoint","successCustomHeaders","successMethod","cors","uploadSuccessParams","fileParams","onSuccessFromServer","successRequestResult","onFailureFromServer","submitSuccessRequest","successAjaxRequester","successRequestCallback","credentials","ignoreEmpty","oldParams","modifiedParams","paramName","updateCredentials","property","maybe","keynameLogic","onGetKeynameFailure","onGetKeynameSuccess","keyname","keynameToUse","keynameFunc","successCallback","failureCallback","thisSignatureRequester","pendingSignatures","credentialsProvider","generateHeaders","signatureConstructor","signature","v2","signatureSpec","headersStr","signatureEffort","headersWordArray","headersHmacSha1","headersHmacSha1Base64","policyStr","policyWordArray","base64Policy","policyHmacSha1","policyHmacSha1Base64","v4","endOfUri","queryParamIdx","canonicalQueryString","encodedQueryParams","encodedQueryParamNames","queryStrings","nameAndVal","paramVal","encodedQueryParamName","body","canonicalRequest","hashedRequest","scope","stringToSignTemplate","headerNames","signedHeaders","headerName","secretKey","headersPattern","matches","dateKey","dateRegionKey","dateRegionServiceKey","signingKey","credentialPattern","credentialCondition","credential","condition","handleSignatureReceived","responseJson","pendingSignatureData","getStringToSignArtifacts","version","requestInfo","endOfUrl","toSign","generateStringToSign","contentMd5","headerIndexesToRemove","headerIdx","hashedContent","determineSignatureClientSide","toBeSigned","updatedHeaders","signatureArtifacts","signApiRequest","signPolicy","queryParams","host","uploadId","content","contentType","partNum","artifacts","theHeaders","theUploadId","theContent","theContentType","thePartNum","_artifacts_","pendingRequests","handleSuccessResponse","successIndicator","failureIndicator","parsedResponse","pendingInitiateRequests","getSignatureAjaxRequester","getHeaders","handleInitiateRequestComplete","domParser","responseDoc","uploadIdElements","messageElements","pendingCompleteRequests","handleCompleteRequestComplete","bucketEls","keyEls","getCompleteRequestBody","etagEntries","etagEntry","part","etag","partEl","partNumEl","partNumTextEl","etagTextEl","etagEl","handleAbortRequestComplete","errorEls","awsErrorMsg","clockDrift","onGetBucket","onGetHost","onGetKeyName","filenameParam","endpointStore","aclStore","etagMap","requesters","domain","hasContentType","uploadIdPromise","toSend","cachedBucket","cachedHost","keyName","encodedKey","parsedErrorProps","awsResponseXml","parsedDoc","errorDetails","codeEls","messageEls","existedInLocalStorage","baseStorageId","bucketName","isValidResponse","innerHtml","responseData","generateAwsParams","createForm","handleFinishedUpload","handleUpload","responseText","errorTag","codeTag","messageTag","blobNameOptionValue","fileExtension","blobNameToUse","relatedToCancel","deleteBlobSasUri","blobUriStore","deleteFileEndpointStore","getSasSuccess","sasUri","deleteBlob","getSasFailure","getSas","minFileSizeForChunking","onGetBlobName","getBlobMetadata","combineChunks","getSignedUrl","mimeType","blockIdEntries","handleFailure","determineBlobUrl","containerUrl","getBlobNameSuccess","blobName","getBlobNameFailure","getSasId","getSasXhr","determineBlobUrlSuccess","blobUrl","determineBlobUrlFailure","azureError","blockIdEntry","chunkingData","maybePossible","requestPromises","sasResponseReceived","blobUri","requestPromise","restVerb","codes","endpoints","promises","endpointHandler","createBlockId","digits","zeros","paddedPartNum","blockId","createRequestBody","latestEl","latestTextEl","fileMimeType","registerXhrCallback","blockIdsXml","getIframeContentJson","responseFromMessage","multipart","addChunkingSpecificParams","allChunksDoneRequester","createReadyStateChangedHandler","onUploadOrChunkComplete","getChunksCompleteParams","isErrorUploadResponse","parseResponse","sendChunksCompleteRequest","setParamsAndGetEntityToSend","entityToSendParams","xhrOverrides","defaultParams","xhrOverrideParams","setUploadHeaders","headersOptions","headerOverrides","headerValue","extraHeaders","uploadChunkParams"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7]}