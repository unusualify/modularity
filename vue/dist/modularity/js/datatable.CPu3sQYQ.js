import{_ as W,G as V,$ as f,a0 as p,a1 as d,l as i,a2 as Z,a3 as M,Q as m,U as g,a4 as U,z as h,a5 as $,a6 as x,a7 as ee,a8 as O,F as R,a9 as te,J as ae,aa as se,S as ne,ab as B,V as k,ac as oe}from"./vendor.Tzo5HDY2.js";import{u as le,m as re,A as b,c as T,d as ie,D as u,e as L,g as de}from"./form.DOiSXF9k.js";import{R as ue,V as I,a as Te,b as Ae,c as j,d as w,e as fe,f as N,g as C,h as F,i as G,j as Y,k as Ee,l as K,m as H,n as z,o as J,p as ce,q as me,r as ge}from"./vuetify.Cxr6PtEP.js";const De={setup(e,t){return{...le(e,t)}},props:{...re()},data:function(){return{langs:["tr","en"],cellInput:""}},computed:{...W({})},created(){},watch:{},methods:{changeSort(e){this.pagination.sortBy===e?this.pagination.descending=!this.pagination.descending:(this.pagination.sortBy=e,this.pagination.descending=!1)},columnValueList(e){return this.elements.map(t=>t[e])},columnChanged(e){this.cellInput=e},hideColumn(e){this.headers=this.headers.filter(t=>t.key!==e)},updateCell(e){if(this.$store.commit(b.CLEAR_ALERT),this.editedItem[e]!==this.cellInput){const t={id:this.editedItem.id,[e]:this.cellInput};this.$store.dispatch(T.SAVE_FORM,{item:t})}}}},Le=["value"],be={key:1},ve={class:"w-100 d-flex justify-center my-5"};function _e(e,t,s,a,l,A){const o=k("ue-title"),D=k("v-btn-success"),v=k("ue-form"),c=k("ue-modal"),P=k("ue-recursive-stuff");return V((f(),p(ge,{fluid:""},{default:d(()=>[i(me,h(e.$bindAttributes(),{class:"elevation-1",headers:e.headers,items:e.elements,loading:e.loading,options:e.options,"onUpdate:options":t[8]||(t[8]=n=>e.options=n),"items-per-page":e.options.itemsPerPage,"multi-sort":e.options.multiSort,"onUpdate:multiSort":t[9]||(t[9]=n=>e.options.multiSort=n),"must-sort":e.options.mustSort,"onUpdate:mustSort":t[10]||(t[10]=n=>e.options.mustSort=n),"items-length":e.totalElements,"item-title":e.titleKey,search:e.search,"footer-propss":{showFirstLastPage:!0,firstIcon:"mdi-arrow-collapse-left",lastIcon:"mdi-arrow-collapse-right",nextIcon:"mdi-chevron-right",prevIcon:"mdi-chevron-left"},"disable-pagination":!1,"disable-sort":!1,"loading-text":e.$t("fields.loading-text"),modelValue:e.selectedItems,"onUpdate:modelValue":t[11]||(t[11]=n=>e.selectedItems=n),"show-selected":"",sticky:"","fixed-header":"","fixed-footer":"",height:e.windowSize.y-64-24-59-36,density:"comfortable"}),Z({top:d(()=>[i(Ae,{flat:""},{default:d(()=>[i(j,null,{default:d(()=>[$(e.$slots,"header",x(ee({tableTitle:e.tableTitle})),()=>[i(o,{text:e.tableTitle,classes:["ue-table-header","pt-12","pb-12"]},null,8,["text"])])]),_:3}),i(w,{class:"mx-4",inset:"",vertical:""}),i(fe,{modelValue:e.search,"onUpdate:modelValue":t[0]||(t[0]=n=>e.search=n),"append-inner-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":"",density:"compact",variant:"solo"},null,8,["modelValue"]),i(w,{class:"mx-4",inset:"",vertical:""}),V(i(j,null,{default:d(()=>[m(g(e.$t("fields.language-select"))+" ",1),V(M("select",{"onUpdate:modelValue":t[1]||(t[1]=n=>e.$i18n.locale=n)},[(f(!0),O(R,null,U(e.langs,(n,r)=>(f(),O("option",{key:`Lang${r}`,value:n},g(n),9,Le))),128))],512),[[te,e.$i18n.locale]])]),_:1},512),[[ae,!1]]),i(N,{"offset-y":"",rounded:"xs","open-on-hover":""},{activator:d(({props:n,isActive:r})=>[i(I,h(n,{variant:"elevated"}),{default:d(()=>[m(g(`${e.filterActive.name} (${e.filterActive.number})`)+" ",1),i(C),i(F,{right:"",style:se({transform:r?"rotate(-180deg)":"rotate(0)"})},{default:d(()=>[m("mdi-chevron-down")]),_:2},1032,["style"])]),_:2},1040)]),default:d(()=>[i(G,null,{default:d(()=>[(f(!0),O(R,null,U(e.mainFilters,(n,r)=>(f(),p(Y,{key:r,onClick:ne(E=>e.filterStatus(n.slug),["prevent"])},{default:d(()=>[i(Ee,null,{default:d(()=>[m(g(n.name+"("+n.number+")"),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1}),i(w,{class:"mx-4",inset:"",vertical:""}),i(C),(e.createOnModal||e.editOnModal)&&!e.noForm?$(e.$slots,"formDialog",{key:0},()=>[i(c,{ref:"formModal",modelValue:e.formActive,"onUpdate:modelValue":t[4]||(t[4]=n=>e.formActive=n),scrollable:"",transition:"dialog-bottom-transition","width-type":"lg"},{activator:d(({props:n})=>[e.can("create")&&e.createOnModal?(f(),p(D,h({key:0},n,{dark:""}),{default:d(()=>[m(g(e.$t("add-item",{item:e.transNameSingular})),1)]),_:2},1040)):B("",!0)]),body:d(n=>[i(K,null,{default:d(()=>[i(H,{class:"text-h5 grey lighten-2"}),i(z,null,{default:d(()=>[i(v,{ref:"form",title:e.formTitle},null,8,["title"])]),_:1}),i(w),i(J,null,{default:d(()=>[i(C),i(I,{color:"error darken-1",text:"",onClick:t[2]||(t[2]=r=>e.closeForm())},{default:d(()=>[m(g(n.textCancel),1)]),_:2},1024),i(I,{color:"teal darken-1",text:"",onClick:t[3]||(t[3]=r=>e.confirmFormModal()),disabled:!e.formIsValid,loading:e.formLoading},{default:d(()=>[m(g(e.$t("fields.save")),1)]),_:1},8,["disabled","loading"])]),_:2},1024)]),_:2},1024)]),_:1},8,["modelValue"])]):B("",!0),e.createOnModal?B("",!0):(f(),p(D,{key:1,href:e.createUrl,target:"_blank",dark:""},{default:d(()=>[m(g(e.$t("add-item",{item:e.transNameSingular})),1)]),_:1},8,["href"])),i(c,{ref:"deleteModal",modelValue:e.deleteModalActive,"onUpdate:modelValue":t[7]||(t[7]=n=>e.deleteModalActive=n),transition:"dialog-bottom-transition","width-type":"sm"},{body:d(n=>[i(K,null,{default:d(()=>[i(H,{class:"text-h5 text-center",style:{"word-break":"break-word"}}),i(z,{class:"text-center",style:{"word-break":"break-word"}},{default:d(()=>[m(g(e.deleteQuestion),1)]),_:1}),i(w),i(J,null,{default:d(()=>[i(C),i(I,{color:"blue",text:"",onClick:t[5]||(t[5]=r=>e.closeDeleteModal())},{default:d(()=>[m(g(n.textCancel),1)]),_:2},1024),i(I,{color:"blue",text:"",onClick:t[6]||(t[6]=r=>e.deleteRow())},{default:d(()=>[m(g(n.textConfirm),1)]),_:2},1024),i(C)]),_:2},1024)]),_:2},1024)]),_:1},8,["modelValue"])]),_:3})]),"header.actions":d(n=>[i(N,{"close-on-content-click":!1,"open-on-hover":"",left:""},{activator:d(({props:r})=>[i(F,h({size:"large",icon:"mdi-cog-outline"},r),null,16)]),_:1})]),"item.actions":d(({item:n})=>[e.rowActionsType=="dropdown"||e.isSmAndDown?(f(),p(N,{key:0,"close-on-content-click":!1,"open-on-hover":"",left:"","offset-x":""},{activator:d(({props:r})=>[i(F,h({size:"large",color:"primary",icon:"$list"},r),null,16)]),default:d(()=>[i(G,null,{default:d(()=>[(f(!0),O(R,null,U(e.rowActions,(r,E)=>(f(),O(R,{key:E},[e.itemHasAction(n,r)?(f(),p(Y,{key:0,onClick:S=>e.itemAction(n,r.name)},{default:d(()=>[i(F,{small:"",color:r.color,left:""},{default:d(()=>[m(g(r.icon?r.icon:"$"+r.name),1)]),_:2},1032,["color"]),m(" "+g(e.$t(r.name)),1)]),_:2},1032,["onClick"])):B("",!0)],64))),128))]),_:2},1024)]),_:2},1024)):(f(),O("div",be,[(f(!0),O(R,null,U(e.rowActions,(r,E)=>(f(),O(R,{key:E},[e.itemHasAction(n,r)?(f(),p(ce,{key:0,text:e.$t(r.label??r.name),location:"top"},{activator:d(({props:S})=>[i(F,h({small:"",class:"mr-2",onClick:y=>e.itemAction(n,r),color:r.color,ref_for:!0},S),{default:d(()=>[m(g(r.icon?r.icon:"$"+r.name),1)]),_:2},1040,["onClick","color"])]),_:2},1032,["text"])):B("",!0)],64))),128))]))]),_:2},[e.search!=""?{name:"no-data",fn:d(()=>[M("div",ve,[i(I,{color:"primary",onClick:e.initialize},{default:d(()=>[m(g(e.$t("fields.reset")),1)]),_:1},8,["onClick"])])]),key:"0"}:void 0,U(e.formatterColumns,(n,r)=>({name:`item.${n.key}`,fn:d(({item:E})=>[n.formatter=="edit"||n.formatter=="activate"?(f(),p(I,{key:r,class:"pa-0 justify-start",variant:"plain",color:"primary darken-1",onClick:S=>e.$call(n.formatter+"Item",E)},{default:d(()=>[m(g(E[n.key]),1)]),_:2},1032,["onClick"])):n.formatter=="switch"?(f(),p(Te,{key:r,"model-value":E[n.key],color:"success","true-value":1,"false-value":"0","hide-details":"","onUpdate:modelValue":S=>e.itemAction(E,"switch",S,n.key)},{label:d(()=>[]),_:2},1032,["model-value","onUpdate:modelValue"])):(f(),p(P,h({key:2},e.handleFormatter(n.formatter,E[n.key]),{key:E[n.key]}),null,16))])}))]),1040,["headers","items","loading","options","items-per-page","multi-sort","must-sort","items-length","item-title","search","loading-text","modelValue","height"])]),_:3})),[[ue,e.onResize]])}const we=ie(De,[["render",_e]]);function pe(){const e="test";try{return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch{return!1}}function q(e,t){const s="";pe()?localStorage.setItem(e,t):document.cookie=e+"="+t+s+"; path=/"}const Q=(e,t,s)=>{e.forEach(a=>{a.id===t&&s(a),a.children&&Q(a.children,t,s)})},X=(e,t=["id","children"],s="children")=>{const a=JSON.parse(JSON.stringify(e));return a.forEach(l=>{for(const A in l)t.includes(A)||delete l[A],A===s&&(l[A]=X(l[A]))}),a},Oe={baseUrl:window.MODULARITY.STORE.datatable.baseUrl||"",headers:window.MODULARITY.STORE.datatable.headers,search:window.MODULARITY.STORE.datatable.searchText,options:window.MODULARITY.STORE.datatable.options,data:window.MODULARITY.STORE.datatable.data||[],total:parseInt(window.MODULARITY.STORE.datatable.total),filter:window.MODULARITY.STORE.datatable.filter||{},mainFilters:window.MODULARITY.STORE.datatable.mainFilters||[],advancedFilters:window.MODULARITY.STORE.datatable.advancedFilters||[],bulk:[],loading:!1,updateTracker:0,customModal:_.isEmpty(window.MODULARITY.STORE.datatable.customModal)?!1:window.MODULARITY.STORE.datatable.customModal},Se={activeHeaders:e=>{},totalElements:e=>e.total,totalPage:e=>Math.ceil(e.total/e.options.itemsPerPage),editableColumns:e=>e.headers.filter(t=>t.hasOwnProperty("isColumnEditable")&&t.isColumnEditable),rowEditables:e=>e.headers.filter(t=>t.hasOwnProperty("isRowEditable")&&t.isRowEditable),mainFilters:e=>e.mainFilters,advancedFilters:e=>(Object.entries(e.advancedFilters).forEach(([t,s])=>{s.map(a=>{var l;a.selecteds??(a.selecteds=(l=e.filter[t])==null?void 0:l[a.slug])})}),e.advancedFilters)},he={[u.UPDATE_DATATABLE_OPTIONS](e,t){e.options=t},[u.UPDATE_DATATABLE_SEARCH](e,t){e.search=t},[u.UPDATE_DATATABLE_TOTAL](e,t){e.total=t},[u.UPDATE_DATATABLE_DATA](e,t){e.bulk=[],e.data=t},[u.SET_DATATABLE_DIALOG](e,t){e.dialog=t},[u.UPDATE_DATATABLE_FILTER](e,t){e.filter=Object.assign({},e.filter,t)},[u.CLEAR_DATATABLE_FILTER](e){e.filter=Object.assign({},{search:"",status:e.filter.status})},[u.UPDATE_DATATABLE_FILTER_STATUS](e,t){e.filter.status=t},[u.UPDATE_DATATABLE_ADVANCED_FILTER](e,t){Object.keys(e.advancedFilters).forEach(function(s,a){e.filter[s]=e.advancedFilters[s].reduce((l,A)=>{var o;return((o=A.selecteds)==null?void 0:o.length)>0&&(l[A.slug]=A.selecteds),l},{})})},[u.RESET_DATATABLE_ADVANCED_FILTER](e){e.advancedFilters=Object.fromEntries(Object.entries(e.advancedFilters).map(([t,s])=>(e.filter[t]=[],s.map(a=>a.selecteds=[]),[t,s])))},[u.UPDATE_DATATABLE_BULK](e,t){e.bulk.indexOf(t)>-1?e.bulk=e.bulk.filter(function(s){return s!==t}):e.bulk.push(t)},[u.REPLACE_DATATABLE_BULK](e,t){e.bulk=t},[u.ADD_DATATABLE_COLUMN](e,t){e.columns.splice(t.index,0,t.data)},[u.REMOVE_DATATABLE_COLUMN](e,t){e.columns.forEach(function(s,a){s.name===t&&e.columns.splice(a,1)})},[u.UPDATE_DATATABLE_OFFSET](e,t){e.offset=t,q(e.localStorageKey+"_page-offset",e.offset)},[u.UPDATE_DATATABLE_PAGE](e,t){},[u.UPDATE_DATATABLE_MAXPAGE](e,t){e.page>t&&(e.page=t),e.maxPage=t},[u.UPDATE_DATATABLE_VISIBLITY](e,t){q(e.localStorageKey+"_columns-visible",JSON.stringify(t)),e.columns.forEach(function(s){for(let a=0;a<t.length;a++){if(t[a]===s.name){s.visible=!0;break}s.visible=!1}})},[u.UPDATE_DATATABLE_SORT](e,t){const s="asc";e.sortKey===t.name?e.sortDir=e.sortDir===s?"desc":s:e.sortDir=s,e.sortKey=t.name},[u.UPDATE_DATATABLE_NAV](e,t){t.forEach(function(s){e.mainFilters.forEach(function(a){a.name===s.name&&(a.number=s.number)})})},[u.PUBLISH_DATATABLE](e,t){const s=t.id,a=t.value;function l(o){o>=0&&(a==="toggle"?e.data[o].published=!e.data[o].published:e.data[o].published=a)}function A(o){return e.data.findIndex(function(D,v){return D.id===o})}if(Array.isArray(s))s.forEach(function(o){const D=A(o);l(D)}),e.bulk=[];else{const o=A(s);l(o)}},[u.FEATURE_DATATABLE](e,t){const s=t.id,a=t.value;function l(o){o>=0&&(a==="toggle"?e.data[o].featured=!e.data[o].featured:e.data[o].featured=a)}function A(o){return e.data.findIndex(function(D,v){return D.id===o})}if(Array.isArray(s))s.forEach(function(o){const D=A(o);l(D)}),e.bulk=[];else{const o=A(s);l(o)}},[u.UPDATE_DATATABLE_LOADING](e,t){e.loading=!e.loading},[u.UPDATE_DATATABLE_NESTED](e,t){Q(e.data,t.parentId,s=>{s.children=t.val})},[u.UPDATE_DATATABLE_TRACKER](e,t){e.updateTracker=t?e.updateTracker+1:0}},Ie=(e,t)=>{let s=!0,a;return t.match(/sortBy|sortDesc/)?e.length>0?a=e:s=!1:t.match(/page|itemsPerPage|replaceUrl/)?a=e:s=!1,{active:s,value:a}},Re={[T.GET_DATATABLE]({commit:e,state:t,getters:s},{payload:a={},callback:l=null,errorCallback:A=null,endpoint:o=null}={}){const D=Object.keys(a);let v=D.length===0;if(D.every(c=>(__isset(t[c])&&(__isObject(t[c])&&__isObject(a[c])?v=!Object.equals(a[c],t[c]):Array.isArray(a[c])&&Array.isArray(t[c])?v=!Array.equals(a[c],t[c]):v=t[c]!==a[c]),!v)),D.includes("options")&&(v=!0),v){e(u.UPDATE_DATATABLE_LOADING,!0),console.log(t);const c={...Object.keys(t.options).reduce(function(n,r){var y;const{active:E,value:S}=Ie(__isset((y=a.options)==null?void 0:y[r])?a==null?void 0:a.options[r]:t==null?void 0:t.options[r],r);return E&&(n[r]=S),n},{}),...t.search!==""?{search:t.search}:{},filter:Object.fromEntries(Object.entries(t.filter).reduce((n,[r,E])=>(r==="status"&&E==="all"||oe.isEmpty(E)||n.push([r,E]),n),[]))},P=o??window.MODULARITY.ENDPOINTS.index;L.get(P,c,function(n){const r=a.infiniteScroll?t.data.concat(n.resource.data):n.resource.data;e(u.UPDATE_DATATABLE_DATA,r),e(u.UPDATE_DATATABLE_TOTAL,n.resource.total),e(u.UPDATE_DATATABLE_NAV,n.mainFilters),e(u.UPDATE_DATATABLE_LOADING,!1),__isset(a.options)&&e(u.UPDATE_DATATABLE_OPTIONS,a.options),__isset(a.search)&&e(u.UPDATE_DATATABLE_SEARCH,a.search)})}},[T.SET_DATATABLE_NESTED]({commit:e,state:t,dispatch:s}){const a=X(t.data);L.reorder(a,function(l){e(NOTIFICATION.SET_NOTIF,{message:l.data.message,variant:l.data.variant})})},[T.SET_DATATABLE]({commit:e,state:t,dispatch:s}){const a=t.data.map(l=>l.id);L.reorder(a,function(l){e(NOTIFICATION.SET_NOTIF,{message:l.data.message,variant:l.data.variant})})},[T.TOGGLE_PUBLISH]({commit:e,state:t,dispatch:s},a){L.togglePublished(a,function(l){e(NOTIFICATION.SET_NOTIF,{message:l.data.message,variant:l.data.variant}),s(T.GET_DATATABLE)},function(l){e(NOTIFICATION.SET_NOTIF,{message:l.data.error.message,variant:"error"})})},[T.DELETE_ITEM]({commit:e,state:t,dispatch:s},{id:a=null,callback:l=null,errorCallback:A=null}={}){L.delete(a,function(o){e(b.SET_ALERT,{message:o.data.message,variant:o.data.variant}),o.data.variant.toLowerCase()==="success"?(s(T.GET_DATATABLE),l(o.data)):A(o.data)},function(o){__log("400 response",o),Object.prototype.hasOwnProperty.call(o.data,"exception")?e(b.SET_ALERT,{message:"Your submission could not be processed.",variant:"error"}):(s(T.HANDLE_ERRORS,o.data),e(b.SET_ALERT,{message:"Your submission could not be validated, please fix and retry",variant:"error"}))})},[T.DUPLICATE_ITEM]({commit:e,state:t,dispatch:s},a){L.duplicate(a.id,function(l){e(b.SET_ALERT,{message:l.data.message,variant:l.data.variant}),s(T.GET_DATATABLE),de(l.data)})},[T.RESTORE_ITEM]({commit:e,state:t,dispatch:s},{id:a=null,callback:l=null,errorCallback:A=null}){L.restore(a,function(o){e(b.SET_ALERT,{message:o.data.message,variant:o.data.variant}),o.data.variant.toLowerCase()==="success"?(s(T.GET_DATATABLE),l(o.data)):A(o.data),s(T.GET_DATATABLE)},function(o){__log("400 response",o),Object.prototype.hasOwnProperty.call(o.data,"exception")?e(b.SET_ALERT,{message:"Your submission could not be processed.",variant:"error"}):(s(T.HANDLE_ERRORS,o.data),e(b.SET_ALERT,{message:"Your submission could not be validated, please fix and retry",variant:"error"}))})},[T.DESTROY_ITEM]({commit:e,state:t,dispatch:s},{id:a=null,callback:l=null,errorCallback:A=null}){L.forceDelete(a,function(o){__log(o),e(b.SET_ALERT,{message:o.data.message,variant:o.data.variant}),o.data.variant.toLowerCase()==="success"?(s(T.GET_DATATABLE),l(o.data)):A(o.data),s(T.GET_DATATABLE)},function(o){__log("400 response",o),Object.prototype.hasOwnProperty.call(o.data,"exception")?e(b.SET_ALERT,{message:"Your submission could not be processed.",variant:"error"}):(s(T.HANDLE_ERRORS,o.data),e(b.SET_ALERT,{message:"Your submission could not be validated, please fix and retry",variant:"error"}))})},[T.BULK_PUBLISH]({commit:e,state:t,dispatch:s},a){L.bulkPublish({ids:t.bulk.join(),toPublish:a.toPublish},function(l){e(NOTIFICATION.SET_NOTIF,{message:l.data.message,variant:l.data.variant}),s(T.GET_DATATABLE)})},[T.TOGGLE_FEATURE]({commit:e,state:t},s){L.toggleFeatured(s,a=>{e(u.FEATURE_DATATABLE,{id:s.id,value:"toggle"}),e(NOTIFICATION.SET_NOTIF,{message:a.data.message,variant:a.data.variant})})},[T.BULK_FEATURE]({commit:e,state:t},s){L.bulkFeature({ids:t.bulk.join(),toFeature:s.toFeature},function(a){e(u.FEATURE_DATATABLE,{id:t.bulk,value:!0}),e(NOTIFICATION.SET_NOTIF,{message:a.data.message,variant:a.data.variant})})},[T.BULK_DELETE]({commit:e,state:t,dispatch:s}){L.bulkDelete(t.bulk.join(),function(a){e(b.SET_ALERT,{message:a.data.message,variant:a.data.variant}),s(T.GET_DATATABLE)})},[T.BULK_RESTORE]({commit:e,state:t,dispatch:s}){L.bulkRestore(t.bulk.join(),function(a){e(b.SET_ALERT,{message:a.data.message,variant:a.data.variant}),s(T.GET_DATATABLE)})},[T.BULK_DESTROY]({commit:e,state:t,dispatch:s}){L.bulkDestroy(t.bulk.join(),function(a){e(b.SET_ALERT,{message:a.data.message,variant:a.data.variant}),s(T.GET_DATATABLE)})},[T.CHECK_MODAL_STATUS]({commit:e,state:t}){t.customModalInitialState&&e(u.UPDATE_MODAL_ACTIVE,!0)}},Ce={state:Oe,getters:Se,actions:Re,mutations:he};export{we as U,Ce as d};
//# sourceMappingURL=datatable.CPu3sQYQ.js.map
